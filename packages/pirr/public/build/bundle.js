var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function r(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const i=e.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function s(t){let e;return a(t,(t=>e=t))(),e}function l(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function h(){return t=" ",document.createTextNode(t);var t}function c(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let f;function v(t){f=t}function m(t){(function(){if(!f)throw new Error("Function called outside component initialization");return f})().$$.on_mount.push(t)}const g=[],b=[],_=[],x=[],w=Promise.resolve();let y=!1;function E(t){_.push(t)}let k=!1;const C=new Set;function V(){if(!k){k=!0;do{for(let t=0;t<g.length;t+=1){const e=g[t];v(e),P(e.$$)}for(v(null),g.length=0;b.length;)b.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];C.has(e)||(C.add(e),e())}_.length=0}while(g.length);for(;x.length;)x.pop()();y=!1,k=!1,C.clear()}}function P(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const A=new Set;function L(t,e){t&&t.i&&(A.delete(t),t.i(e))}function I(t,e,n,i){if(t&&t.o){if(A.has(t))return;A.add(t),undefined.c.push((()=>{A.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}function T(t){t&&t.c()}function R(t,n,o,a){const{fragment:s,on_mount:l,on_destroy:u,after_update:d}=t.$$;s&&s.m(n,o),a||E((()=>{const n=l.map(e).filter(r);u?u.push(...n):i(n),t.$$.on_mount=[]})),d.forEach(E)}function M(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function F(t,e){-1===t.$$.dirty[0]&&(g.push(t),y||(y=!0,w.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function S(e,r,o,a,s,l,u=[-1]){const p=f;v(e);const h=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:r.context||[]),callbacks:n(),dirty:u,skip_bound:!1};let c=!1;if(h.ctx=o?o(e,r.props||{},((t,n,...i)=>{const r=i.length?i[0]:n;return h.ctx&&s(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),c&&F(e,t)),n})):[],h.update(),c=!0,i(h.before_update),h.fragment=!!a&&a(h.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);h.fragment&&h.fragment.l(t),t.forEach(d)}else h.fragment&&h.fragment.c();r.intro&&L(e.$$.fragment),R(e,r.target,r.anchor,r.customElement),V()}v(p)}class D{$destroy(){M(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;
/*! Tweakpane 1.6.1 (c) 2016 cocopon, licensed under the MIT license. */
var N,B=(function(t,e){t.exports=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n=function(){return(n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function i(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}var r={inputs:[],monitors:[]};function o(){return i(r.inputs,r.monitors)}function a(t){return t}function s(t){return null==t}function l(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function u(t){return t&&t.parentElement&&t.parentElement.removeChild(t),null}var d="tp";function p(t){return function(e,n){return[d,"-",t,"v",e?"_"+e:"",n?"-"+n:""].join("")}}function h(){return["first","last"]}var c=p("");function f(t,e){var n=t.element;e.emitter.on("change",(function(t){if("hidden"===t.propertyName){var i=c(void 0,"hidden");e.hidden?n.classList.add(i):n.classList.remove(i)}else"positions"===t.propertyName&&(h().forEach((function(t){n.classList.remove(c(void 0,t))})),e.positions.forEach((function(t){n.classList.add(c(void 0,t))})))})),e.emitter.on("dispose",(function(){t.onDispose&&t.onDispose(),u(n)}))}var v=function(){function t(){this.observers_={}}return t.prototype.on=function(t,e){var n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this},t.prototype.off=function(t,e){var n=this.observers_[t];return n&&(this.observers_[t]=n.filter((function(t){return t.handler!==e}))),this},t.prototype.emit=function(t,e){var n=this.observers_[t];n&&n.forEach((function(t){t.handler(e)}))},t}(),m=function(){function t(t){this.emitter=new v,this.title=t}return t.prototype.click=function(){this.emitter.emit("click",{sender:this})},t}(),g=p("btn"),b=function(){function t(t,e){this.button=e.button,this.element=t.createElement("div"),this.element.classList.add(g());var n=t.createElement("button");n.classList.add(g("b")),n.textContent=this.button.title,this.element.appendChild(n),this.buttonElement=n}return t}(),_=function(){function t(t,e){this.onButtonClick_=this.onButtonClick_.bind(this),this.button=new m(e.title),this.blade=e.blade,this.view=new b(t,{button:this.button}),this.view.buttonElement.addEventListener("click",this.onButtonClick_),f(this.view,this.blade)}return t.prototype.onButtonClick_=function(){this.button.click()},t}(),x=p("lbl");function w(t,e){var n=t.createDocumentFragment();return e.split("\n").map((function(e){return t.createTextNode(e)})).forEach((function(e,i){i>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}var y=function(){function t(t,e){this.label=e.label,this.elem_=t.createElement("div"),this.elem_.classList.add(x());var n=t.createElement("div");n.classList.add(x("l")),n.appendChild(w(t,this.label)),this.elem_.appendChild(n);var i=t.createElement("div");i.classList.add(x("v")),i.appendChild(e.view.element),this.elem_.appendChild(i)}return Object.defineProperty(t.prototype,"element",{get:function(){return this.elem_},enumerable:!1,configurable:!0}),t}(),E=function(){function t(t,e){this.binding=e.binding,this.controller=e.controller,this.view=new y(t,{label:e.label,view:this.controller.view}),this.blade=e.blade,f(this.view,this.blade)}return t}(),k=function(){function t(t,e){var n=this;this.binding=e.binding,this.controller=e.controller,this.view=new y(t,{label:e.label,view:this.controller.view}),this.blade=e.blade,this.blade.emitter.on("dispose",(function(){n.binding.dispose()})),f(this.view,this.blade)}return t}(),C=function(){function t(){this.emitter=new v,this.disposed_=!1}return Object.defineProperty(t.prototype,"disposed",{get:function(){return this.disposed_},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){return!this.disposed_&&(this.disposed_=!0,this.emitter.emit("dispose",{sender:this}),!0)},t}(),V=function(){function t(){this.onDispose_=this.onDispose_.bind(this),this.emitter=new v,this.positions_=[],this.hidden_=!1,this.disposable_=new C,this.disposable_.emitter.on("dispose",this.onDispose_)}return Object.defineProperty(t.prototype,"hidden",{get:function(){return this.hidden_},set:function(t){this.hidden_!==t&&(this.hidden_=t,this.emitter.emit("change",{propertyName:"hidden",sender:this}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this.positions_},set:function(t){l(t,this.positions_)||(this.positions_=t,this.emitter.emit("change",{propertyName:"positions",sender:this}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disposed",{get:function(){return this.disposable_.disposed},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.disposable_.dispose()},t.prototype.onDispose_=function(){this.emitter.emit("dispose",{sender:this})},t}(),P="http://www.w3.org/2000/svg";function A(t){t.offsetHeight}function L(t,e){var n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function I(t){return void 0!==t.ontouchstart}function T(){return new Function("return this")()}function R(){return a(T()).document}function M(){return"document"in T()}function F(t){return M()?t.getContext("2d"):null}var S={p2dpad:'<path d="M8 2V14" stroke="currentColor" stroke-width="1.5"/><path d="M2 8H14" stroke="currentColor" stroke-width="1.5"/><circle cx="8" cy="8" r="2" fill="currentColor"/>'};function D(t,e){var n=t.createElementNS(P,"svg");return n.innerHTML=S[e],n}function N(t,e,n){t.insertBefore(e,t.children[n])}function B(t){return t.relatedTarget?a(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function O(t){var e=t.items.filter((function(t){return!t.blade.hidden})),n=e[0],i=e[e.length-1];t.items.forEach((function(t){var e=[];t===n&&e.push("first"),t===i&&e.push("last"),t.blade.positions=e}))}function U(t,e){var n=0;return L(e,(function(){t.expandedHeight=null,t.temporaryExpanded=!0,A(e),n=e.clientHeight,t.temporaryExpanded=null,A(e)})),n}var $=function(){function t(){this.emitter=new v,this.items_=[]}return Object.defineProperty(t.prototype,"items",{get:function(){return this.items_},enumerable:!1,configurable:!0}),t.prototype.add=function(t,e){var n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.emitter.emit("add",{index:n,item:t,sender:this})},t.prototype.remove=function(t){var e=this.items_.indexOf(t);e<0||(this.items_.splice(e,1),this.emitter.emit("remove",{sender:this}))},t}(),j=function(){function t(){this.onItemFolderFold_=this.onItemFolderFold_.bind(this),this.onListItemLayout_=this.onListItemLayout_.bind(this),this.onSubitemLayout_=this.onSubitemLayout_.bind(this),this.onSubitemFolderFold_=this.onSubitemFolderFold_.bind(this),this.onSubitemInputChange_=this.onSubitemInputChange_.bind(this),this.onSubitemMonitorUpdate_=this.onSubitemMonitorUpdate_.bind(this),this.onItemInputChange_=this.onItemInputChange_.bind(this),this.onListAdd_=this.onListAdd_.bind(this),this.onListItemDispose_=this.onListItemDispose_.bind(this),this.onListRemove_=this.onListRemove_.bind(this),this.onItemMonitorUpdate_=this.onItemMonitorUpdate_.bind(this),this.blades_=new $,this.emitter=new v,this.blades_.emitter.on("add",this.onListAdd_),this.blades_.emitter.on("remove",this.onListRemove_)}return Object.defineProperty(t.prototype,"items",{get:function(){return this.blades_.items},enumerable:!1,configurable:!0}),t.prototype.add=function(t,e){this.blades_.add(t,e)},t.prototype.find=function(t){return this.items.reduce((function(e,n){return n instanceof X&&e.push.apply(e,n.bladeRack.find(t)),n instanceof t&&e.push(n),e}),[])},t.prototype.onListAdd_=function(t){var e=t.item;if(this.emitter.emit("add",{blade:e,index:t.index,sender:this}),e.blade.emitter.on("dispose",this.onListItemDispose_),e.blade.emitter.on("change",this.onListItemLayout_),e instanceof E)e.binding.emitter.on("change",this.onItemInputChange_);else if(e instanceof k)e.binding.emitter.on("update",this.onItemMonitorUpdate_);else if(e instanceof X){e.folder.emitter.on("change",this.onItemFolderFold_);var n=e.bladeRack.emitter;n.on("itemfold",this.onSubitemFolderFold_),n.on("itemlayout",this.onSubitemLayout_),n.on("inputchange",this.onSubitemInputChange_),n.on("monitorupdate",this.onSubitemMonitorUpdate_)}},t.prototype.onListRemove_=function(t){this.emitter.emit("remove",{sender:this})},t.prototype.onListItemLayout_=function(t){"hidden"!==t.propertyName&&"positions"!==t.propertyName||this.emitter.emit("itemlayout",{sender:this})},t.prototype.onListItemDispose_=function(t){var e=this;this.blades_.items.filter((function(t){return t.blade.disposed})).forEach((function(t){e.blades_.remove(t)}))},t.prototype.onItemInputChange_=function(t){this.emitter.emit("inputchange",{inputBinding:t.sender,sender:this,value:t.rawValue})},t.prototype.onItemMonitorUpdate_=function(t){this.emitter.emit("monitorupdate",{monitorBinding:t.sender,sender:this,value:t.rawValue})},t.prototype.onItemFolderFold_=function(t){"expanded"===t.propertyName&&this.emitter.emit("itemfold",{expanded:t.sender.expanded,sender:this})},t.prototype.onSubitemLayout_=function(t){this.emitter.emit("itemlayout",{sender:this})},t.prototype.onSubitemInputChange_=function(t){this.emitter.emit("inputchange",{inputBinding:t.inputBinding,sender:this,value:t.value})},t.prototype.onSubitemMonitorUpdate_=function(t){this.emitter.emit("monitorupdate",{monitorBinding:t.monitorBinding,sender:this,value:t.value})},t.prototype.onSubitemFolderFold_=function(t){this.emitter.emit("itemfold",{expanded:t.expanded,sender:this})},t}(),z=function(){function t(t,e){this.emitter=new v,this.expanded_=e,this.expandedHeight_=null,this.temporaryExpanded_=null,this.shouldFixHeight_=!1,this.title=t}return Object.defineProperty(t.prototype,"expanded",{get:function(){return this.expanded_},set:function(t){this.expanded_!==t&&(this.emitter.emit("beforechange",{propertyName:"expanded",sender:this}),this.expanded_=t,this.emitter.emit("change",{propertyName:"expanded",sender:this}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"temporaryExpanded",{get:function(){return this.temporaryExpanded_},set:function(t){this.temporaryExpanded_!==t&&(this.emitter.emit("beforechange",{propertyName:"temporaryExpanded",sender:this}),this.temporaryExpanded_=t,this.emitter.emit("change",{propertyName:"temporaryExpanded",sender:this}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expandedHeight",{get:function(){return this.expandedHeight_},set:function(t){this.expandedHeight_!==t&&(this.emitter.emit("beforechange",{propertyName:"expandedHeight",sender:this}),this.expandedHeight_=t,this.emitter.emit("change",{propertyName:"expandedHeight",sender:this}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldFixHeight",{get:function(){return this.shouldFixHeight_},set:function(t){this.shouldFixHeight_!==t&&(this.emitter.emit("beforechange",{propertyName:"shouldFixHeight",sender:this}),this.shouldFixHeight_=t,this.emitter.emit("change",{propertyName:"shouldFixHeight",sender:this}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styleExpanded",{get:function(){var t;return null!==(t=this.temporaryExpanded)&&void 0!==t?t:this.expanded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styleHeight",{get:function(){return this.styleExpanded?this.shouldFixHeight&&!s(this.expandedHeight)?this.expandedHeight+"px":"auto":"0"},enumerable:!1,configurable:!0}),t}(),H=p("fld"),K=function(){function t(t,e){this.onFolderChange_=this.onFolderChange_.bind(this),this.folder_=e.folder,this.folder_.emitter.on("change",this.onFolderChange_),this.element=t.createElement("div"),this.element.classList.add(H());var n=t.createElement("button");n.classList.add(H("t")),n.textContent=this.folder_.title,this.element.appendChild(n),this.titleElement=n;var i=t.createElement("div");i.classList.add(H("m")),this.titleElement.appendChild(i);var r=t.createElement("div");r.classList.add(H("c")),this.element.appendChild(r),this.containerElement=r,this.applyModel_()}return t.prototype.applyModel_=function(){var t=this.folder_.styleExpanded,e=H(void 0,"expanded");t?this.element.classList.add(e):this.element.classList.remove(e),this.containerElement.style.height=this.folder_.styleHeight},t.prototype.onFolderChange_=function(){this.applyModel_()},t}(),X=function(){function t(t,e){var n;this.onContainerTransitionEnd_=this.onContainerTransitionEnd_.bind(this),this.onFolderBeforeChange_=this.onFolderBeforeChange_.bind(this),this.onTitleClick_=this.onTitleClick_.bind(this),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackItemLayout_=this.onRackItemLayout_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.blade=e.blade,this.folder=new z(e.title,null===(n=e.expanded)||void 0===n||n),this.folder.emitter.on("beforechange",this.onFolderBeforeChange_),this.rack_=new j,this.rack_.emitter.on("add",this.onRackAdd_),this.rack_.emitter.on("itemlayout",this.onRackItemLayout_),this.rack_.emitter.on("remove",this.onRackRemove_),this.doc_=t,this.view=new K(this.doc_,{folder:this.folder}),this.view.titleElement.addEventListener("click",this.onTitleClick_),this.view.containerElement.addEventListener("transitionend",this.onContainerTransitionEnd_),f(this.view,this.blade)}return Object.defineProperty(t.prototype,"document",{get:function(){return this.doc_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bladeRack",{get:function(){return this.rack_},enumerable:!1,configurable:!0}),t.prototype.onFolderBeforeChange_=function(t){"expanded"===t.propertyName&&(s(this.folder.expandedHeight)&&(this.folder.expandedHeight=U(this.folder,this.view.containerElement)),this.folder.shouldFixHeight=!0,A(this.view.containerElement))},t.prototype.onTitleClick_=function(){this.folder.expanded=!this.folder.expanded},t.prototype.applyRackChange_=function(){O(this.bladeRack)},t.prototype.onRackAdd_=function(t){N(this.view.containerElement,t.blade.view.element,t.index),this.applyRackChange_()},t.prototype.onRackRemove_=function(t){this.applyRackChange_()},t.prototype.onRackItemLayout_=function(t){this.applyRackChange_()},t.prototype.onContainerTransitionEnd_=function(t){"height"===t.propertyName&&(this.folder.shouldFixHeight=!1,this.folder.expandedHeight=null)},t}(),q=p("spt"),Y=function(){function t(t){this.element=t.createElement("div"),this.element.classList.add(q());var e=t.createElement("hr");e.classList.add(q("r")),this.element.appendChild(e)}return t}(),G=function(){function t(t,e){this.blade=e.blade,this.view=new Y(t),f(this.view,this.blade)}return t}(),W=function(){function t(t){this.controller=t}return Object.defineProperty(t.prototype,"hidden",{get:function(){return this.controller.blade.hidden},set:function(t){this.controller.blade.hidden=t},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.controller.blade.dispose()},t.prototype.on=function(t,e){return this.controller.button.emitter.on(t,a(e.bind(this))),this},t}();function Z(t){var e=t.binding,n=t.eventName,i=t.handler;"change"===n&&e.emitter.on("change",(function(t){i(a(t.sender.target.read()))}))}function Q(t){var e=t.binding,n=t.eventName,i=t.handler;"update"===n&&e.emitter.on("update",(function(t){i(t.sender.target.read())}))}function J(t){var e=t.bladeRack,n=t.eventName,i=t.folder,r=t.handler;"change"===n&&e.emitter.on("inputchange",(function(t){r(t.inputBinding.target.read())})),"update"===n&&e.emitter.on("monitorupdate",(function(t){r(t.monitorBinding.target.read())})),"fold"===n&&(e.emitter.on("itemfold",(function(t){r(t.expanded)})),null==i||i.emitter.on("change",(function(t){"expanded"===t.propertyName&&r(t.sender.expanded)})))}var tt=function(){function t(t){this.controller=t}return Object.defineProperty(t.prototype,"hidden",{get:function(){return this.controller.blade.hidden},set:function(t){this.controller.blade.hidden=t},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.controller.blade.dispose()},t.prototype.on=function(t,e){return Z({binding:this.controller.binding,eventName:t,handler:e.bind(this)}),this},t.prototype.refresh=function(){this.controller.binding.read()},t}(),et={alreadydisposed:function(){return"View has been already disposed"},invalidparams:function(t){return"Invalid parameters for '"+t.name+"'"},nomatchingcontroller:function(t){return"No matching controller for '"+t.key+"'"},notbindable:function(){return"Value is not bindable"},propertynotfound:function(t){return"Property '"+t.name+"' not found"},shouldneverhappen:function(){return"This error should never happen"}},nt=function(){function t(t){var e;this.message=null!==(e=et[t.type](a(t.context)))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}return t.alreadyDisposed=function(){return new t({context:{},type:"alreadydisposed"})},t.notBindable=function(){return new t({context:{},type:"notbindable"})},t.propertyNotFound=function(e){return new t({type:"propertynotfound",context:{name:e}})},t.shouldNeverHappen=function(){return new t({context:{},type:"shouldneverhappen"})},t}();nt.prototype=Object.create(Error.prototype),nt.prototype.constructor=nt;var it=function(){function t(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new v,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}return t.prototype.read=function(){var t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))},t.prototype.write_=function(t){this.writer(this.target,t)},t.prototype.onValueChange_=function(t){this.write_(t.rawValue),this.emitter.emit("change",{rawValue:t.rawValue,sender:this})},t}(),rt=function(){function t(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:function(t,e){return t===e},this.emitter=new v,this.rawValue_=t}return Object.defineProperty(t.prototype,"constraint",{get:function(){return this.constraint_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawValue",{get:function(){return this.rawValue_},set:function(t){var e=this.constraint_?this.constraint_.constrain(t):t;!this.equals_(this.rawValue_,e)&&(this.rawValue_=e,this.emitter.emit("change",{rawValue:e,sender:this}))},enumerable:!1,configurable:!0}),t}();function ot(t,e){var n=t.binding.accept(e.target.read(),e.params);if(null===n)return null;var i={target:e.target,initialValue:n,params:e.params},r=t.binding.reader(i),o=t.binding.constraint?t.binding.constraint(i):void 0,a=new rt(r(n),{constraint:o,equals:t.binding.equals}),s=new it({reader:r,target:e.target,value:a,writer:t.binding.writer(i)}),l=t.controller({binding:s,document:e.document,initialValue:n,params:e.params});return new E(e.document,{binding:s,controller:l,label:e.params.label||e.target.key,blade:new V})}function at(t,e,n){if(s(e.read()))throw new nt({context:{key:e.key},type:"nomatchingcontroller"});var i=r.inputs.reduce((function(i,r){return i||ot(r,{document:t,target:e,params:n})}),null);if(i)return i;throw new nt({context:{key:e.key},type:"nomatchingcontroller"})}var st=function(){function t(t){this.controller=t}return Object.defineProperty(t.prototype,"hidden",{get:function(){return this.controller.blade.hidden},set:function(t){this.controller.blade.hidden=t},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.controller.blade.dispose()},t.prototype.on=function(t,e){return Q({binding:this.controller.binding,eventName:t,handler:a(e.bind(this))}),this},t.prototype.refresh=function(){this.controller.binding.read()},t}(),lt={monitor:{defaultInterval:200,defaultLineCount:3}};function ut(t,e){for(;t.length<e;)t.push(void 0)}function dt(t,e){var n=[t];return ut(n,e),new rt(n)}function pt(t){var e=t.indexOf(void 0);return a(e<0?t:t.slice(0,e))}function ht(t,e){var n=i(pt(t),[e]);return n.length>t.length?n.splice(0,n.length-t.length):ut(n,t.length),n}var ct=function(){function t(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new v,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}return t.prototype.dispose=function(){this.ticker.disposable.dispose()},t.prototype.read=function(){var t=this.target.read();if(void 0!==t){var e=this.value.rawValue,n=this.reader_(t);this.value.rawValue=ht(e,n),this.emitter.emit("update",{rawValue:n,sender:this})}},t.prototype.onTick_=function(t){this.read()},t}(),ft=function(){function t(t,e){var n=this;if(this.id_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new v,e<=0)this.id_=null;else{var i=this.doc_.defaultView;i&&(this.id_=i.setInterval(this.onTick_,e))}this.disposable=new C,this.disposable.emitter.on("dispose",(function(){if(null!==n.id_){var t=n.doc_.defaultView;t&&t.clearInterval(n.id_)}n.id_=null}))}return t.prototype.onTick_=function(){this.emitter.emit("tick",{sender:this})},t}(),vt=function(){function t(){this.disposable=new C,this.emitter=new v}return t.prototype.tick=function(){this.emitter.emit("tick",{sender:this})},t}();function mt(t,e){return 0===e?new vt:new ft(t,null!=e?e:lt.monitor.defaultInterval)}function gt(t,e){var n,i,r,o=t.binding.accept(e.target.read(),e.params);if(null===o)return null;var a={target:e.target,initialValue:o,params:e.params},s=t.binding.reader(a),l=null!==(r=null!==(i=null!==(n=e.params.bufferSize)&&void 0!==n?n:e.params.count)&&void 0!==i?i:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(e.params))&&void 0!==r?r:1,u=new ct({reader:s,target:e.target,ticker:mt(e.document,e.params.interval),value:dt(s(o),l)});return new k(e.document,{binding:u,controller:t.controller({binding:u,document:e.document,params:e.params}),label:e.params.label||e.target.key,blade:new V})}function bt(t,e,n){var i=r.monitors.reduce((function(i,r){return i||gt(r,{document:t,params:n,target:e})}),null);if(i)return i;throw new nt({context:{key:e.key},type:"nomatchingcontroller"})}var _t=function(){function t(t){this.controller=t}return Object.defineProperty(t.prototype,"hidden",{get:function(){return this.controller.blade.hidden},set:function(t){this.controller.blade.hidden=t},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.controller.blade.dispose()},t}(),xt=function(){function t(t,e,n){this.obj_=t,this.key_=e,this.presetKey_=null!=n?n:e}return t.isBindable=function(t){return null!==t&&"object"==typeof t},Object.defineProperty(t.prototype,"key",{get:function(){return this.key_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"presetKey",{get:function(){return this.presetKey_},enumerable:!1,configurable:!0}),t.prototype.read=function(){return this.obj_[this.key_]},t.prototype.write=function(t){this.obj_[this.key_]=t},t.prototype.writeProperty=function(e,n){var i=this.read();if(!t.isBindable(i))throw nt.notBindable();if(!(e in i))throw nt.propertyNotFound(e);i[e]=n},t}();function wt(t,e,n){if(!xt.isBindable(t))throw nt.notBindable();return new xt(t,e,n)}var yt=function(){function t(t){this.controller=t}return Object.defineProperty(t.prototype,"expanded",{get:function(){return this.controller.folder.expanded},set:function(t){this.controller.folder.expanded=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hidden",{get:function(){return this.controller.blade.hidden},set:function(t){this.controller.blade.hidden=t},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.controller.blade.dispose()},t.prototype.addInput=function(t,e,n){var i=n||{},r=at(this.controller.document,wt(t,e,i.presetKey),i);return this.controller.bladeRack.add(r,i.index),new tt(a(r))},t.prototype.addMonitor=function(t,e,n){var i=n||{},r=bt(this.controller.document,wt(t,e),i);return this.controller.bladeRack.add(r,i.index),new st(a(r))},t.prototype.addFolder=function(e){var i=new X(this.controller.document,n(n({},e),{blade:new V}));return this.controller.bladeRack.add(i,e.index),new t(i)},t.prototype.addButton=function(t){var e=new _(this.controller.document,n(n({},t),{blade:new V}));return this.controller.bladeRack.add(e,t.index),new W(e)},t.prototype.addSeparator=function(t){var e=t||{},n=new G(this.controller.document,{blade:new V});return this.controller.bladeRack.add(n,e.index),new _t(n)},t.prototype.on=function(t,e){return J({eventName:t,folder:this.controller.folder,handler:a(e.bind(this)),bladeRack:this.controller.bladeRack}),this},t}();function Et(t){return t.reduce((function(t,e){var n;return Object.assign(t,((n={})[e.presetKey]=e.read(),n))}),{})}function kt(t,e){t.forEach((function(t){var n=e[t.presetKey];void 0!==n&&t.write(n)}))}var Ct=function(){function t(t){this.controller=t}return t.registerPlugin=function(t){"input"===t.type?r.inputs.unshift(t.plugin):"monitor"===t.type&&r.monitors.unshift(t.plugin)},Object.defineProperty(t.prototype,"element",{get:function(){return this.controller.view.element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expanded",{get:function(){var t=this.controller.folder;return!t||t.expanded},set:function(t){var e=this.controller.folder;e&&(e.expanded=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hidden",{get:function(){return this.controller.blade.hidden},set:function(t){this.controller.blade.hidden=t},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.controller.blade.dispose()},t.prototype.addInput=function(t,e,n){var i=n||{},r=at(this.controller.document,wt(t,e,i.presetKey),i);return this.controller.bladeRack.add(r,i.index),new tt(a(r))},t.prototype.addMonitor=function(t,e,n){var i=n||{},r=bt(this.controller.document,wt(t,e),i);return this.controller.bladeRack.add(r,i.index),new st(a(r))},t.prototype.addButton=function(t){var e=new _(this.controller.document,n(n({},t),{blade:new V}));return this.controller.bladeRack.add(e,t.index),new W(e)},t.prototype.addFolder=function(t){var e=new X(this.controller.document,n(n({},t),{blade:new V}));return this.controller.bladeRack.add(e,t.index),new yt(e)},t.prototype.addSeparator=function(t){var e=t||{},n=new G(this.controller.document,{blade:new V});return this.controller.bladeRack.add(n,e.index),new _t(n)},t.prototype.importPreset=function(t){kt(this.controller.bladeRack.find(E).map((function(t){return t.binding.target})),t),this.refresh()},t.prototype.exportPreset=function(){return Et(this.controller.bladeRack.find(E).map((function(t){return t.binding.target})))},t.prototype.on=function(t,e){return J({eventName:t,folder:this.controller.folder,handler:a(e.bind(this)),bladeRack:this.controller.bladeRack}),this},t.prototype.refresh=function(){this.controller.bladeRack.find(E).forEach((function(t){t.binding.read()})),this.controller.bladeRack.find(k).forEach((function(t){t.binding.read()}))},t}(),Vt=p("rot"),Pt=function(){function t(t,e){this.titleElem_=null,this.onFolderChange_=this.onFolderChange_.bind(this),this.folder_=e.folder,this.folder_&&this.folder_.emitter.on("change",this.onFolderChange_),this.element=t.createElement("div"),this.element.classList.add(Vt());var n=this.folder_;if(n){var i=t.createElement("button");i.classList.add(Vt("t")),i.textContent=n.title,this.element.appendChild(i);var r=t.createElement("div");r.classList.add(Vt("m")),i.appendChild(r),this.titleElem_=i}var o=t.createElement("div");o.classList.add(Vt("c")),this.element.appendChild(o),this.containerElement=o,this.applyModel_()}return Object.defineProperty(t.prototype,"titleElement",{get:function(){return this.titleElem_},enumerable:!1,configurable:!0}),t.prototype.applyModel_=function(){var t=!this.folder_||this.folder_.styleExpanded,e=Vt(void 0,"expanded");t?this.element.classList.add(e):this.element.classList.remove(e),this.containerElement.style.height=this.folder_?this.folder_.styleHeight:"auto"},t.prototype.onFolderChange_=function(){this.applyModel_()},t}();function At(t){var e;return t.title?new z(t.title,null===(e=t.expanded)||void 0===e||e):null}var Lt=function(){function t(t,e){this.onContainerTransitionEnd_=this.onContainerTransitionEnd_.bind(this),this.onFolderBeforeChange_=this.onFolderBeforeChange_.bind(this),this.onTitleClick_=this.onTitleClick_.bind(this),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackItemLayout_=this.onRackItemLayout_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.folder=At(e),this.folder&&this.folder.emitter.on("beforechange",this.onFolderBeforeChange_),this.bladeRack=new j,this.bladeRack.emitter.on("add",this.onRackAdd_),this.bladeRack.emitter.on("itemlayout",this.onRackItemLayout_),this.bladeRack.emitter.on("remove",this.onRackRemove_),this.doc_=t,this.blade=e.blade,this.view=new Pt(this.doc_,{folder:this.folder}),this.view.titleElement&&this.view.titleElement.addEventListener("click",this.onTitleClick_),this.view.containerElement.addEventListener("transitionend",this.onContainerTransitionEnd_),f(this.view,this.blade)}return Object.defineProperty(t.prototype,"document",{get:function(){return this.doc_},enumerable:!1,configurable:!0}),t.prototype.onFolderBeforeChange_=function(t){if("expanded"===t.propertyName){var e=this.folder;e&&(s(e.expandedHeight)&&(e.expandedHeight=U(e,this.view.containerElement)),e.shouldFixHeight=!0,A(this.view.containerElement))}},t.prototype.applyRackChange_=function(){O(this.bladeRack)},t.prototype.onRackAdd_=function(t){N(this.view.containerElement,t.blade.view.element,t.index),this.applyRackChange_()},t.prototype.onRackRemove_=function(t){this.applyRackChange_()},t.prototype.onRackItemLayout_=function(t){this.applyRackChange_()},t.prototype.onTitleClick_=function(){this.folder&&(this.folder.expanded=!this.folder.expanded)},t.prototype.onContainerTransitionEnd_=function(t){"height"===t.propertyName&&this.folder&&(this.folder.shouldFixHeight=!1,this.folder.expandedHeight=null)},t}(),It=function(){function t(t){this.constraints_=t.constraints}return Object.defineProperty(t.prototype,"constraints",{get:function(){return this.constraints_},enumerable:!1,configurable:!0}),t.prototype.constrain=function(t){return this.constraints_.reduce((function(t,e){return e.constrain(t)}),t)},t}();function Tt(t,e){if(t instanceof e)return t;if(t instanceof It){var n=t.constraints.reduce((function(t,n){return t||(n instanceof e?n:null)}),null);if(n)return n}return null}var Rt=function(){function t(t){this.opts_=t.options}return Object.defineProperty(t.prototype,"options",{get:function(){return this.opts_},enumerable:!1,configurable:!0}),t.prototype.constrain=function(t){var e=this.opts_;return 0===e.length||e.filter((function(e){return e.value===t})).length>0?t:e[0].value},t}();function Mt(t){return String(t)}function Ft(t){return"false"!==t&&!!t}function St(t){return Mt(t)}function Dt(t,e){t.write(e)}var Nt=function(){function t(t){this.step=t.step}return t.prototype.constrain=function(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step},t}();function Bt(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)}function Ot(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Ut(t,e,n){return Math.min(Math.max(t,e),n)}function $t(t,e){return(t%e+e)%e}function jt(t,e){if(Array.isArray(t))return t.map((function(t){return{text:t.text,value:e(t.value)}}));var n=t;return Object.keys(n).reduce((function(t,i){return t.concat({text:i,value:e(n[i])})}),[])}function zt(t){var e=t?Tt(t,Rt):null;return e?e.options:null}function Ht(t){var e=t?Tt(t,Nt):null;return e?e.step:null}function Kt(t,e){var n=t&&Tt(t,Nt);return n?Ot(n.step):Math.max(Ot(e),2)}function Xt(t){var e=Ht(t);return null!=e?e:1}var qt=p("lst"),Yt=function(){function t(t,e){var n=this;this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(qt()),this.stringifyValue_=e.stringifyValue;var i=t.createElement("select");i.classList.add(qt("s")),e.options.forEach((function(e,r){var o=t.createElement("option");o.dataset.index=String(r),o.textContent=e.text,o.value=n.stringifyValue_(e.value),i.appendChild(o)})),this.element.appendChild(i),this.selectElement=i;var r=t.createElement("div");r.classList.add(qt("m")),this.element.appendChild(r),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update()}return t.prototype.update=function(){this.selectElement.value=this.stringifyValue_(this.value.rawValue)},t.prototype.onValueChange_=function(){this.update()},t}(),Gt=function(){function t(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.value=e.value,this.listItems_=e.listItems,this.view=new Yt(t,{options:this.listItems_,stringifyValue:e.stringifyValue,value:this.value}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}return t.prototype.onSelectChange_=function(t){var e=a(t.currentTarget).selectedOptions.item(0);if(e){var n=Number(e.dataset.index);this.value.rawValue=this.listItems_[n].value,this.view.update()}},t}(),Wt=p("ckb"),Zt=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Wt());var n=t.createElement("label");n.classList.add(Wt("l")),this.element.appendChild(n);var i=t.createElement("input");i.classList.add(Wt("i")),i.type="checkbox",n.appendChild(i),this.inputElement=i;var r=t.createElement("div");r.classList.add(Wt("m")),n.appendChild(r),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update()}return t.prototype.update=function(){this.inputElement.checked=this.value.rawValue},t.prototype.onValueChange_=function(){this.update()},t}(),Qt=function(){function t(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.view=new Zt(t,{value:this.value}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return t.prototype.onInputChange_=function(t){var e=a(t.currentTarget);this.value.rawValue=e.checked,this.view.update()},t}();function Jt(t){var e=[];return"options"in t&&void 0!==t.options&&e.push(new Rt({options:jt(t.options,Ft)})),new It({constraints:e})}function te(t,e){var n,i=e.constraint;return i&&Tt(i,Rt)?new Gt(t,{listItems:null!==(n=zt(i))&&void 0!==n?n:[],stringifyValue:Mt,value:e}):new Qt(t,{value:e})}var ee={id:"input-bool",binding:{accept:function(t){return"boolean"==typeof t?t:null},constraint:function(t){return Jt(t.params)},reader:function(t){return Ft},writer:function(t){return Dt}},controller:function(t){return te(t.document,t.binding.value)}},ne=p("txt"),ie=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(ne());var n=t.createElement("input");n.classList.add(ne("i")),n.type="text",this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update()}return t.prototype.update=function(){this.inputElement.value=this.formatter_(this.value.rawValue)},t.prototype.onValueChange_=function(){this.update()},t}(),re=function(){function t(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.value=e.value,this.view=new ie(t,{formatter:e.formatter,value:this.value}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return t.prototype.onInputChange_=function(t){var e=a(t.currentTarget).value,n=this.parser_(e);s(n)||(this.value.rawValue=n),this.view.update()},t}(),oe=p("cswtxt"),ae=function(){function t(t,e){this.element=t.createElement("div"),this.element.classList.add(oe());var n=t.createElement("div");n.classList.add(oe("s")),this.swatchView_=e.swatchView,n.appendChild(this.swatchView_.element),this.element.appendChild(n);var i=t.createElement("div");i.classList.add(oe("t")),this.textView=e.textView,i.appendChild(this.textView.element),this.element.appendChild(i)}return Object.defineProperty(t.prototype,"value",{get:function(){return this.textView.value},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.swatchView_.update(),this.textView.update()},t}(),se=function(){function t(t){this.onValueChange_=this.onValueChange_.bind(this),this.mode_=t.rawValue.mode,this.value=t,this.value.emitter.on("change",this.onValueChange_),this.emitter=new v}return Object.defineProperty(t.prototype,"mode",{get:function(){return this.mode_},set:function(t){this.mode_!==t&&(this.mode_=t,this.emitter.emit("change",{propertyName:"mode",sender:this}))},enumerable:!1,configurable:!0}),t.prototype.onValueChange_=function(){this.emitter.emit("change",{propertyName:"value",sender:this})},t}();function le(t){var e=parseFloat(t);return isNaN(e)?null:e}function ue(t){if("number"==typeof t)return t;if("string"==typeof t){var e=le(t);if(!s(e))return e}return 0}function de(t){return String(t)}function pe(t){return function(e){return e.toFixed(Math.max(Math.min(t,20),0))}}var he=pe(0);function ce(t){return he(t)+"%"}function fe(t,e,n){var i=Ut(t/255,0,1),r=Ut(e/255,0,1),o=Ut(n/255,0,1),a=Math.max(i,r,o),s=Math.min(i,r,o),l=a-s,u=0,d=0,p=(s+a)/2;return 0!==l&&(d=p>.5?l/(2-s-a):l/(a+s),u=(u=i===a?(r-o)/l:r===a?2+(o-i)/l:4+(i-r)/l)/6+(u<0?1:0)),[360*u,100*d,100*p]}function ve(t,e,n){var i,r,o,a,s,l,u,d,p,h=(t%360+360)%360,c=Ut(e/100,0,1),f=Ut(n/100,0,1),v=(1-Math.abs(2*f-1))*c,m=v*(1-Math.abs(h/60%2-1)),g=f-v/2;return h>=0&&h<60?(u=(i=[v,m,0])[0],d=i[1],p=i[2]):h>=60&&h<120?(u=(r=[m,v,0])[0],d=r[1],p=r[2]):h>=120&&h<180?(u=(o=[0,v,m])[0],d=o[1],p=o[2]):h>=180&&h<240?(u=(a=[0,m,v])[0],d=a[1],p=a[2]):h>=240&&h<300?(u=(s=[m,0,v])[0],d=s[1],p=s[2]):(u=(l=[v,0,m])[0],d=l[1],p=l[2]),[255*(u+g),255*(d+g),255*(p+g)]}function me(t,e,n){var i=Ut(t/255,0,1),r=Ut(e/255,0,1),o=Ut(n/255,0,1),a=Math.max(i,r,o),s=a-Math.min(i,r,o);return[0===s?0:a===i?((r-o)/s%6+6)%6*60:a===r?60*((o-i)/s+2):60*((i-r)/s+4),100*(0===a?0:s/a),100*a]}function ge(t,e,n){var i,r,o,a,s,l,u,d,p,h=$t(t,360),c=Ut(e/100,0,1),f=Ut(n/100,0,1),v=f*c,m=v*(1-Math.abs(h/60%2-1)),g=f-v;return h>=0&&h<60?(u=(i=[v,m,0])[0],d=i[1],p=i[2]):h>=60&&h<120?(u=(r=[m,v,0])[0],d=r[1],p=r[2]):h>=120&&h<180?(u=(o=[0,v,m])[0],d=o[1],p=o[2]):h>=180&&h<240?(u=(a=[0,m,v])[0],d=a[1],p=a[2]):h>=240&&h<300?(u=(s=[m,0,v])[0],d=s[1],p=s[2]):(u=(l=[v,0,m])[0],d=l[1],p=l[2]),[255*(u+g),255*(d+g),255*(p+g)]}function be(t){return[t[0],t[1],t[2]]}function _e(t,e){return[t[0],t[1],t[2],e]}var xe={hsl:{hsl:function(t,e,n){return[t,e,n]},hsv:function(t,e,n){var i=ve(t,e,n);return me(i[0],i[1],i[2])},rgb:ve},hsv:{hsl:function(t,e,n){var i=ge(t,e,n);return fe(i[0],i[1],i[2])},hsv:function(t,e,n){return[t,e,n]},rgb:ge},rgb:{hsl:fe,hsv:me,rgb:function(t,e,n){return[t,e,n]}}};function we(t,e,n){var i;return(i=xe[e])[n].apply(i,t)}var ye={hsl:function(t){var e;return[$t(t[0],360),Ut(t[1],0,100),Ut(t[2],0,100),Ut(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},hsv:function(t){var e;return[$t(t[0],360),Ut(t[1],0,100),Ut(t[2],0,100),Ut(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},rgb:function(t){var e;return[Ut(t[0],0,255),Ut(t[1],0,255),Ut(t[2],0,255),Ut(null!==(e=t[3])&&void 0!==e?e:1,0,1)]}};function Ee(t,e){return"object"==typeof t&&!s(t)&&e in t&&"number"==typeof t[e]}var ke=function(){function t(t,e){this.mode_=e,this.comps_=ye[e](t)}return t.black=function(){return new t([0,0,0],"rgb")},t.fromObject=function(e){return new t("a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b],"rgb")},t.toRgbaObject=function(t){return t.toRgbaObject()},t.isRgbColorObject=function(t){return Ee(t,"r")&&Ee(t,"g")&&Ee(t,"b")},t.isRgbaColorObject=function(t){return this.isRgbColorObject(t)&&Ee(t,"a")},t.isColorObject=function(t){return this.isRgbColorObject(t)},t.equals=function(t,e){if(t.mode_!==e.mode_)return!1;for(var n=t.comps_,i=e.comps_,r=0;r<n.length;r++)if(n[r]!==i[r])return!1;return!0},Object.defineProperty(t.prototype,"mode",{get:function(){return this.mode_},enumerable:!1,configurable:!0}),t.prototype.getComponents=function(t){return _e(we(be(this.comps_),this.mode_,t||this.mode_),this.comps_[3])},t.prototype.toRgbaObject=function(){var t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}},t}();function Ce(t,e){var n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}var Ve={deg:function(t){return t},grad:function(t){return 360*t/400},rad:function(t){return 360*t/(2*Math.PI)},turn:function(t){return 360*t}};function Pe(t){var e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);var n=parseFloat(e[1]),i=e[2];return Ve[i](n)}var Ae={"func.rgb":function(t){var e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[Ce(e[1],255),Ce(e[2],255),Ce(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new ke(n,"rgb")},"func.rgba":function(t){var e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[Ce(e[1],255),Ce(e[2],255),Ce(e[3],255),Ce(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new ke(n,"rgb")},"func.hsl":function(t){var e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[Pe(e[1]),Ce(e[2],100),Ce(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new ke(n,"hsl")},"func.hsla":function(t){var e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[Pe(e[1]),Ce(e[2],100),Ce(e[3],100),Ce(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new ke(n,"hsl")},"hex.rgb":function(t){var e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new ke([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)],"rgb");var n=t.match(/^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new ke([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)],"rgb"):null},"hex.rgba":function(t){var e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new ke([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Bt(parseInt(e[4]+e[4],16),0,255,0,1)],"rgb");var n=t.match(/^#?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new ke([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Bt(parseInt(n[4],16),0,255,0,1)],"rgb"):null}};function Le(t){return Object.keys(Ae).reduce((function(e,n){return e||((0,Ae[n])(t)?n:null)}),null)}var Ie=function(t){var e=Le(t);return e?Ae[e](t):null};function Te(t){return"func.hsla"===t||"func.rgba"===t||"hex.rgba"===t}function Re(t){if("string"==typeof t){var e=Ie(t);if(e)return e}return ke.black()}function Me(t){var e=Ut(Math.floor(t),0,255).toString(16);return 1===e.length?"0"+e:e}function Fe(t){return"#"+be(t.getComponents("rgb")).map(Me).join("")}function Se(t){var e=t.getComponents("rgb");return"#"+[e[0],e[1],e[2],255*e[3]].map(Me).join("")}function De(t){var e=pe(0);return"rgb("+be(t.getComponents("rgb")).map((function(t){return e(t)})).join(", ")+")"}function Ne(t){var e=pe(2),n=pe(0);return"rgba("+t.getComponents("rgb").map((function(t,i){return(3===i?e:n)(t)})).join(", ")+")"}function Be(t){var e=[pe(0),ce,ce];return"hsl("+be(t.getComponents("hsl")).map((function(t,n){return e[n](t)})).join(", ")+")"}function Oe(t){var e=[pe(0),ce,ce,pe(2)];return"hsla("+t.getComponents("hsl").map((function(t,n){return e[n](t)})).join(", ")+")"}var Ue={"func.hsl":Be,"func.hsla":Oe,"func.rgb":De,"func.rgba":Ne,"hex.rgb":Fe,"hex.rgba":Se};function $e(t){return Ue[t]}var je=p("csw"),ze=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(je());var n=t.createElement("div");n.classList.add(je("sw")),this.element.appendChild(n),this.swatchElem_=n;var i=t.createElement("button");i.classList.add(je("b")),this.element.appendChild(i),this.buttonElement=i;var r=t.createElement("div");r.classList.add(je("p")),this.pickerView_=e.pickerView,r.appendChild(this.pickerView_.element),this.element.appendChild(r),this.update()}return t.prototype.update=function(){var t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Se(t)},t.prototype.onValueChange_=function(){this.update()},t}(),He=function(){function t(){this.emitter=new v,this.expanded_=!1}return Object.defineProperty(t.prototype,"expanded",{get:function(){return this.expanded_},set:function(t){this.expanded_!==t&&(this.expanded_=t,this.emitter.emit("change",{sender:this}))},enumerable:!1,configurable:!0}),t}();function Ke(t){var e=t.primary,n=t.secondary,i=t.forward,r=t.backward;e.emitter.on("change",(function(){n.rawValue=i(e,n)})),n.emitter.on("change",(function(){e.rawValue=r(e,n)})),n.rawValue=i(e,n)}function Xe(t,e){var n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function qe(t){return{altKey:t.altKey,downKey:40===t.keyCode,shiftKey:t.shiftKey,upKey:38===t.keyCode}}function Ye(t){return{altKey:t.altKey,downKey:37===t.keyCode,shiftKey:t.shiftKey,upKey:39===t.keyCode}}function Ge(t){return 38===t||40===t}function We(t){return Ge(t)||37===t||39===t}var Ze=function(t){function n(e,n){var i=t.call(this,e,n)||this;return i.onInputKeyDown_=i.onInputKeyDown_.bind(i),i.baseStep_=n.baseStep,i.view.inputElement.addEventListener("keydown",i.onInputKeyDown_),i}return e(n,t),n.prototype.onInputKeyDown_=function(t){var e=Xe(this.baseStep_,qe(t));0!==e&&(this.value.rawValue+=e,this.view.update())},n}(re),Qe=p("clp"),Je=function(){function t(t,e){this.alphaViews_=null,this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.pickedColor=e.pickedColor,this.pickedColor.value.emitter.on("change",this.onValueChange_),this.foldable=e.foldable,this.foldable.emitter.on("change",this.onFoldableChange_),this.element=t.createElement("div"),this.element.classList.add(Qe());var n=t.createElement("div");n.classList.add(Qe("hsv"));var i=t.createElement("div");i.classList.add(Qe("sv")),this.svPaletteView_=e.svPaletteView,i.appendChild(this.svPaletteView_.element),n.appendChild(i);var r=t.createElement("div");r.classList.add(Qe("h")),this.hPaletteView_=e.hPaletteView,r.appendChild(this.hPaletteView_.element),n.appendChild(r),this.element.appendChild(n);var o=t.createElement("div");if(o.classList.add(Qe("rgb")),this.compTextsView_=e.componentTextsView,o.appendChild(this.compTextsView_.element),this.element.appendChild(o),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};var a=t.createElement("div");a.classList.add(Qe("a"));var s=t.createElement("div");s.classList.add(Qe("ap")),s.appendChild(this.alphaViews_.palette.element),a.appendChild(s);var l=t.createElement("div");l.classList.add(Qe("at")),l.appendChild(this.alphaViews_.text.element),a.appendChild(l),this.element.appendChild(a)}this.update()}return Object.defineProperty(t.prototype,"allFocusableElements",{get:function(){var t=i([this.svPaletteView_.element,this.hPaletteView_.element],this.compTextsView_.inputElements);return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),a(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.pickedColor.value},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.foldable.expanded?this.element.classList.add(Qe(void 0,"expanded")):this.element.classList.remove(Qe(void 0,"expanded"))},t.prototype.onValueChange_=function(){this.update()},t.prototype.onFoldableChange_=function(){this.update()},t}();function tn(t,e){var n=e.ownerDocument.defaultView,i=e.getBoundingClientRect();return[t.pageX-((n&&n.scrollX||0)+i.left),t.pageY-((n&&n.scrollY||0)+i.top)]}var en=function(){function t(t,e){this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.document=t,this.element=e,this.emitter=new v,this.pressed_=!1,I(this.document)?(e.addEventListener("touchstart",this.onTouchStart_),e.addEventListener("touchmove",this.onTouchMove_)):(e.addEventListener("mousedown",this.onMouseDown_),this.document.addEventListener("mousemove",this.onDocumentMouseMove_),this.document.addEventListener("mouseup",this.onDocumentMouseUp_))}return t.prototype.computePosition_=function(t,e){var n=this.element.getBoundingClientRect();return{px:t/n.width,py:e/n.height}},t.prototype.onMouseDown_=function(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus(),this.pressed_=!0,this.emitter.emit("down",{data:this.computePosition_.apply(this,tn(t,this.element)),sender:this})},t.prototype.onDocumentMouseMove_=function(t){this.pressed_&&this.emitter.emit("move",{data:this.computePosition_.apply(this,tn(t,this.element)),sender:this})},t.prototype.onDocumentMouseUp_=function(t){this.pressed_&&(this.pressed_=!1,this.emitter.emit("up",{data:this.computePosition_.apply(this,tn(t,this.element)),sender:this}))},t.prototype.onTouchStart_=function(t){t.preventDefault();var e=t.targetTouches[0],n=this.element.getBoundingClientRect();this.emitter.emit("down",{data:this.computePosition_(e.clientX-n.left,e.clientY-n.top),sender:this})},t.prototype.onTouchMove_=function(t){var e=t.targetTouches[0],n=this.element.getBoundingClientRect();this.emitter.emit("move",{data:this.computePosition_(e.clientX-n.left,e.clientY-n.top),sender:this})},t}();function nn(t){return t?.1:1}var rn=p("apl"),on=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(rn()),this.element.tabIndex=0;var n=t.createElement("div");n.classList.add(rn("b")),this.element.appendChild(n);var i=t.createElement("div");i.classList.add(rn("c")),n.appendChild(i),this.colorElem_=i;var r=t.createElement("div");r.classList.add(rn("m")),this.element.appendChild(r),this.markerElem_=r;var o=t.createElement("div");o.classList.add(rn("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update()}return t.prototype.update=function(){var t=this.value.rawValue,e=t.getComponents("rgb"),n=new ke([e[0],e[1],e[2],0],"rgb"),i=new ke([e[0],e[1],e[2],255],"rgb"),r=["to right",Ne(n),Ne(i)];this.colorElem_.style.background="linear-gradient("+r.join(",")+")",this.previewElem_.style.backgroundColor=Ne(t);var o=Bt(e[3],0,1,0,100);this.markerElem_.style.left=o+"%"},t.prototype.onValueChange_=function(){this.update()},t}(),an=function(){function t(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.view=new on(t,{value:this.value}),this.ptHandler_=new en(t,this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_)}return t.prototype.handlePointerEvent_=function(t){var e=t.px,n=this.value.rawValue.getComponents("hsv"),i=n[0],r=n[1],o=n[2];this.value.rawValue=new ke([i,r,o,e],"hsv"),this.view.update()},t.prototype.onPointerDown_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerMove_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerUp_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onKeyDown_=function(t){var e=Xe(nn(!0),Ye(t)),n=this.value.rawValue.getComponents("hsv"),i=n[0],r=n[1],o=n[2],a=n[3];this.value.rawValue=new ke([i,r,o,a+e],"hsv")},t}(),sn=p("cctxts"),ln=pe(0);function un(t){var e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(n.reduce((function(e,n){var i=t.createElement("option");return i.textContent=n.text,i.value=n.value,e.appendChild(i),e}),t.createDocumentFragment())),e}var dn=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(sn());var n=t.createElement("div");n.classList.add(sn("m")),this.modeElem_=un(t),this.modeElem_.classList.add(sn("ms")),n.appendChild(this.modeSelectElement);var i=t.createElement("div");i.classList.add(sn("mm")),n.appendChild(i),this.element.appendChild(n);var r=t.createElement("div");r.classList.add(sn("w")),this.element.appendChild(r);var o=[0,1,2].map((function(){var e=t.createElement("input");return e.classList.add(sn("i")),e.type="text",e}));o.forEach((function(t){r.appendChild(t)})),this.inputElems_=[o[0],o[1],o[2]],this.pickedColor=e.pickedColor,this.pickedColor.emitter.on("change",this.onValueChange_),this.update()}return Object.defineProperty(t.prototype,"modeSelectElement",{get:function(){return this.modeElem_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputElements",{get:function(){return this.inputElems_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.pickedColor.value},enumerable:!1,configurable:!0}),t.prototype.update=function(){var t=this;this.modeElem_.value=this.pickedColor.mode,this.pickedColor.value.rawValue.getComponents(this.pickedColor.mode).forEach((function(e,n){var i=t.inputElems_[n];i&&(i.value=ln(e))}))},t.prototype.onValueChange_=function(){this.update()},t}(),pn=function(){function t(t,e){var n=this;this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.parser_=e.parser,this.pickedColor=e.pickedColor,this.view=new dn(t,{pickedColor:this.pickedColor}),this.view.inputElements.forEach((function(t){t.addEventListener("change",n.onInputChange_),t.addEventListener("keydown",n.onInputKeyDown_)})),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}return Object.defineProperty(t.prototype,"value",{get:function(){return this.pickedColor.value},enumerable:!1,configurable:!0}),t.prototype.findIndexOfInputElem_=function(t){for(var e=this.view.inputElements,n=0;n<e.length;n++)if(e[n]===t)return n;return null},t.prototype.updateComponent_=function(t,e){var n=this.pickedColor.mode,i=this.value.rawValue.getComponents(n).map((function(n,i){return i===t?e:n}));this.value.rawValue=new ke(i,n),this.view.update()},t.prototype.onInputChange_=function(t){var e=a(t.currentTarget),n=this.parser_(e.value);if(!s(n)){var i=this.findIndexOfInputElem_(e);s(i)||this.updateComponent_(i,n)}},t.prototype.onInputKeyDown_=function(t){var e=this.findIndexOfInputElem_(t.currentTarget),n=Xe(nn(3===e),qe(t));if(0!==n){var i=a(t.currentTarget),r=this.parser_(i.value);s(r)||s(e)||this.updateComponent_(e,r+n)}},t.prototype.onModeSelectChange_=function(t){var e=t.currentTarget;this.pickedColor.mode=e.value},t}(),hn=p("hpl"),cn=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(hn()),this.element.tabIndex=0;var n=t.createElement("div");n.classList.add(hn("c")),this.element.appendChild(n);var i=t.createElement("div");i.classList.add(hn("m")),this.element.appendChild(i),this.markerElem_=i,this.update()}return t.prototype.update=function(){var t=this.value.rawValue.getComponents("hsv")[0];this.markerElem_.style.backgroundColor=De(new ke([t,100,100],"hsv"));var e=Bt(t,0,360,0,100);this.markerElem_.style.left=e+"%"},t.prototype.onValueChange_=function(){this.update()},t}(),fn=function(){function t(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.view=new cn(t,{value:this.value}),this.ptHandler_=new en(t,this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_)}return t.prototype.handlePointerEvent_=function(t){var e=Bt(t.px,0,1,0,360),n=this.value.rawValue.getComponents("hsv"),i=n[1],r=n[2],o=n[3];this.value.rawValue=new ke([e,i,r,o],"hsv"),this.view.update()},t.prototype.onPointerDown_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerMove_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerUp_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onKeyDown_=function(t){var e=Xe(nn(!1),Ye(t)),n=this.value.rawValue.getComponents("hsv"),i=n[0],r=n[1],o=n[2],a=n[3];this.value.rawValue=new ke([i+e,r,o,a],"hsv")},t}(),vn=p("svp"),mn=64,gn=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(vn()),this.element.tabIndex=0;var n=t.createElement("canvas");n.height=mn,n.width=mn,n.classList.add(vn("c")),this.element.appendChild(n),this.canvasElement=n;var i=t.createElement("div");i.classList.add(vn("m")),this.element.appendChild(i),this.markerElem_=i,this.update()}return t.prototype.update=function(){var t=F(this.canvasElement);if(t){for(var e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,i=this.canvasElement.height,r=t.getImageData(0,0,n,i),o=r.data,a=0;a<i;a++)for(var s=0;s<n;s++){var l=Bt(s,0,n,0,100),u=Bt(a,0,i,100,0),d=ge(e[0],l,u),p=4*(a*n+s);o[p]=d[0],o[p+1]=d[1],o[p+2]=d[2],o[p+3]=255}t.putImageData(r,0,0);var h=Bt(e[1],0,100,0,100);this.markerElem_.style.left=h+"%";var c=Bt(e[2],0,100,100,0);this.markerElem_.style.top=c+"%"}},t.prototype.onValueChange_=function(){this.update()},t}(),bn=function(){function t(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.view=new gn(t,{value:this.value}),this.ptHandler_=new en(t,this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_)}return t.prototype.handlePointerEvent_=function(t){var e=Bt(t.px,0,1,0,100),n=Bt(t.py,0,1,100,0),i=this.value.rawValue.getComponents("hsv"),r=i[0],o=i[3];this.value.rawValue=new ke([r,e,n,o],"hsv"),this.view.update()},t.prototype.onPointerDown_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerMove_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerUp_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onKeyDown_=function(t){We(t.keyCode)&&t.preventDefault();var e=this.value.rawValue.getComponents("hsv"),n=e[0],i=e[1],r=e[2],o=e[3],a=nn(!1);this.value.rawValue=new ke([n,i+Xe(a,Ye(t)),r+Xe(a,qe(t)),o],"hsv")},t}(),_n=function(){function t(t,e){var n=this;this.triggerElement=null,this.onFocusableElementBlur_=this.onFocusableElementBlur_.bind(this),this.onKeyDown_=this.onKeyDown_.bind(this),this.pickedColor=e.pickedColor,this.foldable=new He,this.hPaletteIc_=new fn(t,{value:this.pickedColor.value}),this.svPaletteIc_=new bn(t,{value:this.pickedColor.value}),this.alphaIcs_=e.supportsAlpha?{palette:new an(t,{value:this.pickedColor.value}),text:new Ze(t,{formatter:pe(2),parser:le,baseStep:.1,value:new rt(0)})}:null,this.alphaIcs_&&Ke({primary:this.pickedColor.value,secondary:this.alphaIcs_.text.value,forward:function(t){return t.rawValue.getComponents()[3]},backward:function(t,e){var n=t.rawValue.getComponents();return n[3]=e.rawValue,new ke(n,t.rawValue.mode)}}),this.compTextsIc_=new pn(t,{parser:le,pickedColor:this.pickedColor}),this.view=new Je(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,componentTextsView:this.compTextsIc_.view,foldable:this.foldable,hPaletteView:this.hPaletteIc_.view,pickedColor:this.pickedColor,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteIc_.view}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.allFocusableElements.forEach((function(t){t.addEventListener("blur",n.onFocusableElementBlur_)}))}return Object.defineProperty(t.prototype,"value",{get:function(){return this.pickedColor.value},enumerable:!1,configurable:!0}),t.prototype.onFocusableElementBlur_=function(t){var e=this.view.element,n=B(t);n&&e.contains(n)||n&&n===this.triggerElement&&!I(e.ownerDocument)||(this.foldable.expanded=!1)},t.prototype.onKeyDown_=function(t){27===t.keyCode&&(this.foldable.expanded=!1)},t}(),xn=function(){function t(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.value=e.value,this.pickerIc_=new _n(t,{pickedColor:new se(this.value),supportsAlpha:e.supportsAlpha}),this.view=new ze(t,{pickerView:this.pickerIc_.view,value:this.value}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.pickerIc_.triggerElement=this.view.buttonElement}return t.prototype.onButtonBlur_=function(t){var e=this.view.element,n=a(t.relatedTarget);n&&e.contains(n)||(this.pickerIc_.foldable.expanded=!1)},t.prototype.onButtonClick_=function(){this.pickerIc_.foldable.expanded=!this.pickerIc_.foldable.expanded,this.pickerIc_.foldable.expanded&&this.pickerIc_.view.allFocusableElements[0].focus()},t}(),wn=function(){function t(t,e){this.value=e.value,this.swatchIc_=new xn(t,{supportsAlpha:e.supportsAlpha,value:this.value}),this.textIc_=new re(t,{formatter:e.formatter,parser:e.parser,value:this.value}),this.view=new ae(t,{swatchView:this.swatchIc_.view,textView:this.textIc_.view})}return t}();function yn(t){return ke.isColorObject(t)?ke.fromObject(t):ke.black()}function En(t){return be(t.getComponents("rgb")).reduce((function(t,e){return t<<8|255&Math.floor(e)}),0)}function kn(t){return t.getComponents("rgb").reduce((function(t,e,n){return t<<8|255&Math.floor(3===n?255*e:e)}),0)>>>0}function Cn(t){return new ke([t>>16&255,t>>8&255,255&t],"rgb")}function Vn(t){return new ke([t>>24&255,t>>16&255,t>>8&255,Bt(255&t,0,255,0,1)],"rgb")}function Pn(t){return"number"!=typeof t?ke.black():Cn(t)}function An(t){return"number"!=typeof t?ke.black():Vn(t)}function Ln(t){var e=$e(t);return function(t,n){Dt(t,e(n))}}function In(t){var e=t?kn:En;return function(t,n){Dt(t,e(n))}}function Tn(t,e){var n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b),t.writeProperty("a",n.a)}function Rn(t,e){var n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b)}function Mn(t){return t?Tn:Rn}function Fn(t){return"input"in t&&"color.rgba"===t.input}var Sn={id:"input-color-number",binding:{accept:function(t,e){return"number"!=typeof t?null:"input"in e?"color"!==e.input&&"color.rgb"!==e.input&&"color.rgba"!==e.input?null:t:null},reader:function(t){return Fn(t.params)?An:Pn},writer:function(t){return In(Fn(t.params))},equals:ke.equals},controller:function(t){var e=Fn(t.params),n=e?Se:Fe;return new wn(t.document,{formatter:n,parser:Ie,supportsAlpha:e,value:t.binding.value})}};function Dn(t){return ke.isRgbaColorObject(t)}var Nn={id:"input-color-object",binding:{accept:function(t,e){return ke.isColorObject(t)?t:null},reader:function(t){return yn},writer:function(t){return Mn(Dn(t.initialValue))},equals:ke.equals},controller:function(t){var e=ke.isRgbaColorObject(t.initialValue),n=e?Se:Fe;return new wn(t.document,{formatter:n,parser:Ie,supportsAlpha:e,value:t.binding.value})}},Bn={id:"input-color-string",binding:{accept:function(t,e){return"string"!=typeof t||"input"in e&&"string"===e.input?null:Le(t)?t:null},reader:function(t){return Re},writer:function(t){var e=Le(t.initialValue);if(!e)throw nt.shouldNeverHappen();return Ln(e)},equals:ke.equals},controller:function(t){var e=Le(t.initialValue);if(!e)throw nt.shouldNeverHappen();var n=$e(e);return new wn(t.document,{formatter:n,parser:Ie,supportsAlpha:Te(e),value:t.binding.value})}},On=function(){function t(t){this.maxValue=t.max,this.minValue=t.min}return t.prototype.constrain=function(t){var e=t;return s(this.minValue)||(e=Math.max(e,this.minValue)),s(this.maxValue)||(e=Math.min(e,this.maxValue)),e},t}(),Un=p("sldtxt"),$n=function(){function t(t,e){this.element=t.createElement("div"),this.element.classList.add(Un());var n=t.createElement("div");n.classList.add(Un("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);var i=t.createElement("div");i.classList.add(Un("t")),this.textView_=e.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}return Object.defineProperty(t.prototype,"value",{get:function(){return this.sliderView_.value},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.sliderView_.update(),this.textView_.update()},t}(),jn=p("sld"),zn=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.minValue_=e.minValue,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(jn());var n=t.createElement("div");n.classList.add(jn("o")),n.tabIndex=0,this.element.appendChild(n),this.outerElement=n;var i=t.createElement("div");i.classList.add(jn("i")),this.outerElement.appendChild(i),this.innerElement=i,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update()}return t.prototype.update=function(){var t=Ut(Bt(this.value.rawValue,this.minValue_,this.maxValue_,0,100),0,100);this.innerElement.style.width=t+"%"},t.prototype.onValueChange_=function(){this.update()},t}();function Hn(t){var e=t.constraint?Tt(t.constraint,On):null;return e?[e.minValue,e.maxValue]:[void 0,void 0]}function Kn(t){var e=Hn(t),n=e[0],i=e[1];return[null!=n?n:0,null!=i?i:100]}var Xn=function(){function t(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.baseStep_=e.baseStep;var n=Kn(this.value),i=n[0],r=n[1];this.minValue_=i,this.maxValue_=r,this.view=new zn(t,{maxValue:this.maxValue_,minValue:this.minValue_,value:this.value}),this.ptHandler_=new en(t,this.view.outerElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.outerElement.addEventListener("keydown",this.onKeyDown_)}return t.prototype.handlePointerEvent_=function(t){this.value.rawValue=Bt(t.px,0,1,this.minValue_,this.maxValue_)},t.prototype.onPointerDown_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerMove_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerUp_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onKeyDown_=function(t){this.value.rawValue+=Xe(this.baseStep_,Ye(t))},t}(),qn=function(){function t(t,e){this.value=e.value,this.sliderIc_=new Xn(t,{baseStep:e.baseStep,value:e.value}),this.textIc_=new Ze(t,{baseStep:e.baseStep,formatter:e.formatter,parser:e.parser,value:e.value}),this.view=new $n(t,{sliderView:this.sliderIc_.view,textView:this.textIc_.view})}return t}();function Yn(t){var e=[];return"step"in t&&!s(t.step)&&e.push(new Nt({step:t.step})),("max"in t&&!s(t.max)||"min"in t&&!s(t.min))&&e.push(new On({max:t.max,min:t.min})),"options"in t&&void 0!==t.options&&e.push(new Rt({options:jt(t.options,ue)})),new It({constraints:e})}function Gn(t,e){var n,i=e.constraint;return i&&Tt(i,Rt)?new Gt(t,{listItems:null!==(n=zt(i))&&void 0!==n?n:[],stringifyValue:de,value:e}):i&&Tt(i,On)?new qn(t,{baseStep:Xt(i),formatter:pe(Kt(e.constraint,e.rawValue)),parser:le,value:e}):new Ze(t,{baseStep:Xt(i),formatter:pe(Kt(e.constraint,e.rawValue)),parser:le,value:e})}var Wn={id:"input-number",binding:{accept:function(t){return"number"==typeof t?t:null},constraint:function(t){return Yn(t.params)},reader:function(t){return ue},writer:function(t){return Dt}},controller:function(t){return Gn(t.document,t.binding.value)}},Zn=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.getComponents=function(){return[this.x,this.y]},t.isObject=function(t){if(s(t))return!1;var e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n},t.equals=function(t,e){return t.x===e.x&&t.y===e.y},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t}(),Qn=function(){function t(t){this.x=t.x,this.y=t.y}return t.prototype.constrain=function(t){return new Zn(this.x?this.x.constrain(t.x):t.x,this.y?this.y.constrain(t.y):t.y)},t}(),Jn=p("p2dpadtxt"),ti=function(){function t(t,e){this.element=t.createElement("div"),this.element.classList.add(Jn());var n=t.createElement("div");n.classList.add(Jn("w")),this.element.appendChild(n);var i=t.createElement("button");i.classList.add(Jn("b")),i.appendChild(D(t,"p2dpad")),n.appendChild(i),this.padButtonElem_=i;var r=t.createElement("div");r.classList.add(Jn("p")),n.appendChild(r),this.padView_=e.padView,r.appendChild(this.padView_.element);var o=t.createElement("div");o.classList.add(Jn("t")),this.textView_=e.textView,o.appendChild(this.textView_.element),this.element.appendChild(o)}return Object.defineProperty(t.prototype,"value",{get:function(){return this.textView_.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padButtonElement",{get:function(){return this.padButtonElem_},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.padView_.update(),this.textView_.update()},t}(),ei=p("p2dpad"),ni=function(){function t(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.foldable=e.foldable,this.foldable.emitter.on("change",this.onFoldableChange_),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(ei());var n=t.createElement("div");n.tabIndex=0,n.classList.add(ei("p")),this.element.appendChild(n),this.padElement=n;var i=t.createElementNS(P,"svg");i.classList.add(ei("g")),this.padElement.appendChild(i),this.svgElem_=i;var r=t.createElementNS(P,"line");r.classList.add(ei("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);var o=t.createElementNS(P,"line");o.classList.add(ei("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);var a=t.createElementNS(P,"line");a.classList.add(ei("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;var s=t.createElementNS(P,"circle");s.classList.add(ei("m")),s.setAttributeNS(null,"r","2px"),this.svgElem_.appendChild(s),this.markerElem_=s,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update()}return Object.defineProperty(t.prototype,"allFocusableElements",{get:function(){return[this.padElement]},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.foldable.expanded?this.element.classList.add(ei(void 0,"expanded")):this.element.classList.remove(ei(void 0,"expanded"));var t=this.value.rawValue.getComponents(),e=t[0],n=t[1],i=this.maxValue_,r=Bt(e,-i,+i,0,100),o=Bt(n,-i,+i,0,100),a=this.invertsY_?100-o:o;this.lineElem_.setAttributeNS(null,"x2",r+"%"),this.lineElem_.setAttributeNS(null,"y2",a+"%"),this.markerElem_.setAttributeNS(null,"cx",r+"%"),this.markerElem_.setAttributeNS(null,"cy",a+"%")},t.prototype.onValueChange_=function(){this.update()},t.prototype.onFoldableChange_=function(){this.update()},t}(),ii=function(){function t(t,e){var n=this;this.triggerElement=null,this.onFocusableElementBlur_=this.onFocusableElementBlur_.bind(this),this.onKeyDown_=this.onKeyDown_.bind(this),this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.foldable=new He,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new ni(t,{foldable:this.foldable,invertsY:this.invertsY_,maxValue:this.maxValue_,value:this.value}),this.ptHandler_=new en(t,this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.allFocusableElements.forEach((function(t){t.addEventListener("blur",n.onFocusableElementBlur_)}))}return t.prototype.handlePointerEvent_=function(t){var e=this.maxValue_,n=Bt(t.px,0,1,-e,+e),i=Bt(this.invertsY_?1-t.py:t.py,0,1,-e,+e);this.value.rawValue=new Zn(n,i),this.view.update()},t.prototype.onPointerDown_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerMove_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerUp_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPadKeyDown_=function(t){We(t.keyCode)&&t.preventDefault(),this.value.rawValue=new Zn(this.value.rawValue.x+Xe(this.baseSteps_[0],Ye(t)),this.value.rawValue.y+Xe(this.baseSteps_[1],qe(t))*(this.invertsY_?1:-1))},t.prototype.onFocusableElementBlur_=function(t){var e=this.view.element,n=B(t);n&&e.contains(n)||n&&n===this.triggerElement&&!I(e.ownerDocument)||(this.foldable.expanded=!1)},t.prototype.onKeyDown_=function(t){27===t.keyCode&&(this.foldable.expanded=!1)},t}(),ri=p("p2dtxt"),oi=function(){function t(t,e){var n=this;this.onValueChange_=this.onValueChange_.bind(this),this.formatters_=e.formatters,this.element=t.createElement("div"),this.element.classList.add(ri());var i=[0,1].map((function(){var e=t.createElement("input");return e.classList.add(ri("i")),e.type="text",e}));[0,1].forEach((function(e,r){var o=t.createElement("div");o.classList.add(ri("w")),o.appendChild(i[r]),n.element.appendChild(o)})),this.inputElems_=[i[0],i[1]],e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update()}return Object.defineProperty(t.prototype,"inputElements",{get:function(){return this.inputElems_},enumerable:!1,configurable:!0}),t.prototype.update=function(){var t=this;this.value.rawValue.getComponents().forEach((function(e,n){t.inputElems_[n].value=t.formatters_[n](e)}))},t.prototype.onValueChange_=function(){this.update()},t}(),ai=function(){function t(t,e){var n=this;this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.parser_=e.parser,this.value=e.value,this.baseSteps_=[e.axes[0].baseStep,e.axes[1].baseStep],this.view=new oi(t,{formatters:[e.axes[0].formatter,e.axes[1].formatter],value:this.value}),this.view.inputElements.forEach((function(t){t.addEventListener("change",n.onInputChange_),t.addEventListener("keydown",n.onInputKeyDown_)}))}return t.prototype.findIndexOfInputElem_=function(t){for(var e=this.view.inputElements,n=0;n<e.length;n++)if(e[n]===t)return n;return null},t.prototype.updateComponent_=function(t,e){var n=this.value.rawValue.getComponents().map((function(n,i){return i===t?e:n}));this.value.rawValue=new Zn(n[0],n[1]),this.view.update()},t.prototype.onInputChange_=function(t){var e=a(t.currentTarget),n=this.parser_(e.value);if(!s(n)){var i=this.findIndexOfInputElem_(e);s(i)||this.updateComponent_(i,n)}},t.prototype.onInputKeyDown_=function(t){var e=a(t.currentTarget),n=this.parser_(e.value);if(!s(n)){var i=this.findIndexOfInputElem_(e);if(!s(i)){var r=Xe(this.baseSteps_[i],qe(t));0!==r&&this.updateComponent_(i,n+r)}}},t}(),si=function(){function t(t,e){this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.padIc_=new ii(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,maxValue:e.maxValue,value:this.value}),this.textIc_=new ai(t,{axes:e.axes,parser:e.parser,value:this.value}),this.view=new ti(t,{padView:this.padIc_.view,textView:this.textIc_.view}),this.view.padButtonElement.addEventListener("blur",this.onPadButtonBlur_),this.view.padButtonElement.addEventListener("click",this.onPadButtonClick_),this.padIc_.triggerElement=this.view.padButtonElement}return t.prototype.onPadButtonBlur_=function(t){var e=this.view.element,n=a(t.relatedTarget);n&&e.contains(n)||(this.padIc_.foldable.expanded=!1)},t.prototype.onPadButtonClick_=function(){this.padIc_.foldable.expanded=!this.padIc_.foldable.expanded,this.padIc_.foldable.expanded&&this.padIc_.view.allFocusableElements[0].focus()},t}();function li(t){return Zn.isObject(t)?new Zn(t.x,t.y):new Zn}function ui(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function di(t){if(t){var e=[];return s(t.step)||e.push(new Nt({step:t.step})),s(t.max)&&s(t.min)||e.push(new On({max:t.max,min:t.min})),new It({constraints:e})}}function pi(t){return new Qn({x:di("x"in t?t.x:void 0),y:di("y"in t?t.y:void 0)})}function hi(t,e){var n=t&&Tt(t,On);if(n)return Math.max(Math.abs(n.minValue||0),Math.abs(n.maxValue||0));var i=Xt(t);return Math.max(10*Math.abs(i),10*Math.abs(e))}function ci(t,e){var n=e instanceof Qn?e.x:void 0,i=e instanceof Qn?e.y:void 0,r=hi(n,t.x),o=hi(i,t.y);return Math.max(r,o)}function fi(t,e,n){var i=e.constraint;if(!(i instanceof Qn))throw nt.shouldNeverHappen();return new si(t,{axes:[{baseStep:Xt(i.x),formatter:pe(Kt(i.x,e.rawValue.x))},{baseStep:Xt(i.y),formatter:pe(Kt(i.y,e.rawValue.y))}],invertsY:n,maxValue:ci(e.rawValue,e.constraint),parser:le,value:e})}function vi(t){if(!("y"in t))return!1;var e=t.y;return!!e&&"inverted"in e&&!!e.inverted}var mi={id:"input-point2d",binding:{accept:function(t,e){return Zn.isObject(t)?t:null},reader:function(t){return li},writer:function(t){return ui},constraint:function(t){return pi(t.params)},equals:Zn.equals},controller:function(t){return fi(t.document,t.binding.value,vi(t.params))}},gi=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}return t.prototype.getComponents=function(){return[this.x,this.y,this.z]},t.isObject=function(t){if(s(t))return!1;var e=t.x,n=t.y,i=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i},t.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z},t.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z}},t}(),bi=function(){function t(t){this.x=t.x,this.y=t.y,this.z=t.z}return t.prototype.constrain=function(t){return new gi(this.x?this.x.constrain(t.x):t.x,this.y?this.y.constrain(t.y):t.y,this.z?this.z.constrain(t.z):t.z)},t}(),_i=p("p3dtxt"),xi=function(){function t(t,e){var n=this;this.onValueChange_=this.onValueChange_.bind(this),this.formatters_=e.formatters,this.element=t.createElement("div"),this.element.classList.add(_i());var i=[0,1,2].map((function(){var e=t.createElement("input");return e.classList.add(_i("i")),e.type="text",e}));[0,1,2].forEach((function(e,r){var o=t.createElement("div");o.classList.add(_i("w")),o.appendChild(i[r]),n.element.appendChild(o)})),this.inputElems_=[i[0],i[1],i[2]],e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update()}return Object.defineProperty(t.prototype,"inputElements",{get:function(){return this.inputElems_},enumerable:!1,configurable:!0}),t.prototype.update=function(){var t=this;this.value.rawValue.getComponents().forEach((function(e,n){t.inputElems_[n].value=t.formatters_[n](e)}))},t.prototype.onValueChange_=function(){this.update()},t}(),wi=function(){function t(t,e){var n=this;this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.parser_=e.parser,this.value=e.value;var i=e.axes;this.baseSteps_=[i[0].baseStep,i[1].baseStep,i[2].baseStep],this.view=new xi(t,{formatters:[i[0].formatter,i[1].formatter,i[2].formatter],value:this.value}),this.view.inputElements.forEach((function(t){t.addEventListener("change",n.onInputChange_),t.addEventListener("keydown",n.onInputKeyDown_)}))}return t.prototype.findIndexOfInputElem_=function(t){for(var e=this.view.inputElements,n=0;n<e.length;n++)if(e[n]===t)return n;return null},t.prototype.updateComponent_=function(t,e){var n=this.value.rawValue.getComponents().map((function(n,i){return i===t?e:n}));this.value.rawValue=new gi(n[0],n[1],n[2]),this.view.update()},t.prototype.onInputChange_=function(t){var e=a(t.currentTarget),n=this.parser_(e.value);if(!s(n)){var i=this.findIndexOfInputElem_(e);s(i)||this.updateComponent_(i,n)}},t.prototype.onInputKeyDown_=function(t){var e=a(t.currentTarget),n=this.parser_(e.value);if(!s(n)){var i=this.findIndexOfInputElem_(e);if(!s(i)){var r=Xe(this.baseSteps_[i],qe(t));0!==r&&this.updateComponent_(i,n+r)}}},t}();function yi(t){return gi.isObject(t)?new gi(t.x,t.y,t.z):new gi}function Ei(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function ki(t){if(t){var e=[];return s(t.step)||e.push(new Nt({step:t.step})),s(t.max)&&s(t.min)||e.push(new On({max:t.max,min:t.min})),new It({constraints:e})}}function Ci(t){return new bi({x:ki("x"in t?t.x:void 0),y:ki("y"in t?t.y:void 0),z:ki("z"in t?t.z:void 0)})}function Vi(t,e){return{baseStep:Xt(e),formatter:pe(Kt(e,t))}}function Pi(t,e){var n=e.constraint;if(!(n instanceof bi))throw nt.shouldNeverHappen();return new wi(t,{axes:[Vi(e.rawValue.x,n.x),Vi(e.rawValue.y,n.y),Vi(e.rawValue.z,n.z)],parser:le,value:e})}var Ai={id:"input-point3d",binding:{accept:function(t,e){return gi.isObject(t)?t:null},reader:function(t){return yi},writer:function(t){return Ei},constraint:function(t){return Ci(t.params)},equals:gi.equals},controller:function(t){return Pi(t.document,t.binding.value)}};function Li(t){return String(t)}function Ii(t){return t}function Ti(t){var e=[];return"options"in t&&void 0!==t.options&&e.push(new Rt({options:jt(t.options,Li)})),new It({constraints:e})}function Ri(t,e){var n,i=e.constraint;return i&&Tt(i,Rt)?new Gt(t,{listItems:null!==(n=zt(i))&&void 0!==n?n:[],stringifyValue:function(t){return t},value:e}):new re(t,{formatter:Ii,parser:function(t){return t},value:e})}var Mi={id:"input-string",binding:{accept:function(t,e){return"string"==typeof t?t:null},constraint:function(t){return Ti(t.params)},reader:function(t){return Li},writer:function(t){return Dt}},controller:function(t){return Ri(t.document,t.binding.value)}},Fi=p("mll"),Si=function(){function t(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(Fi());var n=t.createElement("textarea");n.classList.add(Fi("i")),n.style.height="calc(var(--unit-size) * "+e.lineCount+")",n.readOnly=!0,this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update()}return t.prototype.update=function(){var t=this,e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight;e.textContent=this.value.rawValue.map((function(e){return void 0!==e?t.formatter_(e):""})).join("\n"),n&&(e.scrollTop=e.scrollHeight)},t.prototype.onValueUpdate_=function(){this.update()},t}(),Di=function(){function t(t,e){this.value=e.value,this.view=new Si(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value})}return t}(),Ni=p("sgl"),Bi=function(){function t(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(Ni());var n=t.createElement("input");n.classList.add(Ni("i")),n.readOnly=!0,n.type="text",this.element.appendChild(n),this.inputElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update()}return t.prototype.update=function(){var t=this.value.rawValue,e=t[t.length-1];this.inputElem_.value=void 0!==e?this.formatter_(e):""},t.prototype.onValueUpdate_=function(){this.update()},t}(),Oi=function(){function t(t,e){this.value=e.value,this.view=new Bi(t,{formatter:e.formatter,value:this.value})}return t}(),Ui={id:"monitor-bool",binding:{accept:function(t,e){return"boolean"==typeof t?t:null},reader:function(t){return Ft}},controller:function(t){var e;return 1===t.binding.value.rawValue.length?new Oi(t.document,{formatter:St,value:t.binding.value}):new Di(t.document,{formatter:St,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:lt.monitor.defaultLineCount,value:t.binding.value})}},$i=function(){function t(){this.emitter=new v,this.index_=-1}return Object.defineProperty(t.prototype,"index",{get:function(){return this.index_},set:function(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))},enumerable:!1,configurable:!0}),t}(),ji=p("grl"),zi=function(){function t(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ji()),this.formatter_=e.formatter,this.minValue_=e.minValue,this.maxValue_=e.maxValue,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);var n=t.createElementNS(P,"svg");n.classList.add(ji("g")),n.style.height="calc(var(--unit-size) * "+e.lineCount+")",this.element.appendChild(n),this.svgElem_=n;var i=t.createElementNS(P,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;var r=t.createElement("div");r.classList.add(ji("t")),this.element.appendChild(r),this.tooltipElem_=r,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update()}return Object.defineProperty(t.prototype,"graphElement",{get:function(){return this.svgElem_},enumerable:!1,configurable:!0}),t.prototype.update=function(){var t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.minValue_,i=this.maxValue_,r=[];this.value.rawValue.forEach((function(o,a){if(void 0!==o){var s=Bt(a,0,e,0,t.width),l=Bt(o,n,i,t.height,0);r.push([s,l].join(","))}})),this.lineElem_.setAttributeNS(null,"points",r.join(" "));var o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.index];if(void 0!==a){o.classList.add(ji("t","valid"));var s=Bt(this.cursor_.index,0,e,0,t.width),l=Bt(a,n,i,t.height,0);o.style.left=s+"px",o.style.top=l+"px",o.textContent=""+this.formatter_(a)}else o.classList.remove(ji("t","valid"))},t.prototype.onValueUpdate_=function(){this.update()},t.prototype.onCursorChange_=function(){this.update()},t}(),Hi=function(){function t(t,e){this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.value=e.value,this.cursor_=new $i,this.view=new zi(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value}),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_),this.view.element.addEventListener("mousemove",this.onGraphMouseMove_)}return t.prototype.onGraphMouseLeave_=function(){this.cursor_.index=-1},t.prototype.onGraphMouseMove_=function(t){var e=this.view.graphElement.getBoundingClientRect(),n=t.offsetX;this.cursor_.index=Math.floor(Bt(n,0,e.width,0,this.value.rawValue.length))},t}();function Ki(){return pe(2)}function Xi(t,e,n){var i;return 1===e.value.rawValue.length?new Oi(t,{formatter:Ki(),value:e.value}):new Di(t,{formatter:Ki(),lineCount:null!==(i=n.lineCount)&&void 0!==i?i:lt.monitor.defaultLineCount,value:e.value})}function qi(t){var e,n,i,r=t.document,o=t.binding,a=t.params;return new Hi(r,{formatter:Ki(),lineCount:null!==(e=a.lineCount)&&void 0!==e?e:lt.monitor.defaultLineCount,maxValue:null!==(n="max"in a?a.max:null)&&void 0!==n?n:100,minValue:null!==(i="min"in a?a.min:null)&&void 0!==i?i:0,value:o.value})}function Yi(t){return"view"in t&&"graph"===t.view}var Gi={id:"monitor-number",binding:{accept:function(t,e){return"number"==typeof t?t:null},defaultBufferSize:function(t){return Yi(t)?64:1},reader:function(t){return ue}},controller:function(t){return Yi(t.params)?qi({document:t.document,binding:t.binding,params:t.params}):Xi(t.document,t.binding,t.params)}},Wi={id:"monitor-string",binding:{accept:function(t,e){return"string"==typeof t?t:null},reader:function(t){return Li}},controller:function(t){var e,n=t.binding.value;return n.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new Di(t.document,{formatter:Ii,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:lt.monitor.defaultLineCount,value:n}):new Oi(t.document,{formatter:Ii,value:n})}};function Zi(t){var e=t.createElement("div");return e.classList.add(p("dfw")()),t.body&&t.body.appendChild(e),e}function Qi(t,e,n){if(!t.querySelector("style[data-tp-style="+e+"]")){var i=t.createElement("style");i.dataset.tpStyle=e,i.textContent=n,t.head.appendChild(i)}}function Ji(t){Qi(t,"default",".tp-btnv_b,.tp-lstv_s,.tp-p2dpadtxtv_b,.tp-fldv_t,.tp-rotv_t,.tp-cctxtsv_i,.tp-cswv_sw,.tp-p2dpadv_p,.tp-p2dtxtv_i,.tp-p3dtxtv_i,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-ckbv_i,.tp-cctxtsv_ms{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-btnv_b,.tp-lstv_s,.tp-p2dpadtxtv_b{background-color:var(--button-background-color);border-radius:2px;color:var(--button-foreground-color);cursor:pointer;display:block;font-weight:bold;height:var(--unit-size);line-height:var(--unit-size);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-btnv_b:hover,.tp-lstv_s:hover,.tp-p2dpadtxtv_b:hover{background-color:var(--button-background-color-hover)}.tp-btnv_b:focus,.tp-lstv_s:focus,.tp-p2dpadtxtv_b:focus{background-color:var(--button-background-color-focus)}.tp-btnv_b:active,.tp-lstv_s:active,.tp-p2dpadtxtv_b:active{background-color:var(--button-background-color-active)}.tp-fldv_t,.tp-rotv_t{background-color:var(--folder-background-color);color:var(--folder-foreground-color);cursor:pointer;display:block;height:calc(var(--unit-size) + 4px);line-height:calc(var(--unit-size) + 4px);overflow:hidden;padding-left:28px;position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_t:hover,.tp-rotv_t:hover{background-color:var(--folder-background-color-hover)}.tp-fldv_t:focus,.tp-rotv_t:focus{background-color:var(--folder-background-color-focus)}.tp-fldv_t:active,.tp-rotv_t:active{background-color:var(--folder-background-color-active)}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--folder-foreground-color), var(--folder-foreground-color) 2px, transparent 2px, transparent 4px, var(--folder-foreground-color) 4px);border-radius:2px;bottom:0;content:'';display:block;height:6px;left:13px;margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_t>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv_c>.tp-fldv.tp-v-first,.tp-rotv_c>.tp-fldv.tp-v-first{margin-top:-4px}.tp-fldv_c>.tp-fldv.tp-v-last,.tp-rotv_c>.tp-fldv.tp-v-last{margin-bottom:-4px}.tp-fldv_c>*:not(.tp-v-first),.tp-rotv_c>*:not(.tp-v-first){margin-top:4px}.tp-fldv_c>.tp-fldv:not(.tp-v-hidden)+.tp-fldv,.tp-rotv_c>.tp-fldv:not(.tp-v-hidden)+.tp-fldv{margin-top:0}.tp-fldv_c>.tp-sptv:not(.tp-v-hidden)+.tp-sptv,.tp-rotv_c>.tp-sptv:not(.tp-v-hidden)+.tp-sptv{margin-top:0}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:4px;padding-top:4px;transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-cctxtsv_i,.tp-cswv_sw,.tp-p2dpadv_p,.tp-p2dtxtv_i,.tp-p3dtxtv_i,.tp-txtv_i{background-color:var(--input-background-color);border-radius:2px;box-sizing:border-box;color:var(--input-foreground-color);font-family:inherit;height:var(--unit-size);line-height:var(--unit-size);min-width:0;width:100%}.tp-cctxtsv_i:hover,.tp-cswv_sw:hover,.tp-p2dpadv_p:hover,.tp-p2dtxtv_i:hover,.tp-p3dtxtv_i:hover,.tp-txtv_i:hover{background-color:var(--input-background-color-hover)}.tp-cctxtsv_i:focus,.tp-cswv_sw:focus,.tp-p2dpadv_p:focus,.tp-p2dtxtv_i:focus,.tp-p3dtxtv_i:focus,.tp-txtv_i:focus{background-color:var(--input-background-color-focus)}.tp-cctxtsv_i:active,.tp-cswv_sw:active,.tp-p2dpadv_p:active,.tp-p2dtxtv_i:active,.tp-p3dtxtv_i:active,.tp-txtv_i:active{background-color:var(--input-background-color-active)}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--monitor-background-color);border-radius:2px;box-sizing:border-box;color:var(--monitor-foreground-color);height:var(--unit-size);width:100%}.tp-btnv{padding:0 4px}.tp-btnv_b{width:100%}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_m{background-color:var(--input-background-color);border-radius:2px;cursor:pointer;display:block;height:var(--unit-size);position:relative;width:var(--unit-size)}.tp-ckbv_m::before{background-color:var(--input-foreground-color);border-radius:2px;bottom:4px;content:'';display:block;left:4px;opacity:0;position:absolute;right:4px;top:4px}.tp-ckbv_i:hover+.tp-ckbv_m{background-color:var(--input-background-color-hover)}.tp-ckbv_i:focus+.tp-ckbv_m{background-color:var(--input-background-color-focus)}.tp-ckbv_i:active+.tp-ckbv_m{background-color:var(--input-background-color-active)}.tp-ckbv_i:checked+.tp-ckbv_m::before{opacity:1}.tp-cctxtsv{display:flex;width:100%}.tp-cctxtsv_m{margin-right:4px;position:relative}.tp-cctxtsv_ms{border-radius:2px;color:var(--label-foreground-color);cursor:pointer;height:var(--unit-size);line-height:var(--unit-size);padding:0 18px 0 4px}.tp-cctxtsv_ms:hover{background-color:var(--input-background-color-hover)}.tp-cctxtsv_ms:focus{background-color:var(--input-background-color-focus)}.tp-cctxtsv_ms:active{background-color:var(--input-background-color-active)}.tp-cctxtsv_mm{border-color:var(--label-foreground-color) transparent transparent;border-style:solid;border-width:3px;box-sizing:border-box;height:6px;pointer-events:none;width:6px;bottom:0;margin:auto;position:absolute;right:6px;top:3px}.tp-cctxtsv_w{display:flex;flex:1}.tp-cctxtsv_i{border-radius:0;flex:1;padding:0 4px}.tp-cctxtsv_i:first-child{border-bottom-left-radius:2px;border-top-left-radius:2px}.tp-cctxtsv_i:last-child{border-bottom-right-radius:2px;border-top-right-radius:2px}.tp-cctxtsv_i+.tp-cctxtsv_i{margin-left:2px}.tp-clpv{background-color:var(--base-background-color);border-radius:6px;box-shadow:0 2px 4px var(--base-shadow-color);display:none;padding:4px;position:relative;visibility:hidden;z-index:1000}.tp-clpv.tp-clpv-expanded{display:block;visibility:visible}.tp-clpv_h,.tp-clpv_ap{margin-left:6px;margin-right:6px}.tp-clpv_h{margin-top:4px}.tp-clpv_rgb{display:flex;margin-top:4px;width:100%}.tp-clpv_a{display:flex;margin-top:4px;padding-top:8px;position:relative}.tp-clpv_a:before{background-color:var(--separator-color);content:'';height:4px;left:-4px;position:absolute;right:-4px;top:0}.tp-clpv_ap{align-items:center;display:flex;flex:3}.tp-clpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:2px;outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:80px;width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--unit-size);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:2px;border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--unit-size);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:2px;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-cswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:2px}.tp-cswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--unit-size);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--unit-size)}.tp-cswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:2px;bottom:0;content:'';display:block;left:0;position:absolute;right:0;top:0}.tp-cswv_p{left:-4px;position:absolute;right:-4px;top:var(--unit-size)}.tp-cswtxtv{display:flex;position:relative}.tp-cswtxtv_s{flex-grow:0;flex-shrink:0;width:var(--unit-size)}.tp-cswtxtv_t{flex:1;margin-left:4px}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-expanded .tp-fldv_t{transition:border-radius 0s}.tp-fldv_c{border-left:var(--folder-background-color) solid 4px}.tp-fldv_t:hover+.tp-fldv_c{border-left-color:var(--folder-background-color-hover)}.tp-fldv_t:focus+.tp-fldv_c{border-left-color:var(--folder-background-color-focus)}.tp-fldv_t:active+.tp-fldv_c{border-left-color:var(--folder-background-color-active)}.tp-fldv_c>.tp-fldv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_t{border-top-left-radius:2px;border-bottom-left-radius:2px}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_t{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:2px}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--unit-size) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--monitor-foreground-color);stroke-linejoin:round}.tp-grlv_t{color:var(--monitor-foreground-color);font-size:0.9em;left:0;pointer-events:none;position:absolute;text-indent:4px;top:0;visibility:hidden}.tp-grlv_t.tp-grlv_t-valid{visibility:visible}.tp-grlv_t::before{background-color:var(--monitor-foreground-color);border-radius:100%;content:'';display:block;height:4px;left:-2px;position:absolute;top:-2px;width:4px}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:4px;padding-right:4px}.tp-lblv_l{color:var(--label-foreground-color);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lstv{position:relative}.tp-lstv_s{padding:0 18px 0 4px;width:100%}.tp-lstv_m{border-color:var(--button-foreground-color) transparent transparent;border-style:solid;border-width:3px;box-sizing:border-box;height:6px;pointer-events:none;width:6px;bottom:0;margin:auto;position:absolute;right:6px;top:3px}.tp-sglv_i{padding:0 4px}.tp-mllv_i{display:block;height:calc(var(--unit-size) * 3);line-height:var(--unit-size);padding:0 4px;resize:none;white-space:pre}.tp-p2dpadv{background-color:var(--base-background-color);border-radius:6px;box-shadow:0 2px 4px var(--base-shadow-color);display:none;padding:4px 4px 4px calc(4px * 2 + var(--unit-size));position:relative;visibility:hidden;z-index:1000}.tp-p2dpadv.tp-p2dpadv-expanded{display:block;visibility:visible}.tp-p2dpadv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpadv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpadv_ax{stroke:var(--input-guide-color)}.tp-p2dpadv_l{stroke:var(--input-foreground-color);stroke-linecap:round;stroke-dasharray:1px 3px}.tp-p2dpadv_m{fill:var(--input-foreground-color)}.tp-p2dpadtxtv{display:flex;position:relative}.tp-p2dpadtxtv_b{height:var(--unit-size);position:relative;width:var(--unit-size)}.tp-p2dpadtxtv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dpadtxtv_p{left:-4px;position:absolute;right:-4px;top:var(--unit-size)}.tp-p2dpadtxtv_t{margin-left:4px}.tp-p2dtxtv{display:flex}.tp-p2dtxtv_w{align-items:center;display:flex}.tp-p2dtxtv_w+.tp-p2dtxtv_w{margin-left:2px}.tp-p2dtxtv_i{padding:0 4px;width:100%}.tp-p2dtxtv_w:nth-child(1) .tp-p2dtxtv_i{border-top-right-radius:0;border-bottom-right-radius:0}.tp-p2dtxtv_w:nth-child(2) .tp-p2dtxtv_i{border-top-left-radius:0;border-bottom-left-radius:0}.tp-p3dtxtv{display:flex}.tp-p3dtxtv_w{align-items:center;display:flex}.tp-p3dtxtv_w+.tp-p3dtxtv_w{margin-left:2px}.tp-p3dtxtv_i{padding:0 4px;width:100%}.tp-p3dtxtv_w:first-child .tp-p3dtxtv_i{border-top-right-radius:0;border-bottom-right-radius:0}.tp-p3dtxtv_w:not(:first-child):not(:last-child) .tp-p3dtxtv_i{border-radius:0}.tp-p3dtxtv_w:last-child .tp-p3dtxtv_i{border-top-left-radius:0;border-bottom-left-radius:0}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--unit-size: var(--tp-unit-size, 20px);--base-background-color: var(--tp-base-background-color, #2f3137);--base-shadow-color: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--button-background-color: var(--tp-button-background-color, #adafb8);--button-background-color-active: var(--tp-button-background-color-active, #d6d7db);--button-background-color-focus: var(--tp-button-background-color-focus, #c8cad0);--button-background-color-hover: var(--tp-button-background-color-hover, #bbbcc4);--button-foreground-color: var(--tp-button-foreground-color, #2f3137);--folder-background-color: var(--tp-folder-background-color, rgba(200,202,208,0.1));--folder-background-color-active: var(--tp-folder-background-color-active, rgba(200,202,208,0.25));--folder-background-color-focus: var(--tp-folder-background-color-focus, rgba(200,202,208,0.2));--folder-background-color-hover: var(--tp-folder-background-color-hover, rgba(200,202,208,0.15));--folder-foreground-color: var(--tp-folder-foreground-color, #c8cad0);--input-background-color: var(--tp-input-background-color, rgba(200,202,208,0.1));--input-background-color-active: var(--tp-input-background-color-active, rgba(200,202,208,0.25));--input-background-color-focus: var(--tp-input-background-color-focus, rgba(200,202,208,0.2));--input-background-color-hover: var(--tp-input-background-color-hover, rgba(200,202,208,0.15));--input-foreground-color: var(--tp-input-foreground-color, #c8cad0);--input-guide-color: var(--tp-input-guide-color, rgba(47,49,55,0.5));--label-foreground-color: var(--tp-label-foreground-color, rgba(200,202,208,0.7));--monitor-background-color: var(--tp-monitor-background-color, #26272c);--monitor-foreground-color: var(--tp-monitor-foreground-color, rgba(200,202,208,0.7));--separator-color: var(--tp-separator-color, #26272c)}.tp-rotv{background-color:var(--base-background-color);border-radius:6px;box-shadow:0 2px 4px var(--base-shadow-color);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_t{border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:6px;border-top-right-radius:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_t{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv_m{transition:none}.tp-rotv_c>.tp-fldv:last-child>.tp-fldv_c{border-bottom-left-radius:6px;border-bottom-right-radius:6px}.tp-rotv_c>.tp-fldv:last-child:not(.tp-fldv-expanded)>.tp-fldv_t{border-bottom-left-radius:6px;border-bottom-right-radius:6px}.tp-rotv_c>.tp-fldv:first-child>.tp-fldv_t{border-top-left-radius:6px;border-top-right-radius:6px}.tp-sptv_r{background-color:var(--separator-color);border-width:0;display:block;height:4px;margin:0;width:100%}.tp-sldv_o{box-sizing:border-box;cursor:pointer;height:var(--unit-size);margin:0 6px;outline:none;position:relative}.tp-sldv_o::before{background-color:var(--input-background-color);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_i{height:100%;left:0;position:absolute;top:0}.tp-sldv_i::before{background-color:var(--button-background-color);border-radius:2px;bottom:0;content:'';display:block;height:12px;margin:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_o:hover .tp-sldv_i::before{background-color:var(--button-background-color-hover)}.tp-sldv_o:focus .tp-sldv_i::before{background-color:var(--button-background-color-focus)}.tp-sldv_o:active .tp-sldv_i::before{background-color:var(--button-background-color-active)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-txtv_i{padding:0 4px}.tp-v-hidden{display:none}"),o().forEach((function(e){e.css&&Qi(t,"plugin-"+e.id,e.css)}))}var tr=function(t){function n(e){var n,i=this,r=e||{},o=null!==(n=r.document)&&void 0!==n?n:R(),a=new Lt(o,{expanded:r.expanded,blade:new V,title:r.title});return(i=t.call(this,a)||this).containerElem_=r.container||Zi(o),i.containerElem_.appendChild(i.element),i.doc_=o,i.usesDefaultWrapper_=!r.container,Ji(i.document),i}return e(n,t),Object.defineProperty(n.prototype,"document",{get:function(){if(!this.doc_)throw nt.alreadyDisposed();return this.doc_},enumerable:!1,configurable:!0}),n.prototype.dispose=function(){var e=this.containerElem_;if(!e)throw nt.alreadyDisposed();if(this.usesDefaultWrapper_){var n=e.parentElement;n&&n.removeChild(e)}this.containerElem_=null,this.doc_=null,t.prototype.dispose.call(this)},n}(Ct);function er(){[mi,Ai,Mi,Wn,Bn,Nn,Sn,ee].forEach((function(t){Ct.registerPlugin({type:"input",plugin:t})})),[Ui,Wi,Gi].forEach((function(t){Ct.registerPlugin({type:"monitor",plugin:t})}))}return er(),tr}()}(N={exports:{}},N.exports),N.exports);const O=[];const U={fanCount:4};const $=function(){const{subscribe:e,set:n,update:i}=function(e,n=t){let i;const r=[];function a(t){if(o(e,t)&&(e=t,i)){const t=!O.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),O.push(n,e)}if(t){for(let t=0;t<O.length;t+=2)O[t][0](O[t+1]);O.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(o,s=t){const l=[o,s];return r.push(l),1===r.length&&(i=n(a)||t),o(e),()=>{const t=r.indexOf(l);-1!==t&&r.splice(t,1),0===r.length&&(i(),i=null)}}}}(U);return{subscribe:e,reset:()=>n(U),set:t=>n(t)}}();function j(e){let n;return{c(){n=p("div")},m(t,i){u(t,n,i),e[1](n)},p:t,i:t,o:t,d(t){t&&d(n),e[1](null)}}}function z(t,e,n){let i;var r,o;let s;return r=$,o=t=>n(2,i=t),t.$$.on_destroy.push(a(r,o)),m((()=>{new B({container:s}).addInput({fanCount:i.fanCount},"fanCount",{min:4,max:360,step:1}).on("change",(t=>{!function(t,e,n=e){t.set(n)}($,i.fanCount=t,i)}))})),[s,function(t){b[t?"unshift":"push"]((()=>{s=t,n(0,s)}))}]}class H extends D{constructor(t){super(),S(this,t,z,j,o,{})}}class K{static loadFile(t){return new Promise(((e,n)=>{fetch(t).then((t=>t.text())).then((t=>{e(t)})).catch((t=>{n(t)}))}))}set width(t){this.canvas.width=t}get width(){return this.canvas.width}set height(t){this.canvas.height=t}get height(){return this.canvas.height}set program(t){this.gl.useProgram(t),this.currentProgram=t}get program(){return this.currentProgram}constructor(){this.canvas=null,this.gl=null,this.currentProgram=null}initialize(t,e){if(this.canvas=t,this.gl=this.canvas.getContext("webgl"+(!0===e?"2":"")),null==this.gl)throw new Error("webgl not supported")}createShaderObject(t,e){const n=this.gl,i=n.createShader(e);if(n.shaderSource(i,t),n.compileShader(i),n.getShaderParameter(i,n.COMPILE_STATUS))return i;throw new Error(n.getShaderInfoLog(i))}createProgramObject(t,e){const n=this.gl,i=n.createProgram();if(n.attachShader(i,t),n.attachShader(i,e),n.linkProgram(i),n.deleteShader(t),n.deleteShader(e),n.getProgramParameter(i,n.LINK_STATUS))return n.useProgram(i),i;throw new Error(n.getProgramInfoLog(i))}createProgramObjectTF(t,e,n){const i=this.gl,r=i.createProgram();if(i.attachShader(r,t),i.attachShader(r,e),i.transformFeedbackVaryings(r,n,i.SEPARATE_ATTRIBS),i.linkProgram(r),i.deleteShader(t),i.deleteShader(e),i.getProgramParameter(r,i.LINK_STATUS))return i.useProgram(r),r;throw new Error(i.getProgramInfoLog(r))}createVBO(t){const e=this.gl,n=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),n}createIBO(t){const e=this.gl,n=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Int16Array(t),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),n}enableAttribute(t,e,n){const i=this.gl;t.forEach(((t,r)=>{i.bindBuffer(i.ARRAY_BUFFER,t),i.enableVertexAttribArray(e[r]),i.vertexAttribPointer(e[r],n[r],i.FLOAT,!1,0,0)}))}createTexture(t,e){const n=this.gl,i=n.createTexture();return n.activeTexture(e),n.bindTexture(n.TEXTURE_2D,i),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.generateMipmap(n.TEXTURE_2D),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null),i}createCubeTextureFromFile(t,e){return new Promise((n=>{const i=this.gl,r=i.createTexture();i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_CUBE_MAP,r);const o=t.map(((t,n)=>new Promise((r=>{const o=new Image;o.addEventListener("load",(()=>{i.texImage2D(e[n],0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,o),r()}),!1),o.src=t}))));Promise.all(o).then((()=>{i.generateMipmap(i.TEXTURE_CUBE_MAP),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_CUBE_MAP,null),n(r)}))}))}createFramebuffer(t,e){const n=this.gl,i=n.createFramebuffer(),r=n.createRenderbuffer(),o=n.createTexture();return n.bindFramebuffer(n.FRAMEBUFFER,i),n.bindRenderbuffer(n.RENDERBUFFER,r),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t,e),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,r),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,e,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),{framebuffer:i,depthRenderbuffer:r,texture:o}}}class X{static get DEFAULT_DISTANCE(){return 5}static get DEFAULT_MIN_DISTANCE(){return 1}static get DEFAULT_MAX_DISTANCE(){return 10}static get DEFAULT_MOVE_SCALE(){return 2}constructor(t,e={}){this.target=t,this.distance=e.distance||X.DEFAULT_DISTANCE,this.minDistance=e.min||X.DEFAULT_MIN_DISTANCE,this.maxDistance=e.max||X.DEFAULT_MAX_DISTANCE,this.moveScale=e.move||X.DEFAULT_MOVE_SCALE,this.position=[0,0,this.distance],this.center=[0,0,0],this.upDirection=[0,1,0],this.moveX=[1,0,0],this.moveZ=[0,0,1],this.defaultPosition=[0,0,this.distance],this.defaultCenter=[0,0,0],this.defaultUpDirection=[0,1,0],this.defaultMoveX=[1,0,0],this.defaultMoveZ=[0,0,1],this.movePosition=[0,0,0],this.rotateX=0,this.rotateY=0,this.scale=0,this.isDown=!1,this.prevPosition=[0,0],this.offsetPosition=[0,0],this.qt=Z.create(),this.qtx=Z.create(),this.qty=Z.create(),this.mouseInteractionStart=this.mouseInteractionStart.bind(this),this.mouseInteractionMove=this.mouseInteractionMove.bind(this),this.mouseInteractionEnd=this.mouseInteractionEnd.bind(this),this.wheelScroll=this.wheelScroll.bind(this),this.target.addEventListener("mousedown",this.mouseInteractionStart,!1),this.target.addEventListener("mousemove",this.mouseInteractionMove,!1),this.target.addEventListener("mouseup",this.mouseInteractionEnd,!1),this.target.addEventListener("wheel",this.wheelScroll,!1),this.target.addEventListener("contextmenu",(t=>{t.preventDefault()}),!1)}mouseInteractionStart(t){this.isDown=!0;const e=this.target.getBoundingClientRect();this.prevPosition=[t.clientX-e.left,t.clientY-e.top]}mouseInteractionMove(t){if(!0!==this.isDown)return;const e=this.target.getBoundingClientRect(),n=e.width,i=e.height,r=t.clientX-e.left,o=t.clientY-e.top,a=1/Math.min(n,i);switch(this.offsetPosition=[r-this.prevPosition[0],o-this.prevPosition[1]],this.prevPosition=[r,o],t.buttons){case 1:this.rotateX+=this.offsetPosition[0]*a,this.rotateY+=this.offsetPosition[1]*a,this.rotateX=this.rotateX%1,this.rotateY=Math.min(Math.max(this.rotateY%1,-.25),.25);break;case 2:const t=2*Math.PI,e=this.offsetPosition[0]*a*this.moveScale,n=this.offsetPosition[1]*a*this.moveScale,i=this.defaultMoveX.slice(),r=this.defaultMoveZ.slice(),o=Z.identity(Z.create());Z.rotate(this.rotateX*t,[0,1,0],o),Z.toVecIII(i,o,this.moveX),Z.toVecIII(r,o,this.moveZ),this.movePosition[0]-=this.moveX[0]*e+this.moveZ[0]*n,this.movePosition[2]-=this.moveX[2]*e+this.moveZ[2]*n}}mouseInteractionEnd(t){this.isDown=!1}wheelScroll(t){const e=t.wheelDelta;e>0?this.scale=-.5:e<0&&(this.scale=.5)}update(){const t=2*Math.PI,e=[1,0,0];return this.scale*=.7,this.distance+=this.scale,this.distance=Math.min(Math.max(this.distance,this.minDistance),this.maxDistance),this.defaultPosition[2]=this.distance,Z.identity(this.qt),Z.identity(this.qtx),Z.identity(this.qty),Z.rotate(this.rotateX*t,[0,1,0],this.qtx),Z.toVecIII(e,this.qtx,e),Z.rotate(this.rotateY*t,e,this.qty),Z.multiply(this.qtx,this.qty,this.qt),Z.toVecIII(this.defaultPosition,this.qt,this.position),Z.toVecIII(this.defaultUpDirection,this.qt,this.upDirection),this.position[0]+=this.movePosition[0],this.position[1]+=this.movePosition[1],this.position[2]+=this.movePosition[2],this.center[0]=this.defaultCenter[0]+this.movePosition[0],this.center[1]=this.defaultCenter[1]+this.movePosition[1],this.center[2]=this.defaultCenter[2]+this.movePosition[2],Y.lookAt(this.position,this.center,this.upDirection)}}class q{static get mat4(){return Y}static get vec3(){return G}static get vec2(){return W}static get qtn(){return Z}}class Y{static create(){return new Float32Array(16)}static identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static multiply(t,e,n){let i=n;null==n&&(i=Y.create());let r=t[0],o=t[1],a=t[2],s=t[3],l=t[4],u=t[5],d=t[6],p=t[7],h=t[8],c=t[9],f=t[10],v=t[11],m=t[12],g=t[13],b=t[14],_=t[15],x=e[0],w=e[1],y=e[2],E=e[3],k=e[4],C=e[5],V=e[6],P=e[7],A=e[8],L=e[9],I=e[10],T=e[11],R=e[12],M=e[13],F=e[14],S=e[15];return i[0]=x*r+w*l+y*h+E*m,i[1]=x*o+w*u+y*c+E*g,i[2]=x*a+w*d+y*f+E*b,i[3]=x*s+w*p+y*v+E*_,i[4]=k*r+C*l+V*h+P*m,i[5]=k*o+C*u+V*c+P*g,i[6]=k*a+C*d+V*f+P*b,i[7]=k*s+C*p+V*v+P*_,i[8]=A*r+L*l+I*h+T*m,i[9]=A*o+L*u+I*c+T*g,i[10]=A*a+L*d+I*f+T*b,i[11]=A*s+L*p+I*v+T*_,i[12]=R*r+M*l+F*h+S*m,i[13]=R*o+M*u+F*c+S*g,i[14]=R*a+M*d+F*f+S*b,i[15]=R*s+M*p+F*v+S*_,i}static scale(t,e,n){let i=n;return null==n&&(i=Y.create()),i[0]=t[0]*e[0],i[1]=t[1]*e[0],i[2]=t[2]*e[0],i[3]=t[3]*e[0],i[4]=t[4]*e[1],i[5]=t[5]*e[1],i[6]=t[6]*e[1],i[7]=t[7]*e[1],i[8]=t[8]*e[2],i[9]=t[9]*e[2],i[10]=t[10]*e[2],i[11]=t[11]*e[2],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i}static translate(t,e,n){let i=n;return null==n&&(i=Y.create()),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12],i[13]=t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13],i[14]=t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14],i[15]=t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15],i}static rotate(t,e,n,i){let r=i;null==i&&(r=Y.create());let o=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);if(!o)return null;let a=n[0],s=n[1],l=n[2];1!=o&&(o=1/o,a*=o,s*=o,l*=o);let u=Math.sin(e),d=Math.cos(e),p=1-d,h=t[0],c=t[1],f=t[2],v=t[3],m=t[4],g=t[5],b=t[6],_=t[7],x=t[8],w=t[9],y=t[10],E=t[11],k=a*a*p+d,C=s*a*p+l*u,V=l*a*p-s*u,P=a*s*p-l*u,A=s*s*p+d,L=l*s*p+a*u,I=a*l*p+s*u,T=s*l*p-a*u,R=l*l*p+d;return e?t!=r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]):r=t,r[0]=h*k+m*C+x*V,r[1]=c*k+g*C+w*V,r[2]=f*k+b*C+y*V,r[3]=v*k+_*C+E*V,r[4]=h*P+m*A+x*L,r[5]=c*P+g*A+w*L,r[6]=f*P+b*A+y*L,r[7]=v*P+_*A+E*L,r[8]=h*I+m*T+x*R,r[9]=c*I+g*T+w*R,r[10]=f*I+b*T+y*R,r[11]=v*I+_*T+E*R,r}static lookAt(t,e,n,i){let r=t[0],o=t[1],a=t[2],s=e[0],l=e[1],u=e[2],d=n[0],p=n[1],h=n[2];if(r==s&&o==l&&a==u)return Y.identity(i);let c,f,v,m,g,b,_,x,w,y,E=i;return null==i&&(E=Y.create()),_=r-e[0],x=o-e[1],w=a-e[2],y=1/Math.sqrt(_*_+x*x+w*w),_*=y,x*=y,w*=y,c=p*w-h*x,f=h*_-d*w,v=d*x-p*_,y=Math.sqrt(c*c+f*f+v*v),y?(y=1/y,c*=y,f*=y,v*=y):(c=0,f=0,v=0),m=x*v-w*f,g=w*c-_*v,b=_*f-x*c,y=Math.sqrt(m*m+g*g+b*b),y?(y=1/y,m*=y,g*=y,b*=y):(m=0,g=0,b=0),E[0]=c,E[1]=m,E[2]=_,E[3]=0,E[4]=f,E[5]=g,E[6]=x,E[7]=0,E[8]=v,E[9]=b,E[10]=w,E[11]=0,E[12]=-(c*r+f*o+v*a),E[13]=-(m*r+g*o+b*a),E[14]=-(_*r+x*o+w*a),E[15]=1,E}static perspective(t,e,n,i,r){let o=r;null==r&&(o=Y.create());let a=n*Math.tan(t*Math.PI/360),s=2*(a*e),l=2*a,u=i-n;return o[0]=2*n/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*n/l,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-(i+n)/u,o[11]=-1,o[12]=0,o[13]=0,o[14]=-i*n*2/u,o[15]=0,o}static ortho(t,e,n,i,r,o,a){let s=a;null==a&&(s=Y.create());let l=e-t,u=n-i,d=o-r;return s[0]=2/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2/u,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=-2/d,s[11]=0,s[12]=-(t+e)/l,s[13]=-(n+i)/u,s[14]=-(o+r)/d,s[15]=1,s}static transpose(t,e){let n=e;return null==e&&(n=Y.create()),n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15],n}static inverse(t,e){let n=e;null==e&&(n=Y.create());let i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],d=t[7],p=t[8],h=t[9],c=t[10],f=t[11],v=t[12],m=t[13],g=t[14],b=t[15],_=i*l-r*s,x=i*u-o*s,w=i*d-a*s,y=r*u-o*l,E=r*d-a*l,k=o*d-a*u,C=p*m-h*v,V=p*g-c*v,P=p*b-f*v,A=h*g-c*m,L=h*b-f*m,I=c*b-f*g,T=1/(_*I-x*L+w*A+y*P-E*V+k*C);return n[0]=(l*I-u*L+d*A)*T,n[1]=(-r*I+o*L-a*A)*T,n[2]=(m*k-g*E+b*y)*T,n[3]=(-h*k+c*E-f*y)*T,n[4]=(-s*I+u*P-d*V)*T,n[5]=(i*I-o*P+a*V)*T,n[6]=(-v*k+g*w-b*x)*T,n[7]=(p*k-c*w+f*x)*T,n[8]=(s*L-l*P+d*C)*T,n[9]=(-i*L+r*P-a*C)*T,n[10]=(v*E-m*w+b*_)*T,n[11]=(-p*E+h*w-f*_)*T,n[12]=(-s*A+l*V-u*C)*T,n[13]=(i*A-r*V+o*C)*T,n[14]=(-v*y+m*x-g*_)*T,n[15]=(p*y-h*x+c*_)*T,n}static toVecIV(t,e){let n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],d=t[8],p=t[9],h=t[10],c=t[11],f=t[12],v=t[13],m=t[14],g=t[15],b=e[0],_=e[1],x=e[2],w=e[3],y=[];return y[0]=b*n+_*a+x*d+w*f,y[1]=b*i+_*s+x*p+w*v,y[2]=b*r+_*l+x*h+w*m,y[3]=b*o+_*u+x*c+w*g,e=y,y}static vpFromCameraProperty(t,e,n,i,r,o,a,s,l,u){Y.lookAt(t,e,n,s),Y.perspective(i,r,o,a,l),Y.multiply(l,s,u)}static screenPositionFromMvp(t,e,n,i){let r=.5*n,o=.5*i,a=Y.toVecIV(t,[e[0],e[1],e[2],1]);return a[3]<=0?[NaN,NaN]:(a[0]/=a[3],a[1]/=a[3],a[2]/=a[3],[r+a[0]*r,o-a[1]*o])}}class G{static create(){return new Float32Array(3)}static len(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}static distance(t,e){let n=G.create();return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}static normalize(t){let e=G.create(),n=G.len(t);if(n>0){let i=1/n;e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i}else e[0]=0,e[1]=0,e[2]=0;return e}static dot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}static cross(t,e){let n=G.create();return n[0]=t[1]*e[2]-t[2]*e[1],n[1]=t[2]*e[0]-t[0]*e[2],n[2]=t[0]*e[1]-t[1]*e[0],n}static faceNormal(t,e,n){let i=G.create(),r=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],o=[n[0]-t[0],n[1]-t[1],n[2]-t[2]];return i[0]=r[1]*o[2]-r[2]*o[1],i[1]=r[2]*o[0]-r[0]*o[2],i[2]=r[0]*o[1]-r[1]*o[0],G.normalize(i)}}class W{static create(){return new Float32Array(2)}static len(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}static distance(t,e){let n=W.create();return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}static normalize(t){let e=W.create(),n=W.len(t);if(n>0){let i=1/n;e[0]=t[0]*i,e[1]=t[1]*i}return e}static dot(t,e){return t[0]*e[0]+t[1]*e[1]}static cross(t,e){return W.create(),t[0]*e[1]-t[1]*e[0]}}class Z{static create(){return new Float32Array(4)}static identity(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}static inverse(t,e){let n=e;return null==e&&(n=Z.create()),n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n}static normalize(t){let e=t[0],n=t[1],i=t[2],r=Math.sqrt(e*e+n*n+i*i);return 0===r?(t[0]=0,t[1]=0,t[2]=0):(r=1/r,t[0]=e*r,t[1]=n*r,t[2]=i*r),t}static multiply(t,e,n){let i=n;null==n&&(i=Z.create());let r=t[0],o=t[1],a=t[2],s=t[3],l=e[0],u=e[1],d=e[2],p=e[3];return i[0]=r*p+s*l+o*d-a*u,i[1]=o*p+s*u+a*l-r*d,i[2]=a*p+s*d+r*u-o*l,i[3]=s*p-r*l-o*u-a*d,i}static rotate(t,e,n){let i=n;null==n&&(i=Z.create());let r=e[0],o=e[1],a=e[2],s=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);if(0!==s){let t=1/s;r*=t,o*=t,a*=t}let l=Math.sin(.5*t);return i[0]=r*l,i[1]=o*l,i[2]=a*l,i[3]=Math.cos(.5*t),i}static toVecIII(t,e,n){let i=n;null==n&&(i=[0,0,0]);let r=Z.create(),o=Z.create(),a=Z.create();return Z.inverse(e,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],Z.multiply(a,r,o),Z.multiply(o,e,a),i[0]=a[0],i[1]=a[1],i[2]=a[2],i}static toMatIV(t,e){let n=e;null==e&&(n=Y.create());let i=t[0],r=t[1],o=t[2],a=t[3],s=i+i,l=r+r,u=o+o,d=i*s,p=i*l,h=i*u,c=r*l,f=r*u,v=o*u,m=a*s,g=a*l,b=a*u;return n[0]=1-(c+v),n[1]=p-b,n[2]=h+g,n[3]=0,n[4]=p+b,n[5]=1-(d+v),n[6]=f-m,n[7]=0,n[8]=h-g,n[9]=f+m,n[10]=1-(d+c),n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}static slerp(t,e,n,i){let r=i;null==i&&(r=Z.create());let o=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],a=1-o*o;if(a<=0)r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3];else if(a=Math.sqrt(a),Math.abs(a)<1e-4)r[0]=.5*t[0]+.5*e[0],r[1]=.5*t[1]+.5*e[1],r[2]=.5*t[2]+.5*e[2],r[3]=.5*t[3]+.5*e[3];else{let i=Math.acos(o),s=i*n,l=Math.sin(i-s)/a,u=Math.sin(s)/a;r[0]=t[0]*l+e[0]*u,r[1]=t[1]*l+e[1]*u,r[2]=t[2]*l+e[2]*u,r[3]=t[3]*l+e[3]*u}return r}}var Q=class extends HTMLElement{constructor(t,e,n=!0){super(),this.editing=!1,this.attachShadow({mode:"open"}),this.axes=t,this.totalTime=e,this.debug=n,this.shadowRoot.innerHTML=this.template(t,e),this.$pane=this.shadowRoot.querySelector("#pane"),this.$timeline=this.shadowRoot.querySelector("#timeline"),this.$current=this.shadowRoot.querySelector("#current"),this.$progress=this.shadowRoot.querySelector("#progress"),this.$labels=this.shadowRoot.querySelectorAll(".label"),this.$bars=this.shadowRoot.querySelectorAll(".bar"),this.$barsBegin=this.shadowRoot.querySelectorAll(".begin"),this.$barsEnd=this.shadowRoot.querySelectorAll(".end"),this.$previous=this.shadowRoot.querySelector("#previous"),this.$playPause=this.shadowRoot.querySelector("#play-pause"),this.$next=this.shadowRoot.querySelector("#next"),this.playing=!0,this.previous=!1,this.next=!1,this.skip=-1,this.$previous.addEventListener("click",(t=>{this.previous=!0})),this.$playPause.addEventListener("click",(t=>{this.playing=!this.playing})),this.$next.addEventListener("click",(t=>{this.next=!0}));for(let t=0,e=this.$bars.length;t<e;t++){if(this.$bars[t].addEventListener("click",(t=>{let e=t.currentTarget,n=Number(e.getAttribute("idx"));this.skip=n})),!this.debug)continue;let e=this.$barsBegin[t],n=this.$barsEnd[t];e.addEventListener("input",(n=>{let i=Number(e.value);if(Number(this.$barsEnd[t].value)<i)n.preventDefault();else if(Number.isFinite(this.axes[t].position))this.axes[t].position=i,this.axes[t].duration=this.axes[t].endAt-(this.axes[t].delay+this.axes[t].position);else{let e=this.axes.find((e=>e.key===this.axes[t].position));this.axes[t].delay=i-e.endAt,this.axes[t].duration=this.axes[t].endAt-(this.axes[t].delay+e.endAt)}})),n.addEventListener("input",(e=>{let i=Number(n.value);if(i<Number(this.$barsBegin[t].value))e.preventDefault();else if(Number.isFinite(this.axes[t].position))this.axes[t].duration=i-(this.axes[t].position+this.axes[t].delay);else{let e=this.axes.find((e=>e.key===this.axes[t].position));this.axes[t].duration=i-e.endAt-this.axes[t].delay}}))}this.$labels.forEach((t=>{t.addEventListener("click",(t=>{let e=t.currentTarget,n=Number(e.getAttribute("idx"));this.skip=n}))})),this.$current.addEventListener("input",(t=>{this.editing=!0;let e=Number(this.$current.value);this.__updateProgressPosition(e),this.__updateBar(this.totalTime)})),this.$current.addEventListener("change",(t=>{this.editing=!1}))}attributeChangedCallback(){}connectedCallback(){}disconnectedCallback(){}getAxes(){return this.axes}get(t){let e=Date.now(),n=Number(this.$current.value),i=e-t;if(this.playing||(t=e-n,i=n),this.editing&&(t=e-n,i=n),-1<this.skip){let n=this.axes[this.skip];t=e-n.beginAt,i=n.beginAt,this.skip=-1}return this.previous&&(this.previous=!1,t=e,i=0),this.next&&(this.next=!1,t=e-this.totalTime,i=this.totalTime),{beginAt:t,elapsedTime:i,editing:this.editing}}update(t,e,n){this.axes=n,this.totalTime=e,this.$current.setAttribute("max",e),this.$current.value=t,this.__updateProgressPosition(t),this.__updateBar(e),this.debug&&this.__updateBarRange(e),this.__updateScale(e)}template(t,e){let n="",i="",r="";for(let e=0;e<t.length;e++){let r=t[e];n+=`<div class="row" id="row-${e}"><div class="label" idx="${e}">${r.key}</div></div>`;let o="";this.debug&&(o=`\n          <input class="begin" type="range" min="0" max="0" step="10" value="${r.beginAt}">\n          <input class="end" type="range" min="0" max="0" step="10" value="${r.endAt}">\n        `),i+=`\n        <div class="row">\n          <div class="bar bar--${this.debug?"debug":"default"}" idx="${e}"></div>\n          ${o}\n        </div>`,this.debug}for(let t=0,n=Math.floor(e/1e3);t<n;t++)r+=`<div class="scale-label" style="--sec: ${t+1}">${t+1}s</div>`;return`\n      <style>\n        * {\n          box-sizing: border-box;\n        }\n        :host {\n          display: block;\n          height: 100%;\n        }\n        .container {\n          display: flex;\n          flex-direction: column;\n          height: 100%;\n          background-color: #313131;\n          color: #eeeeee;\n          position: relative;\n          --tools-height: 40px;\n          --controls-height: 40px;\n        }\n        .tools {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n          height: var(--tools-height);\n          border-bottom: 1px solid #202020;\n        }\n        .tools__item {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 20px;\n          margin: 0 8px;\n          color: #eeeeee;\n        }\n        .tools__item div {\n          width: 100%;\n          cursor: pointer;\n        }\n        .tools__item div:hover {\n          opacity: .6;\n        }\n        .tools__item svg {\n          fill: currentColor;\n        }\n        .controls {\n          display: flex;\n          flex-shrink: 0;\n          height: var(--controls-height);\n          border-bottom: 1px solid #202020;\n        }\n        .pane {\n          display: flex;\n          flex: 1;\n          overflow: scroll;\n          scroll-behavior: smooth;\n        }\n        .head {\n          flex-shrink: 0;\n          flex-basis: 20%;\n          max-width: 200px;\n          min-width: 0;\n        }\n        .body {\n          flex: 1;\n          position: relative;\n        }\n        .actions {\n          height: 100%;\n          border-right: 1px solid #222322;\n        }\n        .rows {\n          border-right: 1px solid #222322;\n        }\n        .row {\n          display: flex;\n          align-items: center;\n          height: 24px;\n          border-bottom: 1px solid #202020;\n          position: relative;\n        }\n        .row input[type="range"] {\n          position: absolute;\n          inset: 0;\n        }\n        .label {\n          padding-left: 12px;\n          font-size: 12px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          cursor: pointer;\n        }\n        .bar {\n          height: 100%;\n          background-color: #545454;\n          opacity: .5;\n          transform-origin: left;\n          cursor: pointer;\n          position: relative;\n        }\n        .bar.bar--debug::before {\n          content: "";\n          display: block;\n          width: 6px;\n          position: absolute;\n          left: 0;\n          top: 0;\n          bottom: 0;\n          margin: 4px;\n          border-radius: 2px;\n          background-color: darkgray;\n        }\n        .bar.bar--debug::after {\n          content: "";\n          display: block;\n          width: 6px;\n          position: absolute;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          margin: 4px;\n          border-radius: 2px;\n          background-color: darkgray;\n        }\n        .bar.bar--active {\n          opacity: 1;\n        }\n        .progress {\n          position: absolute;\n          top: var(--tools-height);\n          bottom: 0;\n          left: 0;\n          width: 2px;\n          margin-left: min(20%, 200px);\n          background-color: #71A0EB;\n          opacity: 0.6;\n        }\n        .progress::before {\n          content: "";\n          display: block;\n          width: 20px;\n          height: 30px;\n          background-color: #53aeff;\n          margin-left: -9px;\n        }\n        .progress::after {\n          content: "";\n          display: block;\n          border-top: 10px solid #53aeff;\n          border-left: 10px solid transparent;\n          border-right: 10px solid transparent;\n          margin-left: -9px;\n        }\n        .current {\n          position: absolute;\n          top: var(--tools-height);\n          height: var(--controls-height);\n          left: -12px;\n          right: -12px;\n          margin-left: min(20%, 200px);\n        }\n        input[type="range"] {\n          -webkit-appearance: none;\n          appearance: none;\n          margin: 0;\n          cursor: pointer;\n          outline: none;\n        }\n        input[type="range"]::-webkit-slider-thumb {\n          opacity: 0;\n        }\n        input[type="range"]::-moz-range-thumb {\n          opacity: 0;\n        }\n        /* Firefox */\n        input[type="range"]::-moz-focus-outer {\n          border: 0;\n        }\n        .current input[type="range"] {\n          height: var(--controls-height);\n          width: 100%;\n          background: transparent;\n        }\n        input.begin[type="range"],\n        input.end[type="range"] {\n          height: 100%;\n          width: calc(100% + 12px);\n          background: transparent;\n          pointer-events: none;\n          margin-left: -6px;\n        }\n        input.begin[type="range"]::-webkit-slider-thumb,\n        input.end[type="range"]::-webkit-slider-thumb {\n          -webkit-appearance: none;\n          appearance: none;\n          pointer-events: auto;\n          opacity: 0;   \n          width: 12px;\n          height: 100%;\n          cursor: ew-resize;\n        }\n        input.begin[type="range"]::-moz-range-thumb,\n        input.end[type="range"]::-moz-range-thumb {\n          -webkit-appearance: none;\n          appearance: none;\n          pointer-events: auto;\n          opacity: 0;   \n          width: 12px;\n          height: 100%;\n          cursor: ew-resize;\n        }\n        input.begin[type="range"]::-webkit-slider-thumb {\n          background: darkgreen;\n          transform: translateX(50%);\n        }\n        input.begin[type="range"]::-moz-range-thumb {\n          background: darkgreen;\n          transform: translateX(50%);\n        }\n        input.end[type="range"]::-webkit-slider-thumb {\n          background: indianred;\n          transform: translateX(-50%);\n        }\n        input.end[type="range"]::-moz-range-thumb {\n          background: indianred;\n          transform: translateX(-50%);\n        }\n        .scale {\n          position: relative;\n          height: 100%;\n        }\n        .scale-s,\n        .scale-100ms {\n          height: 50%;\n        }\n        .scale-s {\n          /*\n            total / 1s \n            e.g. 6000 / 1000\n            x / 1000 = 6\n            calc(100% / calc(var(--total) / 1000))\n           */\n          --x: calc(100% / calc(var(--total) / 1000));\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n          border-bottom: 1px solid #202020;\n        }\n        .scale-100ms {\n          --x: calc(100% / calc(var(--total) / 1000) / 10);\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n        }\n        .scale-label {\n          --x: calc(100% / calc(var(--total) / 1000));\n          position: absolute;\n          top: 0;\n          left: calc(var(--x) * var(--sec));\n          font-size: 10px;\n          font-style: italic;\n          transform: translateX(calc(-100% - 4px));\n        }\n      </style>\n      <div class="container">\n        <div class="tools">\n          <div class="tools__item">\n            <div id="previous">\n              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path d="M2.75 20C2.75 20.5523 3.19772 21 3.75 21C4.30228 21 4.75 20.5523 4.75 20L4.75 4C4.75 3.44772 4.30229 3 3.75 3C3.19772 3 2.75 3.44772 2.75 4V20Z"/>\n                <path d="M20.75 19.0526C20.75 20.4774 19.1383 21.305 17.9803 20.4748L7.51062 12.9682C6.50574 12.2477 6.54467 10.7407 7.5854 10.073L18.0551 3.35665C19.2198 2.60946 20.75 3.44583 20.75 4.82961L20.75 19.0526Z"/>\n              </svg>\n            </div>\n          </div>\n          <div class="tools__item">\n            <div id="play-pause">\n              <svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                \x3c!-- Generator: Sketch 59.1 (86144) - https://sketch.com --\x3e\n                <title>ic_fluent_video_play_pause_24_filled</title>\n                <desc>Created with Sketch.</desc>\n                <g id="-Product-Icons" stroke="none" stroke-width="1" >\n                    <g id="ic_fluent_video_play_pause_24_filled" fill-rule="nonzero">\n                        <path d="M3.65140982,6.61646219 L11.1528787,11.3693959 C11.3672679,11.5052331 11.4827597,11.722675 11.4993749,11.9464385 L11.4984593,7.25 C11.4984593,6.83578644 11.8342458,6.5 12.2484593,6.5 L15.2484593,6.5 C15.6626729,6.5 15.9984593,6.83578644 15.9984593,7.25 L15.9984593,16.75 C15.9984593,17.1642136 15.6626729,17.5 15.2484593,17.5 L12.2484593,17.5 C11.8342458,17.5 11.4984593,17.1642136 11.4984593,16.75 L11.4993494,12.0597632 C11.4826318,12.2835468 11.3670166,12.5009613 11.1525249,12.6366956 L3.65105604,17.3837618 C3.15168144,17.6997752 2.5,17.3409648 2.5,16.75 L2.5,7.25 C2.5,6.65884683 3.15205264,6.30006928 3.65140982,6.61646219 Z M21.2477085,6.50037474 C21.661922,6.50037474 21.9977085,6.83616118 21.9977085,7.25037474 L21.9977085,16.7496253 C21.9977085,17.1638388 21.661922,17.4996253 21.2477085,17.4996253 L18.2477085,17.4996253 C17.8334949,17.4996253 17.4977085,17.1638388 17.4977085,16.7496253 L17.4977085,7.25037474 C17.4977085,6.83616118 17.8334949,6.50037474 18.2477085,6.50037474 L21.2477085,6.50037474 Z" id="-Color"></path>\n                    </g>\n                </g>\n              </svg>\n            </div>\n          </div>\n          <div class="tools__item">\n            <div id="next">\n              <svg   viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path d="M21 4C21 3.44772 20.5523 3 20 3C19.4477 3 19 3.44772 19 4V20C19 20.5523 19.4477 21 20 21C20.5523 21 21 20.5523 21 20V4Z"/>\n                <path d="M3 4.94743C3 3.5226 4.61175 2.69498 5.7697 3.52521L16.2394 11.0318C17.2443 11.7523 17.2053 13.2593 16.1646 13.927L5.69492 20.6434C4.53019 21.3905 3 20.5542 3 19.1704V4.94743Z"/>\n              </svg>\n            </div>\n          </div>\n        </div>\n        <div class="controls">\n          <div class="head"><div class="actions"></div></div>\n          <div class="body">\n            <div class="scale" id="scale" style="--total: ${e}">\n              <div class="scale-s"></div>\n              <div class="scale-100ms"></div>\n              ${r}\n            </div>\n          </div>\n        </div>\n        <div id="pane" class="pane">\n          <div class="head">\n            <div class="rows">\n              ${n}\n            </div>\n          </div>\n          <div id="timeline" class="body">\n            <div class="rows">\n              ${i}\n            </div>\n          </div>\n        </div>\n        <div class="current">\n          <input id="current" type="range" min="0" max="0" step="any" value="0">\n        </div>\n        <div id="progress" class="progress"></div>\n      </div>\n    `}__updateScale(t){let e=this.shadowRoot.querySelector(".test");e&&e.remove(),this.shadowRoot.querySelectorAll(".scale-label").forEach((t=>{t.remove()})),this.shadowRoot.querySelector(".scale").style.setProperty("--total",t);let n="";for(let e=0,i=Math.floor(t/1e3);e<i;e++)n+=`<div class="scale-label" style="--sec: ${e+1}">${e+1}s</div>`;let i=document.createElement("div");i.className="test",i.innerHTML=n,this.shadowRoot.querySelector(".scale").appendChild(i)}__updateProgressPosition(t){let e=this.$timeline.clientWidth,n=Math.min(t/this.totalTime,1)*e;this.$progress.style.transform=`translateX(${n}px)`}__updateBarRange(t){for(let e=0;e<this.$bars.length;e++){let n=this.axes[e];this.$barsBegin[e].setAttribute("max",t),this.$barsBegin[e].value=n.beginAt,this.$barsEnd[e].setAttribute("max",t),this.$barsEnd[e].value=n.endAt}}__updateBar(t){let e=this.$timeline.clientWidth/t;for(let t=0;t<this.$bars.length;t++){let n=this.axes[t],i=n.beginAt*e,r=(n.endAt-n.beginAt)*e;this.$bars[t].style.transform=`translateX(${i}px)`,this.$bars[t].style.width=`${r}px`,0<n.progress&&!n.pass?this.$bars[t].classList.add("bar--active"):this.$bars[t].classList.remove("bar--active")}}};window.customElements.define("taxis-timeline",Q);var J={key:"",beginAt:0,endAt:0,duration:0,delay:0,position:0,progress:0,enter:!1,pass:!1};const tt=(t,e,n)=>{const i=t.createShader(n);if(!i)throw new Error("Failed to create shader");if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error(`Failed to compile: ${t.getShaderInfoLog(i)}`);return i},et=(t,e,n,i)=>{e.forEach(((e,r)=>{t.bindBuffer(t.ARRAY_BUFFER,e),t.enableVertexAttribArray(n[r]),t.vertexAttribPointer(n[r],i[r],t.FLOAT,!1,0,0)}))},nt=t=>{const e=new K,n=new class{constructor(t={}){this.option=t,this.axes=[]}get totalTime(){return this.axes.length?Math.max(...this.axes.map((t=>t.endAt))):0}get totalTimeForTimeline(){return this.totalTime+500}get everyPassed(){return this.axes.every((t=>t.pass))}restart(){this.beginAt=Date.now()}getAxis({key:t}){return this.axes.find((e=>e.key===t))}getAxes(){return this.axes}add(t,e,n=0,i){let r=this.totalTime+n;if(void 0!==i)r=Number.isFinite(i)?i+n:this.getAxis({key:i}).endAt+n;else{let t=this.axes[this.axes.length-1];i=t?t.key:0}return this.axes.push({...J,key:t,beginAt:r,endAt:r+e,duration:e,delay:n,position:i}),this.sort(),this}begin(){this.option.timeline&&(this.timeline=new Q(this.axes,this.totalTimeForTimeline,this.option.timeline.debug),this.option.timeline.container.appendChild(this.timeline)),this.beginAt=Date.now(),this.__tick()}reset(){cancelAnimationFrame(this.requestID)}ticker(t){this.tickerFn=t}__tick(){let t=this.beginAt,e=Date.now()-t,n=!1;if(this.option.timeline){this.axes=this.recalculation(this.timeline.getAxes());let{beginAt:i,elapsedTime:r,editing:o}=this.timeline.get(this.beginAt);t=i,e=r,n=o}this.beginAt=t,this.axes.forEach(((t,n)=>{let i=e-t.beginAt,r=Math.max(0,Math.min(i/t.duration,1)),o=t.beginAt<=e,a=t.endAt<e;t.progress=r,t.enter=o,t.pass=a})),this.option.timeline&&!n&&this.timeline.update(e,this.totalTimeForTimeline,this.axes),this.tickerFn&&this.tickerFn(e,this.toMap(this.axes)),this.requestID=requestAnimationFrame(this.__tick.bind(this))}calculation(){let t=[];for(let e=0;e<this.axes.length;e++){let n=this.axes[e],{key:i,duration:r,position:o,delay:a}=n,s=Math.max(...t.map((t=>t.endAt)))+a;void 0!==o?s=Number.isFinite(o)?o+a:this.getAxis({key:o}).endAt+a:o=s,t.push({...J,key:i,beginAt:s,endAt:s+r,duration:r,delay:a,position:o})}}recalculation(t){let e=[];for(let n=0;n<t.length;n++){let i=t[n],{key:r,duration:o,position:a,delay:s}=i,l=Math.max(...e.map((t=>t.endAt)))+s;void 0!==a?l=Number.isFinite(a)?a+s:this.getAxis({key:a}).endAt+s:a=l,e.push({...J,key:r,beginAt:l,endAt:l+o,duration:o,delay:s,position:a})}return e}sort(){this.axes.sort(((t,e)=>t.beginAt-e.beginAt))}toMap(t){let e=new Map;return t.forEach((t=>{e[t.key]=t,e.set(t.key,t)})),e}};e.initialize(t);let i,r,o,a,l,u,d=null,p={},h={};const c={mvpMatrix:WebGLUniformLocation};let f=null,v=null,m=null;const g=new X(t,{distance:10,min:1,max:20,move:2});function b(){e.width=window.innerWidth,e.height=window.innerHeight}function _(){const t=[],n=[],i=[],r=360/s($).fanCount,l=Math.cos((90-r/2)*(Math.PI/180)),u=Math.sin((90-r/2)*(Math.PI/180));for(let e=0;e<s($).fanCount;e++){const r=360/s($).fanCount,o=e*r,a=(e+1)*r;for(let s=0;s<r;s++){const r=o+s+1,d=(o+s)*(Math.PI/180),p=r*(Math.PI/180),h=Math.cos(d),c=Math.sin(d),f=Math.cos(p),v=Math.sin(p);{const t=e%2==0,i=t?90:270,r=i-(a-o)/2+s+1,d=(i-(a-o)/2+s)*(Math.PI/180),p=r*(Math.PI/180),h=Math.cos(d),c=Math.sin(d),f=Math.cos(p),v=Math.sin(p),m=t?1-u-.5:.5;n.push(h+e*l,c+m,0,f+e*l,v+m,0,0+e*l,m,0)}let m=e%2?[.6,.87,1,1]:[1,.87,.93,1];i.push(...m,...m,...m),t.push(h,c,0,f,v,0,0,0,0)}}p.position=t,p.color=i,h.position=n,h.color=i,o=[e.createVBO(t),e.createVBO(i)],a=[e.createVBO(n),e.createVBO(i)]}function x(t){const n=e.gl;let i=q.mat4.identity(q.mat4.create());i=q.mat4.translate(i,t);const r=q.mat4.multiply(m,i);n.uniformMatrix4fv(c.mvpMatrix,!1,r)}e.width=window.innerWidth,e.height=window.innerHeight,b(),window.addEventListener("resize",b),window.Promise.resolve().then((()=>window.Promise.all([K.loadFile("./shader/main.vert"),K.loadFile("./shader/main.frag")]))).then((t=>{const[s,b]=t,w=tt(e.gl,s,e.gl.VERTEX_SHADER),y=tt(e.gl,b,e.gl.FRAGMENT_SHADER);var E,k;d=((t,e,n)=>{const i=t.createProgram();if(!i)throw new Error("Failed to create program");if(t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i),t.deleteShader(e),t.deleteShader(n),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error(`Failed to link: ${t.getProgramInfoLog(i)}`);return t.useProgram(i),i})(e.gl,w,y),e.program=d,_(),k=[.45,.45,.45,1],i={position:[-1*(E=10),0,0,E,0,0,0,-1*E,0,0,E,0,0,0,E,0,0,-1*E],color:[...k,...k,...k,...k,...k,...k]},r=[e.createVBO(i.position),e.createVBO(i.color)],function(){const t=e.gl;e.program=d,l=[t.getAttribLocation(e.program,"position"),t.getAttribLocation(e.program,"color")],u=[3,4],c.mvpMatrix=t.getUniformLocation(e.program,"mvpMatrix")}(),n.begin(),n.ticker(((t,n)=>{_(),function(){const t=e.gl;t.viewport(0,0,e.width,e.height),t.clearColor(.1,.12,.14,1),t.clear(t.COLOR_BUFFER_BIT),f=g.update();const n=45,i=e.width/e.height,r=.1,o=20;v=q.mat4.perspective(n,i,r,o),m=q.mat4.multiply(v,f)}(),function(t){const n=e.gl;et(n,r,l,u),x(t),n.drawArrays(n.LINES,0,i.position.length/3)}([0,0,0]),function(t){const n=e.gl;et(n,o,l,u),x(t),n.drawArrays(n.TRIANGLES,0,p.position.length/3)}([-1.5,0,0]),function(t){const n=e.gl;et(n,a,l,u),x(t),n.drawArrays(n.TRIANGLES,0,h.position.length/3)}([1.5,0,0])}))}))};function it(e){let n;return{c(){n=p("canvas"),c(n,"class","w-full h-full")},m(t,i){u(t,n,i),e[1](n)},p:t,i:t,o:t,d(t){t&&d(n),e[1](null)}}}function rt(t,e,n){let i;return m((()=>{nt(i)})),[i,function(t){b[t?"unshift":"push"]((()=>{i=t,n(0,i)}))}]}class ot extends D{constructor(t){super(),S(this,t,rt,it,o,{})}}function at(e){let n,i,r,o,a,s;return i=new ot({props:{class:"w-full h-full"}}),a=new H({}),{c(){n=p("main"),T(i.$$.fragment),r=h(),o=p("div"),T(a.$$.fragment),c(o,"class","fixed right-8 top-8"),c(n,"class","w-full h-full")},m(t,e){u(t,n,e),R(i,n,null),l(n,r),l(n,o),R(a,o,null),s=!0},p:t,i(t){s||(L(i.$$.fragment,t),L(a.$$.fragment,t),s=!0)},o(t){I(i.$$.fragment,t),I(a.$$.fragment,t),s=!1},d(t){t&&d(n),M(i),M(a)}}}return new class extends D{constructor(t){super(),S(this,t,null,at,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
