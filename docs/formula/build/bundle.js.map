{"version":3,"file":"bundle.js","sources":["../../../../node_modules/svelte/internal/index.mjs","../../../../node_modules/tweakpane/dist/tweakpane.js","../../../../node_modules/svelte/store/index.mjs","../../src/stores/settings.ts","../../src/components/Pane.svelte","../../src/components/Viewer/script/webgl.js","../../../../node_modules/taxis/lib/taxis.esm.js","../../../shared/lib/geometry.js","../../../shared/lib/utils.js","../../src/components/Viewer/script/setup.ts","../../src/components/Viewer/Viewer.svelte","../../src/main.ts"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot_spread(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_spread_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_spread_changes_fn(dirty) | get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : context || []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : options.context || []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.37.0' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to seperate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_custom_elements_slots, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, update_slot_spread, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","/*! Tweakpane 1.6.1 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Tweakpane = factory());\n}(this, (function () { 'use strict';\n\n    var extendStatics = function(d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    function __extends(d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    }\n    var __assign = function() {\n        __assign = Object.assign || function __assign(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    function __spreadArrays() {\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n                r[k] = a[j];\n        return r;\n    }\n\n    var Plugins = {\n        inputs: [],\n        monitors: [],\n    };\n    function getAllPlugins() {\n        return __spreadArrays(Plugins.inputs, Plugins.monitors);\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (var i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    var PREFIX = 'tp';\n    function ClassName(viewName) {\n        return function (opt_elementName, opt_modifier) {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? \"_\" + opt_elementName : '',\n                opt_modifier ? \"-\" + opt_modifier : '',\n            ].join('');\n        };\n    }\n\n    function getAllBladePositions() {\n        return ['first', 'last'];\n    }\n\n    var className = ClassName('');\n    function setUpBladeView(view, model) {\n        var elem = view.element;\n        model.emitter.on('change', function (ev) {\n            if (ev.propertyName === 'hidden') {\n                var hiddenClass = className(undefined, 'hidden');\n                if (model.hidden) {\n                    elem.classList.add(hiddenClass);\n                }\n                else {\n                    elem.classList.remove(hiddenClass);\n                }\n            }\n            else if (ev.propertyName === 'positions') {\n                getAllBladePositions().forEach(function (pos) {\n                    elem.classList.remove(className(undefined, pos));\n                });\n                model.positions.forEach(function (pos) {\n                    elem.classList.add(className(undefined, pos));\n                });\n            }\n        });\n        model.emitter.on('dispose', function () {\n            if (view.onDispose) {\n                view.onDispose();\n            }\n            disposeElement(elem);\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    var Emitter = /** @class */ (function () {\n        function Emitter() {\n            this.observers_ = {};\n        }\n        Emitter.prototype.on = function (eventName, handler) {\n            var observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        };\n        Emitter.prototype.off = function (eventName, handler) {\n            var observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter(function (observer) {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        };\n        Emitter.prototype.emit = function (eventName, event) {\n            var observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach(function (observer) {\n                observer.handler(event);\n            });\n        };\n        return Emitter;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Button = /** @class */ (function () {\n        function Button(title) {\n            this.emitter = new Emitter();\n            this.title = title;\n        }\n        Button.prototype.click = function () {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        };\n        return Button;\n    }());\n\n    var className$1 = ClassName('btn');\n    /**\n     * @hidden\n     */\n    var ButtonView = /** @class */ (function () {\n        function ButtonView(doc, config) {\n            this.button = config.button;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            var buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$1('b'));\n            buttonElem.textContent = this.button.title;\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n        }\n        return ButtonView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ButtonController = /** @class */ (function () {\n        function ButtonController(doc, config) {\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.button = new Button(config.title);\n            this.blade = config.blade;\n            this.view = new ButtonView(doc, {\n                button: this.button,\n            });\n            this.view.buttonElement.addEventListener('click', this.onButtonClick_);\n            setUpBladeView(this.view, this.blade);\n        }\n        ButtonController.prototype.onButtonClick_ = function () {\n            this.button.click();\n        };\n        return ButtonController;\n    }());\n\n    var className$2 = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        var frag = doc.createDocumentFragment();\n        var lineNodes = label.split('\\n').map(function (line) {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach(function (lineNode, index) {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    /**\n     * @hidden\n     */\n    var LabeledView = /** @class */ (function () {\n        function LabeledView(doc, config) {\n            this.label = config.label;\n            this.elem_ = doc.createElement('div');\n            this.elem_.classList.add(className$2());\n            var labelElem = doc.createElement('div');\n            labelElem.classList.add(className$2('l'));\n            labelElem.appendChild(createLabelNode(doc, this.label));\n            this.elem_.appendChild(labelElem);\n            var viewElem = doc.createElement('div');\n            viewElem.classList.add(className$2('v'));\n            viewElem.appendChild(config.view.element);\n            this.elem_.appendChild(viewElem);\n        }\n        Object.defineProperty(LabeledView.prototype, \"element\", {\n            get: function () {\n                return this.elem_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return LabeledView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var InputBindingController = /** @class */ (function () {\n        function InputBindingController(doc, config) {\n            this.binding = config.binding;\n            this.controller = config.controller;\n            this.view = new LabeledView(doc, {\n                label: config.label,\n                view: this.controller.view,\n            });\n            this.blade = config.blade;\n            setUpBladeView(this.view, this.blade);\n        }\n        return InputBindingController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var MonitorBindingController = /** @class */ (function () {\n        function MonitorBindingController(doc, config) {\n            var _this = this;\n            this.binding = config.binding;\n            this.controller = config.controller;\n            this.view = new LabeledView(doc, {\n                label: config.label,\n                view: this.controller.view,\n            });\n            this.blade = config.blade;\n            this.blade.emitter.on('dispose', function () {\n                _this.binding.dispose();\n            });\n            setUpBladeView(this.view, this.blade);\n        }\n        return MonitorBindingController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Disposable = /** @class */ (function () {\n        function Disposable() {\n            this.emitter = new Emitter();\n            this.disposed_ = false;\n        }\n        Object.defineProperty(Disposable.prototype, \"disposed\", {\n            get: function () {\n                return this.disposed_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Disposable.prototype.dispose = function () {\n            if (this.disposed_) {\n                return false;\n            }\n            this.disposed_ = true;\n            this.emitter.emit('dispose', {\n                sender: this,\n            });\n            return true;\n        };\n        return Disposable;\n    }());\n\n    var Blade = /** @class */ (function () {\n        function Blade() {\n            this.onDispose_ = this.onDispose_.bind(this);\n            this.emitter = new Emitter();\n            this.positions_ = [];\n            this.hidden_ = false;\n            this.disposable_ = new Disposable();\n            this.disposable_.emitter.on('dispose', this.onDispose_);\n        }\n        Object.defineProperty(Blade.prototype, \"hidden\", {\n            get: function () {\n                return this.hidden_;\n            },\n            set: function (hidden) {\n                if (this.hidden_ === hidden) {\n                    return;\n                }\n                this.hidden_ = hidden;\n                this.emitter.emit('change', {\n                    propertyName: 'hidden',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Blade.prototype, \"positions\", {\n            get: function () {\n                return this.positions_;\n            },\n            set: function (positions) {\n                if (deepEqualsArray(positions, this.positions_)) {\n                    return;\n                }\n                this.positions_ = positions;\n                this.emitter.emit('change', {\n                    propertyName: 'positions',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Blade.prototype, \"disposed\", {\n            get: function () {\n                return this.disposable_.disposed;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Blade.prototype.dispose = function () {\n            this.disposable_.dispose();\n        };\n        Blade.prototype.onDispose_ = function () {\n            this.emitter.emit('dispose', {\n                sender: this,\n            });\n        };\n        return Blade;\n    }());\n\n    var SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        var t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return new Function('return this')();\n    }\n    function getWindowDocument() {\n        var globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function isBrowser() {\n        return 'document' in getGlobalObject();\n    }\n    function getCanvasContext(canvasElement) {\n        // HTMLCanvasElement.prototype.getContext is not defined on testing environment\n        return isBrowser() ? canvasElement.getContext('2d') : null;\n    }\n    var ICON_ID_TO_INNER_HTML_MAP = {\n        p2dpad: '<path d=\"M8 2V14\" stroke=\"currentColor\" stroke-width=\"1.5\"/><path d=\"M2 8H14\" stroke=\"currentColor\" stroke-width=\"1.5\"/><circle cx=\"8\" cy=\"8\" r=\"2\" fill=\"currentColor\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        var elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        // Workaround for Firefox\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        // TODO: Workaround for Safari\n        // Safari doesn't set next target for some elements\n        // (e.g. button, input[type=checkbox], etc.)\n        return null;\n    }\n\n    function updateAllItemsPositions(bladeRack) {\n        var visibleItems = bladeRack.items.filter(function (bc) { return !bc.blade.hidden; });\n        var firstVisibleItem = visibleItems[0];\n        var lastVisibleItem = visibleItems[visibleItems.length - 1];\n        bladeRack.items.forEach(function (bc) {\n            var ps = [];\n            if (bc === firstVisibleItem) {\n                ps.push('first');\n            }\n            if (bc === lastVisibleItem) {\n                ps.push('last');\n            }\n            bc.blade.positions = ps;\n        });\n    }\n    /**\n     * @hidden\n     */\n    function computeExpandedFolderHeight(folder, containerElement) {\n        var height = 0;\n        disableTransitionTemporarily(containerElement, function () {\n            // Expand folder temporarily\n            folder.expandedHeight = null;\n            folder.temporaryExpanded = true;\n            forceReflow(containerElement);\n            // Compute height\n            height = containerElement.clientHeight;\n            // Restore expanded\n            folder.temporaryExpanded = null;\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n\n    /**\n     * @hidden\n     */\n    var List = /** @class */ (function () {\n        function List() {\n            this.emitter = new Emitter();\n            this.items_ = [];\n        }\n        Object.defineProperty(List.prototype, \"items\", {\n            get: function () {\n                return this.items_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        List.prototype.add = function (item, opt_index) {\n            var index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                sender: this,\n            });\n        };\n        List.prototype.remove = function (item) {\n            var index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.emitter.emit('remove', {\n                sender: this,\n            });\n        };\n        return List;\n    }());\n\n    /**\n     * @hidden\n     */\n    var BladeRack = /** @class */ (function () {\n        function BladeRack() {\n            this.onItemFolderFold_ = this.onItemFolderFold_.bind(this);\n            this.onListItemLayout_ = this.onListItemLayout_.bind(this);\n            this.onSubitemLayout_ = this.onSubitemLayout_.bind(this);\n            this.onSubitemFolderFold_ = this.onSubitemFolderFold_.bind(this);\n            this.onSubitemInputChange_ = this.onSubitemInputChange_.bind(this);\n            this.onSubitemMonitorUpdate_ = this.onSubitemMonitorUpdate_.bind(this);\n            this.onItemInputChange_ = this.onItemInputChange_.bind(this);\n            this.onListAdd_ = this.onListAdd_.bind(this);\n            this.onListItemDispose_ = this.onListItemDispose_.bind(this);\n            this.onListRemove_ = this.onListRemove_.bind(this);\n            this.onItemMonitorUpdate_ = this.onItemMonitorUpdate_.bind(this);\n            this.blades_ = new List();\n            this.emitter = new Emitter();\n            this.blades_.emitter.on('add', this.onListAdd_);\n            this.blades_.emitter.on('remove', this.onListRemove_);\n        }\n        Object.defineProperty(BladeRack.prototype, \"items\", {\n            get: function () {\n                return this.blades_.items;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        BladeRack.prototype.add = function (bc, opt_index) {\n            this.blades_.add(bc, opt_index);\n        };\n        BladeRack.prototype.find = function (controllerClass) {\n            return this.items.reduce(function (results, bc) {\n                if (bc instanceof FolderController) {\n                    results.push.apply(results, bc.bladeRack.find(controllerClass));\n                }\n                if (bc instanceof controllerClass) {\n                    results.push(bc);\n                }\n                return results;\n            }, []);\n        };\n        BladeRack.prototype.onListAdd_ = function (ev) {\n            var bc = ev.item;\n            this.emitter.emit('add', {\n                blade: bc,\n                index: ev.index,\n                sender: this,\n            });\n            bc.blade.emitter.on('dispose', this.onListItemDispose_);\n            bc.blade.emitter.on('change', this.onListItemLayout_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onItemInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onItemMonitorUpdate_);\n            }\n            else if (bc instanceof FolderController) {\n                bc.folder.emitter.on('change', this.onItemFolderFold_);\n                var emitter = bc.bladeRack.emitter;\n                emitter.on('itemfold', this.onSubitemFolderFold_);\n                emitter.on('itemlayout', this.onSubitemLayout_);\n                emitter.on('inputchange', this.onSubitemInputChange_);\n                emitter.on('monitorupdate', this.onSubitemMonitorUpdate_);\n            }\n        };\n        BladeRack.prototype.onListRemove_ = function (_) {\n            this.emitter.emit('remove', {\n                sender: this,\n            });\n        };\n        BladeRack.prototype.onListItemLayout_ = function (ev) {\n            if (ev.propertyName === 'hidden' || ev.propertyName === 'positions') {\n                this.emitter.emit('itemlayout', {\n                    sender: this,\n                });\n            }\n        };\n        BladeRack.prototype.onListItemDispose_ = function (_) {\n            var _this = this;\n            var disposedUcs = this.blades_.items.filter(function (bc) {\n                return bc.blade.disposed;\n            });\n            disposedUcs.forEach(function (bc) {\n                _this.blades_.remove(bc);\n            });\n        };\n        BladeRack.prototype.onItemInputChange_ = function (ev) {\n            this.emitter.emit('inputchange', {\n                inputBinding: ev.sender,\n                sender: this,\n                value: ev.rawValue,\n            });\n        };\n        BladeRack.prototype.onItemMonitorUpdate_ = function (ev) {\n            this.emitter.emit('monitorupdate', {\n                monitorBinding: ev.sender,\n                sender: this,\n                value: ev.rawValue,\n            });\n        };\n        BladeRack.prototype.onItemFolderFold_ = function (ev) {\n            if (ev.propertyName !== 'expanded') {\n                return;\n            }\n            this.emitter.emit('itemfold', {\n                expanded: ev.sender.expanded,\n                sender: this,\n            });\n        };\n        BladeRack.prototype.onSubitemLayout_ = function (_) {\n            this.emitter.emit('itemlayout', {\n                sender: this,\n            });\n        };\n        BladeRack.prototype.onSubitemInputChange_ = function (ev) {\n            this.emitter.emit('inputchange', {\n                inputBinding: ev.inputBinding,\n                sender: this,\n                value: ev.value,\n            });\n        };\n        BladeRack.prototype.onSubitemMonitorUpdate_ = function (ev) {\n            this.emitter.emit('monitorupdate', {\n                monitorBinding: ev.monitorBinding,\n                sender: this,\n                value: ev.value,\n            });\n        };\n        BladeRack.prototype.onSubitemFolderFold_ = function (ev) {\n            this.emitter.emit('itemfold', {\n                expanded: ev.expanded,\n                sender: this,\n            });\n        };\n        return BladeRack;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Folder = /** @class */ (function () {\n        function Folder(title, expanded) {\n            this.emitter = new Emitter();\n            this.expanded_ = expanded;\n            this.expandedHeight_ = null;\n            this.temporaryExpanded_ = null;\n            this.shouldFixHeight_ = false;\n            this.title = title;\n        }\n        Object.defineProperty(Folder.prototype, \"expanded\", {\n            get: function () {\n                return this.expanded_;\n            },\n            set: function (expanded) {\n                var changed = this.expanded_ !== expanded;\n                if (!changed) {\n                    return;\n                }\n                this.emitter.emit('beforechange', {\n                    propertyName: 'expanded',\n                    sender: this,\n                });\n                this.expanded_ = expanded;\n                this.emitter.emit('change', {\n                    propertyName: 'expanded',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Folder.prototype, \"temporaryExpanded\", {\n            get: function () {\n                return this.temporaryExpanded_;\n            },\n            set: function (expanded) {\n                var changed = this.temporaryExpanded_ !== expanded;\n                if (!changed) {\n                    return;\n                }\n                this.emitter.emit('beforechange', {\n                    propertyName: 'temporaryExpanded',\n                    sender: this,\n                });\n                this.temporaryExpanded_ = expanded;\n                this.emitter.emit('change', {\n                    propertyName: 'temporaryExpanded',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Folder.prototype, \"expandedHeight\", {\n            get: function () {\n                return this.expandedHeight_;\n            },\n            set: function (expandedHeight) {\n                var changed = this.expandedHeight_ !== expandedHeight;\n                if (!changed) {\n                    return;\n                }\n                this.emitter.emit('beforechange', {\n                    propertyName: 'expandedHeight',\n                    sender: this,\n                });\n                this.expandedHeight_ = expandedHeight;\n                this.emitter.emit('change', {\n                    propertyName: 'expandedHeight',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Folder.prototype, \"shouldFixHeight\", {\n            get: function () {\n                return this.shouldFixHeight_;\n            },\n            set: function (shouldFixHeight) {\n                var changed = this.shouldFixHeight_ !== shouldFixHeight;\n                if (!changed) {\n                    return;\n                }\n                this.emitter.emit('beforechange', {\n                    propertyName: 'shouldFixHeight',\n                    sender: this,\n                });\n                this.shouldFixHeight_ = shouldFixHeight;\n                this.emitter.emit('change', {\n                    propertyName: 'shouldFixHeight',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Folder.prototype, \"styleExpanded\", {\n            get: function () {\n                var _a;\n                return (_a = this.temporaryExpanded) !== null && _a !== void 0 ? _a : this.expanded;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Folder.prototype, \"styleHeight\", {\n            get: function () {\n                if (!this.styleExpanded) {\n                    return '0';\n                }\n                if (this.shouldFixHeight && !isEmpty(this.expandedHeight)) {\n                    return this.expandedHeight + \"px\";\n                }\n                return 'auto';\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return Folder;\n    }());\n\n    var className$3 = ClassName('fld');\n    /**\n     * @hidden\n     */\n    var FolderView = /** @class */ (function () {\n        function FolderView(doc, config) {\n            this.onFolderChange_ = this.onFolderChange_.bind(this);\n            this.folder_ = config.folder;\n            this.folder_.emitter.on('change', this.onFolderChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            var titleElem = doc.createElement('button');\n            titleElem.classList.add(className$3('t'));\n            titleElem.textContent = this.folder_.title;\n            this.element.appendChild(titleElem);\n            this.titleElement = titleElem;\n            var markElem = doc.createElement('div');\n            markElem.classList.add(className$3('m'));\n            this.titleElement.appendChild(markElem);\n            var containerElem = doc.createElement('div');\n            containerElem.classList.add(className$3('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n            this.applyModel_();\n        }\n        FolderView.prototype.applyModel_ = function () {\n            var expanded = this.folder_.styleExpanded;\n            var expandedClass = className$3(undefined, 'expanded');\n            if (expanded) {\n                this.element.classList.add(expandedClass);\n            }\n            else {\n                this.element.classList.remove(expandedClass);\n            }\n            this.containerElement.style.height = this.folder_.styleHeight;\n        };\n        FolderView.prototype.onFolderChange_ = function () {\n            this.applyModel_();\n        };\n        return FolderView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var FolderController = /** @class */ (function () {\n        function FolderController(doc, config) {\n            var _a;\n            this.onContainerTransitionEnd_ = this.onContainerTransitionEnd_.bind(this);\n            this.onFolderBeforeChange_ = this.onFolderBeforeChange_.bind(this);\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackItemLayout_ = this.onRackItemLayout_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.blade = config.blade;\n            this.folder = new Folder(config.title, (_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            this.folder.emitter.on('beforechange', this.onFolderBeforeChange_);\n            this.rack_ = new BladeRack();\n            this.rack_.emitter.on('add', this.onRackAdd_);\n            this.rack_.emitter.on('itemlayout', this.onRackItemLayout_);\n            this.rack_.emitter.on('remove', this.onRackRemove_);\n            this.doc_ = doc;\n            this.view = new FolderView(this.doc_, {\n                folder: this.folder,\n            });\n            this.view.titleElement.addEventListener('click', this.onTitleClick_);\n            this.view.containerElement.addEventListener('transitionend', this.onContainerTransitionEnd_);\n            setUpBladeView(this.view, this.blade);\n        }\n        Object.defineProperty(FolderController.prototype, \"document\", {\n            get: function () {\n                return this.doc_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(FolderController.prototype, \"bladeRack\", {\n            get: function () {\n                return this.rack_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        FolderController.prototype.onFolderBeforeChange_ = function (ev) {\n            if (ev.propertyName !== 'expanded') {\n                return;\n            }\n            if (isEmpty(this.folder.expandedHeight)) {\n                this.folder.expandedHeight = computeExpandedFolderHeight(this.folder, this.view.containerElement);\n            }\n            this.folder.shouldFixHeight = true;\n            forceReflow(this.view.containerElement);\n        };\n        FolderController.prototype.onTitleClick_ = function () {\n            this.folder.expanded = !this.folder.expanded;\n        };\n        FolderController.prototype.applyRackChange_ = function () {\n            updateAllItemsPositions(this.bladeRack);\n        };\n        FolderController.prototype.onRackAdd_ = function (ev) {\n            insertElementAt(this.view.containerElement, ev.blade.view.element, ev.index);\n            this.applyRackChange_();\n        };\n        FolderController.prototype.onRackRemove_ = function (_) {\n            this.applyRackChange_();\n        };\n        FolderController.prototype.onRackItemLayout_ = function (_) {\n            this.applyRackChange_();\n        };\n        FolderController.prototype.onContainerTransitionEnd_ = function (ev) {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            this.folder.shouldFixHeight = false;\n            this.folder.expandedHeight = null;\n        };\n        return FolderController;\n    }());\n\n    var className$4 = ClassName('spt');\n    /**\n     * @hidden\n     */\n    var SeparatorView = /** @class */ (function () {\n        function SeparatorView(doc) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            var hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$4('r'));\n            this.element.appendChild(hrElem);\n        }\n        return SeparatorView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var SeparatorController = /** @class */ (function () {\n        function SeparatorController(doc, config) {\n            this.blade = config.blade;\n            this.view = new SeparatorView(doc);\n            setUpBladeView(this.view, this.blade);\n        }\n        return SeparatorController;\n    }());\n\n    var ButtonApi = /** @class */ (function () {\n        /**\n         * @hidden\n         */\n        function ButtonApi(buttonController) {\n            this.controller = buttonController;\n        }\n        Object.defineProperty(ButtonApi.prototype, \"hidden\", {\n            get: function () {\n                return this.controller.blade.hidden;\n            },\n            set: function (hidden) {\n                this.controller.blade.hidden = hidden;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ButtonApi.prototype.dispose = function () {\n            this.controller.blade.dispose();\n        };\n        ButtonApi.prototype.on = function (eventName, handler) {\n            var emitter = this.controller.button.emitter;\n            // TODO: Type-safe\n            emitter.on(eventName, forceCast(handler.bind(this)));\n            return this;\n        };\n        return ButtonApi;\n    }());\n\n    /**\n     * @hidden\n     */\n    function handleInputBinding(_a) {\n        var binding = _a.binding, eventName = _a.eventName, handler = _a.handler;\n        if (eventName === 'change') {\n            var emitter = binding.emitter;\n            emitter.on('change', function (ev) {\n                handler(forceCast(ev.sender.target.read()));\n            });\n        }\n    }\n    /**\n     * @hidden\n     */\n    function handleMonitorBinding(_a) {\n        var binding = _a.binding, eventName = _a.eventName, handler = _a.handler;\n        if (eventName === 'update') {\n            var emitter = binding.emitter;\n            emitter.on('update', function (ev) {\n                handler(ev.sender.target.read());\n            });\n        }\n    }\n    /**\n     * @hidden\n     */\n    function handleFolder(_a) {\n        var bladeRack = _a.bladeRack, eventName = _a.eventName, folder = _a.folder, handler = _a.handler;\n        if (eventName === 'change') {\n            var emitter = bladeRack.emitter;\n            emitter.on('inputchange', function (ev) {\n                handler(ev.inputBinding.target.read());\n            });\n        }\n        if (eventName === 'update') {\n            var emitter = bladeRack.emitter;\n            emitter.on('monitorupdate', function (ev) {\n                handler(ev.monitorBinding.target.read());\n            });\n        }\n        if (eventName === 'fold') {\n            bladeRack.emitter.on('itemfold', function (ev) {\n                handler(ev.expanded);\n            });\n            folder === null || folder === void 0 ? void 0 : folder.emitter.on('change', function (ev) {\n                if (ev.propertyName !== 'expanded') {\n                    return;\n                }\n                handler(ev.sender.expanded);\n            });\n        }\n    }\n\n    /**\n     * The API for the input binding between the parameter and the pane.\n     * @param In The internal type.\n     * @param Ex The external type (= parameter object).\n     */\n    var InputBindingApi = /** @class */ (function () {\n        /**\n         * @hidden\n         */\n        function InputBindingApi(bindingController) {\n            this.controller = bindingController;\n        }\n        Object.defineProperty(InputBindingApi.prototype, \"hidden\", {\n            get: function () {\n                return this.controller.blade.hidden;\n            },\n            set: function (hidden) {\n                this.controller.blade.hidden = hidden;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        InputBindingApi.prototype.dispose = function () {\n            this.controller.blade.dispose();\n        };\n        InputBindingApi.prototype.on = function (eventName, handler) {\n            handleInputBinding({\n                binding: this.controller.binding,\n                eventName: eventName,\n                handler: handler.bind(this),\n            });\n            return this;\n        };\n        InputBindingApi.prototype.refresh = function () {\n            this.controller.binding.read();\n        };\n        return InputBindingApi;\n    }());\n\n    var CREATE_MESSAGE_MAP = {\n        alreadydisposed: function () { return 'View has been already disposed'; },\n        invalidparams: function (context) { return \"Invalid parameters for '\" + context.name + \"'\"; },\n        nomatchingcontroller: function (context) {\n            return \"No matching controller for '\" + context.key + \"'\";\n        },\n        notbindable: function () { return \"Value is not bindable\"; },\n        propertynotfound: function (context) { return \"Property '\" + context.name + \"' not found\"; },\n        shouldneverhappen: function () { return 'This error should never happen'; },\n    };\n    var TpError = /** @class */ (function () {\n        function TpError(config) {\n            var _a;\n            this.message = (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        TpError.alreadyDisposed = function () {\n            return new TpError({ context: {}, type: 'alreadydisposed' });\n        };\n        TpError.notBindable = function () {\n            return new TpError({\n                context: {},\n                type: 'notbindable',\n            });\n        };\n        TpError.propertyNotFound = function (name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        };\n        TpError.shouldNeverHappen = function () {\n            return new TpError({ context: {}, type: 'shouldneverhappen' });\n        };\n        return TpError;\n    }());\n    TpError.prototype = Object.create(Error.prototype);\n    TpError.prototype.constructor = TpError;\n\n    /**\n     * @hidden\n     */\n    var InputBinding = /** @class */ (function () {\n        function InputBinding(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        InputBinding.prototype.read = function () {\n            var targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        };\n        InputBinding.prototype.write_ = function (rawValue) {\n            this.writer(this.target, rawValue);\n        };\n        InputBinding.prototype.onValueChange_ = function (ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        };\n        return InputBinding;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Value = /** @class */ (function () {\n        function Value(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : (function (v1, v2) { return v1 === v2; });\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        Object.defineProperty(Value.prototype, \"constraint\", {\n            get: function () {\n                return this.constraint_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Value.prototype, \"rawValue\", {\n            get: function () {\n                return this.rawValue_;\n            },\n            set: function (rawValue) {\n                var constrainedValue = this.constraint_\n                    ? this.constraint_.constrain(rawValue)\n                    : rawValue;\n                var changed = !this.equals_(this.rawValue_, constrainedValue);\n                if (changed) {\n                    this.rawValue_ = constrainedValue;\n                    this.emitter.emit('change', {\n                        rawValue: constrainedValue,\n                        sender: this,\n                    });\n                }\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return Value;\n    }());\n\n    function createController(plugin, args) {\n        var initialValue = plugin.binding.accept(args.target.read(), args.params);\n        if (initialValue === null) {\n            return null;\n        }\n        var valueArgs = {\n            target: args.target,\n            initialValue: initialValue,\n            params: args.params,\n        };\n        var reader = plugin.binding.reader(valueArgs);\n        var constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        var value = new Value(reader(initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        var binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        var controller = plugin.controller({\n            binding: binding,\n            document: args.document,\n            initialValue: initialValue,\n            params: args.params,\n        });\n        return new InputBindingController(args.document, {\n            binding: binding,\n            controller: controller,\n            label: args.params.label || args.target.key,\n            blade: new Blade(),\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    function createInputBindingController(document, target, params) {\n        var initialValue = target.read();\n        if (isEmpty(initialValue)) {\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        var bc = Plugins.inputs.reduce(function (result, plugin) {\n            return result ||\n                createController(plugin, {\n                    document: document,\n                    target: target,\n                    params: params,\n                });\n        }, null);\n        if (bc) {\n            return bc;\n        }\n        throw new TpError({\n            context: {\n                key: target.key,\n            },\n            type: 'nomatchingcontroller',\n        });\n    }\n\n    /**\n     * The API for the monitor binding between the parameter and the pane.\n     */\n    var MonitorBindingApi = /** @class */ (function () {\n        /**\n         * @hidden\n         */\n        function MonitorBindingApi(bindingController) {\n            this.controller = bindingController;\n        }\n        Object.defineProperty(MonitorBindingApi.prototype, \"hidden\", {\n            get: function () {\n                return this.controller.blade.hidden;\n            },\n            set: function (hidden) {\n                this.controller.blade.hidden = hidden;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        MonitorBindingApi.prototype.dispose = function () {\n            this.controller.blade.dispose();\n        };\n        MonitorBindingApi.prototype.on = function (eventName, handler) {\n            handleMonitorBinding({\n                binding: this.controller.binding,\n                eventName: eventName,\n                // TODO: Type-safe\n                handler: forceCast(handler.bind(this)),\n            });\n            return this;\n        };\n        MonitorBindingApi.prototype.refresh = function () {\n            this.controller.binding.read();\n        };\n        return MonitorBindingApi;\n    }());\n\n    var Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    /**\n     * @hidden\n     */\n    function initializeBuffer(initialValue, bufferSize) {\n        var buffer = [initialValue];\n        fillBuffer(buffer, bufferSize);\n        return new Value(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        var index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    /**\n     * @hidden\n     */\n    function createPushedBuffer(buffer, newValue) {\n        var newBuffer = __spreadArrays(createTrimmedBuffer(buffer), [newValue]);\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    /**\n     * @hidden\n     */\n    var MonitorBinding = /** @class */ (function () {\n        function MonitorBinding(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        MonitorBinding.prototype.dispose = function () {\n            this.ticker.disposable.dispose();\n        };\n        MonitorBinding.prototype.read = function () {\n            var targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            var buffer = this.value.rawValue;\n            var newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        };\n        MonitorBinding.prototype.onTick_ = function (_) {\n            this.read();\n        };\n        return MonitorBinding;\n    }());\n\n    /**\n     * @hidden\n     */\n    var IntervalTicker = /** @class */ (function () {\n        function IntervalTicker(doc, interval) {\n            var _this = this;\n            this.id_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            // this.onWindowBlur_ = this.onWindowBlur_.bind(this);\n            // this.onWindowFocus_ = this.onWindowFocus_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            if (interval <= 0) {\n                this.id_ = null;\n            }\n            else {\n                var win = this.doc_.defaultView;\n                if (win) {\n                    this.id_ = win.setInterval(this.onTick_, interval);\n                }\n            }\n            // TODO: Stop on blur?\n            // const win = document.defaultView;\n            // if (win) {\n            //   win.addEventListener('blur', this.onWindowBlur_);\n            //   win.addEventListener('focus', this.onWindowFocus_);\n            // }\n            this.disposable = new Disposable();\n            this.disposable.emitter.on('dispose', function () {\n                if (_this.id_ !== null) {\n                    var win = _this.doc_.defaultView;\n                    if (win) {\n                        win.clearInterval(_this.id_);\n                    }\n                }\n                _this.id_ = null;\n            });\n        }\n        IntervalTicker.prototype.onTick_ = function () {\n            // if (!this.active_) {\n            // \treturn;\n            // }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        };\n        return IntervalTicker;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ManualTicker = /** @class */ (function () {\n        function ManualTicker() {\n            this.disposable = new Disposable();\n            this.emitter = new Emitter();\n        }\n        ManualTicker.prototype.tick = function () {\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        };\n        return ManualTicker;\n    }());\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createController$1(plugin, args) {\n        var _a, _b, _c;\n        var initialValue = plugin.binding.accept(args.target.read(), args.params);\n        if (initialValue === null) {\n            return null;\n        }\n        var valueArgs = {\n            target: args.target,\n            initialValue: initialValue,\n            params: args.params,\n        };\n        var reader = plugin.binding.reader(valueArgs);\n        var bufferSize = (_c = (_b = (_a = args.params.bufferSize) !== null && _a !== void 0 ? _a : args.params.count) !== null && _b !== void 0 ? _b : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(args.params))) !== null && _c !== void 0 ? _c : 1;\n        var binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, args.params.interval),\n            value: initializeBuffer(reader(initialValue), bufferSize),\n        });\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            controller: plugin.controller({\n                binding: binding,\n                document: args.document,\n                params: args.params,\n            }),\n            label: args.params.label || args.target.key,\n            blade: new Blade(),\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    function createMonitorBindingController(document, target, params) {\n        var bc = Plugins.monitors.reduce(function (result, plugin) {\n            return result ||\n                createController$1(plugin, {\n                    document: document,\n                    params: params,\n                    target: target,\n                });\n        }, null);\n        if (bc) {\n            return bc;\n        }\n        throw new TpError({\n            context: {\n                key: target.key,\n            },\n            type: 'nomatchingcontroller',\n        });\n    }\n\n    var SeparatorApi = /** @class */ (function () {\n        /**\n         * @hidden\n         */\n        function SeparatorApi(controller) {\n            this.controller = controller;\n        }\n        Object.defineProperty(SeparatorApi.prototype, \"hidden\", {\n            get: function () {\n                return this.controller.blade.hidden;\n            },\n            set: function (hidden) {\n                this.controller.blade.hidden = hidden;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        SeparatorApi.prototype.dispose = function () {\n            this.controller.blade.dispose();\n        };\n        return SeparatorApi;\n    }());\n\n    /**\n     * @hidden\n     */\n    var BindingTarget = /** @class */ (function () {\n        function BindingTarget(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        BindingTarget.isBindable = function (obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        };\n        Object.defineProperty(BindingTarget.prototype, \"key\", {\n            get: function () {\n                return this.key_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(BindingTarget.prototype, \"presetKey\", {\n            get: function () {\n                return this.presetKey_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        BindingTarget.prototype.read = function () {\n            return this.obj_[this.key_];\n        };\n        BindingTarget.prototype.write = function (value) {\n            this.obj_[this.key_] = value;\n        };\n        BindingTarget.prototype.writeProperty = function (name, value) {\n            var valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        };\n        return BindingTarget;\n    }());\n\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n\n    var FolderApi = /** @class */ (function () {\n        /**\n         * @hidden\n         */\n        function FolderApi(folderController) {\n            this.controller = folderController;\n        }\n        Object.defineProperty(FolderApi.prototype, \"expanded\", {\n            get: function () {\n                return this.controller.folder.expanded;\n            },\n            set: function (expanded) {\n                this.controller.folder.expanded = expanded;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(FolderApi.prototype, \"hidden\", {\n            get: function () {\n                return this.controller.blade.hidden;\n            },\n            set: function (hidden) {\n                this.controller.blade.hidden = hidden;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        FolderApi.prototype.dispose = function () {\n            this.controller.blade.dispose();\n        };\n        FolderApi.prototype.addInput = function (object, key, opt_params) {\n            var params = opt_params || {};\n            var bc = createInputBindingController(this.controller.document, createBindingTarget(object, key, params.presetKey), params);\n            this.controller.bladeRack.add(bc, params.index);\n            return new InputBindingApi(forceCast(bc));\n        };\n        FolderApi.prototype.addMonitor = function (object, key, opt_params) {\n            var params = opt_params || {};\n            var bc = createMonitorBindingController(this.controller.document, createBindingTarget(object, key), params);\n            this.controller.bladeRack.add(bc, params.index);\n            return new MonitorBindingApi(forceCast(bc));\n        };\n        FolderApi.prototype.addFolder = function (params) {\n            var bc = new FolderController(this.controller.document, __assign(__assign({}, params), { blade: new Blade() }));\n            this.controller.bladeRack.add(bc, params.index);\n            return new FolderApi(bc);\n        };\n        FolderApi.prototype.addButton = function (params) {\n            var bc = new ButtonController(this.controller.document, __assign(__assign({}, params), { blade: new Blade() }));\n            this.controller.bladeRack.add(bc, params.index);\n            return new ButtonApi(bc);\n        };\n        FolderApi.prototype.addSeparator = function (opt_params) {\n            var params = opt_params || {};\n            var bc = new SeparatorController(this.controller.document, {\n                blade: new Blade(),\n            });\n            this.controller.bladeRack.add(bc, params.index);\n            return new SeparatorApi(bc);\n        };\n        FolderApi.prototype.on = function (eventName, handler) {\n            handleFolder({\n                eventName: eventName,\n                folder: this.controller.folder,\n                // TODO: Type-safe\n                handler: forceCast(handler.bind(this)),\n                bladeRack: this.controller.bladeRack,\n            });\n            return this;\n        };\n        return FolderApi;\n    }());\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce(function (result, target) {\n            var _a;\n            return Object.assign(result, (_a = {},\n                _a[target.presetKey] = target.read(),\n                _a));\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(targets, preset) {\n        targets.forEach(function (target) {\n            var value = preset[target.presetKey];\n            if (value !== undefined) {\n                target.write(value);\n            }\n        });\n    }\n\n    /**\n     * The Tweakpane interface.\n     *\n     * ```\n     * new Tweakpane(options: TweakpaneConfig): RootApi\n     * ```\n     *\n     * See [[`TweakpaneConfig`]] interface for available options.\n     */\n    var RootApi = /** @class */ (function () {\n        /**\n         * @hidden\n         */\n        function RootApi(rootController) {\n            this.controller = rootController;\n        }\n        // TODO: Publish\n        /**\n         * @hidden\n         */\n        RootApi.registerPlugin = function (r) {\n            if (r.type === 'input') {\n                Plugins.inputs.unshift(r.plugin);\n            }\n            else if (r.type === 'monitor') {\n                Plugins.monitors.unshift(r.plugin);\n            }\n        };\n        Object.defineProperty(RootApi.prototype, \"element\", {\n            get: function () {\n                return this.controller.view.element;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(RootApi.prototype, \"expanded\", {\n            get: function () {\n                var folder = this.controller.folder;\n                return folder ? folder.expanded : true;\n            },\n            set: function (expanded) {\n                var folder = this.controller.folder;\n                if (folder) {\n                    folder.expanded = expanded;\n                }\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(RootApi.prototype, \"hidden\", {\n            get: function () {\n                return this.controller.blade.hidden;\n            },\n            set: function (hidden) {\n                this.controller.blade.hidden = hidden;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        RootApi.prototype.dispose = function () {\n            this.controller.blade.dispose();\n        };\n        RootApi.prototype.addInput = function (object, key, opt_params) {\n            var params = opt_params || {};\n            var bc = createInputBindingController(this.controller.document, createBindingTarget(object, key, params.presetKey), params);\n            this.controller.bladeRack.add(bc, params.index);\n            return new InputBindingApi(forceCast(bc));\n        };\n        RootApi.prototype.addMonitor = function (object, key, opt_params) {\n            var params = opt_params || {};\n            var bc = createMonitorBindingController(this.controller.document, createBindingTarget(object, key), params);\n            this.controller.bladeRack.add(bc, params.index);\n            return new MonitorBindingApi(forceCast(bc));\n        };\n        RootApi.prototype.addButton = function (params) {\n            var bc = new ButtonController(this.controller.document, __assign(__assign({}, params), { blade: new Blade() }));\n            this.controller.bladeRack.add(bc, params.index);\n            return new ButtonApi(bc);\n        };\n        RootApi.prototype.addFolder = function (params) {\n            var bc = new FolderController(this.controller.document, __assign(__assign({}, params), { blade: new Blade() }));\n            this.controller.bladeRack.add(bc, params.index);\n            return new FolderApi(bc);\n        };\n        RootApi.prototype.addSeparator = function (opt_params) {\n            var params = opt_params || {};\n            var bc = new SeparatorController(this.controller.document, {\n                blade: new Blade(),\n            });\n            this.controller.bladeRack.add(bc, params.index);\n            return new SeparatorApi(bc);\n        };\n        /**\n         * Import a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        RootApi.prototype.importPreset = function (preset) {\n            var targets = this.controller.bladeRack\n                .find(InputBindingController)\n                .map(function (ibc) {\n                return ibc.binding.target;\n            });\n            importPresetJson(targets, preset);\n            this.refresh();\n        };\n        /**\n         * Export a preset of all inputs.\n         * @return The exported preset object.\n         */\n        RootApi.prototype.exportPreset = function () {\n            var targets = this.controller.bladeRack\n                .find(InputBindingController)\n                .map(function (ibc) {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        };\n        /**\n         * Adds a global event listener. It handles all events of child inputs/monitors.\n         * @param eventName The event name to listen.\n         * @return The API object itself.\n         */\n        RootApi.prototype.on = function (eventName, handler) {\n            handleFolder({\n                eventName: eventName,\n                folder: this.controller.folder,\n                // TODO: Type-safe\n                handler: forceCast(handler.bind(this)),\n                bladeRack: this.controller.bladeRack,\n            });\n            return this;\n        };\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        RootApi.prototype.refresh = function () {\n            // Force-read all input bindings\n            this.controller.bladeRack.find(InputBindingController).forEach(function (ibc) {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller.bladeRack.find(MonitorBindingController).forEach(function (mbc) {\n                mbc.binding.read();\n            });\n        };\n        return RootApi;\n    }());\n\n    var className$5 = ClassName('rot');\n    /**\n     * @hidden\n     */\n    var RootView = /** @class */ (function () {\n        function RootView(doc, config) {\n            this.titleElem_ = null;\n            this.onFolderChange_ = this.onFolderChange_.bind(this);\n            this.folder_ = config.folder;\n            if (this.folder_) {\n                this.folder_.emitter.on('change', this.onFolderChange_);\n            }\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            var folder = this.folder_;\n            if (folder) {\n                var titleElem = doc.createElement('button');\n                titleElem.classList.add(className$5('t'));\n                titleElem.textContent = folder.title;\n                this.element.appendChild(titleElem);\n                var markElem = doc.createElement('div');\n                markElem.classList.add(className$5('m'));\n                titleElem.appendChild(markElem);\n                this.titleElem_ = titleElem;\n            }\n            var containerElem = doc.createElement('div');\n            containerElem.classList.add(className$5('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n            this.applyModel_();\n        }\n        Object.defineProperty(RootView.prototype, \"titleElement\", {\n            get: function () {\n                return this.titleElem_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        RootView.prototype.applyModel_ = function () {\n            var expanded = this.folder_ ? this.folder_.styleExpanded : true;\n            var expandedClass = className$5(undefined, 'expanded');\n            if (expanded) {\n                this.element.classList.add(expandedClass);\n            }\n            else {\n                this.element.classList.remove(expandedClass);\n            }\n            this.containerElement.style.height = this.folder_\n                ? this.folder_.styleHeight\n                : 'auto';\n        };\n        RootView.prototype.onFolderChange_ = function () {\n            this.applyModel_();\n        };\n        return RootView;\n    }());\n\n    function createFolder(config) {\n        var _a;\n        if (!config.title) {\n            return null;\n        }\n        return new Folder(config.title, (_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n    }\n    /**\n     * @hidden\n     */\n    var RootController = /** @class */ (function () {\n        function RootController(doc, config) {\n            this.onContainerTransitionEnd_ = this.onContainerTransitionEnd_.bind(this);\n            this.onFolderBeforeChange_ = this.onFolderBeforeChange_.bind(this);\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackItemLayout_ = this.onRackItemLayout_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.folder = createFolder(config);\n            if (this.folder) {\n                this.folder.emitter.on('beforechange', this.onFolderBeforeChange_);\n            }\n            this.bladeRack = new BladeRack();\n            this.bladeRack.emitter.on('add', this.onRackAdd_);\n            this.bladeRack.emitter.on('itemlayout', this.onRackItemLayout_);\n            this.bladeRack.emitter.on('remove', this.onRackRemove_);\n            this.doc_ = doc;\n            this.blade = config.blade;\n            this.view = new RootView(this.doc_, {\n                folder: this.folder,\n            });\n            if (this.view.titleElement) {\n                this.view.titleElement.addEventListener('click', this.onTitleClick_);\n            }\n            this.view.containerElement.addEventListener('transitionend', this.onContainerTransitionEnd_);\n            setUpBladeView(this.view, this.blade);\n        }\n        Object.defineProperty(RootController.prototype, \"document\", {\n            get: function () {\n                return this.doc_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        RootController.prototype.onFolderBeforeChange_ = function (ev) {\n            if (ev.propertyName !== 'expanded') {\n                return;\n            }\n            var folder = this.folder;\n            if (!folder) {\n                return;\n            }\n            if (isEmpty(folder.expandedHeight)) {\n                folder.expandedHeight = computeExpandedFolderHeight(folder, this.view.containerElement);\n            }\n            folder.shouldFixHeight = true;\n            forceReflow(this.view.containerElement);\n        };\n        RootController.prototype.applyRackChange_ = function () {\n            updateAllItemsPositions(this.bladeRack);\n        };\n        RootController.prototype.onRackAdd_ = function (ev) {\n            insertElementAt(this.view.containerElement, ev.blade.view.element, ev.index);\n            this.applyRackChange_();\n        };\n        RootController.prototype.onRackRemove_ = function (_) {\n            this.applyRackChange_();\n        };\n        RootController.prototype.onRackItemLayout_ = function (_) {\n            this.applyRackChange_();\n        };\n        RootController.prototype.onTitleClick_ = function () {\n            if (this.folder) {\n                this.folder.expanded = !this.folder.expanded;\n            }\n        };\n        RootController.prototype.onContainerTransitionEnd_ = function (ev) {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            if (this.folder) {\n                this.folder.shouldFixHeight = false;\n                this.folder.expandedHeight = null;\n            }\n        };\n        return RootController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var CompositeConstraint = /** @class */ (function () {\n        function CompositeConstraint(config) {\n            this.constraints_ = config.constraints;\n        }\n        Object.defineProperty(CompositeConstraint.prototype, \"constraints\", {\n            get: function () {\n                return this.constraints_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        CompositeConstraint.prototype.constrain = function (value) {\n            return this.constraints_.reduce(function (result, c) {\n                return c.constrain(result);\n            }, value);\n        };\n        return CompositeConstraint;\n    }());\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            var result = c.constraints.reduce(function (tmpResult, sc) {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * @hidden\n     */\n    var ListConstraint = /** @class */ (function () {\n        function ListConstraint(config) {\n            this.opts_ = config.options;\n        }\n        Object.defineProperty(ListConstraint.prototype, \"options\", {\n            get: function () {\n                return this.opts_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ListConstraint.prototype.constrain = function (value) {\n            var opts = this.opts_;\n            if (opts.length === 0) {\n                return value;\n            }\n            var matched = opts.filter(function (item) {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        };\n        return ListConstraint;\n    }());\n\n    /**\n     * @hidden\n     */\n    function boolToString(value) {\n        return String(value);\n    }\n    /**\n     * @hidden\n     */\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    /**\n     * @hidden\n     */\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    /**\n     * @hidden\n     */\n    var StepConstraint = /** @class */ (function () {\n        function StepConstraint(config) {\n            this.step = config.step;\n        }\n        StepConstraint.prototype.constrain = function (value) {\n            var r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        };\n        return StepConstraint;\n    }());\n\n    function mapRange(value, start1, end1, start2, end2) {\n        var p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        var text = String(value.toFixed(10));\n        var frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    /**\n     * @hidden\n     */\n    function normalizeInputParamsOptions(options, convert) {\n        if (Array.isArray(options)) {\n            return options.map(function (item) {\n                return {\n                    text: item.text,\n                    value: convert(item.value),\n                };\n            });\n        }\n        var textToValueMap = options;\n        var texts = Object.keys(textToValueMap);\n        return texts.reduce(function (result, text) {\n            return result.concat({\n                text: text,\n                value: convert(textToValueMap[text]),\n            });\n        }, []);\n    }\n    /**\n     * @hidden\n     */\n    function findListItems(constraint) {\n        var c = constraint\n            ? findConstraint(constraint, ListConstraint)\n            : null;\n        if (!c) {\n            return null;\n        }\n        return c.options;\n    }\n    function findStep(constraint) {\n        var c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    /**\n     * @hidden\n     */\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        var sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    /**\n     * @hidden\n     */\n    function getBaseStep(constraint) {\n        var step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n\n    var className$6 = ClassName('lst');\n    /**\n     * @hidden\n     */\n    var ListView = /** @class */ (function () {\n        function ListView(doc, config) {\n            var _this = this;\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            this.stringifyValue_ = config.stringifyValue;\n            var selectElem = doc.createElement('select');\n            selectElem.classList.add(className$6('s'));\n            config.options.forEach(function (item, index) {\n                var optionElem = doc.createElement('option');\n                optionElem.dataset.index = String(index);\n                optionElem.textContent = item.text;\n                optionElem.value = _this.stringifyValue_(item.value);\n                selectElem.appendChild(optionElem);\n            });\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            var markElem = doc.createElement('div');\n            markElem.classList.add(className$6('m'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        ListView.prototype.update = function () {\n            this.selectElement.value = this.stringifyValue_(this.value.rawValue);\n        };\n        ListView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return ListView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ListController = /** @class */ (function () {\n        function ListController(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.value = config.value;\n            this.listItems_ = config.listItems;\n            this.view = new ListView(doc, {\n                options: this.listItems_,\n                stringifyValue: config.stringifyValue,\n                value: this.value,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        ListController.prototype.onSelectChange_ = function (e) {\n            var selectElem = forceCast(e.currentTarget);\n            var optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            var itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.listItems_[itemIndex].value;\n            this.view.update();\n        };\n        return ListController;\n    }());\n\n    var className$7 = ClassName('ckb');\n    /**\n     * @hidden\n     */\n    var CheckboxView = /** @class */ (function () {\n        function CheckboxView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            var labelElem = doc.createElement('label');\n            labelElem.classList.add(className$7('l'));\n            this.element.appendChild(labelElem);\n            var inputElem = doc.createElement('input');\n            inputElem.classList.add(className$7('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            var markElem = doc.createElement('div');\n            markElem.classList.add(className$7('m'));\n            labelElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        CheckboxView.prototype.update = function () {\n            this.inputElement.checked = this.value.rawValue;\n        };\n        CheckboxView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return CheckboxView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var CheckboxController = /** @class */ (function () {\n        function CheckboxController(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        CheckboxController.prototype.onInputChange_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n            this.view.update();\n        };\n        return CheckboxController;\n    }());\n\n    function createConstraint(params) {\n        var constraints = [];\n        if ('options' in params && params.options !== undefined) {\n            constraints.push(new ListConstraint({\n                options: normalizeInputParamsOptions(params.options, boolFromUnknown),\n            }));\n        }\n        return new CompositeConstraint({\n            constraints: constraints,\n        });\n    }\n    function createController$2(doc, value) {\n        var _a;\n        var c = value.constraint;\n        if (c && findConstraint(c, ListConstraint)) {\n            return new ListController(doc, {\n                listItems: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                stringifyValue: boolToString,\n                value: value,\n            });\n        }\n        return new CheckboxController(doc, {\n            value: value,\n        });\n    }\n    /**\n     * @hidden\n     */\n    var BooleanInputPlugin = {\n        id: 'input-bool',\n        binding: {\n            accept: function (value) { return (typeof value === 'boolean' ? value : null); },\n            constraint: function (args) { return createConstraint(args.params); },\n            reader: function (_args) { return boolFromUnknown; },\n            writer: function (_args) { return writePrimitive; },\n        },\n        controller: function (args) {\n            return createController$2(args.document, args.binding.value);\n        },\n    };\n\n    var className$8 = ClassName('txt');\n    /**\n     * @hidden\n     */\n    var TextView = /** @class */ (function () {\n        function TextView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            var inputElem = doc.createElement('input');\n            inputElem.classList.add(className$8('i'));\n            inputElem.type = 'text';\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        TextView.prototype.update = function () {\n            this.inputElement.value = this.formatter_(this.value.rawValue);\n        };\n        TextView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return TextView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var TextController = /** @class */ (function () {\n        function TextController(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.view = new TextView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        TextController.prototype.onInputChange_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            var value = inputElem.value;\n            var parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.update();\n        };\n        return TextController;\n    }());\n\n    var className$9 = ClassName('cswtxt');\n    /**\n     * @hidden\n     */\n    var ColorSwatchTextView = /** @class */ (function () {\n        function ColorSwatchTextView(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            var swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$9('s'));\n            this.swatchView_ = config.swatchView;\n            swatchElem.appendChild(this.swatchView_.element);\n            this.element.appendChild(swatchElem);\n            var textElem = doc.createElement('div');\n            textElem.classList.add(className$9('t'));\n            this.textView = config.textView;\n            textElem.appendChild(this.textView.element);\n            this.element.appendChild(textElem);\n        }\n        Object.defineProperty(ColorSwatchTextView.prototype, \"value\", {\n            get: function () {\n                return this.textView.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ColorSwatchTextView.prototype.update = function () {\n            this.swatchView_.update();\n            this.textView.update();\n        };\n        return ColorSwatchTextView;\n    }());\n\n    var PickedColor = /** @class */ (function () {\n        function PickedColor(value) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.mode_ = value.rawValue.mode;\n            this.value = value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.emitter = new Emitter();\n        }\n        Object.defineProperty(PickedColor.prototype, \"mode\", {\n            get: function () {\n                return this.mode_;\n            },\n            set: function (mode) {\n                if (this.mode_ === mode) {\n                    return;\n                }\n                this.mode_ = mode;\n                this.emitter.emit('change', {\n                    propertyName: 'mode',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        PickedColor.prototype.onValueChange_ = function () {\n            this.emitter.emit('change', {\n                propertyName: 'value',\n                sender: this,\n            });\n        };\n        return PickedColor;\n    }());\n\n    /**\n     * @hidden\n     */\n    function parseNumber(text) {\n        var num = parseFloat(text);\n        if (isNaN(num)) {\n            return null;\n        }\n        return num;\n    }\n    /**\n     * @hidden\n     */\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            var pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    /**\n     * @hidden\n     */\n    function numberToString(value) {\n        return String(value);\n    }\n    /**\n     * @hidden\n     */\n    function createNumberFormatter(digits) {\n        return function (value) {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    var innerFormatter = createNumberFormatter(0);\n    /**\n     * @hidden\n     */\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function rgbToHsl(r, g, b) {\n        var rp = constrainRange(r / 255, 0, 1);\n        var gp = constrainRange(g / 255, 0, 1);\n        var bp = constrainRange(b / 255, 0, 1);\n        var cmax = Math.max(rp, gp, bp);\n        var cmin = Math.min(rp, gp, bp);\n        var c = cmax - cmin;\n        var h = 0;\n        var s = 0;\n        var l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = l > 0.5 ? c / (2 - cmin - cmax) : c / (cmax + cmin);\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgb(h, s, l) {\n        var _a, _b, _c, _d, _e, _f;\n        var hp = ((h % 360) + 360) % 360;\n        var sp = constrainRange(s / 100, 0, 1);\n        var lp = constrainRange(l / 100, 0, 1);\n        var c = (1 - Math.abs(2 * lp - 1)) * sp;\n        var x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        var m = lp - c / 2;\n        var rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            _a = [c, x, 0], rp = _a[0], gp = _a[1], bp = _a[2];\n        }\n        else if (hp >= 60 && hp < 120) {\n            _b = [x, c, 0], rp = _b[0], gp = _b[1], bp = _b[2];\n        }\n        else if (hp >= 120 && hp < 180) {\n            _c = [0, c, x], rp = _c[0], gp = _c[1], bp = _c[2];\n        }\n        else if (hp >= 180 && hp < 240) {\n            _d = [0, x, c], rp = _d[0], gp = _d[1], bp = _d[2];\n        }\n        else if (hp >= 240 && hp < 300) {\n            _e = [x, 0, c], rp = _e[0], gp = _e[1], bp = _e[2];\n        }\n        else {\n            _f = [c, 0, x], rp = _f[0], gp = _f[1], bp = _f[2];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsv(r, g, b) {\n        var rp = constrainRange(r / 255, 0, 1);\n        var gp = constrainRange(g / 255, 0, 1);\n        var bp = constrainRange(b / 255, 0, 1);\n        var cmax = Math.max(rp, gp, bp);\n        var cmin = Math.min(rp, gp, bp);\n        var d = cmax - cmin;\n        var h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        var s = cmax === 0 ? 0 : d / cmax;\n        var v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    /**\n     * @hidden\n     */\n    function hsvToRgb(h, s, v) {\n        var _a, _b, _c, _d, _e, _f;\n        var hp = loopRange(h, 360);\n        var sp = constrainRange(s / 100, 0, 1);\n        var vp = constrainRange(v / 100, 0, 1);\n        var c = vp * sp;\n        var x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        var m = vp - c;\n        var rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            _a = [c, x, 0], rp = _a[0], gp = _a[1], bp = _a[2];\n        }\n        else if (hp >= 60 && hp < 120) {\n            _b = [x, c, 0], rp = _b[0], gp = _b[1], bp = _b[2];\n        }\n        else if (hp >= 120 && hp < 180) {\n            _c = [0, c, x], rp = _c[0], gp = _c[1], bp = _c[2];\n        }\n        else if (hp >= 180 && hp < 240) {\n            _d = [0, x, c], rp = _d[0], gp = _d[1], bp = _d[2];\n        }\n        else if (hp >= 240 && hp < 300) {\n            _e = [x, 0, c], rp = _e[0], gp = _e[1], bp = _e[2];\n        }\n        else {\n            _f = [c, 0, x], rp = _f[0], gp = _f[1], bp = _f[2];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    /**\n     * @hidden\n     */\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    /**\n     * @hidden\n     */\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    var MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: function (h, s, l) { return [h, s, l]; },\n            hsv: function (h, s, l) {\n                var _a = hslToRgb(h, s, l), r = _a[0], g = _a[1], b = _a[2];\n                return rgbToHsv(r, g, b);\n            },\n            rgb: hslToRgb,\n        },\n        hsv: {\n            hsl: function (h, s, v) {\n                var _a = hsvToRgb(h, s, v), r = _a[0], g = _a[1], b = _a[2];\n                return rgbToHsl(r, g, b);\n            },\n            hsv: function (h, s, v) { return [h, s, v]; },\n            rgb: hsvToRgb,\n        },\n        rgb: {\n            hsl: rgbToHsl,\n            hsv: rgbToHsv,\n            rgb: function (r, g, b) { return [r, g, b]; },\n        },\n    };\n    /**\n     * @hidden\n     */\n    function convertColorMode(components, fromMode, toMode) {\n        var _a;\n        return (_a = MODE_CONVERTER_MAP[fromMode])[toMode].apply(_a, components);\n    }\n\n    var CONSTRAINT_MAP = {\n        hsl: function (comps) {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        hsv: function (comps) {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        rgb: function (comps) {\n            var _a;\n            return [\n                constrainRange(comps[0], 0, 255),\n                constrainRange(comps[1], 0, 255),\n                constrainRange(comps[2], 0, 255),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n    };\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    /**\n     * @hidden\n     */\n    var Color = /** @class */ (function () {\n        function Color(comps, mode) {\n            this.mode_ = mode;\n            this.comps_ = CONSTRAINT_MAP[mode](comps);\n        }\n        Color.black = function () {\n            return new Color([0, 0, 0], 'rgb');\n        };\n        Color.fromObject = function (obj) {\n            var comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb');\n        };\n        Color.toRgbaObject = function (color) {\n            return color.toRgbaObject();\n        };\n        Color.isRgbColorObject = function (obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        };\n        Color.isRgbaColorObject = function (obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        };\n        Color.isColorObject = function (obj) {\n            return this.isRgbColorObject(obj);\n        };\n        Color.equals = function (v1, v2) {\n            if (v1.mode_ !== v2.mode_) {\n                return false;\n            }\n            var comps1 = v1.comps_;\n            var comps2 = v2.comps_;\n            for (var i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        Object.defineProperty(Color.prototype, \"mode\", {\n            get: function () {\n                return this.mode_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Color.prototype.getComponents = function (opt_mode) {\n            return appendAlphaComponent(convertColorMode(removeAlphaComponent(this.comps_), this.mode_, opt_mode || this.mode_), this.comps_[3]);\n        };\n        Color.prototype.toRgbaObject = function () {\n            var rgbComps = this.getComponents('rgb');\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        };\n        return Color;\n    }());\n\n    function parseCssNumberOrPercentage(text, maxValue) {\n        var m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    var ANGLE_TO_DEG_MAP = {\n        deg: function (angle) { return angle; },\n        grad: function (angle) { return (angle * 360) / 400; },\n        rad: function (angle) { return (angle * 360) / (2 * Math.PI); },\n        turn: function (angle) { return angle * 360; },\n    };\n    function parseCssNumberOrAngle(text) {\n        var m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        var angle = parseFloat(m[1]);\n        var unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    var NOTATION_TO_PARSER_MAP = {\n        'func.rgb': function (text) {\n            var m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            var comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.rgba': function (text) {\n            var m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            var comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.hsl': function (text) {\n            var m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            var comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'func.hsla': function (text) {\n            var m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            var comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'hex.rgb': function (text) {\n            var mRrggbb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1] + mRrggbb[1], 16),\n                    parseInt(mRrggbb[2] + mRrggbb[2], 16),\n                    parseInt(mRrggbb[3] + mRrggbb[3], 16),\n                ], 'rgb');\n            }\n            var mRgb = text.match(/^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRgb) {\n                return new Color([parseInt(mRgb[1], 16), parseInt(mRgb[2], 16), parseInt(mRgb[3], 16)], 'rgb');\n            }\n            return null;\n        },\n        'hex.rgba': function (text) {\n            var mRrggbb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1] + mRrggbb[1], 16),\n                    parseInt(mRrggbb[2] + mRrggbb[2], 16),\n                    parseInt(mRrggbb[3] + mRrggbb[3], 16),\n                    mapRange(parseInt(mRrggbb[4] + mRrggbb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            var mRgb = text.match(/^#?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1], 16),\n                    parseInt(mRgb[2], 16),\n                    parseInt(mRgb[3], 16),\n                    mapRange(parseInt(mRgb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            return null;\n        },\n    };\n    /**\n     * @hidden\n     */\n    function getColorNotation(text) {\n        var notations = Object.keys(NOTATION_TO_PARSER_MAP);\n        return notations.reduce(function (result, notation) {\n            if (result) {\n                return result;\n            }\n            var subparser = NOTATION_TO_PARSER_MAP[notation];\n            return subparser(text) ? notation : null;\n        }, null);\n    }\n    /**\n     * @hidden\n     */\n    var CompositeColorParser = function (text) {\n        var notation = getColorNotation(text);\n        return notation ? NOTATION_TO_PARSER_MAP[notation](text) : null;\n    };\n    function hasAlphaComponent(notation) {\n        return (notation === 'func.hsla' ||\n            notation === 'func.rgba' ||\n            notation === 'hex.rgba');\n    }\n    /**\n     * @hidden\n     */\n    function colorFromString(value) {\n        if (typeof value === 'string') {\n            var cv = CompositeColorParser(value);\n            if (cv) {\n                return cv;\n            }\n        }\n        return Color.black();\n    }\n    function zerofill(comp) {\n        var hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? \"0\" + hex : hex;\n    }\n    /**\n     * @hidden\n     */\n    function colorToHexRgbString(value) {\n        var hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return \"#\" + hexes;\n    }\n    /**\n     * @hidden\n     */\n    function colorToHexRgbaString(value) {\n        var rgbaComps = value.getComponents('rgb');\n        var hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return \"#\" + hexes;\n    }\n    /**\n     * @hidden\n     */\n    function colorToFunctionalRgbString(value) {\n        var formatter = createNumberFormatter(0);\n        var comps = removeAlphaComponent(value.getComponents('rgb')).map(function (comp) {\n            return formatter(comp);\n        });\n        return \"rgb(\" + comps.join(', ') + \")\";\n    }\n    /**\n     * @hidden\n     */\n    function colorToFunctionalRgbaString(value) {\n        var aFormatter = createNumberFormatter(2);\n        var rgbFormatter = createNumberFormatter(0);\n        var comps = value.getComponents('rgb').map(function (comp, index) {\n            var formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return \"rgba(\" + comps.join(', ') + \")\";\n    }\n    /**\n     * @hidden\n     */\n    function colorToFunctionalHslString(value) {\n        var formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        var comps = removeAlphaComponent(value.getComponents('hsl')).map(function (comp, index) { return formatters[index](comp); });\n        return \"hsl(\" + comps.join(', ') + \")\";\n    }\n    /**\n     * @hidden\n     */\n    function colorToFunctionalHslaString(value) {\n        var formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        var comps = value\n            .getComponents('hsl')\n            .map(function (comp, index) { return formatters[index](comp); });\n        return \"hsla(\" + comps.join(', ') + \")\";\n    }\n    var NOTATION_TO_STRINGIFIER_MAP = {\n        'func.hsl': colorToFunctionalHslString,\n        'func.hsla': colorToFunctionalHslaString,\n        'func.rgb': colorToFunctionalRgbString,\n        'func.rgba': colorToFunctionalRgbaString,\n        'hex.rgb': colorToHexRgbString,\n        'hex.rgba': colorToHexRgbaString,\n    };\n    function getColorStringifier(notation) {\n        return NOTATION_TO_STRINGIFIER_MAP[notation];\n    }\n\n    var className$a = ClassName('csw');\n    /**\n     * @hidden\n     */\n    var ColorSwatchView = /** @class */ (function () {\n        function ColorSwatchView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            var swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$a('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            var buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$a('b'));\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            var pickerElem = doc.createElement('div');\n            pickerElem.classList.add(className$a('p'));\n            this.pickerView_ = config.pickerView;\n            pickerElem.appendChild(this.pickerView_.element);\n            this.element.appendChild(pickerElem);\n            this.update();\n        }\n        ColorSwatchView.prototype.update = function () {\n            var value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        };\n        ColorSwatchView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return ColorSwatchView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Foldable = /** @class */ (function () {\n        function Foldable() {\n            this.emitter = new Emitter();\n            this.expanded_ = false;\n        }\n        Object.defineProperty(Foldable.prototype, \"expanded\", {\n            get: function () {\n                return this.expanded_;\n            },\n            set: function (expanded) {\n                var changed = this.expanded_ !== expanded;\n                if (changed) {\n                    this.expanded_ = expanded;\n                    this.emitter.emit('change', {\n                        sender: this,\n                    });\n                }\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return Foldable;\n    }());\n\n    /**\n     * @hidden\n     */\n    function connect(_a) {\n        var primary = _a.primary, secondary = _a.secondary, forward = _a.forward, backward = _a.backward;\n        primary.emitter.on('change', function () {\n            secondary.rawValue = forward(primary, secondary);\n        });\n        secondary.emitter.on('change', function () {\n            primary.rawValue = backward(primary, secondary);\n        });\n        secondary.rawValue = forward(primary, secondary);\n    }\n\n    /**\n     * @hidden\n     */\n    function getStepForKey(baseStep, keys) {\n        var step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    /**\n     * @hidden\n     */\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.keyCode === 40,\n            shiftKey: ev.shiftKey,\n            upKey: ev.keyCode === 38,\n        };\n    }\n    /**\n     * @hidden\n     */\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.keyCode === 37,\n            shiftKey: ev.shiftKey,\n            upKey: ev.keyCode === 39,\n        };\n    }\n    /**\n     * @hidden\n     */\n    function isVerticalArrowKey(keyCode) {\n        return keyCode === 38 || keyCode === 40;\n    }\n    /**\n     * @hidden\n     */\n    function isArrowKey(keyCode) {\n        return isVerticalArrowKey(keyCode) || keyCode === 37 || keyCode === 39;\n    }\n\n    /**\n     * @hidden\n     */\n    var NumberTextController = /** @class */ (function (_super) {\n        __extends(NumberTextController, _super);\n        function NumberTextController(doc, config) {\n            var _this = _super.call(this, doc, config) || this;\n            _this.onInputKeyDown_ = _this.onInputKeyDown_.bind(_this);\n            _this.baseStep_ = config.baseStep;\n            _this.view.inputElement.addEventListener('keydown', _this.onInputKeyDown_);\n            return _this;\n        }\n        NumberTextController.prototype.onInputKeyDown_ = function (e) {\n            var step = getStepForKey(this.baseStep_, getVerticalStepKeys(e));\n            if (step !== 0) {\n                this.value.rawValue += step;\n                this.view.update();\n            }\n        };\n        return NumberTextController;\n    }(TextController));\n\n    var className$b = ClassName('clp');\n    /**\n     * @hidden\n     */\n    var ColorPickerView = /** @class */ (function () {\n        function ColorPickerView(doc, config) {\n            this.alphaViews_ = null;\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.pickedColor = config.pickedColor;\n            this.pickedColor.value.emitter.on('change', this.onValueChange_);\n            this.foldable = config.foldable;\n            this.foldable.emitter.on('change', this.onFoldableChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            var hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            var svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            var hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            var rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.compTextsView_ = config.componentTextsView;\n            rgbElem.appendChild(this.compTextsView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                var aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                var apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                var atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n            this.update();\n        }\n        Object.defineProperty(ColorPickerView.prototype, \"allFocusableElements\", {\n            get: function () {\n                var elems = __spreadArrays([\n                    this.svPaletteView_.element,\n                    this.hPaletteView_.element\n                ], this.compTextsView_.inputElements);\n                if (this.alphaViews_) {\n                    elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n                }\n                return forceCast(elems);\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(ColorPickerView.prototype, \"value\", {\n            get: function () {\n                return this.pickedColor.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ColorPickerView.prototype.update = function () {\n            if (this.foldable.expanded) {\n                this.element.classList.add(className$b(undefined, 'expanded'));\n            }\n            else {\n                this.element.classList.remove(className$b(undefined, 'expanded'));\n            }\n        };\n        ColorPickerView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        ColorPickerView.prototype.onFoldableChange_ = function () {\n            this.update();\n        };\n        return ColorPickerView;\n    }());\n\n    function computeOffset(ev, elem) {\n        // NOTE: OffsetX/Y should be computed from page and window properties to capture mouse events\n        var win = elem.ownerDocument.defaultView;\n        var rect = elem.getBoundingClientRect();\n        return [\n            ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        ];\n    }\n    /**\n     * A utility class to handle both mouse and touch events.\n     * @hidden\n     */\n    var PointerHandler = /** @class */ (function () {\n        function PointerHandler(doc, element) {\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.document = doc;\n            this.element = element;\n            this.emitter = new Emitter();\n            this.pressed_ = false;\n            if (supportsTouch(this.document)) {\n                element.addEventListener('touchstart', this.onTouchStart_);\n                element.addEventListener('touchmove', this.onTouchMove_);\n            }\n            else {\n                element.addEventListener('mousedown', this.onMouseDown_);\n                this.document.addEventListener('mousemove', this.onDocumentMouseMove_);\n                this.document.addEventListener('mouseup', this.onDocumentMouseUp_);\n            }\n        }\n        PointerHandler.prototype.computePosition_ = function (offsetX, offsetY) {\n            var rect = this.element.getBoundingClientRect();\n            return {\n                px: offsetX / rect.width,\n                py: offsetY / rect.height,\n            };\n        };\n        PointerHandler.prototype.onMouseDown_ = function (e) {\n            var _a;\n            // Prevent native text selection\n            e.preventDefault();\n            (_a = e.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            this.pressed_ = true;\n            this.emitter.emit('down', {\n                data: this.computePosition_.apply(this, computeOffset(e, this.element)),\n                sender: this,\n            });\n        };\n        PointerHandler.prototype.onDocumentMouseMove_ = function (e) {\n            if (!this.pressed_) {\n                return;\n            }\n            this.emitter.emit('move', {\n                data: this.computePosition_.apply(this, computeOffset(e, this.element)),\n                sender: this,\n            });\n        };\n        PointerHandler.prototype.onDocumentMouseUp_ = function (e) {\n            if (!this.pressed_) {\n                return;\n            }\n            this.pressed_ = false;\n            this.emitter.emit('up', {\n                data: this.computePosition_.apply(this, computeOffset(e, this.element)),\n                sender: this,\n            });\n        };\n        PointerHandler.prototype.onTouchStart_ = function (e) {\n            // Prevent native page scroll\n            e.preventDefault();\n            var touch = e.targetTouches[0];\n            var rect = this.element.getBoundingClientRect();\n            this.emitter.emit('down', {\n                data: this.computePosition_(touch.clientX - rect.left, touch.clientY - rect.top),\n                sender: this,\n            });\n        };\n        PointerHandler.prototype.onTouchMove_ = function (e) {\n            var touch = e.targetTouches[0];\n            var rect = this.element.getBoundingClientRect();\n            this.emitter.emit('move', {\n                data: this.computePosition_(touch.clientX - rect.left, touch.clientY - rect.top),\n                sender: this,\n            });\n        };\n        return PointerHandler;\n    }());\n\n    /**\n     * @hidden\n     */\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n\n    var className$c = ClassName('apl');\n    /**\n     * @hidden\n     */\n    var APaletteView = /** @class */ (function () {\n        function APaletteView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            this.element.tabIndex = 0;\n            var barElem = doc.createElement('div');\n            barElem.classList.add(className$c('b'));\n            this.element.appendChild(barElem);\n            var colorElem = doc.createElement('div');\n            colorElem.classList.add(className$c('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            var markerElem = doc.createElement('div');\n            markerElem.classList.add(className$c('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            var previewElem = doc.createElement('div');\n            previewElem.classList.add(className$c('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update();\n        }\n        APaletteView.prototype.update = function () {\n            var c = this.value.rawValue;\n            var rgbaComps = c.getComponents('rgb');\n            var leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            var rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            var gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = \"linear-gradient(\" + gradientComps.join(',') + \")\";\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            var left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = left + \"%\";\n        };\n        APaletteView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return APaletteView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var APaletteController = /** @class */ (function () {\n        function APaletteController(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n            });\n            this.ptHandler_ = new PointerHandler(doc, this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n        }\n        APaletteController.prototype.handlePointerEvent_ = function (d) {\n            var alpha = d.px;\n            var c = this.value.rawValue;\n            var _a = c.getComponents('hsv'), h = _a[0], s = _a[1], v = _a[2];\n            this.value.rawValue = new Color([h, s, v, alpha], 'hsv');\n            this.view.update();\n        };\n        APaletteController.prototype.onPointerDown_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        APaletteController.prototype.onPointerMove_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        APaletteController.prototype.onPointerUp_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        APaletteController.prototype.onKeyDown_ = function (ev) {\n            var step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            var c = this.value.rawValue;\n            var _a = c.getComponents('hsv'), h = _a[0], s = _a[1], v = _a[2], a = _a[3];\n            this.value.rawValue = new Color([h, s, v, a + step], 'hsv');\n        };\n        return APaletteController;\n    }());\n\n    var className$d = ClassName('cctxts');\n    var FORMATTER = createNumberFormatter(0);\n    function createModeSelectElement(doc) {\n        var selectElem = doc.createElement('select');\n        var items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce(function (frag, item) {\n            var optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    /**\n     * @hidden\n     */\n    var ColorComponentTextsView = /** @class */ (function () {\n        function ColorComponentTextsView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            var modeElem = doc.createElement('div');\n            modeElem.classList.add(className$d('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$d('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            var modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$d('mm'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            var wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            this.element.appendChild(wrapperElem);\n            var inputElems = [0, 1, 2].map(function () {\n                var inputElem = doc.createElement('input');\n                inputElem.classList.add(className$d('i'));\n                inputElem.type = 'text';\n                return inputElem;\n            });\n            inputElems.forEach(function (elem) {\n                wrapperElem.appendChild(elem);\n            });\n            this.inputElems_ = [inputElems[0], inputElems[1], inputElems[2]];\n            this.pickedColor = config.pickedColor;\n            this.pickedColor.emitter.on('change', this.onValueChange_);\n            this.update();\n        }\n        Object.defineProperty(ColorComponentTextsView.prototype, \"modeSelectElement\", {\n            get: function () {\n                return this.modeElem_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(ColorComponentTextsView.prototype, \"inputElements\", {\n            get: function () {\n                return this.inputElems_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(ColorComponentTextsView.prototype, \"value\", {\n            get: function () {\n                return this.pickedColor.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ColorComponentTextsView.prototype.update = function () {\n            var _this = this;\n            this.modeElem_.value = this.pickedColor.mode;\n            var comps = this.pickedColor.value.rawValue.getComponents(this.pickedColor.mode);\n            comps.forEach(function (comp, index) {\n                var inputElem = _this.inputElems_[index];\n                if (!inputElem) {\n                    return;\n                }\n                inputElem.value = FORMATTER(comp);\n            });\n        };\n        ColorComponentTextsView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return ColorComponentTextsView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ColorComponentTextsController = /** @class */ (function () {\n        function ColorComponentTextsController(doc, config) {\n            var _this = this;\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.parser_ = config.parser;\n            this.pickedColor = config.pickedColor;\n            this.view = new ColorComponentTextsView(doc, {\n                pickedColor: this.pickedColor,\n            });\n            this.view.inputElements.forEach(function (inputElem) {\n                inputElem.addEventListener('change', _this.onInputChange_);\n                inputElem.addEventListener('keydown', _this.onInputKeyDown_);\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        Object.defineProperty(ColorComponentTextsController.prototype, \"value\", {\n            get: function () {\n                return this.pickedColor.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ColorComponentTextsController.prototype.findIndexOfInputElem_ = function (inputElem) {\n            var inputElems = this.view.inputElements;\n            for (var i = 0; i < inputElems.length; i++) {\n                if (inputElems[i] === inputElem) {\n                    return i;\n                }\n            }\n            return null;\n        };\n        ColorComponentTextsController.prototype.updateComponent_ = function (index, newValue) {\n            var mode = this.pickedColor.mode;\n            var comps = this.value.rawValue.getComponents(mode);\n            var newComps = comps.map(function (comp, i) {\n                return i === index ? newValue : comp;\n            });\n            this.value.rawValue = new Color(newComps, mode);\n            this.view.update();\n        };\n        ColorComponentTextsController.prototype.onInputChange_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            var parsedValue = this.parser_(inputElem.value);\n            if (isEmpty(parsedValue)) {\n                return;\n            }\n            var compIndex = this.findIndexOfInputElem_(inputElem);\n            if (isEmpty(compIndex)) {\n                return;\n            }\n            this.updateComponent_(compIndex, parsedValue);\n        };\n        ColorComponentTextsController.prototype.onInputKeyDown_ = function (e) {\n            var compIndex = this.findIndexOfInputElem_(e.currentTarget);\n            var step = getStepForKey(getBaseStepForColor(compIndex === 3), getVerticalStepKeys(e));\n            if (step === 0) {\n                return;\n            }\n            var inputElem = forceCast(e.currentTarget);\n            var parsedValue = this.parser_(inputElem.value);\n            if (isEmpty(parsedValue)) {\n                return;\n            }\n            if (isEmpty(compIndex)) {\n                return;\n            }\n            this.updateComponent_(compIndex, parsedValue + step);\n        };\n        ColorComponentTextsController.prototype.onModeSelectChange_ = function (ev) {\n            var selectElem = ev.currentTarget;\n            this.pickedColor.mode = selectElem.value;\n        };\n        return ColorComponentTextsController;\n    }());\n\n    var className$e = ClassName('hpl');\n    /**\n     * @hidden\n     */\n    var HPaletteView = /** @class */ (function () {\n        function HPaletteView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            this.element.tabIndex = 0;\n            var colorElem = doc.createElement('div');\n            colorElem.classList.add(className$e('c'));\n            this.element.appendChild(colorElem);\n            var markerElem = doc.createElement('div');\n            markerElem.classList.add(className$e('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update();\n        }\n        HPaletteView.prototype.update = function () {\n            var c = this.value.rawValue;\n            var h = c.getComponents('hsv')[0];\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            var left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = left + \"%\";\n        };\n        HPaletteView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return HPaletteView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var HPaletteController = /** @class */ (function () {\n        function HPaletteController(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n            });\n            this.ptHandler_ = new PointerHandler(doc, this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n        }\n        HPaletteController.prototype.handlePointerEvent_ = function (d) {\n            var hue = mapRange(d.px, 0, 1, 0, 360);\n            var c = this.value.rawValue;\n            var _a = c.getComponents('hsv'), s = _a[1], v = _a[2], a = _a[3];\n            this.value.rawValue = new Color([hue, s, v, a], 'hsv');\n            this.view.update();\n        };\n        HPaletteController.prototype.onPointerDown_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        HPaletteController.prototype.onPointerMove_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        HPaletteController.prototype.onPointerUp_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        HPaletteController.prototype.onKeyDown_ = function (ev) {\n            var step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            var c = this.value.rawValue;\n            var _a = c.getComponents('hsv'), h = _a[0], s = _a[1], v = _a[2], a = _a[3];\n            this.value.rawValue = new Color([h + step, s, v, a], 'hsv');\n        };\n        return HPaletteController;\n    }());\n\n    var className$f = ClassName('svp');\n    var CANVAS_RESOL = 64;\n    /**\n     * @hidden\n     */\n    var SvPaletteView = /** @class */ (function () {\n        function SvPaletteView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            this.element.tabIndex = 0;\n            var canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$f('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            var markerElem = doc.createElement('div');\n            markerElem.classList.add(className$f('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update();\n        }\n        SvPaletteView.prototype.update = function () {\n            var ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            var c = this.value.rawValue;\n            var hsvComps = c.getComponents('hsv');\n            var width = this.canvasElement.width;\n            var height = this.canvasElement.height;\n            var imgData = ctx.getImageData(0, 0, width, height);\n            var data = imgData.data;\n            for (var iy = 0; iy < height; iy++) {\n                for (var ix = 0; ix < width; ix++) {\n                    var s = mapRange(ix, 0, width, 0, 100);\n                    var v = mapRange(iy, 0, height, 100, 0);\n                    var rgbComps = hsvToRgb(hsvComps[0], s, v);\n                    var i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            var left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = left + \"%\";\n            var top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = top + \"%\";\n        };\n        SvPaletteView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return SvPaletteView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var SvPaletteController = /** @class */ (function () {\n        function SvPaletteController(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n            });\n            this.ptHandler_ = new PointerHandler(doc, this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n        }\n        SvPaletteController.prototype.handlePointerEvent_ = function (d) {\n            var saturation = mapRange(d.px, 0, 1, 0, 100);\n            var value = mapRange(d.py, 0, 1, 100, 0);\n            var _a = this.value.rawValue.getComponents('hsv'), h = _a[0], a = _a[3];\n            this.value.rawValue = new Color([h, saturation, value, a], 'hsv');\n            this.view.update();\n        };\n        SvPaletteController.prototype.onPointerDown_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        SvPaletteController.prototype.onPointerMove_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        SvPaletteController.prototype.onPointerUp_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        SvPaletteController.prototype.onKeyDown_ = function (ev) {\n            if (isArrowKey(ev.keyCode)) {\n                ev.preventDefault();\n            }\n            var _a = this.value.rawValue.getComponents('hsv'), h = _a[0], s = _a[1], v = _a[2], a = _a[3];\n            var baseStep = getBaseStepForColor(false);\n            this.value.rawValue = new Color([\n                h,\n                s + getStepForKey(baseStep, getHorizontalStepKeys(ev)),\n                v + getStepForKey(baseStep, getVerticalStepKeys(ev)),\n                a,\n            ], 'hsv');\n        };\n        return SvPaletteController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ColorPickerController = /** @class */ (function () {\n        function ColorPickerController(doc, config) {\n            var _this = this;\n            this.triggerElement = null;\n            this.onFocusableElementBlur_ = this.onFocusableElementBlur_.bind(this);\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.pickedColor = config.pickedColor;\n            this.foldable = new Foldable();\n            this.hPaletteIc_ = new HPaletteController(doc, {\n                value: this.pickedColor.value,\n            });\n            this.svPaletteIc_ = new SvPaletteController(doc, {\n                value: this.pickedColor.value,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.pickedColor.value,\n                    }),\n                    text: new NumberTextController(doc, {\n                        formatter: createNumberFormatter(2),\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        value: new Value(0),\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connect({\n                    primary: this.pickedColor.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: function (p) {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: function (p, s) {\n                        var comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.compTextsIc_ = new ColorComponentTextsController(doc, {\n                parser: parseNumber,\n                pickedColor: this.pickedColor,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                componentTextsView: this.compTextsIc_.view,\n                foldable: this.foldable,\n                hPaletteView: this.hPaletteIc_.view,\n                pickedColor: this.pickedColor,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteIc_.view,\n            });\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.allFocusableElements.forEach(function (elem) {\n                elem.addEventListener('blur', _this.onFocusableElementBlur_);\n            });\n        }\n        Object.defineProperty(ColorPickerController.prototype, \"value\", {\n            get: function () {\n                return this.pickedColor.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ColorPickerController.prototype.onFocusableElementBlur_ = function (ev) {\n            var elem = this.view.element;\n            var nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                // Next target is in the picker\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.triggerElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                // Next target is the trigger button\n                return;\n            }\n            this.foldable.expanded = false;\n        };\n        ColorPickerController.prototype.onKeyDown_ = function (ev) {\n            if (ev.keyCode === 27) {\n                this.foldable.expanded = false;\n            }\n        };\n        return ColorPickerController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ColorSwatchController = /** @class */ (function () {\n        function ColorSwatchController(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.value = config.value;\n            this.pickerIc_ = new ColorPickerController(doc, {\n                pickedColor: new PickedColor(this.value),\n                supportsAlpha: config.supportsAlpha,\n            });\n            this.view = new ColorSwatchView(doc, {\n                pickerView: this.pickerIc_.view,\n                value: this.value,\n            });\n            this.view.buttonElement.addEventListener('blur', this.onButtonBlur_);\n            this.view.buttonElement.addEventListener('click', this.onButtonClick_);\n            this.pickerIc_.triggerElement = this.view.buttonElement;\n        }\n        ColorSwatchController.prototype.onButtonBlur_ = function (e) {\n            var elem = this.view.element;\n            var nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.pickerIc_.foldable.expanded = false;\n            }\n        };\n        ColorSwatchController.prototype.onButtonClick_ = function () {\n            this.pickerIc_.foldable.expanded = !this.pickerIc_.foldable.expanded;\n            if (this.pickerIc_.foldable.expanded) {\n                this.pickerIc_.view.allFocusableElements[0].focus();\n            }\n        };\n        return ColorSwatchController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ColorSwatchTextController = /** @class */ (function () {\n        function ColorSwatchTextController(doc, config) {\n            this.value = config.value;\n            this.swatchIc_ = new ColorSwatchController(doc, {\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n            });\n            this.textIc_ = new TextController(doc, {\n                formatter: config.formatter,\n                parser: config.parser,\n                value: this.value,\n            });\n            this.view = new ColorSwatchTextView(doc, {\n                swatchView: this.swatchIc_.view,\n                textView: this.textIc_.view,\n            });\n        }\n        return ColorSwatchTextController;\n    }());\n\n    /**\n     * @hidden\n     */\n    function colorFromObject(value) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value);\n        }\n        return Color.black();\n    }\n    /**\n     * @hidden\n     */\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce(function (result, comp) {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    /**\n     * @hidden\n     */\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce(function (result, comp, index) {\n            var hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    /**\n     * @hidden\n     */\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    /**\n     * @hidden\n     */\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    /**\n     * @hidden\n     */\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    /**\n     * @hidden\n     */\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(notation) {\n        var stringify = getColorStringifier(notation);\n        return function (target, value) {\n            writePrimitive(target, stringify(value));\n        };\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        var colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return function (target, value) {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value) {\n        var obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value) {\n        var obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha) {\n        return supportsAlpha ? writeRgbaColorObject : writeRgbColorObject;\n    }\n\n    function shouldSupportAlpha(inputParams) {\n        return 'input' in inputParams && inputParams.input === 'color.rgba';\n    }\n    /**\n     * @hidden\n     */\n    var NumberColorInputPlugin = {\n        id: 'input-color-number',\n        binding: {\n            accept: function (value, params) {\n                if (typeof value !== 'number') {\n                    return null;\n                }\n                if (!('input' in params)) {\n                    return null;\n                }\n                if (params.input !== 'color' &&\n                    params.input !== 'color.rgb' &&\n                    params.input !== 'color.rgba') {\n                    return null;\n                }\n                return value;\n            },\n            reader: function (args) {\n                return shouldSupportAlpha(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            writer: function (args) {\n                return createColorNumberWriter(shouldSupportAlpha(args.params));\n            },\n            equals: Color.equals,\n        },\n        controller: function (args) {\n            var supportsAlpha = shouldSupportAlpha(args.params);\n            var formatter = supportsAlpha\n                ? colorToHexRgbaString\n                : colorToHexRgbString;\n            return new ColorSwatchTextController(args.document, {\n                formatter: formatter,\n                parser: CompositeColorParser,\n                supportsAlpha: supportsAlpha,\n                value: args.binding.value,\n            });\n        },\n    };\n\n    function shouldSupportAlpha$1(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    /**\n     * @hidden\n     */\n    var ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        binding: {\n            accept: function (value, _params) { return (Color.isColorObject(value) ? value : null); },\n            reader: function (_args) { return colorFromObject; },\n            writer: function (args) {\n                return createColorObjectWriter(shouldSupportAlpha$1(args.initialValue));\n            },\n            equals: Color.equals,\n        },\n        controller: function (args) {\n            var supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            var formatter = supportsAlpha\n                ? colorToHexRgbaString\n                : colorToHexRgbString;\n            return new ColorSwatchTextController(args.document, {\n                formatter: formatter,\n                parser: CompositeColorParser,\n                supportsAlpha: supportsAlpha,\n                value: args.binding.value,\n            });\n        },\n    };\n\n    /**\n     * @hidden\n     */\n    var StringColorInputPlugin = {\n        id: 'input-color-string',\n        binding: {\n            accept: function (value, params) {\n                if (typeof value !== 'string') {\n                    return null;\n                }\n                if ('input' in params && params.input === 'string') {\n                    return null;\n                }\n                var notation = getColorNotation(value);\n                if (!notation) {\n                    return null;\n                }\n                return value;\n            },\n            reader: function (_args) { return colorFromString; },\n            writer: function (args) {\n                var notation = getColorNotation(args.initialValue);\n                if (!notation) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return createColorStringWriter(notation);\n            },\n            equals: Color.equals,\n        },\n        controller: function (args) {\n            var notation = getColorNotation(args.initialValue);\n            if (!notation) {\n                throw TpError.shouldNeverHappen();\n            }\n            var stringifier = getColorStringifier(notation);\n            return new ColorSwatchTextController(args.document, {\n                formatter: stringifier,\n                parser: CompositeColorParser,\n                supportsAlpha: hasAlphaComponent(notation),\n                value: args.binding.value,\n            });\n        },\n    };\n\n    /**\n     * @hidden\n     */\n    var RangeConstraint = /** @class */ (function () {\n        function RangeConstraint(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        RangeConstraint.prototype.constrain = function (value) {\n            var result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        };\n        return RangeConstraint;\n    }());\n\n    var className$g = ClassName('sldtxt');\n    /**\n     * @hidden\n     */\n    var SliderTextView = /** @class */ (function () {\n        function SliderTextView(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g());\n            var sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$g('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            var textElem = doc.createElement('div');\n            textElem.classList.add(className$g('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n        Object.defineProperty(SliderTextView.prototype, \"value\", {\n            get: function () {\n                return this.sliderView_.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        SliderTextView.prototype.update = function () {\n            this.sliderView_.update();\n            this.textView_.update();\n        };\n        return SliderTextView;\n    }());\n\n    var className$h = ClassName('sld');\n    /**\n     * @hidden\n     */\n    var SliderView = /** @class */ (function () {\n        function SliderView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            var outerElem = doc.createElement('div');\n            outerElem.classList.add(className$h('o'));\n            outerElem.tabIndex = 0;\n            this.element.appendChild(outerElem);\n            this.outerElement = outerElem;\n            var innerElem = doc.createElement('div');\n            innerElem.classList.add(className$h('i'));\n            this.outerElement.appendChild(innerElem);\n            this.innerElement = innerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        SliderView.prototype.update = function () {\n            var p = constrainRange(mapRange(this.value.rawValue, this.minValue_, this.maxValue_, 0, 100), 0, 100);\n            this.innerElement.style.width = p + \"%\";\n        };\n        SliderView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return SliderView;\n    }());\n\n    function findRange(value) {\n        var c = value.constraint\n            ? findConstraint(value.constraint, RangeConstraint)\n            : null;\n        if (!c) {\n            return [undefined, undefined];\n        }\n        return [c.minValue, c.maxValue];\n    }\n    function estimateSuitableRange(value) {\n        var _a = findRange(value), min = _a[0], max = _a[1];\n        return [min !== null && min !== void 0 ? min : 0, max !== null && max !== void 0 ? max : 100];\n    }\n    /**\n     * @hidden\n     */\n    var SliderController = /** @class */ (function () {\n        function SliderController(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.baseStep_ = config.baseStep;\n            var _a = estimateSuitableRange(this.value), min = _a[0], max = _a[1];\n            this.minValue_ = min;\n            this.maxValue_ = max;\n            this.view = new SliderView(doc, {\n                maxValue: this.maxValue_,\n                minValue: this.minValue_,\n                value: this.value,\n            });\n            this.ptHandler_ = new PointerHandler(doc, this.view.outerElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.outerElement.addEventListener('keydown', this.onKeyDown_);\n        }\n        SliderController.prototype.handlePointerEvent_ = function (d) {\n            this.value.rawValue = mapRange(d.px, 0, 1, this.minValue_, this.maxValue_);\n        };\n        SliderController.prototype.onPointerDown_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        SliderController.prototype.onPointerMove_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        SliderController.prototype.onPointerUp_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        SliderController.prototype.onKeyDown_ = function (ev) {\n            this.value.rawValue += getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n        };\n        return SliderController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var SliderTextController = /** @class */ (function () {\n        function SliderTextController(doc, config) {\n            this.value = config.value;\n            this.sliderIc_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                value: config.value,\n            });\n            this.textIc_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                formatter: config.formatter,\n                parser: config.parser,\n                value: config.value,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderIc_.view,\n                textView: this.textIc_.view,\n            });\n        }\n        return SliderTextController;\n    }());\n\n    function createConstraint$1(params) {\n        var constraints = [];\n        if ('step' in params && !isEmpty(params.step)) {\n            constraints.push(new StepConstraint({\n                step: params.step,\n            }));\n        }\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        if ('options' in params && params.options !== undefined) {\n            constraints.push(new ListConstraint({\n                options: normalizeInputParamsOptions(params.options, numberFromUnknown),\n            }));\n        }\n        return new CompositeConstraint({\n            constraints: constraints,\n        });\n    }\n    function createController$3(doc, value) {\n        var _a;\n        var c = value.constraint;\n        if (c && findConstraint(c, ListConstraint)) {\n            return new ListController(doc, {\n                listItems: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                stringifyValue: numberToString,\n                value: value,\n            });\n        }\n        if (c && findConstraint(c, RangeConstraint)) {\n            return new SliderTextController(doc, {\n                baseStep: getBaseStep(c),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(value.constraint, value.rawValue)),\n                parser: parseNumber,\n                value: value,\n            });\n        }\n        return new NumberTextController(doc, {\n            baseStep: getBaseStep(c),\n            formatter: createNumberFormatter(getSuitableDecimalDigits(value.constraint, value.rawValue)),\n            parser: parseNumber,\n            value: value,\n        });\n    }\n    /**\n     * @hidden\n     */\n    var NumberInputPlugin = {\n        id: 'input-number',\n        binding: {\n            accept: function (value) { return (typeof value === 'number' ? value : null); },\n            constraint: function (args) { return createConstraint$1(args.params); },\n            reader: function (_args) { return numberFromUnknown; },\n            writer: function (_args) { return writePrimitive; },\n        },\n        controller: function (args) {\n            return createController$3(args.document, args.binding.value);\n        },\n    };\n\n    var Point2d = /** @class */ (function () {\n        function Point2d(x, y) {\n            if (x === void 0) { x = 0; }\n            if (y === void 0) { y = 0; }\n            this.x = x;\n            this.y = y;\n        }\n        Point2d.prototype.getComponents = function () {\n            return [this.x, this.y];\n        };\n        Point2d.isObject = function (obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            var x = obj.x;\n            var y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        };\n        Point2d.equals = function (v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        };\n        Point2d.prototype.toObject = function () {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        };\n        return Point2d;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Point2dConstraint = /** @class */ (function () {\n        function Point2dConstraint(config) {\n            this.x = config.x;\n            this.y = config.y;\n        }\n        Point2dConstraint.prototype.constrain = function (value) {\n            return new Point2d(this.x ? this.x.constrain(value.x) : value.x, this.y ? this.y.constrain(value.y) : value.y);\n        };\n        return Point2dConstraint;\n    }());\n\n    var className$i = ClassName('p2dpadtxt');\n    /**\n     * @hidden\n     */\n    var Point2dPadTextView = /** @class */ (function () {\n        function Point2dPadTextView(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            var padWrapperElem = doc.createElement('div');\n            padWrapperElem.classList.add(className$i('w'));\n            this.element.appendChild(padWrapperElem);\n            var buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$i('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            padWrapperElem.appendChild(buttonElem);\n            this.padButtonElem_ = buttonElem;\n            var padElem = doc.createElement('div');\n            padElem.classList.add(className$i('p'));\n            padWrapperElem.appendChild(padElem);\n            this.padView_ = config.padView;\n            padElem.appendChild(this.padView_.element);\n            var textElem = doc.createElement('div');\n            textElem.classList.add(className$i('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n        Object.defineProperty(Point2dPadTextView.prototype, \"value\", {\n            get: function () {\n                return this.textView_.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Point2dPadTextView.prototype, \"padButtonElement\", {\n            get: function () {\n                return this.padButtonElem_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Point2dPadTextView.prototype.update = function () {\n            this.padView_.update();\n            this.textView_.update();\n        };\n        return Point2dPadTextView;\n    }());\n\n    var className$j = ClassName('p2dpad');\n    /**\n     * @hidden\n     */\n    var Point2dPadView = /** @class */ (function () {\n        function Point2dPadView(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.foldable = config.foldable;\n            this.foldable.emitter.on('change', this.onFoldableChange_);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            var padElem = doc.createElement('div');\n            padElem.tabIndex = 0;\n            padElem.classList.add(className$j('p'));\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            var svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$j('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            var xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$j('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            var yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$j('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            var lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$j('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            var markerElem = doc.createElementNS(SVG_NS, 'circle');\n            markerElem.classList.add(className$j('m'));\n            markerElem.setAttributeNS(null, 'r', '2px');\n            this.svgElem_.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        Object.defineProperty(Point2dPadView.prototype, \"allFocusableElements\", {\n            get: function () {\n                return [this.padElement];\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Point2dPadView.prototype.update = function () {\n            if (this.foldable.expanded) {\n                this.element.classList.add(className$j(undefined, 'expanded'));\n            }\n            else {\n                this.element.classList.remove(className$j(undefined, 'expanded'));\n            }\n            var _a = this.value.rawValue.getComponents(), x = _a[0], y = _a[1];\n            var max = this.maxValue_;\n            var px = mapRange(x, -max, +max, 0, 100);\n            var py = mapRange(y, -max, +max, 0, 100);\n            var ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', px + \"%\");\n            this.lineElem_.setAttributeNS(null, 'y2', ipy + \"%\");\n            this.markerElem_.setAttributeNS(null, 'cx', px + \"%\");\n            this.markerElem_.setAttributeNS(null, 'cy', ipy + \"%\");\n        };\n        Point2dPadView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        Point2dPadView.prototype.onFoldableChange_ = function () {\n            this.update();\n        };\n        return Point2dPadView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Point2dPadController = /** @class */ (function () {\n        function Point2dPadController(doc, config) {\n            var _this = this;\n            this.triggerElement = null;\n            this.onFocusableElementBlur_ = this.onFocusableElementBlur_.bind(this);\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.foldable = new Foldable();\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPadView(doc, {\n                foldable: this.foldable,\n                invertsY: this.invertsY_,\n                maxValue: this.maxValue_,\n                value: this.value,\n            });\n            this.ptHandler_ = new PointerHandler(doc, this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.allFocusableElements.forEach(function (elem) {\n                elem.addEventListener('blur', _this.onFocusableElementBlur_);\n            });\n        }\n        Point2dPadController.prototype.handlePointerEvent_ = function (d) {\n            var max = this.maxValue_;\n            var px = mapRange(d.px, 0, 1, -max, +max);\n            var py = mapRange(this.invertsY_ ? 1 - d.py : d.py, 0, 1, -max, +max);\n            this.value.rawValue = new Point2d(px, py);\n            this.view.update();\n        };\n        Point2dPadController.prototype.onPointerDown_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        Point2dPadController.prototype.onPointerMove_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        Point2dPadController.prototype.onPointerUp_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        Point2dPadController.prototype.onPadKeyDown_ = function (ev) {\n            if (isArrowKey(ev.keyCode)) {\n                ev.preventDefault();\n            }\n            this.value.rawValue = new Point2d(this.value.rawValue.x +\n                getStepForKey(this.baseSteps_[0], getHorizontalStepKeys(ev)), this.value.rawValue.y +\n                getStepForKey(this.baseSteps_[1], getVerticalStepKeys(ev)) *\n                    (this.invertsY_ ? 1 : -1));\n        };\n        Point2dPadController.prototype.onFocusableElementBlur_ = function (ev) {\n            var elem = this.view.element;\n            var nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                // Next target is in the picker\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.triggerElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                // Next target is the trigger button\n                return;\n            }\n            this.foldable.expanded = false;\n        };\n        Point2dPadController.prototype.onKeyDown_ = function (ev) {\n            if (ev.keyCode === 27) {\n                this.foldable.expanded = false;\n            }\n        };\n        return Point2dPadController;\n    }());\n\n    var className$k = ClassName('p2dtxt');\n    /**\n     * @hidden\n     */\n    var Point2dTextView = /** @class */ (function () {\n        function Point2dTextView(doc, config) {\n            var _this = this;\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.formatters_ = config.formatters;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k());\n            var inputElems = [0, 1].map(function () {\n                var inputElem = doc.createElement('input');\n                inputElem.classList.add(className$k('i'));\n                inputElem.type = 'text';\n                return inputElem;\n            });\n            [0, 1].forEach(function (_, index) {\n                var elem = doc.createElement('div');\n                elem.classList.add(className$k('w'));\n                elem.appendChild(inputElems[index]);\n                _this.element.appendChild(elem);\n            });\n            this.inputElems_ = [inputElems[0], inputElems[1]];\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        Object.defineProperty(Point2dTextView.prototype, \"inputElements\", {\n            get: function () {\n                return this.inputElems_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Point2dTextView.prototype.update = function () {\n            var _this = this;\n            var xyComps = this.value.rawValue.getComponents();\n            xyComps.forEach(function (comp, index) {\n                var inputElem = _this.inputElems_[index];\n                inputElem.value = _this.formatters_[index](comp);\n            });\n        };\n        Point2dTextView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return Point2dTextView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Point2dTextController = /** @class */ (function () {\n        function Point2dTextController(doc, config) {\n            var _this = this;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.baseSteps_ = [config.axes[0].baseStep, config.axes[1].baseStep];\n            this.view = new Point2dTextView(doc, {\n                formatters: [config.axes[0].formatter, config.axes[1].formatter],\n                value: this.value,\n            });\n            this.view.inputElements.forEach(function (inputElem) {\n                inputElem.addEventListener('change', _this.onInputChange_);\n                inputElem.addEventListener('keydown', _this.onInputKeyDown_);\n            });\n        }\n        Point2dTextController.prototype.findIndexOfInputElem_ = function (inputElem) {\n            var inputElems = this.view.inputElements;\n            for (var i = 0; i < inputElems.length; i++) {\n                if (inputElems[i] === inputElem) {\n                    return i;\n                }\n            }\n            return null;\n        };\n        Point2dTextController.prototype.updateComponent_ = function (index, newValue) {\n            var comps = this.value.rawValue.getComponents();\n            var newComps = comps.map(function (comp, i) {\n                return i === index ? newValue : comp;\n            });\n            this.value.rawValue = new Point2d(newComps[0], newComps[1]);\n            this.view.update();\n        };\n        Point2dTextController.prototype.onInputChange_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            var parsedValue = this.parser_(inputElem.value);\n            if (isEmpty(parsedValue)) {\n                return;\n            }\n            var compIndex = this.findIndexOfInputElem_(inputElem);\n            if (isEmpty(compIndex)) {\n                return;\n            }\n            this.updateComponent_(compIndex, parsedValue);\n        };\n        Point2dTextController.prototype.onInputKeyDown_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            var parsedValue = this.parser_(inputElem.value);\n            if (isEmpty(parsedValue)) {\n                return;\n            }\n            var compIndex = this.findIndexOfInputElem_(inputElem);\n            if (isEmpty(compIndex)) {\n                return;\n            }\n            var step = getStepForKey(this.baseSteps_[compIndex], getVerticalStepKeys(e));\n            if (step === 0) {\n                return;\n            }\n            this.updateComponent_(compIndex, parsedValue + step);\n        };\n        return Point2dTextController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Point2dPadTextController = /** @class */ (function () {\n        function Point2dPadTextController(doc, config) {\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.padIc_ = new Point2dPadController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                maxValue: config.maxValue,\n                value: this.value,\n            });\n            this.textIc_ = new Point2dTextController(doc, {\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n            });\n            this.view = new Point2dPadTextView(doc, {\n                padView: this.padIc_.view,\n                textView: this.textIc_.view,\n            });\n            this.view.padButtonElement.addEventListener('blur', this.onPadButtonBlur_);\n            this.view.padButtonElement.addEventListener('click', this.onPadButtonClick_);\n            this.padIc_.triggerElement = this.view.padButtonElement;\n        }\n        Point2dPadTextController.prototype.onPadButtonBlur_ = function (e) {\n            var elem = this.view.element;\n            var nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.padIc_.foldable.expanded = false;\n            }\n        };\n        Point2dPadTextController.prototype.onPadButtonClick_ = function () {\n            this.padIc_.foldable.expanded = !this.padIc_.foldable.expanded;\n            if (this.padIc_.foldable.expanded) {\n                this.padIc_.view.allFocusableElements[0].focus();\n            }\n        };\n        return Point2dPadTextController;\n    }());\n\n    /**\n     * @hidden\n     */\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint(params) {\n        if (!params) {\n            return undefined;\n        }\n        var constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint({\n                step: params.step,\n            }));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint({\n            constraints: constraints,\n        });\n    }\n    function createConstraint$2(params) {\n        return new Point2dConstraint({\n            x: createDimensionConstraint('x' in params ? params.x : undefined),\n            y: createDimensionConstraint('y' in params ? params.y : undefined),\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        var rc = constraint && findConstraint(constraint, RangeConstraint);\n        if (rc) {\n            return Math.max(Math.abs(rc.minValue || 0), Math.abs(rc.maxValue || 0));\n        }\n        var step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    /**\n     * @hidden\n     */\n    function getSuitableMaxValue(initialValue, constraint) {\n        var xc = constraint instanceof Point2dConstraint ? constraint.x : undefined;\n        var yc = constraint instanceof Point2dConstraint ? constraint.y : undefined;\n        var xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        var yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createController$4(document, value, invertsY) {\n        var c = value.constraint;\n        if (!(c instanceof Point2dConstraint)) {\n            throw TpError.shouldNeverHappen();\n        }\n        return new Point2dPadTextController(document, {\n            axes: [\n                {\n                    baseStep: getBaseStep(c.x),\n                    formatter: createNumberFormatter(getSuitableDecimalDigits(c.x, value.rawValue.x)),\n                },\n                {\n                    baseStep: getBaseStep(c.y),\n                    formatter: createNumberFormatter(getSuitableDecimalDigits(c.y, value.rawValue.y)),\n                },\n            ],\n            invertsY: invertsY,\n            maxValue: getSuitableMaxValue(value.rawValue, value.constraint),\n            parser: parseNumber,\n            value: value,\n        });\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        var yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    /**\n     * @hidden\n     */\n    var Point2dInputPlugin = {\n        id: 'input-point2d',\n        binding: {\n            accept: function (value, _params) { return (Point2d.isObject(value) ? value : null); },\n            reader: function (_args) { return point2dFromUnknown; },\n            writer: function (_args) { return writePoint2d; },\n            constraint: function (args) { return createConstraint$2(args.params); },\n            equals: Point2d.equals,\n        },\n        controller: function (args) {\n            return createController$4(args.document, args.binding.value, shouldInvertY(args.params));\n        },\n    };\n\n    var Point3d = /** @class */ (function () {\n        function Point3d(x, y, z) {\n            if (x === void 0) { x = 0; }\n            if (y === void 0) { y = 0; }\n            if (z === void 0) { z = 0; }\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        Point3d.prototype.getComponents = function () {\n            return [this.x, this.y, this.z];\n        };\n        Point3d.isObject = function (obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            var x = obj.x;\n            var y = obj.y;\n            var z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        };\n        Point3d.equals = function (v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        };\n        Point3d.prototype.toObject = function () {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        };\n        return Point3d;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Point3dConstraint = /** @class */ (function () {\n        function Point3dConstraint(config) {\n            this.x = config.x;\n            this.y = config.y;\n            this.z = config.z;\n        }\n        Point3dConstraint.prototype.constrain = function (value) {\n            return new Point3d(this.x ? this.x.constrain(value.x) : value.x, this.y ? this.y.constrain(value.y) : value.y, this.z ? this.z.constrain(value.z) : value.z);\n        };\n        return Point3dConstraint;\n    }());\n\n    var className$l = ClassName('p3dtxt');\n    /**\n     * @hidden\n     */\n    var Point3dTextView = /** @class */ (function () {\n        function Point3dTextView(doc, config) {\n            var _this = this;\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.formatters_ = config.formatters;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            var inputElems = [0, 1, 2].map(function () {\n                var inputElem = doc.createElement('input');\n                inputElem.classList.add(className$l('i'));\n                inputElem.type = 'text';\n                return inputElem;\n            });\n            [0, 1, 2].forEach(function (_, index) {\n                var elem = doc.createElement('div');\n                elem.classList.add(className$l('w'));\n                elem.appendChild(inputElems[index]);\n                _this.element.appendChild(elem);\n            });\n            this.inputElems_ = [inputElems[0], inputElems[1], inputElems[2]];\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        Object.defineProperty(Point3dTextView.prototype, \"inputElements\", {\n            get: function () {\n                return this.inputElems_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Point3dTextView.prototype.update = function () {\n            var _this = this;\n            var comps = this.value.rawValue.getComponents();\n            comps.forEach(function (comp, index) {\n                var inputElem = _this.inputElems_[index];\n                inputElem.value = _this.formatters_[index](comp);\n            });\n        };\n        Point3dTextView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return Point3dTextView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Point3dTextController = /** @class */ (function () {\n        function Point3dTextController(doc, config) {\n            var _this = this;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            var axes = config.axes;\n            this.baseSteps_ = [axes[0].baseStep, axes[1].baseStep, axes[2].baseStep];\n            this.view = new Point3dTextView(doc, {\n                formatters: [axes[0].formatter, axes[1].formatter, axes[2].formatter],\n                value: this.value,\n            });\n            this.view.inputElements.forEach(function (inputElem) {\n                inputElem.addEventListener('change', _this.onInputChange_);\n                inputElem.addEventListener('keydown', _this.onInputKeyDown_);\n            });\n        }\n        Point3dTextController.prototype.findIndexOfInputElem_ = function (inputElem) {\n            var inputElems = this.view.inputElements;\n            for (var i = 0; i < inputElems.length; i++) {\n                if (inputElems[i] === inputElem) {\n                    return i;\n                }\n            }\n            return null;\n        };\n        Point3dTextController.prototype.updateComponent_ = function (index, newValue) {\n            var comps = this.value.rawValue.getComponents();\n            var newComps = comps.map(function (comp, i) {\n                return i === index ? newValue : comp;\n            });\n            this.value.rawValue = new Point3d(newComps[0], newComps[1], newComps[2]);\n            this.view.update();\n        };\n        Point3dTextController.prototype.onInputChange_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            var parsedValue = this.parser_(inputElem.value);\n            if (isEmpty(parsedValue)) {\n                return;\n            }\n            var compIndex = this.findIndexOfInputElem_(inputElem);\n            if (isEmpty(compIndex)) {\n                return;\n            }\n            this.updateComponent_(compIndex, parsedValue);\n        };\n        Point3dTextController.prototype.onInputKeyDown_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            var parsedValue = this.parser_(inputElem.value);\n            if (isEmpty(parsedValue)) {\n                return;\n            }\n            var compIndex = this.findIndexOfInputElem_(inputElem);\n            if (isEmpty(compIndex)) {\n                return;\n            }\n            var step = getStepForKey(this.baseSteps_[compIndex], getVerticalStepKeys(e));\n            if (step === 0) {\n                return;\n            }\n            this.updateComponent_(compIndex, parsedValue + step);\n        };\n        return Point3dTextController;\n    }());\n\n    /**\n     * @hidden\n     */\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createDimensionConstraint$1(params) {\n        if (!params) {\n            return undefined;\n        }\n        var constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint({\n                step: params.step,\n            }));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint({\n            constraints: constraints,\n        });\n    }\n    function createConstraint$3(params) {\n        return new Point3dConstraint({\n            x: createDimensionConstraint$1('x' in params ? params.x : undefined),\n            y: createDimensionConstraint$1('y' in params ? params.y : undefined),\n            z: createDimensionConstraint$1('z' in params ? params.z : undefined),\n        });\n    }\n    /**\n     * @hidden\n     */\n    function getAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n        };\n    }\n    function createController$5(document, value) {\n        var c = value.constraint;\n        if (!(c instanceof Point3dConstraint)) {\n            throw TpError.shouldNeverHappen();\n        }\n        return new Point3dTextController(document, {\n            axes: [\n                getAxis(value.rawValue.x, c.x),\n                getAxis(value.rawValue.y, c.y),\n                getAxis(value.rawValue.z, c.z),\n            ],\n            parser: parseNumber,\n            value: value,\n        });\n    }\n    /**\n     * @hidden\n     */\n    var Point3dInputPlugin = {\n        id: 'input-point3d',\n        binding: {\n            accept: function (value, _params) { return (Point3d.isObject(value) ? value : null); },\n            reader: function (_args) { return point3dFromUnknown; },\n            writer: function (_args) { return writePoint3d; },\n            constraint: function (args) { return createConstraint$3(args.params); },\n            equals: Point3d.equals,\n        },\n        controller: function (args) {\n            return createController$5(args.document, args.binding.value);\n        },\n    };\n\n    /**\n     * @hidden\n     */\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    /**\n     * @hidden\n     */\n    function formatString(value) {\n        return value;\n    }\n\n    function createConstraint$4(params) {\n        var constraints = [];\n        if ('options' in params && params.options !== undefined) {\n            constraints.push(new ListConstraint({\n                options: normalizeInputParamsOptions(params.options, stringFromUnknown),\n            }));\n        }\n        return new CompositeConstraint({\n            constraints: constraints,\n        });\n    }\n    function createController$6(doc, value) {\n        var _a;\n        var c = value.constraint;\n        if (c && findConstraint(c, ListConstraint)) {\n            return new ListController(doc, {\n                listItems: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                stringifyValue: function (v) { return v; },\n                value: value,\n            });\n        }\n        return new TextController(doc, {\n            formatter: formatString,\n            parser: function (v) { return v; },\n            value: value,\n        });\n    }\n    /**\n     * @hidden\n     */\n    var StringInputPlugin = {\n        id: 'input-string',\n        binding: {\n            accept: function (value, _params) { return (typeof value === 'string' ? value : null); },\n            constraint: function (args) { return createConstraint$4(args.params); },\n            reader: function (_args) { return stringFromUnknown; },\n            writer: function (_args) { return writePrimitive; },\n        },\n        controller: function (params) {\n            return createController$6(params.document, params.binding.value);\n        },\n    };\n\n    var className$m = ClassName('mll');\n    /**\n     * @hidden\n     */\n    var MultiLogView = /** @class */ (function () {\n        function MultiLogView(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$m());\n            var textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$m('i'));\n            textareaElem.style.height = \"calc(var(--unit-size) * \" + config.lineCount + \")\";\n            textareaElem.readOnly = true;\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update();\n        }\n        MultiLogView.prototype.update = function () {\n            var _this = this;\n            var elem = this.textareaElem_;\n            var shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            elem.textContent = this.value.rawValue\n                .map(function (value) {\n                return value !== undefined ? _this.formatter_(value) : '';\n            })\n                .join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        };\n        MultiLogView.prototype.onValueUpdate_ = function () {\n            this.update();\n        };\n        return MultiLogView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var MultiLogController = /** @class */ (function () {\n        function MultiLogController(doc, config) {\n            this.value = config.value;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n            });\n        }\n        return MultiLogController;\n    }());\n\n    var className$n = ClassName('sgl');\n    /**\n     * @hidden\n     */\n    var SingleLogView = /** @class */ (function () {\n        function SingleLogView(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            var inputElem = doc.createElement('input');\n            inputElem.classList.add(className$n('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            this.element.appendChild(inputElem);\n            this.inputElem_ = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update();\n        }\n        SingleLogView.prototype.update = function () {\n            var values = this.value.rawValue;\n            var lastValue = values[values.length - 1];\n            this.inputElem_.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        };\n        SingleLogView.prototype.onValueUpdate_ = function () {\n            this.update();\n        };\n        return SingleLogView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var SingleLogMonitorController = /** @class */ (function () {\n        function SingleLogMonitorController(doc, config) {\n            this.value = config.value;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n            });\n        }\n        return SingleLogMonitorController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        binding: {\n            accept: function (value, _params) { return (typeof value === 'boolean' ? value : null); },\n            reader: function (_args) { return boolFromUnknown; },\n        },\n        controller: function (args) {\n            var _a;\n            if (args.binding.value.rawValue.length === 1) {\n                return new SingleLogMonitorController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.binding.value,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.binding.value,\n            });\n        },\n    };\n\n    /**\n     * @hidden\n     */\n    var GraphCursor = /** @class */ (function () {\n        function GraphCursor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        Object.defineProperty(GraphCursor.prototype, \"index\", {\n            get: function () {\n                return this.index_;\n            },\n            set: function (index) {\n                var changed = this.index_ !== index;\n                if (changed) {\n                    this.index_ = index;\n                    this.emitter.emit('change', {\n                        index: index,\n                        sender: this,\n                    });\n                }\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return GraphCursor;\n    }());\n\n    var className$o = ClassName('grl');\n    /**\n     * @hidden\n     */\n    var GraphLogView = /** @class */ (function () {\n        function GraphLogView(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$o());\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            var svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$o('g'));\n            svgElem.style.height = \"calc(var(--unit-size) * \" + config.lineCount + \")\";\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            var lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            var tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className$o('t'));\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update();\n        }\n        Object.defineProperty(GraphLogView.prototype, \"graphElement\", {\n            get: function () {\n                return this.svgElem_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        GraphLogView.prototype.update = function () {\n            var bounds = this.svgElem_.getBoundingClientRect();\n            // Graph\n            var maxIndex = this.value.rawValue.length - 1;\n            var min = this.minValue_;\n            var max = this.maxValue_;\n            var points = [];\n            this.value.rawValue.forEach(function (v, index) {\n                if (v === undefined) {\n                    return;\n                }\n                var x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                var y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            // Cursor\n            var tooltipElem = this.tooltipElem_;\n            var value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className$o('t', 'valid'));\n                return;\n            }\n            tooltipElem.classList.add(className$o('t', 'valid'));\n            var tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            var ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = tx + \"px\";\n            tooltipElem.style.top = ty + \"px\";\n            tooltipElem.textContent = \"\" + this.formatter_(value);\n        };\n        GraphLogView.prototype.onValueUpdate_ = function () {\n            this.update();\n        };\n        GraphLogView.prototype.onCursorChange_ = function () {\n            this.update();\n        };\n        return GraphLogView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var GraphLogController = /** @class */ (function () {\n        function GraphLogController(doc, config) {\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.value = config.value;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n            });\n            this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n        }\n        GraphLogController.prototype.onGraphMouseLeave_ = function () {\n            this.cursor_.index = -1;\n        };\n        GraphLogController.prototype.onGraphMouseMove_ = function (e) {\n            var bounds = this.view.graphElement.getBoundingClientRect();\n            var x = e.offsetX;\n            this.cursor_.index = Math.floor(mapRange(x, 0, bounds.width, 0, this.value.rawValue.length));\n        };\n        return GraphLogController;\n    }());\n\n    function createFormatter() {\n        // TODO: formatter precision\n        return createNumberFormatter(2);\n    }\n    function createTextMonitor(document, binding, params) {\n        var _a;\n        if (binding.value.rawValue.length === 1) {\n            return new SingleLogMonitorController(document, {\n                formatter: createFormatter(),\n                value: binding.value,\n            });\n        }\n        return new MultiLogController(document, {\n            formatter: createFormatter(),\n            lineCount: (_a = params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: binding.value,\n        });\n    }\n    function createGraphMonitor(_a) {\n        var _b, _c, _d;\n        var document = _a.document, binding = _a.binding, params = _a.params;\n        return new GraphLogController(document, {\n            formatter: createFormatter(),\n            lineCount: (_b = params.lineCount) !== null && _b !== void 0 ? _b : Constants.monitor.defaultLineCount,\n            maxValue: (_c = ('max' in params ? params.max : null)) !== null && _c !== void 0 ? _c : 100,\n            minValue: (_d = ('min' in params ? params.min : null)) !== null && _d !== void 0 ? _d : 0,\n            value: binding.value,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    /**\n     * @hidden\n     */\n    var NumberMonitorPlugin = {\n        id: 'monitor-number',\n        binding: {\n            accept: function (value, _params) { return (typeof value === 'number' ? value : null); },\n            defaultBufferSize: function (params) { return (shouldShowGraph(params) ? 64 : 1); },\n            reader: function (_args) { return numberFromUnknown; },\n        },\n        controller: function (args) {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor({\n                    document: args.document,\n                    binding: args.binding,\n                    params: args.params,\n                });\n            }\n            return createTextMonitor(args.document, args.binding, args.params);\n        },\n    };\n\n    /**\n     * @hidden\n     */\n    var StringMonitorPlugin = {\n        id: 'monitor-string',\n        binding: {\n            accept: function (value, _params) { return (typeof value === 'string' ? value : null); },\n            reader: function (_args) { return stringFromUnknown; },\n        },\n        controller: function (args) {\n            var _a;\n            var value = args.binding.value;\n            var multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                });\n            }\n            return new SingleLogMonitorController(args.document, {\n                formatter: formatString,\n                value: value,\n            });\n        },\n    };\n\n    function createDefaultWrapperElement(doc) {\n        var elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(\"style[data-tp-style=\" + id + \"]\")) {\n            return;\n        }\n        var styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    function embedDefaultStyleIfNeeded(doc) {\n        embedStyle(doc, 'default', '.tp-btnv_b,.tp-lstv_s,.tp-p2dpadtxtv_b,.tp-fldv_t,.tp-rotv_t,.tp-cctxtsv_i,.tp-cswv_sw,.tp-p2dpadv_p,.tp-p2dtxtv_i,.tp-p3dtxtv_i,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-ckbv_i,.tp-cctxtsv_ms{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-btnv_b,.tp-lstv_s,.tp-p2dpadtxtv_b{background-color:var(--button-background-color);border-radius:2px;color:var(--button-foreground-color);cursor:pointer;display:block;font-weight:bold;height:var(--unit-size);line-height:var(--unit-size);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-btnv_b:hover,.tp-lstv_s:hover,.tp-p2dpadtxtv_b:hover{background-color:var(--button-background-color-hover)}.tp-btnv_b:focus,.tp-lstv_s:focus,.tp-p2dpadtxtv_b:focus{background-color:var(--button-background-color-focus)}.tp-btnv_b:active,.tp-lstv_s:active,.tp-p2dpadtxtv_b:active{background-color:var(--button-background-color-active)}.tp-fldv_t,.tp-rotv_t{background-color:var(--folder-background-color);color:var(--folder-foreground-color);cursor:pointer;display:block;height:calc(var(--unit-size) + 4px);line-height:calc(var(--unit-size) + 4px);overflow:hidden;padding-left:28px;position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_t:hover,.tp-rotv_t:hover{background-color:var(--folder-background-color-hover)}.tp-fldv_t:focus,.tp-rotv_t:focus{background-color:var(--folder-background-color-focus)}.tp-fldv_t:active,.tp-rotv_t:active{background-color:var(--folder-background-color-active)}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--folder-foreground-color), var(--folder-foreground-color) 2px, transparent 2px, transparent 4px, var(--folder-foreground-color) 4px);border-radius:2px;bottom:0;content:\\'\\';display:block;height:6px;left:13px;margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_t>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv_c>.tp-fldv.tp-v-first,.tp-rotv_c>.tp-fldv.tp-v-first{margin-top:-4px}.tp-fldv_c>.tp-fldv.tp-v-last,.tp-rotv_c>.tp-fldv.tp-v-last{margin-bottom:-4px}.tp-fldv_c>*:not(.tp-v-first),.tp-rotv_c>*:not(.tp-v-first){margin-top:4px}.tp-fldv_c>.tp-fldv:not(.tp-v-hidden)+.tp-fldv,.tp-rotv_c>.tp-fldv:not(.tp-v-hidden)+.tp-fldv{margin-top:0}.tp-fldv_c>.tp-sptv:not(.tp-v-hidden)+.tp-sptv,.tp-rotv_c>.tp-sptv:not(.tp-v-hidden)+.tp-sptv{margin-top:0}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:4px;padding-top:4px;transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-cctxtsv_i,.tp-cswv_sw,.tp-p2dpadv_p,.tp-p2dtxtv_i,.tp-p3dtxtv_i,.tp-txtv_i{background-color:var(--input-background-color);border-radius:2px;box-sizing:border-box;color:var(--input-foreground-color);font-family:inherit;height:var(--unit-size);line-height:var(--unit-size);min-width:0;width:100%}.tp-cctxtsv_i:hover,.tp-cswv_sw:hover,.tp-p2dpadv_p:hover,.tp-p2dtxtv_i:hover,.tp-p3dtxtv_i:hover,.tp-txtv_i:hover{background-color:var(--input-background-color-hover)}.tp-cctxtsv_i:focus,.tp-cswv_sw:focus,.tp-p2dpadv_p:focus,.tp-p2dtxtv_i:focus,.tp-p3dtxtv_i:focus,.tp-txtv_i:focus{background-color:var(--input-background-color-focus)}.tp-cctxtsv_i:active,.tp-cswv_sw:active,.tp-p2dpadv_p:active,.tp-p2dtxtv_i:active,.tp-p3dtxtv_i:active,.tp-txtv_i:active{background-color:var(--input-background-color-active)}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--monitor-background-color);border-radius:2px;box-sizing:border-box;color:var(--monitor-foreground-color);height:var(--unit-size);width:100%}.tp-btnv{padding:0 4px}.tp-btnv_b{width:100%}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_m{background-color:var(--input-background-color);border-radius:2px;cursor:pointer;display:block;height:var(--unit-size);position:relative;width:var(--unit-size)}.tp-ckbv_m::before{background-color:var(--input-foreground-color);border-radius:2px;bottom:4px;content:\\'\\';display:block;left:4px;opacity:0;position:absolute;right:4px;top:4px}.tp-ckbv_i:hover+.tp-ckbv_m{background-color:var(--input-background-color-hover)}.tp-ckbv_i:focus+.tp-ckbv_m{background-color:var(--input-background-color-focus)}.tp-ckbv_i:active+.tp-ckbv_m{background-color:var(--input-background-color-active)}.tp-ckbv_i:checked+.tp-ckbv_m::before{opacity:1}.tp-cctxtsv{display:flex;width:100%}.tp-cctxtsv_m{margin-right:4px;position:relative}.tp-cctxtsv_ms{border-radius:2px;color:var(--label-foreground-color);cursor:pointer;height:var(--unit-size);line-height:var(--unit-size);padding:0 18px 0 4px}.tp-cctxtsv_ms:hover{background-color:var(--input-background-color-hover)}.tp-cctxtsv_ms:focus{background-color:var(--input-background-color-focus)}.tp-cctxtsv_ms:active{background-color:var(--input-background-color-active)}.tp-cctxtsv_mm{border-color:var(--label-foreground-color) transparent transparent;border-style:solid;border-width:3px;box-sizing:border-box;height:6px;pointer-events:none;width:6px;bottom:0;margin:auto;position:absolute;right:6px;top:3px}.tp-cctxtsv_w{display:flex;flex:1}.tp-cctxtsv_i{border-radius:0;flex:1;padding:0 4px}.tp-cctxtsv_i:first-child{border-bottom-left-radius:2px;border-top-left-radius:2px}.tp-cctxtsv_i:last-child{border-bottom-right-radius:2px;border-top-right-radius:2px}.tp-cctxtsv_i+.tp-cctxtsv_i{margin-left:2px}.tp-clpv{background-color:var(--base-background-color);border-radius:6px;box-shadow:0 2px 4px var(--base-shadow-color);display:none;padding:4px;position:relative;visibility:hidden;z-index:1000}.tp-clpv.tp-clpv-expanded{display:block;visibility:visible}.tp-clpv_h,.tp-clpv_ap{margin-left:6px;margin-right:6px}.tp-clpv_h{margin-top:4px}.tp-clpv_rgb{display:flex;margin-top:4px;width:100%}.tp-clpv_a{display:flex;margin-top:4px;padding-top:8px;position:relative}.tp-clpv_a:before{background-color:var(--separator-color);content:\\'\\';height:4px;left:-4px;position:absolute;right:-4px;top:0}.tp-clpv_ap{align-items:center;display:flex;flex:3}.tp-clpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:2px;outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:80px;width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--unit-size);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:2px;border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--unit-size);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:2px;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-cswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:2px}.tp-cswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--unit-size);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--unit-size)}.tp-cswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:2px;bottom:0;content:\\'\\';display:block;left:0;position:absolute;right:0;top:0}.tp-cswv_p{left:-4px;position:absolute;right:-4px;top:var(--unit-size)}.tp-cswtxtv{display:flex;position:relative}.tp-cswtxtv_s{flex-grow:0;flex-shrink:0;width:var(--unit-size)}.tp-cswtxtv_t{flex:1;margin-left:4px}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-expanded .tp-fldv_t{transition:border-radius 0s}.tp-fldv_c{border-left:var(--folder-background-color) solid 4px}.tp-fldv_t:hover+.tp-fldv_c{border-left-color:var(--folder-background-color-hover)}.tp-fldv_t:focus+.tp-fldv_c{border-left-color:var(--folder-background-color-focus)}.tp-fldv_t:active+.tp-fldv_c{border-left-color:var(--folder-background-color-active)}.tp-fldv_c>.tp-fldv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_t{border-top-left-radius:2px;border-bottom-left-radius:2px}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_t{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:2px}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--unit-size) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--monitor-foreground-color);stroke-linejoin:round}.tp-grlv_t{color:var(--monitor-foreground-color);font-size:0.9em;left:0;pointer-events:none;position:absolute;text-indent:4px;top:0;visibility:hidden}.tp-grlv_t.tp-grlv_t-valid{visibility:visible}.tp-grlv_t::before{background-color:var(--monitor-foreground-color);border-radius:100%;content:\\'\\';display:block;height:4px;left:-2px;position:absolute;top:-2px;width:4px}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:4px;padding-right:4px}.tp-lblv_l{color:var(--label-foreground-color);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lstv{position:relative}.tp-lstv_s{padding:0 18px 0 4px;width:100%}.tp-lstv_m{border-color:var(--button-foreground-color) transparent transparent;border-style:solid;border-width:3px;box-sizing:border-box;height:6px;pointer-events:none;width:6px;bottom:0;margin:auto;position:absolute;right:6px;top:3px}.tp-sglv_i{padding:0 4px}.tp-mllv_i{display:block;height:calc(var(--unit-size) * 3);line-height:var(--unit-size);padding:0 4px;resize:none;white-space:pre}.tp-p2dpadv{background-color:var(--base-background-color);border-radius:6px;box-shadow:0 2px 4px var(--base-shadow-color);display:none;padding:4px 4px 4px calc(4px * 2 + var(--unit-size));position:relative;visibility:hidden;z-index:1000}.tp-p2dpadv.tp-p2dpadv-expanded{display:block;visibility:visible}.tp-p2dpadv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpadv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpadv_ax{stroke:var(--input-guide-color)}.tp-p2dpadv_l{stroke:var(--input-foreground-color);stroke-linecap:round;stroke-dasharray:1px 3px}.tp-p2dpadv_m{fill:var(--input-foreground-color)}.tp-p2dpadtxtv{display:flex;position:relative}.tp-p2dpadtxtv_b{height:var(--unit-size);position:relative;width:var(--unit-size)}.tp-p2dpadtxtv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dpadtxtv_p{left:-4px;position:absolute;right:-4px;top:var(--unit-size)}.tp-p2dpadtxtv_t{margin-left:4px}.tp-p2dtxtv{display:flex}.tp-p2dtxtv_w{align-items:center;display:flex}.tp-p2dtxtv_w+.tp-p2dtxtv_w{margin-left:2px}.tp-p2dtxtv_i{padding:0 4px;width:100%}.tp-p2dtxtv_w:nth-child(1) .tp-p2dtxtv_i{border-top-right-radius:0;border-bottom-right-radius:0}.tp-p2dtxtv_w:nth-child(2) .tp-p2dtxtv_i{border-top-left-radius:0;border-bottom-left-radius:0}.tp-p3dtxtv{display:flex}.tp-p3dtxtv_w{align-items:center;display:flex}.tp-p3dtxtv_w+.tp-p3dtxtv_w{margin-left:2px}.tp-p3dtxtv_i{padding:0 4px;width:100%}.tp-p3dtxtv_w:first-child .tp-p3dtxtv_i{border-top-right-radius:0;border-bottom-right-radius:0}.tp-p3dtxtv_w:not(:first-child):not(:last-child) .tp-p3dtxtv_i{border-radius:0}.tp-p3dtxtv_w:last-child .tp-p3dtxtv_i{border-top-left-radius:0;border-bottom-left-radius:0}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--unit-size: var(--tp-unit-size, 20px);--base-background-color: var(--tp-base-background-color, #2f3137);--base-shadow-color: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--button-background-color: var(--tp-button-background-color, #adafb8);--button-background-color-active: var(--tp-button-background-color-active, #d6d7db);--button-background-color-focus: var(--tp-button-background-color-focus, #c8cad0);--button-background-color-hover: var(--tp-button-background-color-hover, #bbbcc4);--button-foreground-color: var(--tp-button-foreground-color, #2f3137);--folder-background-color: var(--tp-folder-background-color, rgba(200,202,208,0.1));--folder-background-color-active: var(--tp-folder-background-color-active, rgba(200,202,208,0.25));--folder-background-color-focus: var(--tp-folder-background-color-focus, rgba(200,202,208,0.2));--folder-background-color-hover: var(--tp-folder-background-color-hover, rgba(200,202,208,0.15));--folder-foreground-color: var(--tp-folder-foreground-color, #c8cad0);--input-background-color: var(--tp-input-background-color, rgba(200,202,208,0.1));--input-background-color-active: var(--tp-input-background-color-active, rgba(200,202,208,0.25));--input-background-color-focus: var(--tp-input-background-color-focus, rgba(200,202,208,0.2));--input-background-color-hover: var(--tp-input-background-color-hover, rgba(200,202,208,0.15));--input-foreground-color: var(--tp-input-foreground-color, #c8cad0);--input-guide-color: var(--tp-input-guide-color, rgba(47,49,55,0.5));--label-foreground-color: var(--tp-label-foreground-color, rgba(200,202,208,0.7));--monitor-background-color: var(--tp-monitor-background-color, #26272c);--monitor-foreground-color: var(--tp-monitor-foreground-color, rgba(200,202,208,0.7));--separator-color: var(--tp-separator-color, #26272c)}.tp-rotv{background-color:var(--base-background-color);border-radius:6px;box-shadow:0 2px 4px var(--base-shadow-color);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_t{border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:6px;border-top-right-radius:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_t{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv_m{transition:none}.tp-rotv_c>.tp-fldv:last-child>.tp-fldv_c{border-bottom-left-radius:6px;border-bottom-right-radius:6px}.tp-rotv_c>.tp-fldv:last-child:not(.tp-fldv-expanded)>.tp-fldv_t{border-bottom-left-radius:6px;border-bottom-right-radius:6px}.tp-rotv_c>.tp-fldv:first-child>.tp-fldv_t{border-top-left-radius:6px;border-top-right-radius:6px}.tp-sptv_r{background-color:var(--separator-color);border-width:0;display:block;height:4px;margin:0;width:100%}.tp-sldv_o{box-sizing:border-box;cursor:pointer;height:var(--unit-size);margin:0 6px;outline:none;position:relative}.tp-sldv_o::before{background-color:var(--input-background-color);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_i{height:100%;left:0;position:absolute;top:0}.tp-sldv_i::before{background-color:var(--button-background-color);border-radius:2px;bottom:0;content:\\'\\';display:block;height:12px;margin:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_o:hover .tp-sldv_i::before{background-color:var(--button-background-color-hover)}.tp-sldv_o:focus .tp-sldv_i::before{background-color:var(--button-background-color-focus)}.tp-sldv_o:active .tp-sldv_i::before{background-color:var(--button-background-color-active)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-txtv_i{padding:0 4px}.tp-v-hidden{display:none}');\n        getAllPlugins().forEach(function (plugin) {\n            if (plugin.css) {\n                embedStyle(doc, \"plugin-\" + plugin.id, plugin.css);\n            }\n        });\n    }\n    var Tweakpane = /** @class */ (function (_super) {\n        __extends(Tweakpane, _super);\n        function Tweakpane(opt_config) {\n            var _a;\n            var _this = this;\n            var config = opt_config || {};\n            var doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            var rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: new Blade(),\n                title: config.title,\n            });\n            _this = _super.call(this, rootController) || this;\n            _this.containerElem_ = config.container || createDefaultWrapperElement(doc);\n            _this.containerElem_.appendChild(_this.element);\n            _this.doc_ = doc;\n            _this.usesDefaultWrapper_ = !config.container;\n            embedDefaultStyleIfNeeded(_this.document);\n            return _this;\n        }\n        Object.defineProperty(Tweakpane.prototype, \"document\", {\n            get: function () {\n                if (!this.doc_) {\n                    throw TpError.alreadyDisposed();\n                }\n                return this.doc_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Tweakpane.prototype.dispose = function () {\n            var containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                var parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            _super.prototype.dispose.call(this);\n        };\n        return Tweakpane;\n    }(RootApi));\n    function registerDefaultPlugins() {\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n        ].forEach(function (p) {\n            RootApi.registerPlugin({\n                type: 'input',\n                plugin: p,\n            });\n        });\n        [BooleanMonitorPlugin, StringMonitorPlugin, NumberMonitorPlugin].forEach(function (p) {\n            RootApi.registerPlugin({\n                type: 'monitor',\n                plugin: p,\n            });\n        });\n    }\n    registerDefaultPlugins();\n\n    return Tweakpane;\n\n})));\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { writable } from 'svelte/store';\nconst initialState = {\n    fanCount: 4,\n};\nfunction createSettings() {\n    const { subscribe, set, update } = writable(initialState);\n    return {\n        subscribe,\n        reset: () => set(initialState),\n        set: (val) => set(val),\n    };\n}\nexport const settings = createSettings();\n","<script lang=\"ts\">\nimport { onMount } from 'svelte';\nimport Tweakpane from 'tweakpane';\nimport { settings } from '../stores/settings';\n\nlet element;\n\nonMount(() => {\n  const Pane = new Tweakpane({ container: element });\n\n  Pane.addInput({ fanCount: $settings.fanCount }, 'fanCount', {\n    min: 4,\n    max: 360,\n    step: 1,\n  }).on('change', (v) => {\n    $settings.fanCount = v;\n  });\n});\n</script>\n\n<div bind:this=\"{element}\"></div>\n","\n/**\n * WebGL の API を目的別にまとめたユーティリティクラス\n * @class\n */\nexport class WebGLUtility {\n    /**\n     * ファイルをテキストとして開く\n     * @static\n     * @param {string} path - 読み込むファイルのパス\n     * @return {Promise}\n     */\n    static loadFile(path){\n        return new Promise((resolve, reject) => {\n            // fetch を使ってファイルにアクセスする\n            fetch(path)\n              .then((res) => {\n                  // テキストとして処理する\n                  return res.text();\n              })\n              .then((text) => {\n                  // テキストを引数に Promise を解決する\n                  resolve(text);\n              })\n              .catch((err) => {\n                  // なんらかのエラー\n                  reject(err);\n              });\n        });\n    }\n\n    /**\n     * プロパティとして保持する canvas の幅\n     * @type {number} w - canvas に設定する横幅\n     */\n    set width(w){\n        this.canvas.width = w;\n    }\n    get width(){\n        return this.canvas.width;\n    }\n    /**\n     * プロパティとして保持する canvas の高さ\n     * @type {number} h - canvas に設定する縦方向の高さ\n     */\n    set height(h){\n        this.canvas.height = h;\n    }\n    get height(){\n        return this.canvas.height;\n    }\n    /**\n     * プロパティとして保持する WebGL コンテキストにプログラムオブジェクトを設定する\n     * @type {WebGLProgram} prg - 設定するプログラムオブジェクト\n     */\n    set program(prg){\n        // gl.useProgram で利用するプログラムオブジェクトを設定できる\n        this.gl.useProgram(prg);\n        // あとで取り出すこともできるようプロパティに保持しておく\n        this.currentProgram = prg;\n    }\n    get program(){\n        return this.currentProgram;\n    }\n\n    /**\n     * @constructor\n     */\n    constructor(){\n        this.canvas = null;\n        this.gl = null;\n        this.currentProgram = null;\n    }\n    /**\n     * canvas を受け取り WebGL コンテキストを初期化する\n     * @param {HTMLCanvasElement} canvas - WebGL コンテキストを取得する canvas 要素\n     * @param {boolean} isWebGL2 - WebGL2 コンテキストを利用するかどうかの真偽値\n     */\n    initialize(canvas, isWebGL2){\n        // プロパティに保持しておく\n        this.canvas = canvas;\n        // canvas から WebGL コンテキスト取得を試みる\n        this.gl = this.canvas.getContext(`webgl${isWebGL2 === true ? '2' : ''}`);\n        if(this.gl == null){\n            // WebGL コンテキストが取得できない場合はエラー\n            throw new Error('webgl not supported');\n        }\n    }\n    /**\n     * ソースコードからシェーダオブジェクトを生成する\n     * @param {string} source - シェーダのソースコード\n     * @param {number} type - gl.VERTEX_SHADER or gl.FRAGMENT_SHADER\n     * @return {WebGLShader}\n     */\n    createShaderObject(source, type){\n        const gl = this.gl;\n        // 空のシェーダオブジェクトを生成する\n        const shader = gl.createShader(type);\n        // シェーダオブジェクトにソースコードを割り当てる\n        gl.shaderSource(shader, source);\n        // シェーダをコンパイルする\n        gl.compileShader(shader);\n        // コンパイル後のステータスを確認し問題なければシェーダオブジェクトを返す\n        if(gl.getShaderParameter(shader, gl.COMPILE_STATUS)){\n            return shader;\n        }else{\n            throw new Error(gl.getShaderInfoLog(shader));\n            return null;\n        }\n    }\n    /**\n     * シェーダオブジェクトからプログラムオブジェクトを生成する\n     * @param {WebGLShader} vs - 頂点シェーダのシェーダオブジェクト\n     * @param {WebGLShader} fs - フラグメントシェーダのシェーダオブジェクト\n     * @return {WebGLProgram}\n     */\n    createProgramObject(vs, fs){\n        const gl = this.gl;\n        // 空のプログラムオブジェクトを生成する\n        const program = gl.createProgram();\n        // ２つのシェーダをアタッチ（関連付け）する\n        gl.attachShader(program, vs);\n        gl.attachShader(program, fs);\n        // シェーダオブジェクトをリンクする\n        gl.linkProgram(program);\n        // リンクが完了するとシェーダオブジェクトは不要になるので削除する\n        gl.deleteShader(vs);\n        gl.deleteShader(fs);\n        // リンク後のステータスを確認し問題なければプログラムオブジェクトを返す\n        if(gl.getProgramParameter(program, gl.LINK_STATUS)){\n            gl.useProgram(program);\n            return program;\n        }else{\n            throw new Error(gl.getProgramInfoLog(program));\n            return null;\n        }\n    }\n    /**\n     * シェーダオブジェクトからプログラムオブジェクトを生成する（transform feedback 対応版）\n     * @param {WebGLShader} vs - 頂点シェーダのシェーダオブジェクト\n     * @param {WebGLShader} fs - フラグメントシェーダのシェーダオブジェクト\n     * @param {Array.<string>} varyings - 対象の varying 変数名の配列\n     * @return {WebGLProgram}\n     */\n    createProgramObjectTF(vs, fs, varyings){\n        const gl = this.gl;\n        // 空のプログラムオブジェクトを生成する\n        const program = gl.createProgram();\n        // ２つのシェーダをアタッチ（関連付け）する\n        gl.attachShader(program, vs);\n        gl.attachShader(program, fs);\n        // プログラムオブジェクトに対して varying 変数を設定する\n        gl.transformFeedbackVaryings(program, varyings, gl.SEPARATE_ATTRIBS);\n        // シェーダオブジェクトをリンクする\n        gl.linkProgram(program);\n        // リンクが完了するとシェーダオブジェクトは不要になるので削除する\n        gl.deleteShader(vs);\n        gl.deleteShader(fs);\n        // リンク後のステータスを確認し問題なければプログラムオブジェクトを返す\n        if(gl.getProgramParameter(program, gl.LINK_STATUS)){\n            gl.useProgram(program);\n            return program;\n        }else{\n            throw new Error(gl.getProgramInfoLog(program));\n            return null;\n        }\n    }\n    /**\n     * JavaScript の配列から VBO（Vertex Buffer Object）を生成する\n     * @param {Array.<number>} vertexArray - 頂点属性情報の配列\n     * @return {WebGLBuffer}\n     */\n    createVBO(vertexArray){\n        const gl = this.gl;\n        // 空のバッファオブジェクトを生成する\n        const vbo = gl.createBuffer();\n        // バッファを gl.ARRAY_BUFFER としてバインドする\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n        // バインドしたバッファに Float32Array オブジェクトに変換した配列を設定する\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertexArray), gl.STATIC_DRAW);\n        // 安全のために最後にバインドを解除してからバッファオブジェクトを返す\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        return vbo;\n    }\n    /**\n     * JavaScript の配列から IBO（Index Buffer Object）を生成する\n     * @param {Array.<number>} indexArray - 頂点属性情報の配列\n     * @return {WebGLBuffer}\n     */\n    createIBO(indexArray){\n        const gl = this.gl;\n        // 空のバッファオブジェクトを生成する\n        const ibo = gl.createBuffer();\n        // バッファを gl.ELEMENT_ARRAY_BUFFER としてバインドする\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n        // バインドしたバッファに Float32Array オブジェクトに変換した配列を設定する\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Int16Array(indexArray), gl.STATIC_DRAW);\n        // 安全のために最後にバインドを解除してからバッファオブジェクトを返す\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n        return ibo;\n    }\n    /**\n     * 頂点属性情報を有効化しロケーションと紐付ける\n     * @param {Array.<WebGLBuffer>} vbo - 頂点属性を格納した VBO の配列\n     * @param {Array.<number>} attLocation - 頂点属性ロケーションの配列\n     * @param {Array.<number>} attStride - 頂点属性のストライドの配列\n     */\n    enableAttribute(vbo, attLocation, attStride){\n        const gl = this.gl;\n        vbo.forEach((buffer, index) => {\n            // 有効化したいバッファをまずバインドする\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            // 頂点属性ロケーションの有効化を行う\n            gl.enableVertexAttribArray(attLocation[index]);\n            // 対象のロケーションのストライドやデータ型を設定する\n            gl.vertexAttribPointer(attLocation[index], attStride[index], gl.FLOAT, false, 0, 0);\n        });\n    }\n    /**\n     * テクスチャ用のリソースからテクスチャを生成する\n     * @param {string} resource - Image や Canvas などのテクスチャ用リソース\n     * @return {WebGLTexture}\n     */\n    createTexture(resource, unit){\n        const gl = this.gl;\n        // テクスチャオブジェクトを生成\n        const texture = gl.createTexture();\n        // アクティブなテクスチャユニット番号を指定する\n        gl.activeTexture(unit);\n        // テクスチャをアクティブなユニットにバインドする\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        // バインドしたテクスチャにデータを割り当て（ここで画像のロードが完了している必要がある）\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, resource);\n        // ミップマップを自動生成する\n        gl.generateMipmap(gl.TEXTURE_2D);\n        // テクスチャパラメータを設定する\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        // 安全の為にテクスチャのバインドを解除してから返す\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        return texture;\n    }\n    /**\n     * キューブマップテクスチャを非同期に生成する Promise を返す\n     * @param {Array.<string>} source - 読み込む画像のパスの配列\n     * @param {Array.<number>} target - 画像にそれぞれ対応させるターゲット定数の配列\n     * @return {Promise} テクスチャを引数に渡して解決する Promise\n     */\n    createCubeTextureFromFile(source, target){\n        return new Promise((resolve) => {\n            const gl = this.gl;\n            // テクスチャオブジェクトを生成\n            const texture = gl.createTexture();\n            // アクティブなテクスチャユニット番号を指定する\n            gl.activeTexture(gl.TEXTURE0);\n            // テクスチャをアクティブなユニットにキューブテクスチャとしてバインドする\n            gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);\n\n            // 画像を個々に読み込む Promise を生成し配列に入れておく\n            const promises = source.map((src, index) => {\n                // 画像の読み込みが完了し、テクスチャに画像を割り当てたら解決する Promise\n                return new Promise((loadedResolve) => {\n                    // 空の画像オブジェクト\n                    const img = new Image();\n                    // ロード完了時の処理を先に登録\n                    img.addEventListener('load', () => {\n                        // 読み込んだ画像をテクスチャに割り当てる\n                        gl.texImage2D(target[index], 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n                        // Promise を解決する\n                        loadedResolve();\n                    }, false);\n                    // 画像のソースを設定\n                    img.src = src;\n                });\n            });\n\n            // すべての Promise を一気に実行する\n            Promise.all(promises)\n              .then(() => {\n                  // ミップマップを自動生成する\n                  gl.generateMipmap(gl.TEXTURE_CUBE_MAP);\n                  // テクスチャパラメータを設定する\n                  gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n                  gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n                  gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                  gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                  // 安全の為にテクスチャのバインドを解除してから Promise を解決する\n                  gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);\n                  // Promise を解決する際、生成したテクスチャを引数から返す\n                  resolve(texture);\n              });\n        });\n    }\n    /**\n     * フレームバッファを生成する\n     * @param {number} width - フレームバッファの幅\n     * @param {number} height - フレームバッファの高さ\n     * @return {object}\n     * @property {WebGLFramebuffer} framebuffer - フレームバッファオブジェクト\n     * @property {WebGLRenderbuffer} depthRenderBuffer - 深度バッファ用のレンダーバッファ\n     * @property {WebGLTexture} texture - カラーバッファ用のテクスチャオブジェクト\n     */\n    createFramebuffer(width, height){\n        const gl = this.gl;\n\n        const framebuffer       = gl.createFramebuffer();  // フレームバッファ\n        const depthRenderBuffer = gl.createRenderbuffer(); // レンダーバッファ\n        const texture           = gl.createTexture();      // テクスチャ\n        // フレームバッファをバインド\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n        // レンダーバッファをバインド\n        gl.bindRenderbuffer(gl.RENDERBUFFER, depthRenderBuffer);\n        // レンダーバッファを深度バッファとして設定する\n        gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, width, height);\n        // フレームバッファにレンダーバッファを関連付けする\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, depthRenderBuffer);\n        // テクスチャをユニット０にバインド\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        // テクスチャにサイズなどを設定する（ただし中身は null）\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        // テクスチャパラメータを設定\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        // フレームバッファにテクスチャを関連付けする\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n        // すべてのオブジェクトは念の為バインドを解除しておく\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        // 各オブジェクトを、JavaScript のオブジェクトに格納して返す\n        return {\n            framebuffer: framebuffer,\n            depthRenderbuffer: depthRenderBuffer,\n            texture: texture\n        };\n    }\n}\n\n/**\n * three.js の OrbitControls に似た挙動のカメラ操作用ユーティリティクラス\n * @class\n */\nexport class WebGLOrbitCamera {\n    /** @type {number} */\n    static get DEFAULT_DISTANCE(){return 5.0;};\n    /** @type {number} */\n    static get DEFAULT_MIN_DISTANCE(){return 1.0;};\n    /** @type {number} */\n    static get DEFAULT_MAX_DISTANCE(){return 10.0;};\n    /** @type {number} */\n    static get DEFAULT_MOVE_SCALE(){return 2.0;};\n\n    /**\n     * @constructor\n     * @param {HTMLElement} target - イベントを設定するターゲットエレメント\n     * @param {object} [option={}]\n     * @property {number} option.distance - カメラの原点からの距離\n     * @property {number} option.min - カメラが原点に寄れる最小距離\n     * @property {number} option.max - カメラが原点から離れられる最大距離\n     * @property {number} option.move - カメラが平行移動する際のスケール\n     */\n    constructor(target, option = {}){\n        this.target             = target;\n        this.distance           = option.distance || WebGLOrbitCamera.DEFAULT_DISTANCE;\n        this.minDistance        = option.min || WebGLOrbitCamera.DEFAULT_MIN_DISTANCE;\n        this.maxDistance        = option.max || WebGLOrbitCamera.DEFAULT_MAX_DISTANCE;\n        this.moveScale          = option.move || WebGLOrbitCamera.DEFAULT_MOVE_SCALE;\n        this.position           = [0.0, 0.0, this.distance];\n        this.center             = [0.0, 0.0, 0.0];\n        this.upDirection        = [0.0, 1.0, 0.0];\n        this.moveX              = [1.0, 0.0, 0.0];\n        this.moveZ              = [0.0, 0.0, 1.0];\n        this.defaultPosition    = [0.0, 0.0, this.distance];\n        this.defaultCenter      = [0.0, 0.0, 0.0];\n        this.defaultUpDirection = [0.0, 1.0, 0.0];\n        this.defaultMoveX       = [1.0, 0.0, 0.0];\n        this.defaultMoveZ       = [0.0, 0.0, 1.0];\n        this.movePosition       = [0.0, 0.0, 0.0];\n        this.rotateX            = 0.0;\n        this.rotateY            = 0.0;\n        this.scale              = 0.0;\n        this.isDown             = false;\n        this.prevPosition       = [0, 0];\n        this.offsetPosition     = [0, 0];\n        this.qt                 = Qtn.create();\n        this.qtx                = Qtn.create();\n        this.qty                = Qtn.create();\n\n        // self binding\n        this.mouseInteractionStart = this.mouseInteractionStart.bind(this);\n        this.mouseInteractionMove  = this.mouseInteractionMove.bind(this);\n        this.mouseInteractionEnd   = this.mouseInteractionEnd.bind(this);\n        this.wheelScroll           = this.wheelScroll.bind(this);\n\n        // event\n        this.target.addEventListener('mousedown', this.mouseInteractionStart, false);\n        this.target.addEventListener('mousemove', this.mouseInteractionMove,  false);\n        this.target.addEventListener('mouseup',   this.mouseInteractionEnd,   false);\n        this.target.addEventListener('wheel',     this.wheelScroll,           false);\n        this.target.addEventListener('contextmenu', (event) => {\n            event.preventDefault();\n        }, false);\n    }\n    /**\n     * マウスボタンが押された際のイベント\n     */\n    mouseInteractionStart(event){\n        this.isDown = true;\n        const bound = this.target.getBoundingClientRect();\n        this.prevPosition = [\n            event.clientX - bound.left,\n            event.clientY - bound.top,\n        ];\n    }\n    /**\n     * マウスが移動した際のイベント\n     */\n    mouseInteractionMove(event){\n        if(this.isDown !== true){return;}\n        const bound = this.target.getBoundingClientRect();\n        const w = bound.width;\n        const h = bound.height;\n        const x = event.clientX - bound.left;\n        const y = event.clientY - bound.top;\n        const s = 1.0 / Math.min(w, h);\n        this.offsetPosition = [\n            x - this.prevPosition[0],\n            y - this.prevPosition[1],\n        ];\n        this.prevPosition = [x, y];\n        switch(event.buttons){\n            case 1: // 左ボタン\n                this.rotateX += this.offsetPosition[0] * s;\n                this.rotateY += this.offsetPosition[1] * s;\n                this.rotateX = this.rotateX % 1.0;\n                this.rotateY = Math.min(Math.max(this.rotateY % 1.0, -0.25), 0.25);\n                break;\n            case 2: // 右ボタン\n                const PI2 = Math.PI * 2.0;\n                const scaleX = this.offsetPosition[0] * s * this.moveScale;\n                const scaleZ = this.offsetPosition[1] * s * this.moveScale;\n                const xDirection = this.defaultMoveX.slice()\n                const zDirection = this.defaultMoveZ.slice();\n                const q = Qtn.identity(Qtn.create());\n                Qtn.rotate(this.rotateX * PI2, [0.0, 1.0, 0.0], q);\n                Qtn.toVecIII(xDirection, q, this.moveX);\n                Qtn.toVecIII(zDirection, q, this.moveZ);\n                this.movePosition[0] -= this.moveX[0] * scaleX + this.moveZ[0] * scaleZ;\n                this.movePosition[2] -= this.moveX[2] * scaleX + this.moveZ[2] * scaleZ;\n                break;\n        }\n    }\n    /**\n     * マウスボタンが離された際のイベント\n     */\n    mouseInteractionEnd(event){\n        this.isDown = false;\n    }\n    /**\n     * スクロール操作に対するイベント\n     */\n    wheelScroll(event){\n        const w = event.wheelDelta;\n        if(w > 0){\n            this.scale = -0.5;\n        }else if(w < 0){\n            this.scale = 0.5;\n        }\n    }\n    /**\n     * 現在のパラメータからビュー行列を生成して返す\n     * @return {Mat4}\n     */\n    update(){\n        const PI2 = Math.PI * 2.0;\n        const v = [1.0, 0.0, 0.0];\n        // scale\n        this.scale *= 0.7;\n        this.distance += this.scale;\n        this.distance = Math.min(Math.max(this.distance, this.minDistance), this.maxDistance);\n        this.defaultPosition[2] = this.distance;\n        // rotate\n        Qtn.identity(this.qt);\n        Qtn.identity(this.qtx);\n        Qtn.identity(this.qty);\n        Qtn.rotate(this.rotateX * PI2, [0.0, 1.0, 0.0], this.qtx);\n        Qtn.toVecIII(v, this.qtx, v);\n        Qtn.rotate(this.rotateY * PI2, v, this.qty);\n        Qtn.multiply(this.qtx, this.qty, this.qt)\n        Qtn.toVecIII(this.defaultPosition, this.qt, this.position);\n        Qtn.toVecIII(this.defaultUpDirection, this.qt, this.upDirection);\n        // translate\n        this.position[0] += this.movePosition[0];\n        this.position[1] += this.movePosition[1];\n        this.position[2] += this.movePosition[2];\n        this.center[0] = this.defaultCenter[0] + this.movePosition[0];\n        this.center[1] = this.defaultCenter[1] + this.movePosition[1];\n        this.center[2] = this.defaultCenter[2] + this.movePosition[2];\n\n        return Mat4.lookAt(this.position, this.center, this.upDirection);\n    }\n}\n\n/**\n * ベクトルや行列演算の機能を提供する\n * @class\n */\nexport class WebGLMath {\n    /**\n     * @static\n     * @type {Mat4}\n     */\n    static get mat4(){return Mat4;}\n    /**\n     * @static\n     * @type {Vec3}\n     */\n    static get vec3(){return Vec3;}\n    /**\n     * @static\n     * @type {Vec2}\n     */\n    static get vec2(){return Vec2;}\n    /**\n     * @static\n     * @type {Qtn}\n     */\n    static get qtn(){return Qtn;}\n}\n\n/**\n * Mat4\n * @class Mat4\n */\nexport class Mat4 {\n    /**\n     * 4x4 の正方行列を生成する\n     * @return {Float32Array} 行列格納用の配列\n     */\n    static create(){\n        return new Float32Array(16);\n    }\n    /**\n     * 行列を単位化する（参照に注意）\n     * @param {Mat4} dest - 単位化する行列\n     * @return {Mat4} 単位化した行列\n     */\n    static identity(dest){\n        dest[0]  = 1; dest[1]  = 0; dest[2]  = 0; dest[3]  = 0;\n        dest[4]  = 0; dest[5]  = 1; dest[6]  = 0; dest[7]  = 0;\n        dest[8]  = 0; dest[9]  = 0; dest[10] = 1; dest[11] = 0;\n        dest[12] = 0; dest[13] = 0; dest[14] = 0; dest[15] = 1;\n        return dest;\n    }\n    /**\n     * 行列を乗算する（参照に注意・戻り値としても結果を返す）\n     * @param {Mat4} mat0 - 乗算される行列\n     * @param {Mat4} mat1 - 乗算する行列\n     * @param {Mat4} [dest] - 乗算結果を格納する行列\n     * @return {Mat4} 乗算結果の行列\n     */\n    static multiply(mat0, mat1, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        let a = mat0[0],  b = mat0[1],  c = mat0[2],  d = mat0[3],\n          e = mat0[4],  f = mat0[5],  g = mat0[6],  h = mat0[7],\n          i = mat0[8],  j = mat0[9],  k = mat0[10], l = mat0[11],\n          m = mat0[12], n = mat0[13], o = mat0[14], p = mat0[15],\n          A = mat1[0],  B = mat1[1],  C = mat1[2],  D = mat1[3],\n          E = mat1[4],  F = mat1[5],  G = mat1[6],  H = mat1[7],\n          I = mat1[8],  J = mat1[9],  K = mat1[10], L = mat1[11],\n          M = mat1[12], N = mat1[13], O = mat1[14], P = mat1[15];\n        out[0]  = A * a + B * e + C * i + D * m;\n        out[1]  = A * b + B * f + C * j + D * n;\n        out[2]  = A * c + B * g + C * k + D * o;\n        out[3]  = A * d + B * h + C * l + D * p;\n        out[4]  = E * a + F * e + G * i + H * m;\n        out[5]  = E * b + F * f + G * j + H * n;\n        out[6]  = E * c + F * g + G * k + H * o;\n        out[7]  = E * d + F * h + G * l + H * p;\n        out[8]  = I * a + J * e + K * i + L * m;\n        out[9]  = I * b + J * f + K * j + L * n;\n        out[10] = I * c + J * g + K * k + L * o;\n        out[11] = I * d + J * h + K * l + L * p;\n        out[12] = M * a + N * e + O * i + P * m;\n        out[13] = M * b + N * f + O * j + P * n;\n        out[14] = M * c + N * g + O * k + P * o;\n        out[15] = M * d + N * h + O * l + P * p;\n        return out;\n    }\n    /**\n     * 行列に拡大縮小を適用する（参照に注意・戻り値としても結果を返す）\n     * @param {Mat4} mat - 適用を受ける行列\n     * @param {Vec3} vec - XYZ の各軸に対して拡縮を適用する値の行列\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static scale(mat, vec, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        out[0]  = mat[0]  * vec[0];\n        out[1]  = mat[1]  * vec[0];\n        out[2]  = mat[2]  * vec[0];\n        out[3]  = mat[3]  * vec[0];\n        out[4]  = mat[4]  * vec[1];\n        out[5]  = mat[5]  * vec[1];\n        out[6]  = mat[6]  * vec[1];\n        out[7]  = mat[7]  * vec[1];\n        out[8]  = mat[8]  * vec[2];\n        out[9]  = mat[9]  * vec[2];\n        out[10] = mat[10] * vec[2];\n        out[11] = mat[11] * vec[2];\n        out[12] = mat[12];\n        out[13] = mat[13];\n        out[14] = mat[14];\n        out[15] = mat[15];\n        return out;\n    }\n    /**\n     * 行列に平行移動を適用する（参照に注意・戻り値としても結果を返す）\n     * @param {Mat4} mat - 適用を受ける行列\n     * @param {Vec3} vec - XYZ の各軸に対して平行移動を適用する値の行列\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static translate(mat, vec, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        out[0] = mat[0]; out[1] = mat[1]; out[2]  = mat[2];  out[3]  = mat[3];\n        out[4] = mat[4]; out[5] = mat[5]; out[6]  = mat[6];  out[7]  = mat[7];\n        out[8] = mat[8]; out[9] = mat[9]; out[10] = mat[10]; out[11] = mat[11];\n        out[12] = mat[0] * vec[0] + mat[4] * vec[1] + mat[8]  * vec[2] + mat[12];\n        out[13] = mat[1] * vec[0] + mat[5] * vec[1] + mat[9]  * vec[2] + mat[13];\n        out[14] = mat[2] * vec[0] + mat[6] * vec[1] + mat[10] * vec[2] + mat[14];\n        out[15] = mat[3] * vec[0] + mat[7] * vec[1] + mat[11] * vec[2] + mat[15];\n        return out;\n    }\n    /**\n     * 行列に回転を適用する（参照に注意・戻り値としても結果を返す）\n     * @param {Mat4} mat - 適用を受ける行列\n     * @param {number} angle - 回転量を表す値（ラジアン）\n     * @param {Vec3} axis - 回転の軸\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static rotate(mat, angle, axis, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        let sq = Math.sqrt(axis[0] * axis[0] + axis[1] * axis[1] + axis[2] * axis[2]);\n        if(!sq){return null;}\n        let a = axis[0], b = axis[1], c = axis[2];\n        if(sq != 1){sq = 1 / sq; a *= sq; b *= sq; c *= sq;}\n        let d = Math.sin(angle), e = Math.cos(angle), f = 1 - e,\n          g = mat[0],  h = mat[1], i = mat[2],  j = mat[3],\n          k = mat[4],  l = mat[5], m = mat[6],  n = mat[7],\n          o = mat[8],  p = mat[9], q = mat[10], r = mat[11],\n          s = a * a * f + e,\n          t = b * a * f + c * d,\n          u = c * a * f - b * d,\n          v = a * b * f - c * d,\n          w = b * b * f + e,\n          x = c * b * f + a * d,\n          y = a * c * f + b * d,\n          z = b * c * f - a * d,\n          A = c * c * f + e;\n        if(angle){\n            if(mat != out){\n                out[12] = mat[12]; out[13] = mat[13];\n                out[14] = mat[14]; out[15] = mat[15];\n            }\n        } else {\n            out = mat;\n        }\n        out[0]  = g * s + k * t + o * u;\n        out[1]  = h * s + l * t + p * u;\n        out[2]  = i * s + m * t + q * u;\n        out[3]  = j * s + n * t + r * u;\n        out[4]  = g * v + k * w + o * x;\n        out[5]  = h * v + l * w + p * x;\n        out[6]  = i * v + m * w + q * x;\n        out[7]  = j * v + n * w + r * x;\n        out[8]  = g * y + k * z + o * A;\n        out[9]  = h * y + l * z + p * A;\n        out[10] = i * y + m * z + q * A;\n        out[11] = j * y + n * z + r * A;\n        return out;\n    }\n    /**\n     * ビュー座標変換行列を生成する（参照に注意・戻り値としても結果を返す）\n     * @param {Vec3} eye - 視点位置\n     * @param {Vec3} center - 注視点\n     * @param {Vec3} up - 上方向を示すベクトル\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static lookAt(eye, center, up, dest){\n        let eyeX    = eye[0],    eyeY    = eye[1],    eyeZ    = eye[2],\n          centerX = center[0], centerY = center[1], centerZ = center[2],\n          upX     = up[0],     upY     = up[1],     upZ     = up[2];\n        if(eyeX == centerX && eyeY == centerY && eyeZ == centerZ){return Mat4.identity(dest);}\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        let x0, x1, x2, y0, y1, y2, z0, z1, z2, l;\n        z0 = eyeX - center[0]; z1 = eyeY - center[1]; z2 = eyeZ - center[2];\n        l = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n        z0 *= l; z1 *= l; z2 *= l;\n        x0 = upY * z2 - upZ * z1;\n        x1 = upZ * z0 - upX * z2;\n        x2 = upX * z1 - upY * z0;\n        l = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n        if(!l){\n            x0 = 0; x1 = 0; x2 = 0;\n        } else {\n            l = 1 / l;\n            x0 *= l; x1 *= l; x2 *= l;\n        }\n        y0 = z1 * x2 - z2 * x1; y1 = z2 * x0 - z0 * x2; y2 = z0 * x1 - z1 * x0;\n        l = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n        if(!l){\n            y0 = 0; y1 = 0; y2 = 0;\n        } else {\n            l = 1 / l;\n            y0 *= l; y1 *= l; y2 *= l;\n        }\n        out[0] = x0; out[1] = y0; out[2]  = z0; out[3]  = 0;\n        out[4] = x1; out[5] = y1; out[6]  = z1; out[7]  = 0;\n        out[8] = x2; out[9] = y2; out[10] = z2; out[11] = 0;\n        out[12] = -(x0 * eyeX + x1 * eyeY + x2 * eyeZ);\n        out[13] = -(y0 * eyeX + y1 * eyeY + y2 * eyeZ);\n        out[14] = -(z0 * eyeX + z1 * eyeY + z2 * eyeZ);\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * 透視投影変換行列を生成する（参照に注意・戻り値としても結果を返す）\n     * @param {number} fovy - 視野角（度数法）\n     * @param {number} aspect - アスペクト比（幅 / 高さ）\n     * @param {number} near - ニアクリップ面までの距離\n     * @param {number} far - ファークリップ面までの距離\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static perspective(fovy, aspect, near, far, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        let t = near * Math.tan(fovy * Math.PI / 360);\n        let r = t * aspect;\n        let a = r * 2, b = t * 2, c = far - near;\n        out[0]  = near * 2 / a;\n        out[1]  = 0;\n        out[2]  = 0;\n        out[3]  = 0;\n        out[4]  = 0;\n        out[5]  = near * 2 / b;\n        out[6]  = 0;\n        out[7]  = 0;\n        out[8]  = 0;\n        out[9]  = 0;\n        out[10] = -(far + near) / c;\n        out[11] = -1;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = -(far * near * 2) / c;\n        out[15] = 0;\n        return out;\n    }\n    /**\n     * 正射影投影変換行列を生成する（参照に注意・戻り値としても結果を返す）\n     * @param {number} left - 左端\n     * @param {number} right - 右端\n     * @param {number} top - 上端\n     * @param {number} bottom - 下端\n     * @param {number} near - ニアクリップ面までの距離\n     * @param {number} far - ファークリップ面までの距離\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static ortho(left, right, top, bottom, near, far, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        let h = (right - left);\n        let v = (top - bottom);\n        let d = (far - near);\n        out[0]  = 2 / h;\n        out[1]  = 0;\n        out[2]  = 0;\n        out[3]  = 0;\n        out[4]  = 0;\n        out[5]  = 2 / v;\n        out[6]  = 0;\n        out[7]  = 0;\n        out[8]  = 0;\n        out[9]  = 0;\n        out[10] = -2 / d;\n        out[11] = 0;\n        out[12] = -(left + right) / h;\n        out[13] = -(top + bottom) / v;\n        out[14] = -(far + near) / d;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * 転置行列を生成する（参照に注意・戻り値としても結果を返す）\n     * @param {Mat4} mat - 適用する行列\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static transpose(mat, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        out[0]  = mat[0];  out[1]  = mat[4];\n        out[2]  = mat[8];  out[3]  = mat[12];\n        out[4]  = mat[1];  out[5]  = mat[5];\n        out[6]  = mat[9];  out[7]  = mat[13];\n        out[8]  = mat[2];  out[9]  = mat[6];\n        out[10] = mat[10]; out[11] = mat[14];\n        out[12] = mat[3];  out[13] = mat[7];\n        out[14] = mat[11]; out[15] = mat[15];\n        return out;\n    }\n    /**\n     * 逆行列を生成する（参照に注意・戻り値としても結果を返す）\n     * @param {Mat4} mat - 適用する行列\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static inverse(mat, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        let a = mat[0],  b = mat[1],  c = mat[2],  d = mat[3],\n          e = mat[4],  f = mat[5],  g = mat[6],  h = mat[7],\n          i = mat[8],  j = mat[9],  k = mat[10], l = mat[11],\n          m = mat[12], n = mat[13], o = mat[14], p = mat[15],\n          q = a * f - b * e, r = a * g - c * e,\n          s = a * h - d * e, t = b * g - c * f,\n          u = b * h - d * f, v = c * h - d * g,\n          w = i * n - j * m, x = i * o - k * m,\n          y = i * p - l * m, z = j * o - k * n,\n          A = j * p - l * n, B = k * p - l * o,\n          ivd = 1 / (q * B - r * A + s * z + t * y - u * x + v * w);\n        out[0]  = ( f * B - g * A + h * z) * ivd;\n        out[1]  = (-b * B + c * A - d * z) * ivd;\n        out[2]  = ( n * v - o * u + p * t) * ivd;\n        out[3]  = (-j * v + k * u - l * t) * ivd;\n        out[4]  = (-e * B + g * y - h * x) * ivd;\n        out[5]  = ( a * B - c * y + d * x) * ivd;\n        out[6]  = (-m * v + o * s - p * r) * ivd;\n        out[7]  = ( i * v - k * s + l * r) * ivd;\n        out[8]  = ( e * A - f * y + h * w) * ivd;\n        out[9]  = (-a * A + b * y - d * w) * ivd;\n        out[10] = ( m * u - n * s + p * q) * ivd;\n        out[11] = (-i * u + j * s - l * q) * ivd;\n        out[12] = (-e * z + f * x - g * w) * ivd;\n        out[13] = ( a * z - b * x + c * w) * ivd;\n        out[14] = (-m * t + n * r - o * q) * ivd;\n        out[15] = ( i * t - j * r + k * q) * ivd;\n        return out;\n    }\n    /**\n     * 行列にベクトルを乗算する（ベクトルに行列を適用する）\n     * @param {Mat4} mat - 適用する行列\n     * @param {Array.<number>} vec - 乗算するベクトル（4 つの要素を持つ配列）\n     * @return {Float32Array} 結果のベクトル\n     */\n    static toVecIV(mat, vec){\n        let a = mat[0],  b = mat[1],  c = mat[2],  d = mat[3],\n          e = mat[4],  f = mat[5],  g = mat[6],  h = mat[7],\n          i = mat[8],  j = mat[9],  k = mat[10], l = mat[11],\n          m = mat[12], n = mat[13], o = mat[14], p = mat[15];\n        let x = vec[0], y = vec[1], z = vec[2], w = vec[3];\n        let out = [];\n        out[0] = x * a + y * e + z * i + w * m;\n        out[1] = x * b + y * f + z * j + w * n;\n        out[2] = x * c + y * g + z * k + w * o;\n        out[3] = x * d + y * h + z * l + w * p;\n        vec = out;\n        return out;\n    }\n    /**\n     * カメラのプロパティに相当する情報を受け取り行列を生成する\n     * @param {Vec3} position - カメラの座標\n     * @param {Vec3} centerPoint - カメラの注視点\n     * @param {Vec3} upDirection - カメラの上方向\n     * @param {number} fovy - 視野角\n     * @param {number} aspect - アスペクト比\n     * @param {number} near - ニアクリップ面\n     * @param {number} far - ファークリップ面\n     * @param {Mat4} vmat - ビュー座標変換行列の結果を格納する行列\n     * @param {Mat4} pmat - 透視投影座標変換行列の結果を格納する行列\n     * @param {Mat4} dest - ビュー x 透視投影変換行列の結果を格納する行列\n     */\n    static vpFromCameraProperty(position, centerPoint, upDirection, fovy, aspect, near, far, vmat, pmat, dest){\n        Mat4.lookAt(position, centerPoint, upDirection, vmat);\n        Mat4.perspective(fovy, aspect, near, far, pmat);\n        Mat4.multiply(pmat, vmat, dest);\n    }\n    /**\n     * MVP 行列に相当する行列を受け取りベクトルを変換して返す\n     * @param {Mat4} mat - MVP 行列\n     * @param {Array.<number>} vec - MVP 行列と乗算するベクトル\n     * @param {number} width - ビューポートの幅\n     * @param {number} height - ビューポートの高さ\n     * @return {Array.<number>} 結果のベクトル（2 つの要素を持つベクトル）\n     */\n    static screenPositionFromMvp(mat, vec, width, height){\n        let halfWidth = width * 0.5;\n        let halfHeight = height * 0.5;\n        let v = Mat4.toVecIV(mat, [vec[0], vec[1], vec[2], 1.0]);\n        if(v[3] <= 0.0){return [NaN, NaN];}\n        v[0] /= v[3]; v[1] /= v[3]; v[2] /= v[3];\n        return [\n            halfWidth + v[0] * halfWidth,\n            halfHeight - v[1] * halfHeight\n        ];\n    }\n}\n\n/**\n * Vec3\n * @class Vec3\n */\nexport class Vec3 {\n    /**\n     * 3 つの要素を持つベクトルを生成する\n     * @return {Float32Array} ベクトル格納用の配列\n     */\n    static create(){\n        return new Float32Array(3);\n    }\n    /**\n     * ベクトルの長さ（大きさ）を返す\n     * @param {Vec3} v - 3 つの要素を持つベクトル\n     * @return {number} ベクトルの長さ（大きさ）\n     */\n    static len(v){\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\n    }\n    /**\n     * 2 つの座標（始点・終点）を結ぶベクトルを返す\n     * @param {Vec3} v0 - 3 つの要素を持つ始点座標\n     * @param {Vec3} v1 - 3 つの要素を持つ終点座標\n     * @return {Vec3} 視点と終点を結ぶベクトル\n     */\n    static distance(v0, v1){\n        let n = Vec3.create();\n        n[0] = v1[0] - v0[0];\n        n[1] = v1[1] - v0[1];\n        n[2] = v1[2] - v0[2];\n        return n;\n    }\n    /**\n     * ベクトルを正規化した結果を返す\n     * @param {Vec3} v - 3 つの要素を持つベクトル\n     * @return {Vec3} 正規化したベクトル\n     */\n    static normalize(v){\n        let n = Vec3.create();\n        let l = Vec3.len(v);\n        if(l > 0){\n            let e = 1.0 / l;\n            n[0] = v[0] * e;\n            n[1] = v[1] * e;\n            n[2] = v[2] * e;\n        }else{\n            n[0] = 0.0;\n            n[1] = 0.0;\n            n[2] = 0.0;\n        }\n        return n;\n    }\n    /**\n     * 2 つのベクトルの内積の結果を返す\n     * @param {Vec3} v0 - 3 つの要素を持つベクトル\n     * @param {Vec3} v1 - 3 つの要素を持つベクトル\n     * @return {number} 内積の結果\n     */\n    static dot(v0, v1){\n        return v0[0] * v1[0] + v0[1] * v1[1] + v0[2] * v1[2];\n    }\n    /**\n     * 2 つのベクトルの外積の結果を返す\n     * @param {Vec3} v0 - 3 つの要素を持つベクトル\n     * @param {Vec3} v1 - 3 つの要素を持つベクトル\n     * @return {Vec3} 外積の結果\n     */\n    static cross(v0, v1){\n        let n = Vec3.create();\n        n[0] = v0[1] * v1[2] - v0[2] * v1[1];\n        n[1] = v0[2] * v1[0] - v0[0] * v1[2];\n        n[2] = v0[0] * v1[1] - v0[1] * v1[0];\n        return n;\n    }\n    /**\n     * 3 つのベクトルから面法線を求めて返す\n     * @param {Vec3} v0 - 3 つの要素を持つベクトル\n     * @param {Vec3} v1 - 3 つの要素を持つベクトル\n     * @param {Vec3} v2 - 3 つの要素を持つベクトル\n     * @return {Vec3} 面法線ベクトル\n     */\n    static faceNormal(v0, v1, v2){\n        let n = Vec3.create();\n        let vec1 = [v1[0] - v0[0], v1[1] - v0[1], v1[2] - v0[2]];\n        let vec2 = [v2[0] - v0[0], v2[1] - v0[1], v2[2] - v0[2]];\n        n[0] = vec1[1] * vec2[2] - vec1[2] * vec2[1];\n        n[1] = vec1[2] * vec2[0] - vec1[0] * vec2[2];\n        n[2] = vec1[0] * vec2[1] - vec1[1] * vec2[0];\n        return Vec3.normalize(n);\n    }\n}\n\n/**\n * Vec2\n * @class Vec2\n */\nexport class Vec2 {\n    /**\n     * 2 つの要素を持つベクトルを生成する\n     * @return {Float32Array} ベクトル格納用の配列\n     */\n    static create(){\n        return new Float32Array(2);\n    }\n    /**\n     * ベクトルの長さ（大きさ）を返す\n     * @param {Vec2} v - 2 つの要素を持つベクトル\n     * @return {number} ベクトルの長さ（大きさ）\n     */\n    static len(v){\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n    }\n    /**\n     * 2 つの座標（始点・終点）を結ぶベクトルを返す\n     * @param {Vec2} v0 - 2 つの要素を持つ始点座標\n     * @param {Vec2} v1 - 2 つの要素を持つ終点座標\n     * @return {Vec2} 視点と終点を結ぶベクトル\n     */\n    static distance(v0, v1){\n        let n = Vec2.create();\n        n[0] = v1[0] - v0[0];\n        n[1] = v1[1] - v0[1];\n        return n;\n    }\n    /**\n     * ベクトルを正規化した結果を返す\n     * @param {Vec2} v - 2 つの要素を持つベクトル\n     * @return {Vec2} 正規化したベクトル\n     */\n    static normalize(v){\n        let n = Vec2.create();\n        let l = Vec2.len(v);\n        if(l > 0){\n            let e = 1.0 / l;\n            n[0] = v[0] * e;\n            n[1] = v[1] * e;\n        }\n        return n;\n    }\n    /**\n     * 2 つのベクトルの内積の結果を返す\n     * @param {Vec2} v0 - 2 つの要素を持つベクトル\n     * @param {Vec2} v1 - 2 つの要素を持つベクトル\n     * @return {number} 内積の結果\n     */\n    static dot(v0, v1){\n        return v0[0] * v1[0] + v0[1] * v1[1];\n    }\n    /**\n     * 2 つのベクトルの外積の結果を返す\n     * @param {Vec2} v0 - 2 つの要素を持つベクトル\n     * @param {Vec2} v1 - 2 つの要素を持つベクトル\n     * @return {Vec2} 外積の結果\n     */\n    static cross(v0, v1){\n        let n = Vec2.create();\n        return v0[0] * v1[1] - v0[1] * v1[0];\n    }\n}\n\n/**\n * Qtn\n * @class Qtn\n */\nexport class Qtn {\n    /**\n     * 4 つの要素からなるクォータニオンのデータ構造を生成する（虚部 x, y, z, 実部 w の順序で定義）\n     * @return {Float32Array} クォータニオンデータ格納用の配列\n     */\n    static create(){\n        return new Float32Array(4);\n    }\n    /**\n     * クォータニオンを初期化する（参照に注意）\n     * @param {Qtn} dest - 初期化するクォータニオン\n     * @return {Qtn} 結果のクォータニオン\n     */\n    static identity(dest){\n        dest[0] = 0; dest[1] = 0; dest[2] = 0; dest[3] = 1;\n        return dest;\n    }\n    /**\n     * 共役四元数を生成して返す（参照に注意・戻り値としても結果を返す）\n     * @param {Qtn} qtn - 元となるクォータニオン\n     * @param {Qtn} [dest] - 結果を格納するクォータニオン\n     * @return {Qtn} 結果のクォータニオン\n     */\n    static inverse(qtn, dest){\n        let out = dest;\n        if(dest == null){out = Qtn.create();}\n        out[0] = -qtn[0];\n        out[1] = -qtn[1];\n        out[2] = -qtn[2];\n        out[3] =  qtn[3];\n        return out;\n    }\n    /**\n     * 虚部を正規化して返す（参照に注意）\n     * @param {Qtn} qtn - 元となるクォータニオン\n     * @return {Qtn} 結果のクォータニオン\n     */\n    static normalize(dest){\n        let x = dest[0], y = dest[1], z = dest[2];\n        let l = Math.sqrt(x * x + y * y + z * z);\n        if(l === 0){\n            dest[0] = 0;\n            dest[1] = 0;\n            dest[2] = 0;\n        }else{\n            l = 1 / l;\n            dest[0] = x * l;\n            dest[1] = y * l;\n            dest[2] = z * l;\n        }\n        return dest;\n    }\n    /**\n     * クォータニオンを乗算した結果を返す（参照に注意・戻り値としても結果を返す）\n     * @param {Qtn} qtn0 - 乗算されるクォータニオン\n     * @param {Qtn} qtn1 - 乗算するクォータニオン\n     * @param {Qtn} [dest] - 結果を格納するクォータニオン\n     * @return {Qtn} 結果のクォータニオン\n     */\n    static multiply(qtn0, qtn1, dest){\n        let out = dest;\n        if(dest == null){out = Qtn.create();}\n        let ax = qtn0[0], ay = qtn0[1], az = qtn0[2], aw = qtn0[3];\n        let bx = qtn1[0], by = qtn1[1], bz = qtn1[2], bw = qtn1[3];\n        out[0] = ax * bw + aw * bx + ay * bz - az * by;\n        out[1] = ay * bw + aw * by + az * bx - ax * bz;\n        out[2] = az * bw + aw * bz + ax * by - ay * bx;\n        out[3] = aw * bw - ax * bx - ay * by - az * bz;\n        return out;\n    }\n    /**\n     * クォータニオンに回転を適用し返す（参照に注意・戻り値としても結果を返す）\n     * @param {number} angle - 回転する量（ラジアン）\n     * @param {Array.<number>} axis - 3 つの要素を持つ軸ベクトル\n     * @param {Qtn} [dest] - 結果を格納するクォータニオン\n     * @return {Qtn} 結果のクォータニオン\n     */\n    static rotate(angle, axis, dest){\n        let out = dest;\n        if(dest == null){out = Qtn.create();}\n        let a = axis[0], b = axis[1], c = axis[2];\n        let sq = Math.sqrt(axis[0] * axis[0] + axis[1] * axis[1] + axis[2] * axis[2]);\n        if(sq !== 0){\n            let l = 1 / sq;\n            a *= l;\n            b *= l;\n            c *= l;\n        }\n        let s = Math.sin(angle * 0.5);\n        out[0] = a * s;\n        out[1] = b * s;\n        out[2] = c * s;\n        out[3] = Math.cos(angle * 0.5);\n        return out;\n    }\n    /**\n     * ベクトルにクォータニオンを適用し返す（参照に注意・戻り値としても結果を返す）\n     * @param {Array.<number>} vec - 3 つの要素を持つベクトル\n     * @param {Qtn} qtn - クォータニオン\n     * @param {Array.<number>} [dest] - 3 つの要素を持つベクトル\n     * @return {Array.<number>} 結果のベクトル\n     */\n    static toVecIII(vec, qtn, dest){\n        let out = dest;\n        if(dest == null){out = [0.0, 0.0, 0.0];}\n        let qp = Qtn.create();\n        let qq = Qtn.create();\n        let qr = Qtn.create();\n        Qtn.inverse(qtn, qr);\n        qp[0] = vec[0];\n        qp[1] = vec[1];\n        qp[2] = vec[2];\n        Qtn.multiply(qr, qp, qq);\n        Qtn.multiply(qq, qtn, qr);\n        out[0] = qr[0];\n        out[1] = qr[1];\n        out[2] = qr[2];\n        return out;\n    }\n    /**\n     * 4x4 行列にクォータニオンを適用し返す（参照に注意・戻り値としても結果を返す）\n     * @param {Qtn} qtn - クォータニオン\n     * @param {Mat4} [dest] - 4x4 行列\n     * @return {Mat4} 結果の行列\n     */\n    static toMatIV(qtn, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create();}\n        let x = qtn[0], y = qtn[1], z = qtn[2], w = qtn[3];\n        let x2 = x + x, y2 = y + y, z2 = z + z;\n        let xx = x * x2, xy = x * y2, xz = x * z2;\n        let yy = y * y2, yz = y * z2, zz = z * z2;\n        let wx = w * x2, wy = w * y2, wz = w * z2;\n        out[0]  = 1 - (yy + zz);\n        out[1]  = xy - wz;\n        out[2]  = xz + wy;\n        out[3]  = 0;\n        out[4]  = xy + wz;\n        out[5]  = 1 - (xx + zz);\n        out[6]  = yz - wx;\n        out[7]  = 0;\n        out[8]  = xz - wy;\n        out[9]  = yz + wx;\n        out[10] = 1 - (xx + yy);\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * 2 つのクォータニオンの球面線形補間を行った結果を返す（参照に注意・戻り値としても結果を返す）\n     * @param {Qtn} qtn0 - クォータニオン\n     * @param {Qtn} qtn1 - クォータニオン\n     * @param {number} time - 補間係数（0.0 から 1.0 で指定）\n     * @param {Qtn} [dest] - 結果を格納するクォータニオン\n     * @return {Qtn} 結果のクォータニオン\n     */\n    static slerp(qtn0, qtn1, time, dest){\n        let out = dest;\n        if(dest == null){out = Qtn.create();}\n        let ht = qtn0[0] * qtn1[0] + qtn0[1] * qtn1[1] + qtn0[2] * qtn1[2] + qtn0[3] * qtn1[3];\n        let hs = 1.0 - ht * ht;\n        if(hs <= 0.0){\n            out[0] = qtn0[0];\n            out[1] = qtn0[1];\n            out[2] = qtn0[2];\n            out[3] = qtn0[3];\n        }else{\n            hs = Math.sqrt(hs);\n            if(Math.abs(hs) < 0.0001){\n                out[0] = (qtn0[0] * 0.5 + qtn1[0] * 0.5);\n                out[1] = (qtn0[1] * 0.5 + qtn1[1] * 0.5);\n                out[2] = (qtn0[2] * 0.5 + qtn1[2] * 0.5);\n                out[3] = (qtn0[3] * 0.5 + qtn1[3] * 0.5);\n            }else{\n                let ph = Math.acos(ht);\n                let pt = ph * time;\n                let t0 = Math.sin(ph - pt) / hs;\n                let t1 = Math.sin(pt) / hs;\n                out[0] = qtn0[0] * t0 + qtn1[0] * t1;\n                out[1] = qtn0[1] * t0 + qtn1[1] * t1;\n                out[2] = qtn0[2] * t0 + qtn1[2] * t1;\n                out[3] = qtn0[3] * t0 + qtn1[3] * t1;\n            }\n        }\n        return out;\n    }\n}\n\n/**\n * ジオメトリ情報を生成する\n * @class\n */\nexport class WebGLGeometry {\n    /**\n     * 板ポリゴンの頂点情報を生成する\n     * @param {number} width - 板ポリゴンの一辺の幅\n     * @param {number} height - 板ポリゴンの一辺の高さ\n     * @param {Array.<number>} color - RGBA を 0.0 から 1.0 の範囲で指定した配列\n     * @return {object}\n     * @property {Array.<number>} position - 頂点座標\n     * @property {Array.<number>} normal - 頂点法線\n     * @property {Array.<number>} color - 頂点カラー\n     * @property {Array.<number>} texCoord - テクスチャ座標\n     * @property {Array.<number>} index - 頂点インデックス（gl.TRIANGLES）\n     * @example\n     * let planeData = WebGLGeometry.plane(2.0, 2.0, [1.0, 1.0, 1.0, 1.0]);\n     */\n    static plane(width, height, color){\n        let w, h;\n        w = width / 2;\n        h = height / 2;\n        let pos = [\n            -w,  h,  0.0,\n            w,  h,  0.0,\n            -w, -h,  0.0,\n            w, -h,  0.0\n        ];\n        let nor = [\n            0.0, 0.0, 1.0,\n            0.0, 0.0, 1.0,\n            0.0, 0.0, 1.0,\n            0.0, 0.0, 1.0\n        ];\n        let col = [\n            color[0], color[1], color[2], color[3],\n            color[0], color[1], color[2], color[3],\n            color[0], color[1], color[2], color[3],\n            color[0], color[1], color[2], color[3]\n        ];\n        let st  = [\n            0.0, 0.0,\n            1.0, 0.0,\n            0.0, 1.0,\n            1.0, 1.0\n        ];\n        let idx = [\n            0, 2, 1,\n            1, 2, 3\n        ];\n        return {position: pos, normal: nor, color: col, texCoord: st, index: idx}\n    }\n\n    /**\n     * 円（XY 平面展開）の頂点情報を生成する\n     * @param {number} split - 円の円周の分割数\n     * @param {number} rad - 円の半径\n     * @param {Array.<number>} color - RGBA を 0.0 から 1.0 の範囲で指定した配列\n     * @return {object}\n     * @property {Array.<number>} position - 頂点座標\n     * @property {Array.<number>} normal - 頂点法線\n     * @property {Array.<number>} color - 頂点カラー\n     * @property {Array.<number>} texCoord - テクスチャ座標\n     * @property {Array.<number>} index - 頂点インデックス（gl.TRIANGLES）\n     * @example\n     * let circleData = WebGLGeometry.circle(64, 1.0, [1.0, 1.0, 1.0, 1.0]);\n     */\n    static circle(split, rad, color){\n        let i, j = 0;\n        let pos = [], nor = [],\n          col = [], st  = [], idx = [];\n        pos.push(0.0, 0.0, 0.0);\n        nor.push(0.0, 0.0, 1.0);\n        col.push(color[0], color[1], color[2], color[3]);\n        st.push(0.5, 0.5);\n        for(i = 0; i < split; i++){\n            let r = Math.PI * 2.0 / split * i;\n            let rx = Math.cos(r);\n            let ry = Math.sin(r);\n            pos.push(rx * rad, ry * rad, 0.0);\n            nor.push(0.0, 0.0, 1.0);\n            col.push(color[0], color[1], color[2], color[3]);\n            st.push((rx + 1.0) * 0.5, 1.0 - (ry + 1.0) * 0.5);\n            if(i === split - 1){\n                idx.push(0, j + 1, 1);\n            }else{\n                idx.push(0, j + 1, j + 2);\n            }\n            ++j;\n        }\n        return {position: pos, normal: nor, color: col, texCoord: st, index: idx}\n    }\n\n    /**\n     * キューブの頂点情報を生成する\n     * @param {number} side - 正立方体の一辺の長さ\n     * @param {Array.<number>} color - RGBA を 0.0 から 1.0 の範囲で指定した配列\n     * @return {object}\n     * @property {Array.<number>} position - 頂点座標\n     * @property {Array.<number>} normal - 頂点法線 ※キューブの中心から各頂点に向かって伸びるベクトルなので注意\n     * @property {Array.<number>} color - 頂点カラー\n     * @property {Array.<number>} texCoord - テクスチャ座標\n     * @property {Array.<number>} index - 頂点インデックス（gl.TRIANGLES）\n     * @example\n     * let cubeData = WebGLGeometry.cube(2.0, [1.0, 1.0, 1.0, 1.0]);\n     */\n    static cube(side, color){\n        let hs = side * 0.5;\n        let pos = [\n            -hs, -hs,  hs,  hs, -hs,  hs,  hs,  hs,  hs, -hs,  hs,  hs,\n            -hs, -hs, -hs, -hs,  hs, -hs,  hs,  hs, -hs,  hs, -hs, -hs,\n            -hs,  hs, -hs, -hs,  hs,  hs,  hs,  hs,  hs,  hs,  hs, -hs,\n            -hs, -hs, -hs,  hs, -hs, -hs,  hs, -hs,  hs, -hs, -hs,  hs,\n            hs, -hs, -hs,  hs,  hs, -hs,  hs,  hs,  hs,  hs, -hs,  hs,\n            -hs, -hs, -hs, -hs, -hs,  hs, -hs,  hs,  hs, -hs,  hs, -hs\n        ];\n        let v = 1.0 / Math.sqrt(3.0);\n        let nor = [\n            -v, -v,  v,  v, -v,  v,  v,  v,  v, -v,  v,  v,\n            -v, -v, -v, -v,  v, -v,  v,  v, -v,  v, -v, -v,\n            -v,  v, -v, -v,  v,  v,  v,  v,  v,  v,  v, -v,\n            -v, -v, -v,  v, -v, -v,  v, -v,  v, -v, -v,  v,\n            v, -v, -v,  v,  v, -v,  v,  v,  v,  v, -v,  v,\n            -v, -v, -v, -v, -v,  v, -v,  v,  v, -v,  v, -v\n        ];\n        let col = [];\n        for(let i = 0; i < pos.length / 3; i++){\n            col.push(color[0], color[1], color[2], color[3]);\n        }\n        let st = [\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0\n        ];\n        let idx = [\n            0,  1,  2,  0,  2,  3,\n            4,  5,  6,  4,  6,  7,\n            8,  9, 10,  8, 10, 11,\n            12, 13, 14, 12, 14, 15,\n            16, 17, 18, 16, 18, 19,\n            20, 21, 22, 20, 22, 23\n        ];\n        return {position: pos, normal: nor, color: col, texCoord: st, index: idx}\n    }\n\n    static box(width, height, depth, color){\n        let hw = width * 0.5;\n        let hh = height * 0.5;\n        let hd = depth * 0.5;\n        let pos = [\n            -hw, -hh,  hd, // 左下前\n            hw, -hh,  hd, // 右下前\n            hw,  hh,  hd, // 右上前\n            -hw,  hh,  hd, // 左上前\n            -hw, -hh, -hd, // 左下奥\n            -hw,  hh, -hd, // 左上奥\n            hw,  hh, -hd, // 右上奥\n            hw, -hh, -hd, // 右下奥\n            -hw,  hh, -hd, // 左上奥\n            -hw,  hh,  hd, // 左上前\n            hw,  hh,  hd, // 右上前\n            hw,  hh, -hd, // 右上奥\n            -hw, -hh, -hd, // 左下奥\n            hw, -hh, -hd, // 右下奥\n            hw, -hh,  hd, // 右下前\n            -hw, -hh,  hd, // 左下前\n            hw, -hh, -hd, // 右下奥\n            hw,  hh, -hd, // 右上奥\n            hw,  hh,  hd, // 右上前\n            hw, -hh,  hd, // 右下前\n            -hw, -hh, -hd, // 左下奥\n            -hw, -hh,  hd, // 左下前\n            -hw,  hh,  hd, // 左上前\n            -hw,  hh, -hd // 左上奥\n        ];\n        let v = 1.0 / Math.sqrt(3.0);\n        let nor = [\n            -v, -v,  v,  v, -v,  v,  v,  v,  v, -v,  v,  v,\n            -v, -v, -v, -v,  v, -v,  v,  v, -v,  v, -v, -v,\n            -v,  v, -v, -v,  v,  v,  v,  v,  v,  v,  v, -v,\n            -v, -v, -v,  v, -v, -v,  v, -v,  v, -v, -v,  v,\n            v, -v, -v,  v,  v, -v,  v,  v,  v,  v, -v,  v,\n            -v, -v, -v, -v, -v,  v, -v,  v,  v, -v,  v, -v\n        ];\n        let col = [];\n        for(let i = 0; i < pos.length / 3; i++){\n            col.push(color[0], color[1], color[2], color[3]);\n        }\n        let st = [\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0\n        ];\n        let idx = [\n            0,  1,  2,  0,  2,  3,\n            4,  5,  6,  4,  6,  7,\n            8,  9, 10,  8, 10, 11,\n            12, 13, 14, 12, 14, 15,\n            16, 17, 18, 16, 18, 19,\n            20, 21, 22, 20, 22, 23\n        ];\n        return {position: pos, normal: nor, color: col, texCoord: st, index: idx}\n    }\n\n    // TODO: 命名変更\n    static boxLine(width, height, depth, color){\n        let hw = width * 0.5;\n        let hh = height * 0.5;\n        let hd = depth * 0.5;\n        let pos = [\n            // 前面\n            -hw, -hh,  hd, // 左下前\n            hw, -hh,  hd, // 右下前\n            hw, -hh,  hd, // 右下前\n            hw,  hh,  hd, // 右上前\n            hw,  hh,  hd, // 右上前\n            -hw,  hh,  hd, // 左上前\n            -hw,  hh,  hd, // 左上前\n            -hw, -hh,  hd, // 左下前\n            // 奥面\n            -hw, -hh, -hd, // 左下奥\n            -hw,  hh, -hd, // 左上奥\n            -hw,  hh, -hd, // 左上奥\n            hw,  hh, -hd, // 右上奥\n            hw,  hh, -hd, // 右上奥\n            hw, -hh, -hd, // 右下奥\n            hw, -hh, -hd, // 右下奥\n            -hw, -hh, -hd, // 左下奥\n            // 天井\n            -hw,  hh, -hd, // 左上奥\n            -hw,  hh,  hd, // 左上前\n            -hw,  hh,  hd, // 左上前\n            hw,  hh,  hd, // 右上前\n            hw,  hh,  hd, // 右上前\n            hw,  hh, -hd, // 右上奥\n            hw,  hh, -hd, // 右上奥\n            -hw,  hh, -hd, // 左上奥\n            // 下面\n            -hw, -hh, -hd, // 左下奥\n            hw, -hh, -hd, // 右下奥\n            hw, -hh, -hd, // 右下奥\n            hw, -hh,  hd, // 右下前\n            hw, -hh,  hd, // 右下前\n            -hw, -hh,  hd, // 左下前\n            -hw, -hh,  hd, // 左下前\n            -hw, -hh, -hd, // 左下奥\n            // 右面\n            hw, -hh, -hd, // 右下奥\n            hw,  hh, -hd, // 右上奥\n            hw,  hh, -hd, // 右上奥\n            hw,  hh,  hd, // 右上前\n            hw,  hh,  hd, // 右上前\n            hw, -hh,  hd, // 右下前\n            hw, -hh,  hd, // 右下前\n            hw, -hh, -hd, // 右下奥\n            // 左面\n            -hw, -hh, -hd, // 左下奥\n            -hw, -hh,  hd, // 左下前\n            -hw, -hh,  hd, // 左下前\n            -hw,  hh,  hd, // 左上前\n            -hw,  hh,  hd, // 左上前\n            -hw,  hh, -hd // 左上奥\n            // -hw,  hh, -hd // 左上奥\n            // -hw, -hh, -hd, // 左下奥\n        ];\n        let v = 1.0 / Math.sqrt(3.0);\n\n        let col = [];\n        for(let i = 0; i < pos.length / 3; i++){\n            col.push(color[0], color[1], color[2], color[3]);\n        }\n        return {position: pos, color: col}\n    }\n\n    static axis(size, color){\n        let pos = [size * -1, 0.0, 0.0, size, 0.0, 0.0, 0.0, size * -1, 0.0, 0.0, size, 0.0, 0.0, 0.0, size, 0.0, 0.0, size * -1];\n        let col = [\n            0.45,\n            0.45,\n            0.45,\n            1.0,\n            0.45,\n            0.45,\n            0.45,\n            1.0,\n            0.45,\n            0.45,\n            0.45,\n            1.0,\n            0.45,\n            0.45,\n            0.45,\n            1.0,\n            0.45,\n            0.45,\n            0.45,\n            1.0,\n            0.45,\n            0.45,\n            0.45,\n            1.0,\n        ];\n        return {position: pos, color: col}\n    }\n}\n\n","var p = class extends HTMLElement {\n  constructor(i, t, a = !0) {\n    super();\n    this.editing = !1;\n    this.attachShadow({ mode: 'open' }),\n      (this.axes = i),\n      (this.totalTime = t),\n      (this.debug = a),\n      (this.shadowRoot.innerHTML = this.template(i, t)),\n      (this.$pane = this.shadowRoot.querySelector('#pane')),\n      (this.$timeline = this.shadowRoot.querySelector('#timeline')),\n      (this.$current = this.shadowRoot.querySelector('#current')),\n      (this.$progress = this.shadowRoot.querySelector('#progress')),\n      (this.$labels = this.shadowRoot.querySelectorAll('.label')),\n      (this.$bars = this.shadowRoot.querySelectorAll('.bar')),\n      (this.$barsBegin = this.shadowRoot.querySelectorAll('.begin')),\n      (this.$barsEnd = this.shadowRoot.querySelectorAll('.end')),\n      (this.$previous = this.shadowRoot.querySelector('#previous')),\n      (this.$playPause = this.shadowRoot.querySelector('#play-pause')),\n      (this.$next = this.shadowRoot.querySelector('#next')),\n      (this.playing = !0),\n      (this.previous = !1),\n      (this.next = !1),\n      (this.skip = -1),\n      this.$previous.addEventListener('click', (e) => {\n        this.previous = !0;\n      }),\n      this.$playPause.addEventListener('click', (e) => {\n        this.playing = !this.playing;\n      }),\n      this.$next.addEventListener('click', (e) => {\n        this.next = !0;\n      });\n    for (let e = 0, n = this.$bars.length; e < n; e++) {\n      if (\n        (this.$bars[e].addEventListener('click', (l) => {\n          let o = l.currentTarget,\n            h = Number(o.getAttribute('idx'));\n          this.skip = h;\n        }),\n        !this.debug)\n      )\n        continue;\n      let r = this.$barsBegin[e],\n        d = this.$barsEnd[e];\n      r.addEventListener('input', (l) => {\n        let o = Number(r.value);\n        if (Number(this.$barsEnd[e].value) < o) {\n          l.preventDefault();\n          return;\n        }\n        if (Number.isFinite(this.axes[e].position))\n          (this.axes[e].position = o),\n            (this.axes[e].duration = this.axes[e].endAt - (this.axes[e].delay + this.axes[e].position));\n        else {\n          let h = this.axes.find((c) => c.key === this.axes[e].position);\n          (this.axes[e].delay = o - h.endAt),\n            (this.axes[e].duration = this.axes[e].endAt - (this.axes[e].delay + h.endAt));\n        }\n      }),\n        d.addEventListener('input', (l) => {\n          let o = Number(d.value);\n          if (o < Number(this.$barsBegin[e].value)) {\n            l.preventDefault();\n            return;\n          }\n          if (Number.isFinite(this.axes[e].position))\n            this.axes[e].duration = o - (this.axes[e].position + this.axes[e].delay);\n          else {\n            let h = this.axes.find((c) => c.key === this.axes[e].position);\n            this.axes[e].duration = o - h.endAt - this.axes[e].delay;\n          }\n        });\n    }\n    this.$labels.forEach((e) => {\n      e.addEventListener('click', (n) => {\n        let s = n.currentTarget,\n          r = Number(s.getAttribute('idx'));\n        this.skip = r;\n      });\n    }),\n      this.$current.addEventListener('input', (e) => {\n        this.editing = !0;\n        let n = Number(this.$current.value);\n        this.__updateProgressPosition(n), this.__updateBar(this.totalTime);\n      }),\n      this.$current.addEventListener('change', (e) => {\n        this.editing = !1;\n      });\n  }\n  attributeChangedCallback() {}\n  connectedCallback() {}\n  disconnectedCallback() {}\n  getAxes() {\n    return this.axes;\n  }\n  get(i) {\n    let t = Date.now(),\n      a = Number(this.$current.value),\n      e = t - i;\n    if ((this.playing || ((i = t - a), (e = a)), this.editing && ((i = t - a), (e = a)), -1 < this.skip)) {\n      let n = this.axes[this.skip];\n      (i = t - n.beginAt), (e = n.beginAt), (this.skip = -1);\n    }\n    return (\n      this.previous && ((this.previous = !1), (i = t), (e = 0)),\n      this.next && ((this.next = !1), (i = t - this.totalTime), (e = this.totalTime)),\n      { beginAt: i, elapsedTime: e, editing: this.editing }\n    );\n  }\n  update(i, t, a) {\n    (this.axes = a),\n      (this.totalTime = t),\n      this.$current.setAttribute('max', t),\n      (this.$current.value = i),\n      this.__updateProgressPosition(i),\n      this.__updateBar(t),\n      this.debug && this.__updateBarRange(t),\n      this.__updateScale(t);\n  }\n  template(i, t) {\n    let a = '',\n      e = '',\n      n = '';\n    for (let s = 0; s < i.length; s++) {\n      let r = i[s];\n      a += `<div class=\"row\" id=\"row-${s}\"><div class=\"label\" idx=\"${s}\">${r.key}</div></div>`;\n      let d = '';\n      this.debug &&\n        (d = `\n          <input class=\"begin\" type=\"range\" min=\"0\" max=\"0\" step=\"10\" value=\"${r.beginAt}\">\n          <input class=\"end\" type=\"range\" min=\"0\" max=\"0\" step=\"10\" value=\"${r.endAt}\">\n        `),\n        (e += `\n        <div class=\"row\">\n          <div class=\"bar bar--${this.debug ? 'debug' : 'default'}\" idx=\"${s}\"></div>\n          ${d}\n        </div>`),\n        this.debug;\n    }\n    for (let s = 0, r = Math.floor(t / 1e3); s < r; s++)\n      n += `<div class=\"scale-label\" style=\"--sec: ${s + 1}\">${s + 1}s</div>`;\n    return `\n      <style>\n        * {\n          box-sizing: border-box;\n        }\n        :host {\n          display: block;\n          height: 100%;\n        }\n        .container {\n          display: flex;\n          flex-direction: column;\n          height: 100%;\n          background-color: #313131;\n          color: #eeeeee;\n          position: relative;\n          --tools-height: 40px;\n          --controls-height: 40px;\n        }\n        .tools {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n          height: var(--tools-height);\n          border-bottom: 1px solid #202020;\n        }\n        .tools__item {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 20px;\n          margin: 0 8px;\n          color: #eeeeee;\n        }\n        .tools__item div {\n          width: 100%;\n          cursor: pointer;\n        }\n        .tools__item div:hover {\n          opacity: .6;\n        }\n        .tools__item svg {\n          fill: currentColor;\n        }\n        .controls {\n          display: flex;\n          flex-shrink: 0;\n          height: var(--controls-height);\n          border-bottom: 1px solid #202020;\n        }\n        .pane {\n          display: flex;\n          flex: 1;\n          overflow: scroll;\n          scroll-behavior: smooth;\n        }\n        .head {\n          flex-shrink: 0;\n          flex-basis: 20%;\n          max-width: 200px;\n          min-width: 0;\n        }\n        .body {\n          flex: 1;\n          position: relative;\n        }\n        .actions {\n          height: 100%;\n          border-right: 1px solid #222322;\n        }\n        .rows {\n          border-right: 1px solid #222322;\n        }\n        .row {\n          display: flex;\n          align-items: center;\n          height: 24px;\n          border-bottom: 1px solid #202020;\n          position: relative;\n        }\n        .row input[type=\"range\"] {\n          position: absolute;\n          inset: 0;\n        }\n        .label {\n          padding-left: 12px;\n          font-size: 12px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          cursor: pointer;\n        }\n        .bar {\n          height: 100%;\n          background-color: #545454;\n          opacity: .5;\n          transform-origin: left;\n          cursor: pointer;\n          position: relative;\n        }\n        .bar.bar--debug::before {\n          content: \"\";\n          display: block;\n          width: 6px;\n          position: absolute;\n          left: 0;\n          top: 0;\n          bottom: 0;\n          margin: 4px;\n          border-radius: 2px;\n          background-color: darkgray;\n        }\n        .bar.bar--debug::after {\n          content: \"\";\n          display: block;\n          width: 6px;\n          position: absolute;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          margin: 4px;\n          border-radius: 2px;\n          background-color: darkgray;\n        }\n        .bar.bar--active {\n          opacity: 1;\n        }\n        .progress {\n          position: absolute;\n          top: var(--tools-height);\n          bottom: 0;\n          left: 0;\n          width: 2px;\n          margin-left: min(20%, 200px);\n          background-color: #71A0EB;\n          opacity: 0.6;\n        }\n        .progress::before {\n          content: \"\";\n          display: block;\n          width: 20px;\n          height: 30px;\n          background-color: #53aeff;\n          margin-left: -9px;\n        }\n        .progress::after {\n          content: \"\";\n          display: block;\n          border-top: 10px solid #53aeff;\n          border-left: 10px solid transparent;\n          border-right: 10px solid transparent;\n          margin-left: -9px;\n        }\n        .current {\n          position: absolute;\n          top: var(--tools-height);\n          height: var(--controls-height);\n          left: -12px;\n          right: -12px;\n          margin-left: min(20%, 200px);\n        }\n        input[type=\"range\"] {\n          -webkit-appearance: none;\n          appearance: none;\n          margin: 0;\n          cursor: pointer;\n          outline: none;\n        }\n        input[type=\"range\"]::-webkit-slider-thumb {\n          opacity: 0;\n        }\n        input[type=\"range\"]::-moz-range-thumb {\n          opacity: 0;\n        }\n        /* Firefox\\u3067\\u70B9\\u7DDA\\u304C\\u5468\\u308A\\u306B\\u8868\\u793A\\u3055\\u308C\\u3066\\u3057\\u307E\\u3046\\u554F\\u984C\\u306E\\u89E3\\u6D88 */\n        input[type=\"range\"]::-moz-focus-outer {\n          border: 0;\n        }\n        .current input[type=\"range\"] {\n          height: var(--controls-height);\n          width: 100%;\n          background: transparent;\n        }\n        input.begin[type=\"range\"],\n        input.end[type=\"range\"] {\n          height: 100%;\n          width: calc(100% + 12px);\n          background: transparent;\n          pointer-events: none;\n          margin-left: -6px;\n        }\n        input.begin[type=\"range\"]::-webkit-slider-thumb,\n        input.end[type=\"range\"]::-webkit-slider-thumb {\n          -webkit-appearance: none;\n          appearance: none;\n          pointer-events: auto;\n          opacity: 0;   \n          width: 12px;\n          height: 100%;\n          cursor: ew-resize;\n        }\n        input.begin[type=\"range\"]::-moz-range-thumb,\n        input.end[type=\"range\"]::-moz-range-thumb {\n          -webkit-appearance: none;\n          appearance: none;\n          pointer-events: auto;\n          opacity: 0;   \n          width: 12px;\n          height: 100%;\n          cursor: ew-resize;\n        }\n        input.begin[type=\"range\"]::-webkit-slider-thumb {\n          background: darkgreen;\n          transform: translateX(50%);\n        }\n        input.begin[type=\"range\"]::-moz-range-thumb {\n          background: darkgreen;\n          transform: translateX(50%);\n        }\n        input.end[type=\"range\"]::-webkit-slider-thumb {\n          background: indianred;\n          transform: translateX(-50%);\n        }\n        input.end[type=\"range\"]::-moz-range-thumb {\n          background: indianred;\n          transform: translateX(-50%);\n        }\n        .scale {\n          position: relative;\n          height: 100%;\n        }\n        .scale-s,\n        .scale-100ms {\n          height: 50%;\n        }\n        .scale-s {\n          /*\n            total / 1s \n            e.g. 6000 / 1000\n            x / 1000 = 6\n            calc(100% / calc(var(--total) / 1000))\n           */\n          --x: calc(100% / calc(var(--total) / 1000));\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n          border-bottom: 1px solid #202020;\n        }\n        .scale-100ms {\n          --x: calc(100% / calc(var(--total) / 1000) / 10);\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n        }\n        .scale-label {\n          --x: calc(100% / calc(var(--total) / 1000));\n          position: absolute;\n          top: 0;\n          left: calc(var(--x) * var(--sec));\n          font-size: 10px;\n          font-style: italic;\n          transform: translateX(calc(-100% - 4px));\n        }\n      </style>\n      <div class=\"container\">\n        <div class=\"tools\">\n          <div class=\"tools__item\">\n            <div id=\"previous\">\n              <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M2.75 20C2.75 20.5523 3.19772 21 3.75 21C4.30228 21 4.75 20.5523 4.75 20L4.75 4C4.75 3.44772 4.30229 3 3.75 3C3.19772 3 2.75 3.44772 2.75 4V20Z\"/>\n                <path d=\"M20.75 19.0526C20.75 20.4774 19.1383 21.305 17.9803 20.4748L7.51062 12.9682C6.50574 12.2477 6.54467 10.7407 7.5854 10.073L18.0551 3.35665C19.2198 2.60946 20.75 3.44583 20.75 4.82961L20.75 19.0526Z\"/>\n              </svg>\n            </div>\n          </div>\n          <div class=\"tools__item\">\n            <div id=\"play-pause\">\n              <svg viewBox=\"0 0 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n                <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->\n                <title>ic_fluent_video_play_pause_24_filled</title>\n                <desc>Created with Sketch.</desc>\n                <g id=\"\\u{1F50D}-Product-Icons\" stroke=\"none\" stroke-width=\"1\" >\n                    <g id=\"ic_fluent_video_play_pause_24_filled\" fill-rule=\"nonzero\">\n                        <path d=\"M3.65140982,6.61646219 L11.1528787,11.3693959 C11.3672679,11.5052331 11.4827597,11.722675 11.4993749,11.9464385 L11.4984593,7.25 C11.4984593,6.83578644 11.8342458,6.5 12.2484593,6.5 L15.2484593,6.5 C15.6626729,6.5 15.9984593,6.83578644 15.9984593,7.25 L15.9984593,16.75 C15.9984593,17.1642136 15.6626729,17.5 15.2484593,17.5 L12.2484593,17.5 C11.8342458,17.5 11.4984593,17.1642136 11.4984593,16.75 L11.4993494,12.0597632 C11.4826318,12.2835468 11.3670166,12.5009613 11.1525249,12.6366956 L3.65105604,17.3837618 C3.15168144,17.6997752 2.5,17.3409648 2.5,16.75 L2.5,7.25 C2.5,6.65884683 3.15205264,6.30006928 3.65140982,6.61646219 Z M21.2477085,6.50037474 C21.661922,6.50037474 21.9977085,6.83616118 21.9977085,7.25037474 L21.9977085,16.7496253 C21.9977085,17.1638388 21.661922,17.4996253 21.2477085,17.4996253 L18.2477085,17.4996253 C17.8334949,17.4996253 17.4977085,17.1638388 17.4977085,16.7496253 L17.4977085,7.25037474 C17.4977085,6.83616118 17.8334949,6.50037474 18.2477085,6.50037474 L21.2477085,6.50037474 Z\" id=\"\\u{1F3A8}-Color\"></path>\n                    </g>\n                </g>\n              </svg>\n            </div>\n          </div>\n          <div class=\"tools__item\">\n            <div id=\"next\">\n              <svg   viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M21 4C21 3.44772 20.5523 3 20 3C19.4477 3 19 3.44772 19 4V20C19 20.5523 19.4477 21 20 21C20.5523 21 21 20.5523 21 20V4Z\"/>\n                <path d=\"M3 4.94743C3 3.5226 4.61175 2.69498 5.7697 3.52521L16.2394 11.0318C17.2443 11.7523 17.2053 13.2593 16.1646 13.927L5.69492 20.6434C4.53019 21.3905 3 20.5542 3 19.1704V4.94743Z\"/>\n              </svg>\n            </div>\n          </div>\n        </div>\n        <div class=\"controls\">\n          <div class=\"head\"><div class=\"actions\"></div></div>\n          <div class=\"body\">\n            <div class=\"scale\" id=\"scale\" style=\"--total: ${t}\">\n              <div class=\"scale-s\"></div>\n              <div class=\"scale-100ms\"></div>\n              ${n}\n            </div>\n          </div>\n        </div>\n        <div id=\"pane\" class=\"pane\">\n          <div class=\"head\">\n            <div class=\"rows\">\n              ${a}\n            </div>\n          </div>\n          <div id=\"timeline\" class=\"body\">\n            <div class=\"rows\">\n              ${e}\n            </div>\n          </div>\n        </div>\n        <div class=\"current\">\n          <input id=\"current\" type=\"range\" min=\"0\" max=\"0\" step=\"any\" value=\"0\">\n        </div>\n        <div id=\"progress\" class=\"progress\"></div>\n      </div>\n    `;\n  }\n  __updateScale(i) {\n    let t = this.shadowRoot.querySelector('.test');\n    t && t.remove(),\n      this.shadowRoot.querySelectorAll('.scale-label').forEach((s) => {\n        s.remove();\n      }),\n      this.shadowRoot.querySelector('.scale').style.setProperty('--total', i);\n    let e = '';\n    for (let s = 0, r = Math.floor(i / 1e3); s < r; s++)\n      e += `<div class=\"scale-label\" style=\"--sec: ${s + 1}\">${s + 1}s</div>`;\n    let n = document.createElement('div');\n    (n.className = 'test'), (n.innerHTML = e), this.shadowRoot.querySelector('.scale').appendChild(n);\n  }\n  __updateProgressPosition(i) {\n    let t = this.$timeline.clientWidth,\n      a = Math.min(i / this.totalTime, 1) * t;\n    this.$progress.style.transform = `translateX(${a}px)`;\n  }\n  __updateBarRange(i) {\n    for (let t = 0; t < this.$bars.length; t++) {\n      let a = this.axes[t];\n      this.$barsBegin[t].setAttribute('max', i),\n        (this.$barsBegin[t].value = a.beginAt),\n        this.$barsEnd[t].setAttribute('max', i),\n        (this.$barsEnd[t].value = a.endAt);\n    }\n  }\n  __updateBar(i) {\n    let a = this.$timeline.clientWidth / i;\n    for (let e = 0; e < this.$bars.length; e++) {\n      let n = this.axes[e],\n        s = n.beginAt * a,\n        r = (n.endAt - n.beginAt) * a;\n      (this.$bars[e].style.transform = `translateX(${s}px)`),\n        (this.$bars[e].style.width = `${r}px`),\n        0 < n.progress && !n.pass\n          ? this.$bars[e].classList.add('bar--active')\n          : this.$bars[e].classList.remove('bar--active');\n    }\n  }\n};\nwindow.customElements.define('taxis-timeline', p);\nvar u = { key: '', beginAt: 0, endAt: 0, duration: 0, delay: 0, position: 0, progress: 0, enter: !1, pass: !1 };\nvar g = class {\n  constructor(i = {}) {\n    this.option = i;\n    this.axes = [];\n  }\n  get totalTime() {\n    return this.axes.length ? Math.max(...this.axes.map((i) => i.endAt)) : 0;\n  }\n  get totalTimeForTimeline() {\n    return this.totalTime + 500;\n  }\n  get everyPassed() {\n    return this.axes.every((i) => i.pass);\n  }\n  restart() {\n    this.beginAt = Date.now();\n  }\n  getAxis({ key: i }) {\n    return this.axes.find((t) => t.key === i);\n  }\n  getAxes() {\n    return this.axes;\n  }\n  add(i, t, a = 0, e) {\n    let n = this.totalTime + a;\n    if (e !== void 0) Number.isFinite(e) ? (n = e + a) : (n = this.getAxis({ key: e }).endAt + a);\n    else {\n      let s = this.axes[this.axes.length - 1];\n      e = s ? s.key : 0;\n    }\n    return (\n      this.axes.push({ ...u, key: i, beginAt: n, endAt: n + t, duration: t, delay: a, position: e }), this.sort(), this\n    );\n  }\n  begin() {\n    this.option.timeline &&\n      ((this.timeline = new p(this.axes, this.totalTimeForTimeline, this.option.timeline.debug)),\n      this.option.timeline.container.appendChild(this.timeline)),\n      (this.beginAt = Date.now()),\n      this.__tick();\n  }\n  reset() {\n    cancelAnimationFrame(this.requestID);\n  }\n  ticker(i) {\n    this.tickerFn = i;\n  }\n  __tick() {\n    let i = this.beginAt,\n      t = Date.now() - i,\n      a = !1;\n    if (this.option.timeline) {\n      this.axes = this.recalculation(this.timeline.getAxes());\n      let { beginAt: e, elapsedTime: n, editing: s } = this.timeline.get(this.beginAt);\n      (i = e), (t = n), (a = s);\n    }\n    (this.beginAt = i),\n      this.axes.forEach((e, n) => {\n        let s = t - e.beginAt,\n          r = Math.max(0, Math.min(s / e.duration, 1)),\n          d = e.beginAt <= t,\n          l = e.endAt < t;\n        (e.progress = r), (e.enter = d), (e.pass = l);\n      }),\n      this.option.timeline && !a && this.timeline.update(t, this.totalTimeForTimeline, this.axes),\n      this.tickerFn && this.tickerFn(t, this.toMap(this.axes)),\n      (this.requestID = requestAnimationFrame(this.__tick.bind(this)));\n  }\n  calculation() {\n    let i = [];\n    for (let t = 0; t < this.axes.length; t++) {\n      let a = this.axes[t],\n        { key: e, duration: n, position: s, delay: r } = a,\n        l = Math.max(...i.map((o) => o.endAt)) + r;\n      s !== void 0 ? (Number.isFinite(s) ? (l = s + r) : (l = this.getAxis({ key: s }).endAt + r)) : (s = l),\n        i.push({ ...u, key: e, beginAt: l, endAt: l + n, duration: n, delay: r, position: s });\n    }\n  }\n  recalculation(i) {\n    let t = [];\n    for (let a = 0; a < i.length; a++) {\n      let e = i[a],\n        { key: n, duration: s, position: r, delay: d } = e,\n        o = Math.max(...t.map((h) => h.endAt)) + d;\n      r !== void 0 ? (Number.isFinite(r) ? (o = r + d) : (o = this.getAxis({ key: r }).endAt + d)) : (r = o),\n        t.push({ ...u, key: n, beginAt: o, endAt: o + s, duration: s, delay: d, position: r });\n    }\n    return t;\n  }\n  sort() {\n    this.axes.sort((i, t) => i.beginAt - t.beginAt);\n  }\n  toMap(i) {\n    let t = new Map();\n    return (\n      i.forEach((a) => {\n        (t[a.key] = a), t.set(a.key, a);\n      }),\n      t\n    );\n  }\n};\nexport { g as Taxis };\n//# sourceMappingURL=taxis.esm.js.map\n","export const axis = (size, color) => {\n    // prettier-ignore\n    const pos = [\n        // X\n        size * -1, 0.0, 0.0,\n        size, 0.0, 0.0,\n        // Y\n        0.0, size * -1, 0.0,\n        0.0, size, 0.0,\n        // Z\n        0.0, 0.0, size,\n        0.0, 0.0, size * -1,\n    ];\n    // prettier-ignore\n    const col = color ? [\n        ...color,\n        ...color,\n        ...color,\n        ...color,\n        ...color,\n        ...color,\n    ] : [\n        1.0, 0.0, 0.0, 1.0,\n        1.0, 0.0, 0.0, 1.0,\n        0.0, 1.0, 0.0, 1.0,\n        0.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 1.0,\n        0.0, 0.0, 1.0, 1.0,\n    ];\n    return { position: pos, color: col };\n};\n// TODO: 変更\nexport const cube = (side, color) => {\n    const hs = side * 0.5;\n    const position = [\n        -hs, -hs, hs,\n        hs, -hs, hs,\n        hs, hs, hs,\n        -hs, hs, hs,\n        -hs, -hs, -hs,\n        -hs, hs, -hs,\n        hs, hs, -hs,\n        hs, -hs, -hs,\n        -hs, hs, -hs,\n        -hs, hs, hs,\n        hs, hs, hs,\n        hs, hs, -hs,\n        -hs, -hs, -hs,\n        hs, -hs, -hs,\n        hs, -hs, hs,\n        -hs, -hs, hs,\n        hs, -hs, -hs,\n        hs, hs, -hs,\n        hs, hs, hs,\n        hs, -hs, hs,\n        -hs, -hs, -hs,\n        -hs, -hs, hs,\n        -hs, hs, hs,\n        -hs, hs, -hs // 左上奥\n    ];\n    let v = 1.0 / Math.sqrt(3.0);\n    // prettier-ignore\n    const normal = [\n        -v, -v, v, v, -v, v, v, v, v, -v, v, v,\n        -v, -v, -v, -v, v, -v, v, v, -v, v, -v, -v,\n        -v, v, -v, -v, v, v, v, v, v, v, v, -v,\n        -v, -v, -v, v, -v, -v, v, -v, v, -v, -v, v,\n        v, -v, -v, v, v, -v, v, v, v, v, -v, v,\n        -v, -v, -v, -v, -v, v, -v, v, v, -v, v, -v\n    ];\n    let col = [];\n    for (let i = 0; i < position.length / 3; i++) {\n        col.push(color[0], color[1], color[2], color[3]);\n    }\n    // prettier-ignore\n    let st = [\n        0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0\n    ];\n    // prettier-ignore\n    let idx = [\n        0, 1, 2, 0, 2, 3,\n        4, 5, 6, 4, 6, 7,\n        8, 9, 10, 8, 10, 11,\n        12, 13, 14, 12, 14, 15,\n        16, 17, 18, 16, 18, 19,\n        20, 21, 22, 20, 22, 23\n    ];\n    return { position, normal, color: col, texCoord: st, index: idx };\n};\nexport const cubeWireframe = (width, height, depth, color) => {\n    let hw = width * 0.5;\n    let hh = height * 0.5;\n    let hd = depth * 0.5;\n    // prettier-ignore\n    let pos = [\n        // 前面\n        -hw, -hh, hd,\n        hw, -hh, hd,\n        hw, -hh, hd,\n        hw, hh, hd,\n        hw, hh, hd,\n        -hw, hh, hd,\n        -hw, hh, hd,\n        -hw, -hh, hd,\n        // 奥面\n        -hw, -hh, -hd,\n        -hw, hh, -hd,\n        -hw, hh, -hd,\n        hw, hh, -hd,\n        hw, hh, -hd,\n        hw, -hh, -hd,\n        hw, -hh, -hd,\n        -hw, -hh, -hd,\n        // 天井\n        -hw, hh, -hd,\n        -hw, hh, hd,\n        -hw, hh, hd,\n        hw, hh, hd,\n        hw, hh, hd,\n        hw, hh, -hd,\n        hw, hh, -hd,\n        -hw, hh, -hd,\n        // 下面\n        -hw, -hh, -hd,\n        hw, -hh, -hd,\n        hw, -hh, -hd,\n        hw, -hh, hd,\n        hw, -hh, hd,\n        -hw, -hh, hd,\n        -hw, -hh, hd,\n        -hw, -hh, -hd,\n        // 右面\n        hw, -hh, -hd,\n        hw, hh, -hd,\n        hw, hh, -hd,\n        hw, hh, hd,\n        hw, hh, hd,\n        hw, -hh, hd,\n        hw, -hh, hd,\n        hw, -hh, -hd,\n        // 左面\n        -hw, -hh, -hd,\n        -hw, -hh, hd,\n        -hw, -hh, hd,\n        -hw, hh, hd,\n        -hw, hh, hd,\n        -hw, hh, -hd // 左上奥\n        // -hw,  hh, -hd // 左上奥\n        // -hw, -hh, -hd, // 左下奥\n    ];\n    let col = [];\n    for (let i = 0; i < pos.length / 3; i++) {\n        col.push(color[0], color[1], color[2], color[3]);\n    }\n    return { position: pos, color: col };\n};\n","export const createProgram = (gl, vertexShader, fragmentShader) => {\n    const program = gl.createProgram();\n    if (!program) {\n        throw new Error(`Failed to create program`);\n    }\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    gl.deleteShader(vertexShader);\n    gl.deleteShader(fragmentShader);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        throw new Error(`Failed to link: ${gl.getProgramInfoLog(program)}`);\n    }\n    gl.useProgram(program);\n    return program;\n};\nexport const createShaderObject = (gl, source, type) => {\n    const shader = gl.createShader(type);\n    if (!shader) {\n        throw new Error(`Failed to create shader`);\n    }\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        throw new Error(`Failed to compile: ${gl.getShaderInfoLog(shader)}`);\n    }\n    return shader;\n};\nexport const createVBO = (gl, vertexArray) => {\n    const vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertexArray), gl.STATIC_DRAW);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    return vbo;\n};\nexport const createIBO = (gl, index) => {\n    const ibo = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Int16Array(index), gl.STATIC_DRAW);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    return ibo;\n};\nexport const enableAttribute = (gl, vbo, attribLocation, attribStride) => {\n    vbo.forEach((buffer, i) => {\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.enableVertexAttribArray(attribLocation[i]);\n        gl.vertexAttribPointer(attribLocation[i], attribStride[i], gl.FLOAT, false, 0, 0);\n    });\n};\n","import { WebGLUtility, WebGLMath, WebGLOrbitCamera } from './webgl';\nimport { Taxis } from 'taxis';\nimport { get } from 'svelte/store';\nimport { settings } from '../../../stores/settings';\n// import { createProgram, createShaderObject, enableAttribute } from '../../../utils';\nimport * as geometry from 'shared/lib/geometry';\nimport { createProgram, createShaderObject, enableAttribute } from 'shared/lib/utils';\nexport const setup = (canvas) => {\n    const webgl = new WebGLUtility(); // WebGL API をまとめたユーティリティ\n    const taxis = new Taxis();\n    // キャンバスのセットアップ\n    webgl.initialize(canvas);\n    // プログラムオブジェクト\n    let programMain = null;\n    // axis\n    let axis;\n    let axisVBO;\n    let circle = {};\n    let circleVBO;\n    let rectangle = {};\n    let rectangleVBO;\n    let attLocation;\n    let attStride;\n    const uniLocation = {\n        mvpMatrix: WebGLUniformLocation\n    };\n    let vMatrix = null; // ビュー行列\n    let pMatrix = null; // プロジェクション行列\n    let vpMatrix = null; // ビュー x プロジェクション行列\n    // カメラのセットアップ\n    const cameraOption = {\n        distance: 10.0,\n        min: 1.0,\n        max: 20.0,\n        move: 2.0,\n    };\n    const camera = new WebGLOrbitCamera(canvas, cameraOption);\n    webgl.width = window.innerWidth;\n    webgl.height = window.innerHeight;\n    updateSize();\n    window.addEventListener('resize', updateSize);\n    window.Promise.resolve()\n        .then(() => window.Promise.all([WebGLUtility.loadFile('./shader/main.vert'), WebGLUtility.loadFile('./shader/main.frag')]))\n        .then((ress) => {\n        // shaderをprogram紐付ける\n        const [mainVert, mainFrag] = ress;\n        const mainVs = createShaderObject(webgl.gl, mainVert, webgl.gl.VERTEX_SHADER);\n        const mainFs = createShaderObject(webgl.gl, mainFrag, webgl.gl.FRAGMENT_SHADER);\n        programMain = createProgram(webgl.gl, mainVs, mainFs);\n        webgl.program = programMain;\n        setupCircleGeometry();\n        setupAxisGeometry();\n        setupLocation();\n        render();\n    });\n    function updateSize() {\n        webgl.width = window.innerWidth;\n        webgl.height = window.innerHeight;\n    }\n    function setupCircleGeometry() {\n        const position = [];\n        const rectanglePosition = [];\n        const color = [];\n        const vertexCount = 360 / get(settings).fanCount;\n        const fanWidth = Math.cos((90 - vertexCount / 2) * (Math.PI / 180));\n        const fanStartY = Math.sin((90 - vertexCount / 2) * (Math.PI / 180));\n        for (let i = 0; i < get(settings).fanCount; i++) {\n            // 一つの扇型の頂点の数\n            const vertexCount = 360 / get(settings).fanCount;\n            const fanStartDeg = i * vertexCount;\n            const fanEndDeg = (i + 1) * vertexCount;\n            const fanStartX = Math.cos(fanStartDeg * (Math.PI / 180));\n            const fanEndX = Math.cos(fanEndDeg * (Math.PI / 180));\n            for (let j = 0; j < vertexCount; j++) {\n                const deg1 = fanStartDeg + j;\n                const deg2 = fanStartDeg + j + 1;\n                const rad1 = deg1 * (Math.PI / 180);\n                const rad2 = deg2 * (Math.PI / 180);\n                const x = Math.cos(rad1);\n                const y = Math.sin(rad1);\n                const x2 = Math.cos(rad2);\n                const y2 = Math.sin(rad2);\n                // 矩形用の計算\n                // 90度の±で計算\n                {\n                    const isTop = i % 2 === 0;\n                    const base = isTop ? 90 : 270;\n                    const deg1 = base - (fanEndDeg - fanStartDeg) / 2 + j;\n                    const deg2 = base - (fanEndDeg - fanStartDeg) / 2 + j + 1;\n                    const rad1 = deg1 * (Math.PI / 180);\n                    const rad2 = deg2 * (Math.PI / 180);\n                    const x = Math.cos(rad1);\n                    const y = Math.sin(rad1);\n                    const x2 = Math.cos(rad2);\n                    const y2 = Math.sin(rad2);\n                    const interpolatedY = isTop ? -0.5 + (1 - fanStartY) : 0.5;\n                    // prettier-ignore\n                    rectanglePosition.push(x + (i * fanWidth), y + interpolatedY, 0, x2 + (i * fanWidth), y2 + interpolatedY, 0, 0 + (i * fanWidth), interpolatedY, 0);\n                }\n                let fanColor = i % 2 ? [0.6, 0.87, 1.0, 1.0] : [1.0, 0.87, 0.93, 1.0];\n                // prettier-ignore\n                color.push(...fanColor, ...fanColor, ...fanColor);\n                // prettier-ignore\n                position.push(x, y, 0, x2, y2, 0, 0, 0, 0);\n            }\n        }\n        circle.position = position;\n        circle.color = color;\n        rectangle.position = rectanglePosition;\n        rectangle.color = color;\n        circleVBO = [webgl.createVBO(position), webgl.createVBO(color)];\n        rectangleVBO = [webgl.createVBO(rectanglePosition), webgl.createVBO(color)];\n    }\n    function setupAxisGeometry() {\n        axis = geometry.axis(10, [0.45, 0.45, 0.45, 1.0]);\n        axisVBO = [webgl.createVBO(axis.position), webgl.createVBO(axis.color)];\n    }\n    function setupLocation() {\n        const gl = webgl.gl;\n        webgl.program = programMain;\n        // attribute location の取得と有効化\n        attLocation = [gl.getAttribLocation(webgl.program, 'position'), gl.getAttribLocation(webgl.program, 'color')];\n        attStride = [3, 4];\n        uniLocation.mvpMatrix = gl.getUniformLocation(webgl.program, 'mvpMatrix');\n    }\n    function setupRendering() {\n        const gl = webgl.gl;\n        // clear処理\n        gl.viewport(0, 0, webgl.width, webgl.height);\n        gl.clearColor(0.1, 0.12, 0.14, 1.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        // カメラの状態に応じたビュー行列を生成 @@@\n        vMatrix = camera.update();\n        // プロジェクション行列を生成\n        const fovy = 45;\n        const aspect = webgl.width / webgl.height;\n        const near = 0.1;\n        const far = 20.0;\n        pMatrix = WebGLMath.mat4.perspective(fovy, aspect, near, far);\n        vpMatrix = WebGLMath.mat4.multiply(pMatrix, vMatrix);\n    }\n    function setupMvp(position) {\n        const gl = webgl.gl;\n        // モデル行列を生成する\n        let mMatrix = WebGLMath.mat4.identity(WebGLMath.mat4.create());\n        mMatrix = WebGLMath.mat4.translate(mMatrix, position);\n        // mvp 行列を生成してシェーダに送る\n        const mvpMatrix = WebGLMath.mat4.multiply(vpMatrix, mMatrix);\n        gl.uniformMatrix4fv(uniLocation.mvpMatrix, false, mvpMatrix);\n    }\n    function renderAxis(position) {\n        const gl = webgl.gl;\n        enableAttribute(gl, axisVBO, attLocation, attStride);\n        setupMvp(position);\n        gl.drawArrays(gl.LINES, 0, axis.position.length / 3);\n    }\n    function renderCircle(position) {\n        const gl = webgl.gl;\n        enableAttribute(gl, circleVBO, attLocation, attStride);\n        setupMvp(position);\n        gl.drawArrays(gl.TRIANGLES, 0, circle.position.length / 3);\n    }\n    function renderRectangle(position) {\n        const gl = webgl.gl;\n        enableAttribute(gl, rectangleVBO, attLocation, attStride);\n        setupMvp(position);\n        gl.drawArrays(gl.TRIANGLES, 0, rectangle.position.length / 3);\n    }\n    function render() {\n        taxis.begin();\n        // TODO: 何度もticketAddされちゃうのを修正\n        taxis.ticker((delta, axes) => {\n            setupCircleGeometry();\n            // レンダリング時のクリア処理など\n            setupRendering();\n            renderAxis([0.0, 0.0, 0.0]);\n            renderCircle([-1.5, 0.0, 0.0]);\n            renderRectangle([1.5, 0.0, 0.0]);\n        });\n    }\n};\n","<script lang=\"ts\">\nimport { onMount } from 'svelte';\nimport { setup } from './script/setup';\nlet canvasElement;\n\nonMount(() => {\n  setup(canvasElement);\n});\n</script>\n\n<canvas class=\"w-full h-full\" bind:this=\"{canvasElement}\"></canvas>\n","import App from './App.svelte';\nconst app = new App({\n    target: document.body,\n});\nexport default app;\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","get_store_value","value","_","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","space","data","createTextNode","attr","attribute","removeAttribute","getAttribute","setAttribute","current_component","set_current_component","component","onMount","Error","get_current_component","$$","on_mount","push","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","flushing","seen_callbacks","Set","flush","i","length","update","pop","callback","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","transition_in","block","local","delete","transition_out","o","outros","c","d","create_component","mount_component","customElement","on_destroy","m","new_on_destroy","map","filter","destroy_component","detaching","make_dirty","then","fill","init","options","instance","create_fragment","not_equal","props","parent_component","bound","on_disconnect","context","Map","skip_bound","ready","ret","rest","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","[object Object]","this","$destroy","type","index","indexOf","splice","$$props","obj","$$set","keys","module","extendStatics","setPrototypeOf","__proto__","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","__assign","assign","t","s","n","arguments","apply","__spreadArrays","il","r","k","j","jl","Plugins","inputs","monitors","getAllPlugins","forceCast","v","isEmpty","deepEqualsArray","a1","a2","disposeElement","elem","parentElement","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","join","getAllBladePositions","className","setUpBladeView","view","model","emitter","on","ev","propertyName","hiddenClass","undefined","hidden","classList","remove","pos","positions","onDispose","Emitter","observers_","eventName","handler","observers","off","observer","emit","event","Button","title","click","sender","className$1","ButtonView","doc","config","button","buttonElem","textContent","buttonElement","ButtonController","onButtonClick_","bind","blade","addEventListener","className$2","createLabelNode","label","frag","createDocumentFragment","split","line","lineNode","LabeledView","elem_","labelElem","viewElem","defineProperty","get","enumerable","configurable","InputBindingController","binding","controller","MonitorBindingController","_this","dispose","Disposable","disposed_","Blade","onDispose_","positions_","hidden_","disposable_","set","disposed","SVG_NS","forceReflow","offsetHeight","disableTransitionTemporarily","style","transition","supportsTouch","ontouchstart","getGlobalObject","Function","getWindowDocument","isBrowser","getCanvasContext","canvasElement","getContext","ICON_ID_TO_INNER_HTML_MAP","p2dpad","createSvgIconElement","iconId","createElementNS","innerHTML","insertElementAt","findNextTarget","relatedTarget","explicitOriginalTarget","updateAllItemsPositions","bladeRack","visibleItems","items","bc","firstVisibleItem","lastVisibleItem","ps","computeExpandedFolderHeight","folder","containerElement","height","expandedHeight","temporaryExpanded","clientHeight","List","items_","item","opt_index","BladeRack","onItemFolderFold_","onListItemLayout_","onSubitemLayout_","onSubitemFolderFold_","onSubitemInputChange_","onSubitemMonitorUpdate_","onItemInputChange_","onListAdd_","onListItemDispose_","onListRemove_","onItemMonitorUpdate_","blades_","find","controllerClass","reduce","results","FolderController","inputBinding","rawValue","monitorBinding","expanded","Folder","expanded_","expandedHeight_","temporaryExpanded_","shouldFixHeight_","shouldFixHeight","_a","styleExpanded","className$3","FolderView","onFolderChange_","folder_","titleElem","titleElement","markElem","containerElem","applyModel_","expandedClass","styleHeight","onContainerTransitionEnd_","onFolderBeforeChange_","onTitleClick_","onRackAdd_","onRackItemLayout_","onRackRemove_","rack_","doc_","applyRackChange_","className$4","SeparatorView","hrElem","SeparatorController","ButtonApi","buttonController","handleInputBinding","read","handleMonitorBinding","handleFolder","InputBindingApi","bindingController","refresh","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","nomatchingcontroller","key","notbindable","propertynotfound","shouldneverhappen","TpError","message","stack","alreadyDisposed","notBindable","propertyNotFound","shouldNeverHappen","InputBinding","onValueChange_","reader","writer","targetValue","write_","Value","initialValue","constraint_","constraint","equals_","equals","v1","v2","rawValue_","constrainedValue","constrain","createController","plugin","args","accept","params","valueArgs","createInputBindingController","result","MonitorBindingApi","Constants","monitor","defaultInterval","defaultLineCount","fillBuffer","buffer","bufferSize","initializeBuffer","createTrimmedBuffer","slice","createPushedBuffer","newValue","newBuffer","MonitorBinding","onTick_","reader_","ticker","disposable","IntervalTicker","interval","id_","win","defaultView","setInterval","clearInterval","ManualTicker","tick","createTicker","createController$1","_b","_c","count","defaultBufferSize","createMonitorBindingController","SeparatorApi","BindingTarget","opt_id","obj_","key_","presetKey_","isBindable","write","writeProperty","valueObj","createBindingTarget","FolderApi","folderController","addInput","object","opt_params","presetKey","addMonitor","addFolder","addButton","addSeparator","exportPresetJson","targets","importPresetJson","preset","RootApi","rootController","registerPlugin","unshift","importPreset","ibc","exportPreset","mbc","className$5","RootView","titleElem_","createFolder","RootController","CompositeConstraint","constraints_","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","opts_","opts","boolToString","boolFromUnknown","BooleanFormatter","writePrimitive","StepConstraint","step","Math","round","mapRange","start1","end1","start2","end2","getDecimalDigits","toFixed","replace","constrainRange","min","max","loopRange","normalizeInputParamsOptions","convert","isArray","text","textToValueMap","concat","findListItems","findStep","getSuitableDecimalDigits","getBaseStep","className$6","ListView","stringifyValue_","stringifyValue","selectElem","optionElem","dataset","selectElement","ListController","onSelectChange_","listItems_","listItems","e","optElem","currentTarget","selectedOptions","itemIndex","Number","className$7","CheckboxView","inputElem","inputElement","checked","CheckboxController","onInputChange_","createConstraint","createController$2","BooleanInputPlugin","id","_args","className$8","TextView","formatter_","formatter","TextController","parser_","parser","parsedValue","className$9","ColorSwatchTextView","swatchElem","swatchView_","swatchView","textElem","textView","PickedColor","mode_","mode","parseNumber","num","parseFloat","isNaN","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","innerFormatter","formatPercentage","rgbToHsl","g","rp","gp","bp","cmax","cmin","h","hslToRgb","_d","_e","_f","hp","sp","lp","abs","x","rgbToHsv","hsvToRgb","vp","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","hsv","rgb","convertColorMode","components","fromMode","toMode","CONSTRAINT_MAP","isRgbColorComponent","Color","comps_","black","fromObject","toRgbaObject","color","isRgbColorObject","isRgbaColorObject","isColorObject","comps1","comps2","getComponents","opt_mode","rgbComps","parseCssNumberOrPercentage","maxValue","match","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","NOTATION_TO_PARSER_MAP","func.rgb","func.rgba","func.hsl","func.hsla","hex.rgb","mRrggbb","parseInt","mRgb","hex.rgba","getColorNotation","notation","subparser","CompositeColorParser","hasAlphaComponent","colorFromString","cv","zerofill","comp","hex","floor","toString","colorToHexRgbString","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","colorToFunctionalHslString","formatters","colorToFunctionalHslaString","NOTATION_TO_STRINGIFIER_MAP","getColorStringifier","className$a","ColorSwatchView","swatchElem_","pickerElem","pickerView_","pickerView","backgroundColor","Foldable","connect","primary","secondary","forward","backward","getStepForKey","baseStep","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","keyCode","getHorizontalStepKeys","isVerticalArrowKey","isArrowKey","NumberTextController","_super","onInputKeyDown_","baseStep_","className$b","ColorPickerView","alphaViews_","onFoldableChange_","pickedColor","foldable","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","compTextsView_","componentTextsView","alphaViews","palette","aElem","apElem","atElem","elems","inputElements","computeOffset","ownerDocument","rect","getBoundingClientRect","pageX","scrollX","left","pageY","scrollY","top","PointerHandler","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchMove_","onTouchStart_","pressed_","computePosition_","offsetX","offsetY","px","width","py","preventDefault","focus","touch","targetTouches","clientX","clientY","getBaseStepForColor","forAlpha","className$c","APaletteView","tabIndex","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","background","APaletteController","onKeyDown_","onPointerDown_","onPointerMove_","onPointerUp_","ptHandler_","handlePointerEvent_","className$d","FORMATTER","createModeSelectElement","ColorComponentTextsView","modeElem","modeElem_","modeSelectElement","modeMarkerElem","wrapperElem","inputElems","inputElems_","ColorComponentTextsController","onModeSelectChange_","findIndexOfInputElem_","updateComponent_","newComps","compIndex","className$e","HPaletteView","HPaletteController","hue","className$f","CANVAS_RESOL","SvPaletteView","canvasElem","hsvComps","imgData","getImageData","iy","ix","putImageData","SvPaletteController","saturation","ColorPickerController","triggerElement","onFocusableElementBlur_","hPaletteIc_","svPaletteIc_","alphaIcs_","supportsAlpha","compTextsIc_","allFocusableElements","nextTarget","contains","ColorSwatchController","onButtonBlur_","pickerIc_","ColorSwatchTextController","swatchIc_","textIc_","colorFromObject","colorToRgbNumber","colorToRgbaNumber","numberToRgbColor","numberToRgbaColor","colorFromRgbNumber","colorFromRgbaNumber","createColorStringWriter","stringify","createColorNumberWriter","colorToNumber","writeRgbaColorObject","writeRgbColorObject","createColorObjectWriter","shouldSupportAlpha","inputParams","input","NumberColorInputPlugin","shouldSupportAlpha$1","ObjectColorInputPlugin","_params","StringColorInputPlugin","stringifier","RangeConstraint","minValue","className$g","SliderTextView","sliderElem","sliderView_","sliderView","textView_","className$h","SliderView","minValue_","maxValue_","outerElem","outerElement","innerElem","innerElement","findRange","estimateSuitableRange","SliderController","SliderTextController","sliderIc_","createConstraint$1","createController$3","NumberInputPlugin","Point2d","y","isObject","toObject","Point2dConstraint","className$i","Point2dPadTextView","padWrapperElem","padButtonElem_","padElem","padView_","padView","className$j","Point2dPadView","invertsY_","invertsY","padElement","svgElem","svgElem_","xAxisElem","setAttributeNS","yAxisElem","lineElem","lineElem_","ipy","Point2dPadController","onPadKeyDown_","baseSteps_","baseSteps","className$k","Point2dTextView","formatters_","Point2dTextController","axes","Point2dPadTextController","onPadButtonBlur_","onPadButtonClick_","padIc_","padButtonElement","point2dFromUnknown","writePoint2d","createDimensionConstraint","createConstraint$2","getSuitableMaxDimensionValue","rc","getSuitableMaxValue","xc","yc","xr","yr","createController$4","shouldInvertY","yParams","inverted","Point2dInputPlugin","Point3d","z","Point3dConstraint","className$l","Point3dTextView","Point3dTextController","point3dFromUnknown","writePoint3d","createDimensionConstraint$1","createConstraint$3","getAxis","createController$5","Point3dInputPlugin","stringFromUnknown","formatString","createConstraint$4","createController$6","StringInputPlugin","className$m","MultiLogView","onValueUpdate_","textareaElem","lineCount","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","MultiLogController","className$n","SingleLogView","inputElem_","values","lastValue","SingleLogMonitorController","BooleanMonitorPlugin","GraphCursor","index_","className$o","GraphLogView","onCursorChange_","cursor_","cursor","tooltipElem","tooltipElem_","bounds","maxIndex","points","tx","ty","GraphLogController","onGraphMouseLeave_","onGraphMouseMove_","graphElement","createFormatter","createTextMonitor","createGraphMonitor","shouldShowGraph","NumberMonitorPlugin","StringMonitorPlugin","multiline","createDefaultWrapperElement","body","embedStyle","css","querySelector","styleElem","tpStyle","head","embedDefaultStyleIfNeeded","Tweakpane","opt_config","containerElem_","container","usesDefaultWrapper_","parentElem","registerDefaultPlugins","factory","subscriber_queue","initialState","fanCount","settings","start","stop","subscribers","new_value","run_queue","invalidate","subscriber","writable","reset","val","createSettings","$settings","WebGLUtility","path","reject","fetch","res","catch","err","w","canvas","program","prg","gl","useProgram","currentProgram","isWebGL2","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","vs","fs","createProgram","attachShader","linkProgram","deleteShader","getProgramParameter","LINK_STATUS","getProgramInfoLog","varyings","transformFeedbackVaryings","SEPARATE_ATTRIBS","vertexArray","vbo","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","indexArray","ibo","ELEMENT_ARRAY_BUFFER","Int16Array","attLocation","attStride","enableVertexAttribArray","vertexAttribPointer","FLOAT","resource","texture","createTexture","activeTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","generateMipmap","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE0","TEXTURE_CUBE_MAP","promises","src","loadedResolve","img","Image","all","LINEAR","framebuffer","createFramebuffer","depthRenderBuffer","createRenderbuffer","bindFramebuffer","FRAMEBUFFER","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","framebufferTexture2D","COLOR_ATTACHMENT0","depthRenderbuffer","WebGLOrbitCamera","DEFAULT_DISTANCE","DEFAULT_MIN_DISTANCE","DEFAULT_MAX_DISTANCE","DEFAULT_MOVE_SCALE","option","distance","minDistance","maxDistance","moveScale","move","position","center","upDirection","moveX","moveZ","defaultPosition","defaultCenter","defaultUpDirection","defaultMoveX","defaultMoveZ","movePosition","rotateX","rotateY","scale","isDown","prevPosition","offsetPosition","qt","Qtn","qtx","qty","mouseInteractionStart","mouseInteractionMove","mouseInteractionEnd","wheelScroll","buttons","PI2","scaleX","scaleZ","xDirection","zDirection","q","identity","rotate","toVecIII","wheelDelta","multiply","Mat4","lookAt","WebGLMath","mat4","vec3","Vec3","vec2","Vec2","qtn","dest","mat0","mat1","out","f","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","mat","vec","axis","sq","sqrt","sin","cos","u","eye","up","eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","x0","x1","x2","y0","y1","y2","z0","z1","z2","fovy","aspect","near","far","tan","right","bottom","ivd","centerPoint","vmat","pmat","perspective","halfWidth","halfHeight","toVecIV","NaN","v0","len","vec1","normalize","qtn0","qtn1","ax","ay","az","aw","bx","by","bz","bw","qp","qq","qr","inverse","xx","xy","xz","yy","yz","zz","wx","wy","wz","time","ht","hs","ph","acos","pt","t0","t1","HTMLElement","super","editing","attachShadow","totalTime","debug","shadowRoot","template","$pane","$timeline","$current","$progress","$labels","querySelectorAll","$bars","$barsBegin","$barsEnd","$previous","$playPause","$next","playing","previous","next","skip","isFinite","duration","endAt","delay","__updateProgressPosition","__updateBar","Date","now","beginAt","elapsedTime","__updateBarRange","__updateScale","setProperty","clientWidth","transform","progress","pass","window","customElements","define","enter","createShaderObject","enableAttribute","attribLocation","attribStride","setup","webgl","taxis","totalTimeForTimeline","everyPassed","every","sort","timeline","__tick","cancelAnimationFrame","requestID","tickerFn","recalculation","getAxes","toMap","requestAnimationFrame","initialize","axisVBO","circleVBO","rectangleVBO","programMain","circle","rectangle","uniLocation","mvpMatrix","WebGLUniformLocation","vMatrix","pMatrix","vpMatrix","camera","updateSize","innerWidth","innerHeight","setupCircleGeometry","rectanglePosition","vertexCount","fanWidth","fanStartY","fanStartDeg","fanEndDeg","deg2","rad1","rad2","isTop","base","interpolatedY","fanColor","createVBO","setupMvp","mMatrix","translate","uniformMatrix4fv","loadFile","ress","mainVert","mainFrag","mainVs","VERTEX_SHADER","mainFs","FRAGMENT_SHADER","size","vertexShader","fragmentShader","getAttribLocation","getUniformLocation","setupLocation","begin","delta","viewport","clearColor","COLOR_BUFFER_BIT","setupRendering","drawArrays","LINES","renderAxis","TRIANGLES","renderCircle","renderRectangle"],"mappings":"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"}