var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function o(t){let e;return a(t,(t=>e=t))(),e}function l(t,e,n){t.$$.on_destroy.push(a(e,n))}function c(t,e,n=e){return t.set(n),e}function u(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function f(){return m(" ")}function x(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e,n){t.classList[n?"add":"remove"](e)}let E;function T(t){E=t}function w(t){(function(){if(!E)throw new Error("Function called outside component initialization");return E})().$$.on_mount.push(t)}const y=[],A=[],R=[],M=[],P=Promise.resolve();let k=!1;function L(t){R.push(t)}let C=!1;const B=new Set;function $(){if(!C){C=!0;do{for(let t=0;t<y.length;t+=1){const e=y[t];T(e),U(e.$$)}for(T(null),y.length=0;A.length;)A.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];B.has(e)||(B.add(e),e())}R.length=0}while(y.length);for(;M.length;)M.pop()();k=!1,C=!1,B.clear()}}function U(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const I=new Set;let S;function D(t,e){t&&t.i&&(I.delete(t),t.i(e))}function F(t,e,n,r){if(t&&t.o){if(I.has(t))return;I.add(t),S.c.push((()=>{I.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function N(t){t&&t.c()}function O(t,n,s){const{fragment:a,on_mount:o,on_destroy:l,after_update:c}=t.$$;a&&a.m(n,s),L((()=>{const n=o.map(e).filter(i);l?l.push(...n):r(n),t.$$.on_mount=[]})),c.forEach(L)}function X(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(y.push(t),k||(k=!0,P.then($)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function j(e,i,s,a,o,l,c=[-1]){const u=E;T(e);const h=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let p=!1;if(h.ctx=s?s(e,i.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&o(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),p&&V(e,t)),n})):[],h.update(),p=!0,r(h.before_update),h.fragment=!!a&&a(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(d)}else h.fragment&&h.fragment.c();i.intro&&D(e.$$.fragment),O(e,i.target,i.anchor),$()}T(u)}class G{$destroy(){X(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const q=[];function H(e,n=t){let r;const i=[];function a(t){if(s(e,t)&&(e=t,r)){const t=!q.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),q.push(n,e)}if(t){for(let t=0;t<q.length;t+=2)q[t][0](q[t+1]);q.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(s,o=t){const l=[s,o];return i.push(l),1===i.length&&(r=n(a)||t),s(e),()=>{const t=i.indexOf(l);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}const z={file:null};const Y=function(){const{subscribe:t,set:e,update:n}=H(z);return{subscribe:t,reset:()=>e(z),set:t=>e(t)}}(),W={steps:[{title:"Sampling",list:["Sampling the original image for color statistics."]},{title:"Splitting",list:["Put all the pixels of the image (that is, their RGB values) in a bucket.","Find out which color channel (red, green, or blue) among the pixels in the bucket has the greatest range, then sort the pixels according to that channel's values.","After the bucket has been sorted, move the upper half of the pixels into a new bucket."]},{title:"Calculate the average color",list:["Average the pixels in each bucket and you have a palette of 16 colors."]},{title:"Mapping",list:["Mapping the colors to their representative in the color map."]}],current:0};const Z=function(){const{subscribe:t,set:e,update:n}=H(W);return{subscribe:t,reset:()=>e(W),update:t=>e(Object.assign(Object.assign({},W),{current:t})),set:t=>e(t)}}();function J(t,e,n){const r=t.slice();return r[1]=e[n],r[3]=n,r}function K(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Q(t){let e;return{c(){e=g("div"),v(e,"class","-ml-px absolute mt-0.5 top-4 left-4 w-0.5 h-full bg-gray-600"),v(e,"aria-hidden","true")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function tt(t){let e;return{c(){e=g("span"),e.innerHTML='<span class="relative z-10 w-8 h-8 flex items-center justify-center bg-gray-600 rounded-full group-hover:bg-gray-800"><svg class="w-5 h-5 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>',v(e,"class","h-9 flex items-center")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function et(t){let e;return{c(){e=g("span"),e.innerHTML='<span class="relative z-10 w-8 h-8 flex items-center justify-center bg-white border-2 border-gray-600 rounded-full"><span class="h-2.5 w-2.5 bg-gray-600 rounded-full"></span></span>',v(e,"class","h-9 flex items-center"),v(e,"aria-hidden","true")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function nt(t){let e;return{c(){e=g("span"),e.innerHTML='<span class="relative z-10 w-8 h-8 flex items-center justify-center bg-white border-2 border-gray-300 rounded-full group-hover:border-gray-400"><span class="h-2.5 w-2.5 bg-transparent rounded-full group-hover:bg-gray-300"></span></span>',v(e,"class","h-9 flex items-center"),v(e,"aria-hidden","true")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function rt(t){let e,n,r=t[4]+"";return{c(){e=g("span"),n=m(r),v(e,"class","text-sm text-gray-500")},m(t,r){h(t,e,r),u(e,n)},p(t,e){1&e&&r!==(r=t[4]+"")&&_(n,r)},d(t){t&&d(e)}}}function it(t){let e,n,r,i,s,a,o,l,c,x,E,T=t[1].title+"",w=t[3]<t[0].steps.length-1&&Q(),y=t[3]<t[0].current&&tt(),A=t[3]===t[0].current&&et(),R=t[0].current<t[3]&&nt(),M=t[1].list,P=[];for(let e=0;e<M.length;e+=1)P[e]=rt(K(t,M,e));return{c(){e=g("li"),w&&w.c(),n=f(),r=g("div"),y&&y.c(),i=f(),A&&A.c(),s=f(),R&&R.c(),a=f(),o=g("span"),l=g("span"),c=m(T),x=f();for(let t=0;t<P.length;t+=1)P[t].c();E=f(),v(l,"class","text-xs font-semibold uppercase tracking-wide text-gray-300"),v(o,"class","ml-4 min-w-0 flex flex-col space-y-1"),v(r,"class","relative flex items-start group"),v(e,"class","relative pb-10"),b(e,"pb-10",t[3]<t[0].steps.length-1)},m(t,d){h(t,e,d),w&&w.m(e,null),u(e,n),u(e,r),y&&y.m(r,null),u(r,i),A&&A.m(r,null),u(r,s),R&&R.m(r,null),u(r,a),u(r,o),u(o,l),u(l,c),u(o,x);for(let t=0;t<P.length;t+=1)P[t].m(o,null);u(e,E)},p(t,l){if(t[3]<t[0].steps.length-1?w||(w=Q(),w.c(),w.m(e,n)):w&&(w.d(1),w=null),t[3]<t[0].current?y||(y=tt(),y.c(),y.m(r,i)):y&&(y.d(1),y=null),t[3]===t[0].current?A||(A=et(),A.c(),A.m(r,s)):A&&(A.d(1),A=null),t[0].current<t[3]?R||(R=nt(),R.c(),R.m(r,a)):R&&(R.d(1),R=null),1&l&&T!==(T=t[1].title+"")&&_(c,T),1&l){let e;for(M=t[1].list,e=0;e<M.length;e+=1){const n=K(t,M,e);P[e]?P[e].p(n,l):(P[e]=rt(n),P[e].c(),P[e].m(o,null))}for(;e<P.length;e+=1)P[e].d(1);P.length=M.length}1&l&&b(e,"pb-10",t[3]<t[0].steps.length-1)},d(t){t&&d(e),w&&w.d(),y&&y.d(),A&&A.d(),R&&R.d(),p(P,t)}}}function st(e){let n,r,i=e[0].steps,s=[];for(let t=0;t<i.length;t+=1)s[t]=it(J(e,i,t));return{c(){n=g("nav"),r=g("ol");for(let t=0;t<s.length;t+=1)s[t].c();v(r,"class","overflow-hidden"),v(n,"aria-label","Progress"),v(n,"class","max-w-sm")},m(t,e){h(t,n,e),u(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null)},p(t,[e]){if(1&e){let n;for(i=t[0].steps,n=0;n<i.length;n+=1){const a=J(t,i,n);s[n]?s[n].p(a,e):(s[n]=it(a),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},i:t,o:t,d(t){t&&d(n),p(s,t)}}}function at(t,e,n){let r;return l(t,Z,(t=>n(0,r=t))),[r]}class ot extends G{constructor(t){super(),j(this,t,at,st,s,{})}}class lt{static loadFile(t){return new Promise(((e,n)=>{fetch(t).then((t=>t.text())).then((t=>{e(t)})).catch((t=>{n(t)}))}))}set width(t){this.canvas.width=t}get width(){return this.canvas.width}set height(t){this.canvas.height=t}get height(){return this.canvas.height}set program(t){this.gl.useProgram(t),this.currentProgram=t}get program(){return this.currentProgram}constructor(){this.canvas=null,this.gl=null,this.currentProgram=null}initialize(t,e){if(this.canvas=t,this.gl=this.canvas.getContext("webgl"+(!0===e?"2":"")),null==this.gl)throw new Error("webgl not supported")}createShaderObject(t,e){const n=this.gl,r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS))return r;throw new Error(n.getShaderInfoLog(r))}createProgramObject(t,e){const n=this.gl,r=n.createProgram();if(n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),n.deleteShader(t),n.deleteShader(e),n.getProgramParameter(r,n.LINK_STATUS))return n.useProgram(r),r;throw new Error(n.getProgramInfoLog(r))}createProgramObjectTF(t,e,n){const r=this.gl,i=r.createProgram();if(r.attachShader(i,t),r.attachShader(i,e),r.transformFeedbackVaryings(i,n,r.SEPARATE_ATTRIBS),r.linkProgram(i),r.deleteShader(t),r.deleteShader(e),r.getProgramParameter(i,r.LINK_STATUS))return r.useProgram(i),i;throw new Error(r.getProgramInfoLog(i))}createVBO(t){const e=this.gl,n=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),n}createIBO(t){const e=this.gl,n=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Int16Array(t),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),n}enableAttribute(t,e,n){const r=this.gl;t.forEach(((t,i)=>{r.bindBuffer(r.ARRAY_BUFFER,t),r.enableVertexAttribArray(e[i]),r.vertexAttribPointer(e[i],n[i],r.FLOAT,!1,0,0)}))}createTexture(t,e){const n=this.gl,r=n.createTexture();return n.activeTexture(e),n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.generateMipmap(n.TEXTURE_2D),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null),r}createCubeTextureFromFile(t,e){return new Promise((n=>{const r=this.gl,i=r.createTexture();r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_CUBE_MAP,i);const s=t.map(((t,n)=>new Promise((i=>{const s=new Image;s.addEventListener("load",(()=>{r.texImage2D(e[n],0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,s),i()}),!1),s.src=t}))));Promise.all(s).then((()=>{r.generateMipmap(r.TEXTURE_CUBE_MAP),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_CUBE_MAP,null),n(i)}))}))}createFramebuffer(t,e){const n=this.gl,r=n.createFramebuffer(),i=n.createRenderbuffer(),s=n.createTexture();return n.bindFramebuffer(n.FRAMEBUFFER,r),n.bindRenderbuffer(n.RENDERBUFFER,i),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t,e),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,i),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,e,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,s,0),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),{framebuffer:r,depthRenderbuffer:i,texture:s}}}class ct{static get DEFAULT_DISTANCE(){return 5}static get DEFAULT_MIN_DISTANCE(){return 1}static get DEFAULT_MAX_DISTANCE(){return 10}static get DEFAULT_MOVE_SCALE(){return 2}constructor(t,e={}){this.target=t,this.distance=e.distance||ct.DEFAULT_DISTANCE,this.minDistance=e.min||ct.DEFAULT_MIN_DISTANCE,this.maxDistance=e.max||ct.DEFAULT_MAX_DISTANCE,this.moveScale=e.move||ct.DEFAULT_MOVE_SCALE,this.position=[0,0,this.distance],this.center=[0,0,0],this.upDirection=[0,1,0],this.moveX=[1,0,0],this.moveZ=[0,0,1],this.defaultPosition=[0,0,this.distance],this.defaultCenter=[0,0,0],this.defaultUpDirection=[0,1,0],this.defaultMoveX=[1,0,0],this.defaultMoveZ=[0,0,1],this.movePosition=[0,0,0],this.rotateX=0,this.rotateY=0,this.scale=0,this.isDown=!1,this.prevPosition=[0,0],this.offsetPosition=[0,0],this.qt=gt.create(),this.qtx=gt.create(),this.qty=gt.create(),this.mouseInteractionStart=this.mouseInteractionStart.bind(this),this.mouseInteractionMove=this.mouseInteractionMove.bind(this),this.mouseInteractionEnd=this.mouseInteractionEnd.bind(this),this.wheelScroll=this.wheelScroll.bind(this),this.target.addEventListener("mousedown",this.mouseInteractionStart,!1),this.target.addEventListener("mousemove",this.mouseInteractionMove,!1),this.target.addEventListener("mouseup",this.mouseInteractionEnd,!1),this.target.addEventListener("contextmenu",(t=>{t.preventDefault()}),!1)}mouseInteractionStart(t){this.isDown=!0;const e=this.target.getBoundingClientRect();this.prevPosition=[t.clientX-e.left,t.clientY-e.top]}mouseInteractionMove(t){if(!0!==this.isDown)return;const e=this.target.getBoundingClientRect(),n=e.width,r=e.height,i=t.clientX-e.left,s=t.clientY-e.top,a=1/Math.min(n,r);switch(this.offsetPosition=[i-this.prevPosition[0],s-this.prevPosition[1]],this.prevPosition=[i,s],t.buttons){case 1:this.rotateX+=this.offsetPosition[0]*a,this.rotateY+=this.offsetPosition[1]*a,this.rotateX=this.rotateX%1,this.rotateY=Math.min(Math.max(this.rotateY%1,-.25),.25);break;case 2:const t=2*Math.PI,e=this.offsetPosition[0]*a*this.moveScale,n=this.offsetPosition[1]*a*this.moveScale,r=this.defaultMoveX.slice(),i=this.defaultMoveZ.slice(),s=gt.identity(gt.create());gt.rotate(this.rotateX*t,[0,1,0],s),gt.toVecIII(r,s,this.moveX),gt.toVecIII(i,s,this.moveZ),this.movePosition[0]-=this.moveX[0]*e+this.moveZ[0]*n,this.movePosition[2]-=this.moveX[2]*e+this.moveZ[2]*n}}mouseInteractionEnd(t){this.isDown=!1}wheelScroll(t){const e=t.wheelDelta;e>0?this.scale=-.5:e<0&&(this.scale=.5)}update(){const t=2*Math.PI,e=[1,0,0];return this.scale*=.7,this.distance+=this.scale,this.distance=Math.min(Math.max(this.distance,this.minDistance),this.maxDistance),this.defaultPosition[2]=this.distance,gt.identity(this.qt),gt.identity(this.qtx),gt.identity(this.qty),gt.rotate(this.rotateX*t,[0,1,0],this.qtx),gt.toVecIII(e,this.qtx,e),gt.rotate(this.rotateY*t,e,this.qty),gt.multiply(this.qtx,this.qty,this.qt),gt.toVecIII(this.defaultPosition,this.qt,this.position),gt.toVecIII(this.defaultUpDirection,this.qt,this.upDirection),this.position[0]+=this.movePosition[0],this.position[1]+=this.movePosition[1],this.position[2]+=this.movePosition[2],this.center[0]=this.defaultCenter[0]+this.movePosition[0],this.center[1]=this.defaultCenter[1]+this.movePosition[1],this.center[2]=this.defaultCenter[2]+this.movePosition[2],ht.lookAt(this.position,this.center,this.upDirection)}}class ut{static get mat4(){return ht}static get vec3(){return dt}static get vec2(){return pt}static get qtn(){return gt}}class ht{static create(){return new Float32Array(16)}static identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static multiply(t,e,n){let r=n;null==n&&(r=ht.create());let i=t[0],s=t[1],a=t[2],o=t[3],l=t[4],c=t[5],u=t[6],h=t[7],d=t[8],p=t[9],g=t[10],m=t[11],f=t[12],x=t[13],v=t[14],_=t[15],b=e[0],E=e[1],T=e[2],w=e[3],y=e[4],A=e[5],R=e[6],M=e[7],P=e[8],k=e[9],L=e[10],C=e[11],B=e[12],$=e[13],U=e[14],I=e[15];return r[0]=b*i+E*l+T*d+w*f,r[1]=b*s+E*c+T*p+w*x,r[2]=b*a+E*u+T*g+w*v,r[3]=b*o+E*h+T*m+w*_,r[4]=y*i+A*l+R*d+M*f,r[5]=y*s+A*c+R*p+M*x,r[6]=y*a+A*u+R*g+M*v,r[7]=y*o+A*h+R*m+M*_,r[8]=P*i+k*l+L*d+C*f,r[9]=P*s+k*c+L*p+C*x,r[10]=P*a+k*u+L*g+C*v,r[11]=P*o+k*h+L*m+C*_,r[12]=B*i+$*l+U*d+I*f,r[13]=B*s+$*c+U*p+I*x,r[14]=B*a+$*u+U*g+I*v,r[15]=B*o+$*h+U*m+I*_,r}static scale(t,e,n){let r=n;return null==n&&(r=ht.create()),r[0]=t[0]*e[0],r[1]=t[1]*e[0],r[2]=t[2]*e[0],r[3]=t[3]*e[0],r[4]=t[4]*e[1],r[5]=t[5]*e[1],r[6]=t[6]*e[1],r[7]=t[7]*e[1],r[8]=t[8]*e[2],r[9]=t[9]*e[2],r[10]=t[10]*e[2],r[11]=t[11]*e[2],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}static translate(t,e,n){let r=n;return null==n&&(r=ht.create()),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12],r[13]=t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13],r[14]=t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14],r[15]=t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15],r}static rotate(t,e,n,r){let i=r;null==r&&(i=ht.create());let s=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);if(!s)return null;let a=n[0],o=n[1],l=n[2];1!=s&&(s=1/s,a*=s,o*=s,l*=s);let c=Math.sin(e),u=Math.cos(e),h=1-u,d=t[0],p=t[1],g=t[2],m=t[3],f=t[4],x=t[5],v=t[6],_=t[7],b=t[8],E=t[9],T=t[10],w=t[11],y=a*a*h+u,A=o*a*h+l*c,R=l*a*h-o*c,M=a*o*h-l*c,P=o*o*h+u,k=l*o*h+a*c,L=a*l*h+o*c,C=o*l*h-a*c,B=l*l*h+u;return e?t!=i&&(i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]):i=t,i[0]=d*y+f*A+b*R,i[1]=p*y+x*A+E*R,i[2]=g*y+v*A+T*R,i[3]=m*y+_*A+w*R,i[4]=d*M+f*P+b*k,i[5]=p*M+x*P+E*k,i[6]=g*M+v*P+T*k,i[7]=m*M+_*P+w*k,i[8]=d*L+f*C+b*B,i[9]=p*L+x*C+E*B,i[10]=g*L+v*C+T*B,i[11]=m*L+_*C+w*B,i}static lookAt(t,e,n,r){let i=t[0],s=t[1],a=t[2],o=e[0],l=e[1],c=e[2],u=n[0],h=n[1],d=n[2];if(i==o&&s==l&&a==c)return ht.identity(r);let p,g,m,f,x,v,_,b,E,T,w=r;return null==r&&(w=ht.create()),_=i-e[0],b=s-e[1],E=a-e[2],T=1/Math.sqrt(_*_+b*b+E*E),_*=T,b*=T,E*=T,p=h*E-d*b,g=d*_-u*E,m=u*b-h*_,T=Math.sqrt(p*p+g*g+m*m),T?(T=1/T,p*=T,g*=T,m*=T):(p=0,g=0,m=0),f=b*m-E*g,x=E*p-_*m,v=_*g-b*p,T=Math.sqrt(f*f+x*x+v*v),T?(T=1/T,f*=T,x*=T,v*=T):(f=0,x=0,v=0),w[0]=p,w[1]=f,w[2]=_,w[3]=0,w[4]=g,w[5]=x,w[6]=b,w[7]=0,w[8]=m,w[9]=v,w[10]=E,w[11]=0,w[12]=-(p*i+g*s+m*a),w[13]=-(f*i+x*s+v*a),w[14]=-(_*i+b*s+E*a),w[15]=1,w}static perspective(t,e,n,r,i){let s=i;null==i&&(s=ht.create());let a=n*Math.tan(t*Math.PI/360),o=2*(a*e),l=2*a,c=r-n;return s[0]=2*n/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*n/l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=-(r+n)/c,s[11]=-1,s[12]=0,s[13]=0,s[14]=-r*n*2/c,s[15]=0,s}static ortho(t,e,n,r,i,s,a){let o=a;null==a&&(o=ht.create());let l=e-t,c=n-r,u=s-i;return o[0]=2/l,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2/c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-2/u,o[11]=0,o[12]=-(t+e)/l,o[13]=-(n+r)/c,o[14]=-(s+i)/u,o[15]=1,o}static transpose(t,e){let n=e;return null==e&&(n=ht.create()),n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15],n}static inverse(t,e){let n=e;null==e&&(n=ht.create());let r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],g=t[11],m=t[12],f=t[13],x=t[14],v=t[15],_=r*l-i*o,b=r*c-s*o,E=r*u-a*o,T=i*c-s*l,w=i*u-a*l,y=s*u-a*c,A=h*f-d*m,R=h*x-p*m,M=h*v-g*m,P=d*x-p*f,k=d*v-g*f,L=p*v-g*x,C=1/(_*L-b*k+E*P+T*M-w*R+y*A);return n[0]=(l*L-c*k+u*P)*C,n[1]=(-i*L+s*k-a*P)*C,n[2]=(f*y-x*w+v*T)*C,n[3]=(-d*y+p*w-g*T)*C,n[4]=(-o*L+c*M-u*R)*C,n[5]=(r*L-s*M+a*R)*C,n[6]=(-m*y+x*E-v*b)*C,n[7]=(h*y-p*E+g*b)*C,n[8]=(o*k-l*M+u*A)*C,n[9]=(-r*k+i*M-a*A)*C,n[10]=(m*w-f*E+v*_)*C,n[11]=(-h*w+d*E-g*_)*C,n[12]=(-o*P+l*R-c*A)*C,n[13]=(r*P-i*R+s*A)*C,n[14]=(-m*T+f*b-x*_)*C,n[15]=(h*T-d*b+p*_)*C,n}static toVecIV(t,e){let n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],g=t[12],m=t[13],f=t[14],x=t[15],v=e[0],_=e[1],b=e[2],E=e[3],T=[];return T[0]=v*n+_*a+b*u+E*g,T[1]=v*r+_*o+b*h+E*m,T[2]=v*i+_*l+b*d+E*f,T[3]=v*s+_*c+b*p+E*x,e=T,T}static vpFromCameraProperty(t,e,n,r,i,s,a,o,l,c){ht.lookAt(t,e,n,o),ht.perspective(r,i,s,a,l),ht.multiply(l,o,c)}static screenPositionFromMvp(t,e,n,r){let i=.5*n,s=.5*r,a=ht.toVecIV(t,[e[0],e[1],e[2],1]);return a[3]<=0?[NaN,NaN]:(a[0]/=a[3],a[1]/=a[3],a[2]/=a[3],[i+a[0]*i,s-a[1]*s])}}class dt{static create(){return new Float32Array(3)}static len(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}static distance(t,e){let n=dt.create();return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}static normalize(t){let e=dt.create(),n=dt.len(t);if(n>0){let r=1/n;e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r}else e[0]=0,e[1]=0,e[2]=0;return e}static dot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}static cross(t,e){let n=dt.create();return n[0]=t[1]*e[2]-t[2]*e[1],n[1]=t[2]*e[0]-t[0]*e[2],n[2]=t[0]*e[1]-t[1]*e[0],n}static faceNormal(t,e,n){let r=dt.create(),i=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],s=[n[0]-t[0],n[1]-t[1],n[2]-t[2]];return r[0]=i[1]*s[2]-i[2]*s[1],r[1]=i[2]*s[0]-i[0]*s[2],r[2]=i[0]*s[1]-i[1]*s[0],dt.normalize(r)}}class pt{static create(){return new Float32Array(2)}static len(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}static distance(t,e){let n=pt.create();return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}static normalize(t){let e=pt.create(),n=pt.len(t);if(n>0){let r=1/n;e[0]=t[0]*r,e[1]=t[1]*r}return e}static dot(t,e){return t[0]*e[0]+t[1]*e[1]}static cross(t,e){return pt.create(),t[0]*e[1]-t[1]*e[0]}}class gt{static create(){return new Float32Array(4)}static identity(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}static inverse(t,e){let n=e;return null==e&&(n=gt.create()),n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n}static normalize(t){let e=t[0],n=t[1],r=t[2],i=Math.sqrt(e*e+n*n+r*r);return 0===i?(t[0]=0,t[1]=0,t[2]=0):(i=1/i,t[0]=e*i,t[1]=n*i,t[2]=r*i),t}static multiply(t,e,n){let r=n;null==n&&(r=gt.create());let i=t[0],s=t[1],a=t[2],o=t[3],l=e[0],c=e[1],u=e[2],h=e[3];return r[0]=i*h+o*l+s*u-a*c,r[1]=s*h+o*c+a*l-i*u,r[2]=a*h+o*u+i*c-s*l,r[3]=o*h-i*l-s*c-a*u,r}static rotate(t,e,n){let r=n;null==n&&(r=gt.create());let i=e[0],s=e[1],a=e[2],o=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);if(0!==o){let t=1/o;i*=t,s*=t,a*=t}let l=Math.sin(.5*t);return r[0]=i*l,r[1]=s*l,r[2]=a*l,r[3]=Math.cos(.5*t),r}static toVecIII(t,e,n){let r=n;null==n&&(r=[0,0,0]);let i=gt.create(),s=gt.create(),a=gt.create();return gt.inverse(e,a),i[0]=t[0],i[1]=t[1],i[2]=t[2],gt.multiply(a,i,s),gt.multiply(s,e,a),r[0]=a[0],r[1]=a[1],r[2]=a[2],r}static toMatIV(t,e){let n=e;null==e&&(n=ht.create());let r=t[0],i=t[1],s=t[2],a=t[3],o=r+r,l=i+i,c=s+s,u=r*o,h=r*l,d=r*c,p=i*l,g=i*c,m=s*c,f=a*o,x=a*l,v=a*c;return n[0]=1-(p+m),n[1]=h-v,n[2]=d+x,n[3]=0,n[4]=h+v,n[5]=1-(u+m),n[6]=g-f,n[7]=0,n[8]=d-x,n[9]=g+f,n[10]=1-(u+p),n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}static slerp(t,e,n,r){let i=r;null==r&&(i=gt.create());let s=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],a=1-s*s;if(a<=0)i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3];else if(a=Math.sqrt(a),Math.abs(a)<1e-4)i[0]=.5*t[0]+.5*e[0],i[1]=.5*t[1]+.5*e[1],i[2]=.5*t[2]+.5*e[2],i[3]=.5*t[3]+.5*e[3];else{let r=Math.acos(s),o=r*n,l=Math.sin(r-o)/a,c=Math.sin(o)/a;i[0]=t[0]*l+e[0]*c,i[1]=t[1]*l+e[1]*c,i[2]=t[2]*l+e[2]*c,i[3]=t[3]*l+e[3]*c}return i}}class mt{static plane(t,e,n){let r,i;r=t/2,i=e/2;return{position:[-r,i,0,r,i,0,-r,-i,0,r,-i,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],color:[n[0],n[1],n[2],n[3],n[0],n[1],n[2],n[3],n[0],n[1],n[2],n[3],n[0],n[1],n[2],n[3]],texCoord:[0,0,1,0,0,1,1,1],index:[0,2,1,1,2,3]}}static circle(t,e,n){let r,i=0,s=[],a=[],o=[],l=[],c=[];for(s.push(0,0,0),a.push(0,0,1),o.push(n[0],n[1],n[2],n[3]),l.push(.5,.5),r=0;r<t;r++){let u=2*Math.PI/t*r,h=Math.cos(u),d=Math.sin(u);s.push(h*e,d*e,0),a.push(0,0,1),o.push(n[0],n[1],n[2],n[3]),l.push(.5*(h+1),1-.5*(d+1)),r===t-1?c.push(0,i+1,1):c.push(0,i+1,i+2),++i}return{position:s,normal:a,color:o,texCoord:l,index:c}}static cube(t,e){let n=.5*t,r=[-n,-n,n,n,-n,n,n,n,n,-n,n,n,-n,-n,-n,-n,n,-n,n,n,-n,n,-n,-n,-n,n,-n,-n,n,n,n,n,n,n,n,-n,-n,-n,-n,n,-n,-n,n,-n,n,-n,-n,n,n,-n,-n,n,n,-n,n,n,n,n,-n,n,-n,-n,-n,-n,-n,n,-n,n,n,-n,n,-n],i=1/Math.sqrt(3),s=[-i,-i,i,i,-i,i,i,i,i,-i,i,i,-i,-i,-i,-i,i,-i,i,i,-i,i,-i,-i,-i,i,-i,-i,i,i,i,i,i,i,i,-i,-i,-i,-i,i,-i,-i,i,-i,i,-i,-i,i,i,-i,-i,i,i,-i,i,i,i,i,-i,i,-i,-i,-i,-i,-i,i,-i,i,i,-i,i,-i],a=[];for(let t=0;t<r.length/3;t++)a.push(e[0],e[1],e[2],e[3]);return{position:r,normal:s,color:a,texCoord:[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],index:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}}static box(t,e,n,r){let i=.5*t,s=.5*e,a=.5*n,o=[-i,-s,a,i,-s,a,i,s,a,-i,s,a,-i,-s,-a,-i,s,-a,i,s,-a,i,-s,-a,-i,s,-a,-i,s,a,i,s,a,i,s,-a,-i,-s,-a,i,-s,-a,i,-s,a,-i,-s,a,i,-s,-a,i,s,-a,i,s,a,i,-s,a,-i,-s,-a,-i,-s,a,-i,s,a,-i,s,-a],l=1/Math.sqrt(3),c=[-l,-l,l,l,-l,l,l,l,l,-l,l,l,-l,-l,-l,-l,l,-l,l,l,-l,l,-l,-l,-l,l,-l,-l,l,l,l,l,l,l,l,-l,-l,-l,-l,l,-l,-l,l,-l,l,-l,-l,l,l,-l,-l,l,l,-l,l,l,l,l,-l,l,-l,-l,-l,-l,-l,l,-l,l,l,-l,l,-l],u=[];for(let t=0;t<o.length/3;t++)u.push(r[0],r[1],r[2],r[3]);return{position:o,normal:c,color:u,texCoord:[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],index:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}}static boxLine(t,e,n,r){let i=.5*t,s=.5*e,a=.5*n,o=[-i,-s,a,i,-s,a,i,-s,a,i,s,a,i,s,a,-i,s,a,-i,s,a,-i,-s,a,-i,-s,-a,-i,s,-a,-i,s,-a,i,s,-a,i,s,-a,i,-s,-a,i,-s,-a,-i,-s,-a,-i,s,-a,-i,s,a,-i,s,a,i,s,a,i,s,a,i,s,-a,i,s,-a,-i,s,-a,-i,-s,-a,i,-s,-a,i,-s,-a,i,-s,a,i,-s,a,-i,-s,a,-i,-s,a,-i,-s,-a,i,-s,-a,i,s,-a,i,s,-a,i,s,a,i,s,a,i,-s,a,i,-s,a,i,-s,-a,-i,-s,-a,-i,-s,a,-i,-s,a,-i,s,a,-i,s,a,-i,s,-a],l=[];for(let t=0;t<o.length/3;t++)l.push(r[0],r[1],r[2],r[3]);return{position:o,color:l}}static axis(t,e){return{position:[-1*t,0,0,t,0,0,0,-1*t,0,0,t,0,0,0,t,0,0,-1*t],color:[.45,.45,.45,1,.45,.45,.45,1,.45,.45,.45,1,.45,.45,.45,1,.45,.45,.45,1,.45,.45,.45,1]}}}var ft;!function(t){t[t.R=0]="R",t[t.G=1]="G",t[t.B=2]="B"}(ft||(ft={}));var xt=function(t,e){this.imageData=t,this.options=e||{strict:!1},this.colors=this.__calculateColorCount(this.imageData.data),this.buckets=[],this.__bucketsPerStep=[]},vt={roundingBits:{configurable:!0},palette:{configurable:!0},bucketsPerStep:{configurable:!0}};xt.averageColor=function(t){for(var e=0,n=0,r=0,i=0,s=0,a=t.length;s<a;s=s+1|0){var o=t[s],l=o[0],c=o[1],u=o[2],h=o[3];n=l*h+n,r=c*h+r,i=u*h+i,e=e+h|0}return[Math.round(n/e),Math.round(r/e),Math.round(i/e)]},vt.roundingBits.get=function(){return this.options.strict?255:248},vt.palette.get=function(){for(var t=[],e=0,n=this.buckets.length;e<n;e=e+1|0)t[e]=xt.averageColor(this.buckets[e].colors);return t},vt.bucketsPerStep.get=function(){return this.__bucketsPerStep},xt.prototype.reduce=function(t){if(this.colors.length<=t)return console.warn("It has already been reduced color."),this.imageData;this.buckets=this.__mediancut([this.__generateBucket(this.colors)],t);for(var e=new Map,n=0,r=this.buckets.length;n<r;n=n+1|0)for(var i=this.buckets[n],s=xt.averageColor(i.colors),a=0,o=i.colors.length;a<o;a=a+1|0){var l=i.colors[a],c=l[0],u=l[1],h=l[2],d=c&this.roundingBits|(u&this.roundingBits)<<8|(h&this.roundingBits)<<16;e.set(d,s)}for(var p=this.imageData.data,g=p.length,m=new Uint8ClampedArray(g),f=0;f<g;){var x=p[f]&this.roundingBits|(p[f+1]&this.roundingBits)<<8|(p[f+2]&this.roundingBits)<<16,v=e.get(x),_=v[0],b=v[1],E=v[2];m[f]=_,m[f+1]=b,m[f+2]=E,m[f+3]=p[f+3],f=f+4|0}return new ImageData(m,this.imageData.width,this.imageData.height)},xt.prototype.__calculateColorCount=function(t){for(var e=new Map,n=t.length,r=0;r<n;){var i=t[r]&this.roundingBits,s=t[r+1]&this.roundingBits,a=t[r+2]&this.roundingBits,o=i|s<<8|a<<16,l=e.get(o),c=l?l[3]+1:1;e.set(o,[i,s,a,c]),r=r+4|0}var u=[];return e.forEach((function(t){u[u.length]=t})),u},xt.prototype.__getTotalAnGreatestRangeChannel=function(t){for(var e=0,n=0,r=0,i=0,s=255,a=255,o=255,l=t.length,c=0;c<l;){var u=t[c],h=u[0],d=u[1],p=u[2],g=u[3];n=Math.max(h,n),r=Math.max(d,r),i=Math.max(p,i),s=Math.min(h,s),a=Math.min(d,a),o=Math.min(p,o),e+=g,c=c+1|0}var m=1.2*(n-s),f=1.2*(r-a),x=i-o,v=Math.max(m,f,x),_=ft.R;return m===v&&(_=ft.R),f===v&&(_=ft.G),x===v&&(_=ft.B),{total:e,channel:_,minR:s,minG:a,minB:o,maxR:n,maxG:r,maxB:i}},xt.prototype.__mediancut=function(t,e){this.__bucketsPerStep.push([].concat(t));var n=0,r=0;if(t.length+1>e)return t;for(var i=0,s=t.length;i<s;i=i+1|0)t[i].total>n&&1!==t[i].colors.length&&(r=i,n=t[i].total);var a=t[r];if(1===a.total||1===a.colors.length)return console.error("Cube could not be split."),t;var o=a.channel;a.colors.sort((function(t,e){return t[o]-e[o]}));var l=Math.floor((a.colors.length+1)/2),c=this.__generateBucket(a.colors.slice(0,l)),u=this.__generateBucket(a.colors.slice(l));return t.splice(r,1,c,u),this.__mediancut(t,e)},xt.prototype.__generateBucket=function(t){var e=this.__getTotalAnGreatestRangeChannel(t);return{colors:t,total:e.total,channel:e.channel,minR:e.minR,minG:e.minG,minB:e.minB,maxR:e.maxR,maxG:e.maxG,maxB:e.maxB}},Object.defineProperties(xt.prototype,vt);var _t=class extends HTMLElement{constructor(t,e){super(),this.__dragging=!1,this.attachShadow({mode:"open"}),this.axes=t,this.shadowRoot.innerHTML=this.template(t,e),this.$pane=this.shadowRoot.querySelector("#pane"),this.$timeline=this.shadowRoot.querySelector("#timeline"),this.$current=this.shadowRoot.querySelector("#current"),this.$progress=this.shadowRoot.querySelector("#progress"),this.$labels=this.shadowRoot.querySelectorAll(".label"),this.$bars=this.shadowRoot.querySelectorAll(".bar"),this.$previous=this.shadowRoot.querySelector("#previous"),this.$playPause=this.shadowRoot.querySelector("#play-pause"),this.$next=this.shadowRoot.querySelector("#next"),this.playing=!0,this.previous=!1,this.next=!1,this.skip=-1,this.$previous.addEventListener("click",(t=>{this.previous=!0})),this.$playPause.addEventListener("click",(t=>{this.playing=!this.playing})),this.$next.addEventListener("click",(t=>{this.next=!0})),this.$bars.forEach((t=>{t.addEventListener("click",(t=>{let e=t.currentTarget,n=Number(e.getAttribute("idx"));this.skip=n}))})),this.$labels.forEach((t=>{t.addEventListener("click",(t=>{let e=t.currentTarget,n=Number(e.getAttribute("idx"));this.skip=n}))})),this.$current.addEventListener("input",(t=>{this.__dragging=!0;let e=Number(this.$current.value);this.__updateProgressPosition(e),this.__updateBar(e)})),this.$current.addEventListener("change",(t=>{this.__dragging=!1}))}attributeChangedCallback(){}connectedCallback(){}disconnectedCallback(){}get(t){let e=Date.now(),n=Number(this.$current.value),r=e-t;if(this.playing||(t=e-n,r=n),this.__dragging&&(t=e-n,r=n),-1<this.skip){let n=this.axes[this.skip];t=e-n.beginAt,r=n.beginAt,this.skip=-1}return this.previous&&(this.previous=!1,t=e,r=0),this.next&&(this.next=!1,t=e-this.totalTime,r=this.totalTime),{beginAt:t,elapsedTime:r,dragging:this.__dragging}}update(t,e,n){this.axes=n,this.totalTime=e,this.$current.setAttribute("max",e),this.$current.value=t,this.__updateProgressPosition(t),this.__updateBar(t)}template(t,e){let n="",r="",i="";for(let e=0;e<t.length;e++){n+=`<div class="row" id="row-${e}"><div class="label" idx="${e}">${t[e].key}</div></div>`,r+=`<div class="row"><div class="bar" idx="${e}"></div></div>`}for(let t=0,n=Math.floor(e/1e3);t<n;t++)i+=`<div class="scale-label" style="--sec: ${t+1}">${t+1}s</div>`;return`\n      <style>\n        * {\n          box-sizing: border-box;\n        }\n        :host {\n          display: block;\n          height: 100%;\n        }\n        .container {\n          display: flex;\n          flex-direction: column;\n          height: 100%;\n          background-color: #313131;\n          color: #eeeeee;\n          position: relative;\n          --tools-height: 40px;\n          --controls-height: 40px;\n        }\n        .tools {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n          height: var(--tools-height);\n          border-bottom: 1px solid #202020;\n        }\n        .tools__item {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 20px;\n          margin: 0 8px;\n          color: #eeeeee;\n        }\n        .tools__item div {\n          width: 100%;\n          cursor: pointer;\n        }\n        .tools__item div:hover {\n          opacity: .6;\n        }\n        .tools__item svg {\n          fill: currentColor;\n        }\n        .controls {\n          display: flex;\n          flex-shrink: 0;\n          height: var(--controls-height);\n          border-bottom: 1px solid #202020;\n        }\n        .pane {\n          display: flex;\n          flex: 1;\n          overflow: scroll;\n          scroll-behavior: smooth;\n        }\n        .head {\n          flex-shrink: 0;\n          flex-basis: 20%;\n          max-width: 200px;\n          min-width: 0;\n        }\n        .body {\n          flex: 1;\n          position: relative;\n        }\n        .actions {\n          height: 100%;\n          border-right: 1px solid #222322;\n        }\n        .rows {\n          border-right: 1px solid #222322;\n        }\n        .row {\n          display: flex;\n          align-items: center;\n          height: 24px;\n          border-bottom: 1px solid #202020;\n        }\n        .label {\n          padding-left: 12px;\n          font-size: 12px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          cursor: pointer;\n        }\n        .bar {\n          width: 1px;\n          height: 100%;\n          background-color: #545454;\n          opacity: .5;\n          transform-origin: left;\n          cursor: pointer;\n        }\n        .bar.bar--active {\n          opacity: 1;\n        }\n        .progress {\n          position: absolute;\n          top: var(--tools-height);\n          bottom: 0;\n          left: 0;\n          width: 2px;\n          margin-left: min(20%, 200px);\n          background-color: #71A0EB;\n          opacity: 0.6;\n        }\n        .progress::before {\n          content: "";\n          display: block;\n          width: 20px;\n          height: 30px;\n          background-color: #53aeff;\n          margin-left: -9px;\n        }\n        .progress::after {\n          content: "";\n          display: block;\n          border-top: 10px solid #53aeff;\n          border-left: 10px solid transparent;\n          border-right: 10px solid transparent;\n          margin-left: -9px;\n        }\n        .current {\n          position: absolute;\n          top: var(--tools-height);\n          height: var(--controls-height);\n          left: -12px;\n          right: -12px;\n          margin-left: min(20%, 200px);\n        }\n        input[type="range"] {\n          -webkit-appearance: none;\n          appearance: none;\n          margin: 0;\n          cursor: pointer;\n          outline: none;\n          height: var(--controls-height);\n          width: 100%;\n          background: transparent;\n        }\n        input[type="range"]::-webkit-slider-thumb {\n          opacity: 0;\n        }\n        input[type="range"]::-moz-range-thumb {\n          opacity: 0;\n        }\n        /* Firefox„ÅßÁÇπÁ∑ö„ÅåÂë®„Çä„Å´Ë°®Á§∫„Åï„Çå„Å¶„Åó„Åæ„ÅÜÂïèÈ°å„ÅÆËß£Ê∂à */\n        input[type="range"]::-moz-focus-outer {\n          border: 0;\n        }\n        .scale {\n          position: relative;\n          height: 100%;\n        }\n        .scale-s,\n        .scale-100ms {\n          height: 50%;\n        }\n        .scale-s {\n          /*\n            total / 1s \n            e.g. 6000 / 1000\n            x / 1000 = 6\n            calc(100% / calc(var(--total) / 1000))\n           */\n          --x: calc(100% / calc(var(--total) / 1000));\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n          border-bottom: 1px solid #202020;\n        }\n        .scale-100ms {\n          --x: calc(100% / calc(var(--total) / 1000) / 10);\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n        }\n        .scale-label {\n          --x: calc(100% / calc(var(--total) / 1000));\n          position: absolute;\n          top: 0;\n          left: calc(var(--x) * var(--sec));\n          font-size: 10px;\n          font-style: italic;\n          transform: translateX(calc(-100% - 4px));\n        }\n      </style>\n      <div class="container">\n        <div class="tools">\n          <div class="tools__item">\n            <div id="previous">\n              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path d="M2.75 20C2.75 20.5523 3.19772 21 3.75 21C4.30228 21 4.75 20.5523 4.75 20L4.75 4C4.75 3.44772 4.30229 3 3.75 3C3.19772 3 2.75 3.44772 2.75 4V20Z"/>\n                <path d="M20.75 19.0526C20.75 20.4774 19.1383 21.305 17.9803 20.4748L7.51062 12.9682C6.50574 12.2477 6.54467 10.7407 7.5854 10.073L18.0551 3.35665C19.2198 2.60946 20.75 3.44583 20.75 4.82961L20.75 19.0526Z"/>\n              </svg>\n            </div>\n          </div>\n          <div class="tools__item">\n            <div id="play-pause">\n              <svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                \x3c!-- Generator: Sketch 59.1 (86144) - https://sketch.com --\x3e\n                <title>ic_fluent_video_play_pause_24_filled</title>\n                <desc>Created with Sketch.</desc>\n                <g id="üîç-Product-Icons" stroke="none" stroke-width="1" >\n                    <g id="ic_fluent_video_play_pause_24_filled" fill-rule="nonzero">\n                        <path d="M3.65140982,6.61646219 L11.1528787,11.3693959 C11.3672679,11.5052331 11.4827597,11.722675 11.4993749,11.9464385 L11.4984593,7.25 C11.4984593,6.83578644 11.8342458,6.5 12.2484593,6.5 L15.2484593,6.5 C15.6626729,6.5 15.9984593,6.83578644 15.9984593,7.25 L15.9984593,16.75 C15.9984593,17.1642136 15.6626729,17.5 15.2484593,17.5 L12.2484593,17.5 C11.8342458,17.5 11.4984593,17.1642136 11.4984593,16.75 L11.4993494,12.0597632 C11.4826318,12.2835468 11.3670166,12.5009613 11.1525249,12.6366956 L3.65105604,17.3837618 C3.15168144,17.6997752 2.5,17.3409648 2.5,16.75 L2.5,7.25 C2.5,6.65884683 3.15205264,6.30006928 3.65140982,6.61646219 Z M21.2477085,6.50037474 C21.661922,6.50037474 21.9977085,6.83616118 21.9977085,7.25037474 L21.9977085,16.7496253 C21.9977085,17.1638388 21.661922,17.4996253 21.2477085,17.4996253 L18.2477085,17.4996253 C17.8334949,17.4996253 17.4977085,17.1638388 17.4977085,16.7496253 L17.4977085,7.25037474 C17.4977085,6.83616118 17.8334949,6.50037474 18.2477085,6.50037474 L21.2477085,6.50037474 Z" id="üé®-Color"></path>\n                    </g>\n                </g>\n              </svg>\n            </div>\n          </div>\n          <div class="tools__item">\n            <div id="next">\n              <svg   viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path d="M21 4C21 3.44772 20.5523 3 20 3C19.4477 3 19 3.44772 19 4V20C19 20.5523 19.4477 21 20 21C20.5523 21 21 20.5523 21 20V4Z"/>\n                <path d="M3 4.94743C3 3.5226 4.61175 2.69498 5.7697 3.52521L16.2394 11.0318C17.2443 11.7523 17.2053 13.2593 16.1646 13.927L5.69492 20.6434C4.53019 21.3905 3 20.5542 3 19.1704V4.94743Z"/>\n              </svg>\n            </div>\n          </div>\n        </div>\n        <div class="controls">\n          <div class="head"><div class="actions"></div></div>\n          <div class="body">\n            <div class="scale" id="scale" style="--total: ${e}">\n              <div class="scale-s"></div>\n              <div class="scale-100ms"></div>\n              ${i}\n            </div>\n          </div>\n        </div>\n        <div id="pane" class="pane">\n          <div class="head">\n            <div class="rows">\n              ${n}\n            </div>\n          </div>\n          <div id="timeline" class="body">\n            <div class="rows">\n              ${r}\n            </div>\n          </div>\n        </div>\n        <div class="current">\n          <input id="current" type="range" min="0" max="0" step="any" value="0">\n        </div>\n        <div id="progress" class="progress"></div>\n      </div>\n    `}__updateProgressPosition(t){let e=this.$timeline.clientWidth,n=Math.min(t/this.totalTime,1)*e;this.$progress.style.transform=`translateX(${n}px)`}__updateBar(t){let e=this.$timeline.clientWidth/Math.max(...this.axes.map((t=>t.endAt)));for(let t=0;t<this.$bars.length;t++){let n=this.axes[t],r=n.beginAt*e,i=(n.endAt-n.beginAt)*e;this.$bars[t].style.transform=`translateX(${r}px) scaleX(${i})`,0<n.progress&&!n.pass?this.$bars[t].classList.add("bar--active"):this.$bars[t].classList.remove("bar--active")}}};window.customElements.define("taxis-timeline",_t);var bt={key:"",beginAt:0,endAt:0,progress:0,enter:!1,pass:!1,tick:0};const Et={bucketsCount:8};const Tt=function(){const{subscribe:t,set:e,update:n}=H(Et);return{subscribe:t,reset:()=>e(Et),set:t=>e(t)}}(),wt=128,yt=.5;let At=[-1.5,0,0],Rt=[1.5,0,0],Mt=[0,0,0];const Pt=t=>{const e=new lt,n=new class{get totalTime(){return Math.max(...this.__axes.map((t=>t.endAt)))}get everyPassed(){return this.__axes.every((t=>t.pass))}constructor(t){this.__axes=[],this.__handlers={},this.__container=t.container}restart(){this.__beginAt=Date.now()}getAxis({key:t}){return this.__axes.find((e=>e.key===t))}getAxes(){return this.__axes}entered(t){return!!this.__entered.find((e=>e.key===t))}left(t){return!!this.__left.find((e=>e.key===t))}insert(t,e,n=0){return this.__axes.push({...bt,key:t,beginAt:n,endAt:n+e}),this.__axes.sort(((t,e)=>t.beginAt-e.beginAt)),this}interval(t){let e=this.__axes[this.__axes.length-1].endAt;return this.__axes.push({...bt,key:null,beginAt:e,endAt:e+t}),this}append(t,e,n=0){let r=this.__axes[this.__axes.length-1].endAt+n;return this.__axes.push({...bt,key:t,beginAt:r,endAt:r+e}),this}parallel(){}begin(){this.__timeline=new _t(this.__axes,this.totalTime),this.__container.appendChild(this.__timeline),this.__beginAt=Date.now(),this.__tick()}on(t,e){this.__handlers[t]||(this.__handlers[t]=[]),this.__handlers[t].push(e)}reset(){cancelAnimationFrame(this.requestID)}ticker(t){this.__ticker=t}__tick(){let{beginAt:t,elapsedTime:e,dragging:n}=this.__timeline.get(this.__beginAt);this.__beginAt=t,this.__entered=[],this.__left=[],this.__axes.forEach(((t,n)=>{let r=e-t.beginAt,i=t.endAt-t.beginAt,s=Math.max(0,Math.min(r/i,1)),a=t.beginAt<=e,o=t.endAt<e;o&&t.pass,a&&!t.enter&&this.__entered.push(t),0===s&&0<t.progress&&this.__left.push(t),t.progress=s,t.enter=a,t.pass=o,t.tick=r})),n||this.__timeline.update(e,this.totalTime,this.__axes),this.__ticker&&this.__ticker(e,this.__axes),this.requestID=requestAnimationFrame(this.__tick.bind(this))}}({container:document.querySelector("#timeline")});n.insert("Sampling",3e3);for(let t=0;t<o(Tt).bucketsCount;t++)0===t?n.append(`split#${t}`,500,500):n.append(`split#${t}`,500);for(let t=0;t<o(Tt).bucketsCount;t++)n.append(`Average color#${t}`,500);let r;n.append("Mapping",3e3,500);let i=[],s=0,a=-1,l=!1;e.initialize(t);let c,u,h,d,p,g,m,f,x,v,_,b,E=null,T=null,w=[],y=[],A=[],R=[],M=[],P=[],k=[],L=[],C=[],B=[],$=[],U=[],I=[],S=[],D=null,F=null,N=null,O=null,X=null,V=null;const j={distance:7.5,min:1,max:20,move:2},G=new ct(t,j);function q(){e.width=window.innerWidth,e.height=window.innerHeight,window.innerWidth<window.innerHeight?(G.distance=1e3/window.innerHeight*j.distance,At=[0,1.5,0],Rt=[0,-1.5,0],Mt=[0,0,0]):(G.distance=900/window.innerWidth*j.distance,At=[-1.5,0,0],Rt=[1.5,0,0],Mt=[0,0,0])}function H(t){const n=e.gl;let r=ut.mat4.identity(ut.mat4.create());r=ut.mat4.translate(r,t);const i=ut.mat4.multiply(V,r);n.uniformMatrix4fv(D.mvpMatrix,!1,i)}function z(t){const n=e.gl;let r=ut.mat4.identity(ut.mat4.create());r=ut.mat4.translate(r,t),n.uniformMatrix4fv(F.mMatrix,!1,r);const i=ut.mat4.multiply(V,r);n.uniformMatrix4fv(F.mvpMatrix,!1,i)}e.width=window.innerWidth,e.height=window.innerHeight,q(),window.addEventListener("resize",q),window.Promise.resolve().then((t=>{t=o(Y).file;const n=document.createElement("canvas");n.width=wt,n.height=wt;const s=n.getContext("2d");s.drawImage(t,0,0,t.width,t.height,0,0,wt,wt),_=s.getImageData(0,0,n.width,n.height),r=new xt(_,{strict:!0}),b=r.reduce(o(Tt).bucketsCount),i=r.bucketsPerStep,N=e.createTexture(t,e.gl.TEXTURE0),e.createTexture(b,e.gl.TEXTURE1)})).then((()=>window.Promise.all([lt.loadFile("./shader/main.vert"),lt.loadFile("./shader/main.frag"),lt.loadFile("./shader/sub.vert"),lt.loadFile("./shader/sub.frag")]))).then((t=>{const[r,j,q,Y]=t,W=e.createShaderObject(r,e.gl.VERTEX_SHADER),J=e.createShaderObject(j,e.gl.FRAGMENT_SHADER);E=e.createProgramObject(W,J);const K=e.createShaderObject(q,e.gl.VERTEX_SHADER),Q=e.createShaderObject(Y,e.gl.FRAGMENT_SHADER);T=e.createProgramObject(K,Q),e.program=E;const tt=e.gl;tt.enable(tt.DEPTH_TEST),tt.disable(tt.CULL_FACE),tt.enable(tt.BLEND),tt.blendFuncSeparate(tt.SRC_ALPHA,tt.ONE_MINUS_SRC_ALPHA,tt.ONE,tt.ONE),c=mt.plane(1,1,0,[1,.1,0,1]),u=[e.createVBO(c.position),e.createVBO(c.color),e.createVBO(c.texCoord)],h=e.createIBO(c.index),d=mt.plane(1,1,0,[1,.1,0,1]),e.createVBO(d.position),e.createVBO(d.color),e.createVBO(d.texCoord),e.createIBO(d.index),function(){const t=_.data.length/4;for(let e=0;e<t;e++){const t=_.data[4*e],n=_.data[4*e+1],r=_.data[4*e+2],i=_.data[4*e+3],s=e,a=s%_.width,o=Math.floor(s/_.width);k.push(a/wt-yt+At[0],-1*(o/wt-yt)+At[1],At[2]),L.push(t/255-yt+Mt[0],n/255-yt+Mt[1],r/255-yt+Mt[2]),C.push(t/255,n/255,r/255,i/255)}B=[e.createVBO(k),e.createVBO(L),e.createVBO(C)]}(),function(){const t=_.data.length/4;for(let e=0;e<t;e++){const t=_.data[4*e],n=_.data[4*e+1],r=_.data[4*e+2];_.data[4*e+3];const i=e,s=i%_.width,a=Math.floor(i/_.width);$.push(t/255-yt+Mt[0],n/255-yt+Mt[1],r/255-yt+Mt[2]),U.push(s/wt-yt+Rt[0],-1*(a/wt-yt)+Rt[1],Rt[2]);const o=b.data[4*e],l=b.data[4*e+1],c=b.data[4*e+2],u=b.data[4*e+3];I.push(o/255,l/255,c/255,u/255)}S=[e.createVBO($),e.createVBO(U),e.createVBO(I)]}(),i.forEach(((t,n)=>{w[n]=[],y[n]=[],A[n]=[],R[n]=[],M[n]=[],P[n]=[],t.forEach(((t,r)=>{const{total:s,colors:a,channel:o,minR:l,minG:c,minB:u,maxR:h,maxG:d,maxB:p}=i[n][r],g=(h-l)/255,m=(d-c)/255,f=(p-u)/255,x=xt.averageColor(a),v=mt.box(g,m,f,[x[0]/255,x[1]/255,x[2]/255,.8]),_=mt.boxLine(g,m,f,[.65,.65,.65,1]);M[n][r]=_,P[n][r]=[e.createVBO(_.position),e.createVBO(_.color)],w[n][r]=v,y[n][r]=[l/255-(1-g)/2,c/255-(1-m)/2,u/255-(1-f)/2],A[n][r]=[e.createVBO(v.position),e.createVBO(v.color)],R[n][r]=e.createIBO(v.index)}))})),p=mt.axis(10,[.45,.45,.45,1]),g=[e.createVBO(p.position),e.createVBO(p.color)],function(){const t=e.gl;e.program=E,m=[t.getAttribLocation(e.program,"position"),t.getAttribLocation(e.program,"color"),t.getAttribLocation(e.program,"texCoord")],f=[3,4,2],D={mvpMatrix:t.getUniformLocation(e.program,"mvpMatrix"),textureUnit:t.getUniformLocation(e.program,"textureUnit"),isTexture:t.getUniformLocation(e.program,"isTexture")}}(),function(){const t=e.gl;e.program=T,x=[t.getAttribLocation(e.program,"fromPosition"),t.getAttribLocation(e.program,"toPosition"),t.getAttribLocation(e.program,"color")],v=[3,3,4],F={mMatrix:t.getUniformLocation(e.program,"mMatrix"),mvpMatrix:t.getUniformLocation(e.program,"mvpMatrix"),interporation:t.getUniformLocation(e.program,"interporation"),eyePosition:t.getUniformLocation(e.program,"eyePosition")}}(),n.begin(),function(){const t=e.gl;let r=0;n.ticker(((i,d)=>{n.entered("split#0")&&(l=!0,r=1),n.left("split#0")&&(l=!1,r=0),n.entered("Average color#0")&&(r=2),n.left("Average color#0")&&(r=1),n.entered("Mapping")&&(r=3);for(let t=0;t<o(Tt).bucketsCount;t++)n.entered(`split#${t}`)&&s<t&&(s=t),n.entered(`Average color#${t}`)&&a<t&&(a=t),n.left(`split#${t}`)&&t<=s&&(s=t-1),n.left(`Average color#${t}`)&&t<=a&&(a=t-1);Z.update(r),function(){const t=e.gl;t.viewport(0,0,e.width,e.height),t.clearColor(.1,.12,.14,1),t.clear(t.COLOR_BUFFER_BIT),O=G.update();const n=45,r=e.width/e.height,i=.1,s=20;X=ut.mat4.perspective(n,r,i,s),V=ut.mat4.multiply(X,O)}(),e.program=T,t.uniform3fv(F.eyePosition,G.position),function(t){const r=e.gl,i=n.getAxis({key:"Sampling"});r.uniform1f(F.interporation,i.progress),e.enableAttribute(B,x,v),z(t),r.drawArrays(r.POINTS,0,L.length/3)}([0,0,0]),function(t){const r=e.gl,i=n.getAxis({key:"Mapping"});if(0===i.progress)return;r.uniform1f(F.interporation,i.progress),e.enableAttribute(S,x,v),z(t),r.drawArrays(r.POINTS,0,U.length/3)}([0,0,0]),e.program=E,function(){const t=e.gl;t.uniform1i(D.isTexture,0),t.disableVertexAttribArray(m[2]),e.enableAttribute(g,m,f),H([0,0,0]),t.drawArrays(t.LINES,0,p.position.length/3)}(),function(t){const n=e.gl;e.enableAttribute(u,m,f),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,h),n.activeTexture(e.gl.TEXTURE0),n.bindTexture(e.gl.TEXTURE_2D,N),n.uniform1i(D.textureUnit,0),n.uniform1i(D.isTexture,1),n.enableVertexAttribArray(m[2]),H(t),n.drawElements(n.TRIANGLES,c.index.length,n.UNSIGNED_SHORT,0)}(At),l&&(function(t){const n=e.gl;n.disableVertexAttribArray(m[2]),n.uniform1i(D.isTexture,0);for(let r=0;r<w[s].length;r++){e.enableAttribute(P[s][r],m,f);H([t[0]+y[s][r][0],t[1]+y[s][r][1],t[2]+y[s][r][2]]),n.drawArrays(n.LINES,0,M[s][r].position.length/3)}}(Mt),-1<a&&function(t){const n=e.gl;n.disableVertexAttribArray(m[2]),n.uniform1i(D.isTexture,0);const r=w.length-1;for(let i=0;i<=a;i++){e.enableAttribute(A[r][i],m,f),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,R[r][i]);H([t[0]+y[r][i][0],t[1]+y[r][i][1],t[2]+y[r][i][2]]),n.drawElements(n.TRIANGLES,w[r][i].index.length,n.UNSIGNED_SHORT,0)}}(Mt))}))}()}))};function kt(e){let n;return{c(){n=g("canvas"),v(n,"class","w-full h-full")},m(t,r){h(t,n,r),e[1](n)},p:t,i:t,o:t,d(t){t&&d(n),e[1](null)}}}function Lt(t,e,n){let r;return w((()=>{Pt(r)})),[r,function(t){A[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class Ct extends G{constructor(t){super(),j(this,t,Lt,kt,s,{})}}function Bt(e){let n,i,s,a,o,l,c,p,m,_,b,E,T,w,y,A,R,M,P,k,L,C,B,$,U,I,S,D,F,N,O,X,V,j,G,q,H;return{c(){n=g("div"),i=g("div"),i.innerHTML='<div class="w-full h-full"><div id="upload-area" class="h-full flex flex-col justify-center relative shadow-lg sm:overflow-hidden"><div class="absolute inset-0"><div class="h-full w-full bg-gray-100"></div></div> \n        <div class="relative px-4 py-16 sm:px-6 sm:py-24 lg:py-32 lg:px-8"><h1 class="text-center text-4xl font-extrabold tracking-tight sm:text-5xl lg:text-6xl"><span class="block text-gray-800">Visualize color reduction</span> \n            <span class="block text-gray-500">Any image you like.</span></h1> \n          <p class="mt-6 max-w-lg mx-auto text-center text-xl text-gray-500 sm:max-w-4xl">The logic of color reduction is difficult.\n            I hope that visualizing it will help you understand it.\n            Implemented with reference to Median cut.\n            It is implemented using webgl.<br/>\n            Sorry, maybe only chrome is supported.</p> \n\n          <div id="upload" class="px-4 py-8 sm:px-0"><form action=""><div class="sm:mt-0 sm:col-span-2"><div class="text-center"><svg class="mx-auto h-12 w-12 text-gray-500" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> \n                  <p class="mt-1 text-sm text-gray-500"><label id="original-image-label" for="original-image-file" class="cursor-pointer font-medium text-pink-600 hover:text-pink-500 focus:outline-none focus:underline transition duration-150 ease-in-out">Upload a file\n                      <input type="file" id="original-image-file" class="hidden"/></label>\n                    or drag and drop</p> \n                  <p class="mt-1 text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p></div></div></form></div></div></div></div>',s=f(),a=g("div"),o=g("div"),l=g("p"),l.textContent="Or try one of these:",c=f(),p=g("div"),m=g("div"),_=g("img"),E=f(),T=g("span"),T.innerHTML='Photo by <a href="https://unsplash.com/@vincentledvina?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Vincent Ledvina</a>\n            on\n            <a href="https://unsplash.com/s/visual/4050ed5c-59f1-4b72-965f-8d82efcfbc94?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>',w=f(),y=g("div"),A=g("img"),M=f(),P=g("span"),P.innerHTML='Photo by <a href="https://unsplash.com/@greysonjoralemon?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Greyson Joralemon</a>\n            on\n            <a href="https://unsplash.com/s/photos/colorful?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>',k=f(),L=g("div"),C=g("img"),$=f(),U=g("span"),U.innerHTML='Photo by <a href="https://unsplash.com/@jezael?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Jezael Melgoza</a>\n            on\n            <a href="https://unsplash.com/s/photos/japan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>',I=f(),S=g("div"),D=g("img"),N=f(),O=g("span"),O.innerHTML='Photo by <a href="https://unsplash.com/@jannerboy62?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Nick Fewings</a>\n            on\n            <a href="https://unsplash.com/s/photos/red?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>',X=f(),V=g("div"),j=g("img"),v(i,"class","relative flex-grow"),v(l,"class","text-center text-sm font-semibold uppercase text-gray-500 tracking-wide"),_.src!==(b="./assets/bison.jpg")&&v(_,"src","./assets/bison.jpg"),v(_,"alt",""),v(_,"class","cursor-pointer"),v(m,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),A.src!==(R="./assets/colorful.jpg")&&v(A,"src","./assets/colorful.jpg"),v(A,"alt",""),v(A,"class","cursor-pointer"),v(y,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),C.src!==(B="./assets/shibuya.jpg")&&v(C,"src","./assets/shibuya.jpg"),v(C,"alt",""),v(C,"class","cursor-pointer"),v(L,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),D.src!==(F="./assets/telephone_booth.jpg")&&v(D,"src","./assets/telephone_booth.jpg"),v(D,"alt",""),v(D,"class","cursor-pointer"),v(S,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),j.src!==(G="./assets/pineapple.jpg")&&v(j,"src","./assets/pineapple.jpg"),v(j,"alt",""),v(j,"class","cursor-pointer"),v(V,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),v(p,"class","mt-6 grid grid-cols-2 gap-8 md:grid-cols-6 lg:grid-cols-5"),v(o,"class","max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8"),v(a,"class","bg-gray-100"),v(n,"class","h-full flex flex-col")},m(t,r){h(t,n,r),u(n,i),u(n,s),u(n,a),u(a,o),u(o,l),u(o,c),u(o,p),u(p,m),u(m,_),u(m,E),u(m,T),u(p,w),u(p,y),u(y,A),u(y,M),u(y,P),u(p,k),u(p,L),u(L,C),u(L,$),u(L,U),u(p,I),u(p,S),u(S,D),u(S,N),u(S,O),u(p,X),u(p,V),u(V,j),q||(H=[x(_,"click",e[0]),x(A,"click",e[0]),x(C,"click",e[0]),x(D,"click",e[0]),x(j,"click",e[0])],q=!0)},p:t,i:t,o:t,d(t){t&&d(n),q=!1,r(H)}}}function $t(t,e,n){let r;l(t,Y,(t=>n(1,r=t))),w((()=>{const t=document.getElementById("upload-area");t.addEventListener("change",(t=>{e({e:t,data:void 0,callback:t=>{c(Y,r.file=t,r)}})})),t.addEventListener("drop",(t=>{t.preventDefault(),e({e:t,data:t.dataTransfer.files[0],callback:t=>{c(Y,r.file=t,r)}})})),t.addEventListener("dragenter",(t=>{t.preventDefault()})),t.addEventListener("dragover",(t=>{t.preventDefault()})),t.addEventListener("dragleave",(t=>{t.preventDefault()}));const e=({e:t,data:e,callback:n})=>{let r=void 0===e?t.target.files[0]:e;if(!r.type.match(/^image\/(png|jpg|jpeg|gif)$/))return;if(10485760<=r.size)return;let i=new Image,s=new FileReader;s.onload=t=>{let e=t.target.result;i.onload=()=>{n(i)},i.src=e},s.readAsDataURL(r)}}));return[t=>{c(Y,r.file=t.currentTarget,r)}]}class Ut extends G{constructor(t){super(),j(this,t,$t,Bt,s,{})}}function It(e){let n,r,i,s,a,o,l,c,u,p,m;return n=new Ct({props:{class:"w-full h-full"}}),s=new ot({}),{c(){N(n.$$.fragment),r=f(),i=g("div"),N(s.$$.fragment),a=f(),o=g("div"),o.innerHTML='<div id="timeline" class="h-full"></div>',l=f(),c=g("div"),c.innerHTML='<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-8 text-gray-800"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',v(i,"class","fixed right-8 top-8"),v(o,"class","fixed left-0 right-0 bottom-0 h-1/5"),v(c,"class","fixed left-8 top-8 bg-gray-100 p-2 cursor-pointer rounded-full")},m(t,d){O(n,t,d),h(t,r,d),h(t,i,d),O(s,i,null),h(t,a,d),h(t,o,d),h(t,l,d),h(t,c,d),u=!0,p||(m=x(c,"click",e[1]),p=!0)},p:t,i(t){u||(D(n.$$.fragment,t),D(s.$$.fragment,t),u=!0)},o(t){F(n.$$.fragment,t),F(s.$$.fragment,t),u=!1},d(t){X(n,t),t&&d(r),t&&d(i),X(s),t&&d(a),t&&d(o),t&&d(l),t&&d(c),p=!1,m()}}}function St(e){let n,r;return n=new Ut({}),{c(){N(n.$$.fragment)},m(t,e){O(n,t,e),r=!0},p:t,i(t){r||(D(n.$$.fragment,t),r=!0)},o(t){F(n.$$.fragment,t),r=!1},d(t){X(n,t)}}}function Dt(t){let e,n,i,s;const a=[St,It],o=[];function l(t,e){return t[0].file?1:0}return n=l(t),i=o[n]=a[n](t),{c(){e=g("main"),i.c(),v(e,"class","w-full h-full")},m(t,r){h(t,e,r),o[n].m(e,null),s=!0},p(t,[s]){let c=n;n=l(t),n===c?o[n].p(t,s):(S={r:0,c:[],p:S},F(o[c],1,1,(()=>{o[c]=null})),S.r||r(S.c),S=S.p,i=o[n],i?i.p(t,s):(i=o[n]=a[n](t),i.c()),D(i,1),i.m(e,null))},i(t){s||(D(i),s=!0)},o(t){F(i),s=!1},d(t){t&&d(e),o[n].d()}}}function Ft(t,e,n){let r;l(t,Y,(t=>n(0,r=t)));return[r,()=>{c(Y,r.file=null,r)}]}return new class extends G{constructor(t){super(),j(this,t,Ft,Dt,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
