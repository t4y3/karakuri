var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function o(t){let e;return a(t,(t=>e=t))(),e}function l(t,e,n){t.$$.on_destroy.push(a(e,n))}function c(t,e,n=e){return t.set(n),e}function h(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function g(){return t=" ",document.createTextNode(t);var t}function m(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let x;function _(t){x=t}function v(t){(function(){if(!x)throw new Error("Function called outside component initialization");return x})().$$.on_mount.push(t)}const b=[],E=[],T=[],A=[],y=Promise.resolve();let w=!1;function M(t){T.push(t)}let R=!1;const P=new Set;function k(){if(!R){R=!0;do{for(let t=0;t<b.length;t+=1){const e=b[t];_(e),C(e.$$)}for(_(null),b.length=0;E.length;)E.pop()();for(let t=0;t<T.length;t+=1){const e=T[t];P.has(e)||(P.add(e),e())}T.length=0}while(b.length);for(;A.length;)A.pop()();w=!1,R=!1,P.clear()}}function C(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const L=new Set;let I;function B(t,e){t&&t.i&&(L.delete(t),t.i(e))}function U(t,e,n,r){if(t&&t.o){if(L.has(t))return;L.add(t),I.c.push((()=>{L.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function $(t){t&&t.c()}function S(t,n,s){const{fragment:a,on_mount:o,on_destroy:l,after_update:c}=t.$$;a&&a.m(n,s),M((()=>{const n=o.map(e).filter(i);l?l.push(...n):r(n),t.$$.on_mount=[]})),c.forEach(M)}function D(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function F(t,e){-1===t.$$.dirty[0]&&(b.push(t),w||(w=!0,y.then(k)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function N(e,i,s,a,o,l,c=[-1]){const h=x;_(e);const u=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let p=!1;if(u.ctx=s?s(e,i.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return u.ctx&&o(u.ctx[t],u.ctx[t]=i)&&(!u.skip_bound&&u.bound[t]&&u.bound[t](i),p&&F(e,t)),n})):[],u.update(),p=!0,r(u.before_update),u.fragment=!!a&&a(u.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);u.fragment&&u.fragment.l(t),t.forEach(d)}else u.fragment&&u.fragment.c();i.intro&&B(e.$$.fragment),S(e,i.target,i.anchor),k()}_(h)}class O{$destroy(){D(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const X=[];function V(e,n=t){let r;const i=[];function a(t){if(s(e,t)&&(e=t,r)){const t=!X.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),X.push(n,e)}if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(s,o=t){const l=[s,o];return i.push(l),1===i.length&&(r=n(a)||t),s(e),()=>{const t=i.indexOf(l);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}const j={file:null};const q=function(){const{subscribe:t,set:e,update:n}=V(j);return{subscribe:t,reset:()=>e(j),set:t=>e(t)}}();class G{static loadFile(t){return new Promise(((e,n)=>{fetch(t).then((t=>t.text())).then((t=>{e(t)})).catch((t=>{n(t)}))}))}set width(t){this.canvas.width=t}get width(){return this.canvas.width}set height(t){this.canvas.height=t}get height(){return this.canvas.height}set program(t){this.gl.useProgram(t),this.currentProgram=t}get program(){return this.currentProgram}constructor(){this.canvas=null,this.gl=null,this.currentProgram=null}initialize(t,e){if(this.canvas=t,this.gl=this.canvas.getContext("webgl"+(!0===e?"2":"")),null==this.gl)throw new Error("webgl not supported")}createShaderObject(t,e){const n=this.gl,r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS))return r;throw new Error(n.getShaderInfoLog(r))}createProgramObject(t,e){const n=this.gl,r=n.createProgram();if(n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),n.deleteShader(t),n.deleteShader(e),n.getProgramParameter(r,n.LINK_STATUS))return n.useProgram(r),r;throw new Error(n.getProgramInfoLog(r))}createProgramObjectTF(t,e,n){const r=this.gl,i=r.createProgram();if(r.attachShader(i,t),r.attachShader(i,e),r.transformFeedbackVaryings(i,n,r.SEPARATE_ATTRIBS),r.linkProgram(i),r.deleteShader(t),r.deleteShader(e),r.getProgramParameter(i,r.LINK_STATUS))return r.useProgram(i),i;throw new Error(r.getProgramInfoLog(i))}createVBO(t){const e=this.gl,n=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),n}createIBO(t){const e=this.gl,n=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Int16Array(t),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),n}enableAttribute(t,e,n){const r=this.gl;t.forEach(((t,i)=>{r.bindBuffer(r.ARRAY_BUFFER,t),r.enableVertexAttribArray(e[i]),r.vertexAttribPointer(e[i],n[i],r.FLOAT,!1,0,0)}))}createTexture(t,e){const n=this.gl,r=n.createTexture();return n.activeTexture(e),n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.generateMipmap(n.TEXTURE_2D),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null),r}createCubeTextureFromFile(t,e){return new Promise((n=>{const r=this.gl,i=r.createTexture();r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_CUBE_MAP,i);const s=t.map(((t,n)=>new Promise((i=>{const s=new Image;s.addEventListener("load",(()=>{r.texImage2D(e[n],0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,s),i()}),!1),s.src=t}))));Promise.all(s).then((()=>{r.generateMipmap(r.TEXTURE_CUBE_MAP),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_CUBE_MAP,null),n(i)}))}))}createFramebuffer(t,e){const n=this.gl,r=n.createFramebuffer(),i=n.createRenderbuffer(),s=n.createTexture();return n.bindFramebuffer(n.FRAMEBUFFER,r),n.bindRenderbuffer(n.RENDERBUFFER,i),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t,e),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,i),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,e,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,s,0),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),{framebuffer:r,depthRenderbuffer:i,texture:s}}}class H{static get DEFAULT_DISTANCE(){return 5}static get DEFAULT_MIN_DISTANCE(){return 1}static get DEFAULT_MAX_DISTANCE(){return 10}static get DEFAULT_MOVE_SCALE(){return 2}constructor(t,e={}){this.target=t,this.distance=e.distance||H.DEFAULT_DISTANCE,this.minDistance=e.min||H.DEFAULT_MIN_DISTANCE,this.maxDistance=e.max||H.DEFAULT_MAX_DISTANCE,this.moveScale=e.move||H.DEFAULT_MOVE_SCALE,this.position=[0,0,this.distance],this.center=[0,0,0],this.upDirection=[0,1,0],this.moveX=[1,0,0],this.moveZ=[0,0,1],this.defaultPosition=[0,0,this.distance],this.defaultCenter=[0,0,0],this.defaultUpDirection=[0,1,0],this.defaultMoveX=[1,0,0],this.defaultMoveZ=[0,0,1],this.movePosition=[0,0,0],this.rotateX=0,this.rotateY=0,this.scale=0,this.isDown=!1,this.prevPosition=[0,0],this.offsetPosition=[0,0],this.qt=J.create(),this.qtx=J.create(),this.qty=J.create(),this.mouseInteractionStart=this.mouseInteractionStart.bind(this),this.mouseInteractionMove=this.mouseInteractionMove.bind(this),this.mouseInteractionEnd=this.mouseInteractionEnd.bind(this),this.wheelScroll=this.wheelScroll.bind(this),this.target.addEventListener("mousedown",this.mouseInteractionStart,!1),this.target.addEventListener("mousemove",this.mouseInteractionMove,!1),this.target.addEventListener("mouseup",this.mouseInteractionEnd,!1),this.target.addEventListener("contextmenu",(t=>{t.preventDefault()}),!1)}mouseInteractionStart(t){this.isDown=!0;const e=this.target.getBoundingClientRect();this.prevPosition=[t.clientX-e.left,t.clientY-e.top]}mouseInteractionMove(t){if(!0!==this.isDown)return;const e=this.target.getBoundingClientRect(),n=e.width,r=e.height,i=t.clientX-e.left,s=t.clientY-e.top,a=1/Math.min(n,r);switch(this.offsetPosition=[i-this.prevPosition[0],s-this.prevPosition[1]],this.prevPosition=[i,s],t.buttons){case 1:this.rotateX+=this.offsetPosition[0]*a,this.rotateY+=this.offsetPosition[1]*a,this.rotateX=this.rotateX%1,this.rotateY=Math.min(Math.max(this.rotateY%1,-.25),.25);break;case 2:const t=2*Math.PI,e=this.offsetPosition[0]*a*this.moveScale,n=this.offsetPosition[1]*a*this.moveScale,r=this.defaultMoveX.slice(),i=this.defaultMoveZ.slice(),s=J.identity(J.create());J.rotate(this.rotateX*t,[0,1,0],s),J.toVecIII(r,s,this.moveX),J.toVecIII(i,s,this.moveZ),this.movePosition[0]-=this.moveX[0]*e+this.moveZ[0]*n,this.movePosition[2]-=this.moveX[2]*e+this.moveZ[2]*n}}mouseInteractionEnd(t){this.isDown=!1}wheelScroll(t){const e=t.wheelDelta;e>0?this.scale=-.5:e<0&&(this.scale=.5)}update(){const t=2*Math.PI,e=[1,0,0];return this.scale*=.7,this.distance+=this.scale,this.distance=Math.min(Math.max(this.distance,this.minDistance),this.maxDistance),this.defaultPosition[2]=this.distance,J.identity(this.qt),J.identity(this.qtx),J.identity(this.qty),J.rotate(this.rotateX*t,[0,1,0],this.qtx),J.toVecIII(e,this.qtx,e),J.rotate(this.rotateY*t,e,this.qty),J.multiply(this.qtx,this.qty,this.qt),J.toVecIII(this.defaultPosition,this.qt,this.position),J.toVecIII(this.defaultUpDirection,this.qt,this.upDirection),this.position[0]+=this.movePosition[0],this.position[1]+=this.movePosition[1],this.position[2]+=this.movePosition[2],this.center[0]=this.defaultCenter[0]+this.movePosition[0],this.center[1]=this.defaultCenter[1]+this.movePosition[1],this.center[2]=this.defaultCenter[2]+this.movePosition[2],Y.lookAt(this.position,this.center,this.upDirection)}}class z{static get mat4(){return Y}static get vec3(){return W}static get vec2(){return Z}static get qtn(){return J}}class Y{static create(){return new Float32Array(16)}static identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static multiply(t,e,n){let r=n;null==n&&(r=Y.create());let i=t[0],s=t[1],a=t[2],o=t[3],l=t[4],c=t[5],h=t[6],u=t[7],d=t[8],p=t[9],g=t[10],m=t[11],f=t[12],x=t[13],_=t[14],v=t[15],b=e[0],E=e[1],T=e[2],A=e[3],y=e[4],w=e[5],M=e[6],R=e[7],P=e[8],k=e[9],C=e[10],L=e[11],I=e[12],B=e[13],U=e[14],$=e[15];return r[0]=b*i+E*l+T*d+A*f,r[1]=b*s+E*c+T*p+A*x,r[2]=b*a+E*h+T*g+A*_,r[3]=b*o+E*u+T*m+A*v,r[4]=y*i+w*l+M*d+R*f,r[5]=y*s+w*c+M*p+R*x,r[6]=y*a+w*h+M*g+R*_,r[7]=y*o+w*u+M*m+R*v,r[8]=P*i+k*l+C*d+L*f,r[9]=P*s+k*c+C*p+L*x,r[10]=P*a+k*h+C*g+L*_,r[11]=P*o+k*u+C*m+L*v,r[12]=I*i+B*l+U*d+$*f,r[13]=I*s+B*c+U*p+$*x,r[14]=I*a+B*h+U*g+$*_,r[15]=I*o+B*u+U*m+$*v,r}static scale(t,e,n){let r=n;return null==n&&(r=Y.create()),r[0]=t[0]*e[0],r[1]=t[1]*e[0],r[2]=t[2]*e[0],r[3]=t[3]*e[0],r[4]=t[4]*e[1],r[5]=t[5]*e[1],r[6]=t[6]*e[1],r[7]=t[7]*e[1],r[8]=t[8]*e[2],r[9]=t[9]*e[2],r[10]=t[10]*e[2],r[11]=t[11]*e[2],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}static translate(t,e,n){let r=n;return null==n&&(r=Y.create()),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12],r[13]=t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13],r[14]=t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14],r[15]=t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15],r}static rotate(t,e,n,r){let i=r;null==r&&(i=Y.create());let s=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);if(!s)return null;let a=n[0],o=n[1],l=n[2];1!=s&&(s=1/s,a*=s,o*=s,l*=s);let c=Math.sin(e),h=Math.cos(e),u=1-h,d=t[0],p=t[1],g=t[2],m=t[3],f=t[4],x=t[5],_=t[6],v=t[7],b=t[8],E=t[9],T=t[10],A=t[11],y=a*a*u+h,w=o*a*u+l*c,M=l*a*u-o*c,R=a*o*u-l*c,P=o*o*u+h,k=l*o*u+a*c,C=a*l*u+o*c,L=o*l*u-a*c,I=l*l*u+h;return e?t!=i&&(i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]):i=t,i[0]=d*y+f*w+b*M,i[1]=p*y+x*w+E*M,i[2]=g*y+_*w+T*M,i[3]=m*y+v*w+A*M,i[4]=d*R+f*P+b*k,i[5]=p*R+x*P+E*k,i[6]=g*R+_*P+T*k,i[7]=m*R+v*P+A*k,i[8]=d*C+f*L+b*I,i[9]=p*C+x*L+E*I,i[10]=g*C+_*L+T*I,i[11]=m*C+v*L+A*I,i}static lookAt(t,e,n,r){let i=t[0],s=t[1],a=t[2],o=e[0],l=e[1],c=e[2],h=n[0],u=n[1],d=n[2];if(i==o&&s==l&&a==c)return Y.identity(r);let p,g,m,f,x,_,v,b,E,T,A=r;return null==r&&(A=Y.create()),v=i-e[0],b=s-e[1],E=a-e[2],T=1/Math.sqrt(v*v+b*b+E*E),v*=T,b*=T,E*=T,p=u*E-d*b,g=d*v-h*E,m=h*b-u*v,T=Math.sqrt(p*p+g*g+m*m),T?(T=1/T,p*=T,g*=T,m*=T):(p=0,g=0,m=0),f=b*m-E*g,x=E*p-v*m,_=v*g-b*p,T=Math.sqrt(f*f+x*x+_*_),T?(T=1/T,f*=T,x*=T,_*=T):(f=0,x=0,_=0),A[0]=p,A[1]=f,A[2]=v,A[3]=0,A[4]=g,A[5]=x,A[6]=b,A[7]=0,A[8]=m,A[9]=_,A[10]=E,A[11]=0,A[12]=-(p*i+g*s+m*a),A[13]=-(f*i+x*s+_*a),A[14]=-(v*i+b*s+E*a),A[15]=1,A}static perspective(t,e,n,r,i){let s=i;null==i&&(s=Y.create());let a=n*Math.tan(t*Math.PI/360),o=2*(a*e),l=2*a,c=r-n;return s[0]=2*n/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*n/l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=-(r+n)/c,s[11]=-1,s[12]=0,s[13]=0,s[14]=-r*n*2/c,s[15]=0,s}static ortho(t,e,n,r,i,s,a){let o=a;null==a&&(o=Y.create());let l=e-t,c=n-r,h=s-i;return o[0]=2/l,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2/c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-2/h,o[11]=0,o[12]=-(t+e)/l,o[13]=-(n+r)/c,o[14]=-(s+i)/h,o[15]=1,o}static transpose(t,e){let n=e;return null==e&&(n=Y.create()),n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15],n}static inverse(t,e){let n=e;null==e&&(n=Y.create());let r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],c=t[6],h=t[7],u=t[8],d=t[9],p=t[10],g=t[11],m=t[12],f=t[13],x=t[14],_=t[15],v=r*l-i*o,b=r*c-s*o,E=r*h-a*o,T=i*c-s*l,A=i*h-a*l,y=s*h-a*c,w=u*f-d*m,M=u*x-p*m,R=u*_-g*m,P=d*x-p*f,k=d*_-g*f,C=p*_-g*x,L=1/(v*C-b*k+E*P+T*R-A*M+y*w);return n[0]=(l*C-c*k+h*P)*L,n[1]=(-i*C+s*k-a*P)*L,n[2]=(f*y-x*A+_*T)*L,n[3]=(-d*y+p*A-g*T)*L,n[4]=(-o*C+c*R-h*M)*L,n[5]=(r*C-s*R+a*M)*L,n[6]=(-m*y+x*E-_*b)*L,n[7]=(u*y-p*E+g*b)*L,n[8]=(o*k-l*R+h*w)*L,n[9]=(-r*k+i*R-a*w)*L,n[10]=(m*A-f*E+_*v)*L,n[11]=(-u*A+d*E-g*v)*L,n[12]=(-o*P+l*M-c*w)*L,n[13]=(r*P-i*M+s*w)*L,n[14]=(-m*T+f*b-x*v)*L,n[15]=(u*T-d*b+p*v)*L,n}static toVecIV(t,e){let n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8],u=t[9],d=t[10],p=t[11],g=t[12],m=t[13],f=t[14],x=t[15],_=e[0],v=e[1],b=e[2],E=e[3],T=[];return T[0]=_*n+v*a+b*h+E*g,T[1]=_*r+v*o+b*u+E*m,T[2]=_*i+v*l+b*d+E*f,T[3]=_*s+v*c+b*p+E*x,e=T,T}static vpFromCameraProperty(t,e,n,r,i,s,a,o,l,c){Y.lookAt(t,e,n,o),Y.perspective(r,i,s,a,l),Y.multiply(l,o,c)}static screenPositionFromMvp(t,e,n,r){let i=.5*n,s=.5*r,a=Y.toVecIV(t,[e[0],e[1],e[2],1]);return a[3]<=0?[NaN,NaN]:(a[0]/=a[3],a[1]/=a[3],a[2]/=a[3],[i+a[0]*i,s-a[1]*s])}}class W{static create(){return new Float32Array(3)}static len(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}static distance(t,e){let n=W.create();return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}static normalize(t){let e=W.create(),n=W.len(t);if(n>0){let r=1/n;e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r}else e[0]=0,e[1]=0,e[2]=0;return e}static dot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}static cross(t,e){let n=W.create();return n[0]=t[1]*e[2]-t[2]*e[1],n[1]=t[2]*e[0]-t[0]*e[2],n[2]=t[0]*e[1]-t[1]*e[0],n}static faceNormal(t,e,n){let r=W.create(),i=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],s=[n[0]-t[0],n[1]-t[1],n[2]-t[2]];return r[0]=i[1]*s[2]-i[2]*s[1],r[1]=i[2]*s[0]-i[0]*s[2],r[2]=i[0]*s[1]-i[1]*s[0],W.normalize(r)}}class Z{static create(){return new Float32Array(2)}static len(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}static distance(t,e){let n=Z.create();return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}static normalize(t){let e=Z.create(),n=Z.len(t);if(n>0){let r=1/n;e[0]=t[0]*r,e[1]=t[1]*r}return e}static dot(t,e){return t[0]*e[0]+t[1]*e[1]}static cross(t,e){return Z.create(),t[0]*e[1]-t[1]*e[0]}}class J{static create(){return new Float32Array(4)}static identity(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}static inverse(t,e){let n=e;return null==e&&(n=J.create()),n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n}static normalize(t){let e=t[0],n=t[1],r=t[2],i=Math.sqrt(e*e+n*n+r*r);return 0===i?(t[0]=0,t[1]=0,t[2]=0):(i=1/i,t[0]=e*i,t[1]=n*i,t[2]=r*i),t}static multiply(t,e,n){let r=n;null==n&&(r=J.create());let i=t[0],s=t[1],a=t[2],o=t[3],l=e[0],c=e[1],h=e[2],u=e[3];return r[0]=i*u+o*l+s*h-a*c,r[1]=s*u+o*c+a*l-i*h,r[2]=a*u+o*h+i*c-s*l,r[3]=o*u-i*l-s*c-a*h,r}static rotate(t,e,n){let r=n;null==n&&(r=J.create());let i=e[0],s=e[1],a=e[2],o=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);if(0!==o){let t=1/o;i*=t,s*=t,a*=t}let l=Math.sin(.5*t);return r[0]=i*l,r[1]=s*l,r[2]=a*l,r[3]=Math.cos(.5*t),r}static toVecIII(t,e,n){let r=n;null==n&&(r=[0,0,0]);let i=J.create(),s=J.create(),a=J.create();return J.inverse(e,a),i[0]=t[0],i[1]=t[1],i[2]=t[2],J.multiply(a,i,s),J.multiply(s,e,a),r[0]=a[0],r[1]=a[1],r[2]=a[2],r}static toMatIV(t,e){let n=e;null==e&&(n=Y.create());let r=t[0],i=t[1],s=t[2],a=t[3],o=r+r,l=i+i,c=s+s,h=r*o,u=r*l,d=r*c,p=i*l,g=i*c,m=s*c,f=a*o,x=a*l,_=a*c;return n[0]=1-(p+m),n[1]=u-_,n[2]=d+x,n[3]=0,n[4]=u+_,n[5]=1-(h+m),n[6]=g-f,n[7]=0,n[8]=d-x,n[9]=g+f,n[10]=1-(h+p),n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}static slerp(t,e,n,r){let i=r;null==r&&(i=J.create());let s=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],a=1-s*s;if(a<=0)i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3];else if(a=Math.sqrt(a),Math.abs(a)<1e-4)i[0]=.5*t[0]+.5*e[0],i[1]=.5*t[1]+.5*e[1],i[2]=.5*t[2]+.5*e[2],i[3]=.5*t[3]+.5*e[3];else{let r=Math.acos(s),o=r*n,l=Math.sin(r-o)/a,c=Math.sin(o)/a;i[0]=t[0]*l+e[0]*c,i[1]=t[1]*l+e[1]*c,i[2]=t[2]*l+e[2]*c,i[3]=t[3]*l+e[3]*c}return i}}class K{static plane(t,e,n){let r,i;r=t/2,i=e/2;return{position:[-r,i,0,r,i,0,-r,-i,0,r,-i,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],color:[n[0],n[1],n[2],n[3],n[0],n[1],n[2],n[3],n[0],n[1],n[2],n[3],n[0],n[1],n[2],n[3]],texCoord:[0,0,1,0,0,1,1,1],index:[0,2,1,1,2,3]}}static circle(t,e,n){let r,i=0,s=[],a=[],o=[],l=[],c=[];for(s.push(0,0,0),a.push(0,0,1),o.push(n[0],n[1],n[2],n[3]),l.push(.5,.5),r=0;r<t;r++){let h=2*Math.PI/t*r,u=Math.cos(h),d=Math.sin(h);s.push(u*e,d*e,0),a.push(0,0,1),o.push(n[0],n[1],n[2],n[3]),l.push(.5*(u+1),1-.5*(d+1)),r===t-1?c.push(0,i+1,1):c.push(0,i+1,i+2),++i}return{position:s,normal:a,color:o,texCoord:l,index:c}}static cube(t,e){let n=.5*t,r=[-n,-n,n,n,-n,n,n,n,n,-n,n,n,-n,-n,-n,-n,n,-n,n,n,-n,n,-n,-n,-n,n,-n,-n,n,n,n,n,n,n,n,-n,-n,-n,-n,n,-n,-n,n,-n,n,-n,-n,n,n,-n,-n,n,n,-n,n,n,n,n,-n,n,-n,-n,-n,-n,-n,n,-n,n,n,-n,n,-n],i=1/Math.sqrt(3),s=[-i,-i,i,i,-i,i,i,i,i,-i,i,i,-i,-i,-i,-i,i,-i,i,i,-i,i,-i,-i,-i,i,-i,-i,i,i,i,i,i,i,i,-i,-i,-i,-i,i,-i,-i,i,-i,i,-i,-i,i,i,-i,-i,i,i,-i,i,i,i,i,-i,i,-i,-i,-i,-i,-i,i,-i,i,i,-i,i,-i],a=[];for(let t=0;t<r.length/3;t++)a.push(e[0],e[1],e[2],e[3]);return{position:r,normal:s,color:a,texCoord:[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],index:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}}static box(t,e,n,r){let i=.5*t,s=.5*e,a=.5*n,o=[-i,-s,a,i,-s,a,i,s,a,-i,s,a,-i,-s,-a,-i,s,-a,i,s,-a,i,-s,-a,-i,s,-a,-i,s,a,i,s,a,i,s,-a,-i,-s,-a,i,-s,-a,i,-s,a,-i,-s,a,i,-s,-a,i,s,-a,i,s,a,i,-s,a,-i,-s,-a,-i,-s,a,-i,s,a,-i,s,-a],l=1/Math.sqrt(3),c=[-l,-l,l,l,-l,l,l,l,l,-l,l,l,-l,-l,-l,-l,l,-l,l,l,-l,l,-l,-l,-l,l,-l,-l,l,l,l,l,l,l,l,-l,-l,-l,-l,l,-l,-l,l,-l,l,-l,-l,l,l,-l,-l,l,l,-l,l,l,l,l,-l,l,-l,-l,-l,-l,-l,l,-l,l,l,-l,l,-l],h=[];for(let t=0;t<o.length/3;t++)h.push(r[0],r[1],r[2],r[3]);return{position:o,normal:c,color:h,texCoord:[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],index:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}}static boxLine(t,e,n,r){let i=.5*t,s=.5*e,a=.5*n,o=[-i,-s,a,i,-s,a,i,-s,a,i,s,a,i,s,a,-i,s,a,-i,s,a,-i,-s,a,-i,-s,-a,-i,s,-a,-i,s,-a,i,s,-a,i,s,-a,i,-s,-a,i,-s,-a,-i,-s,-a,-i,s,-a,-i,s,a,-i,s,a,i,s,a,i,s,a,i,s,-a,i,s,-a,-i,s,-a,-i,-s,-a,i,-s,-a,i,-s,-a,i,-s,a,i,-s,a,-i,-s,a,-i,-s,a,-i,-s,-a,i,-s,-a,i,s,-a,i,s,-a,i,s,a,i,s,a,i,-s,a,i,-s,a,i,-s,-a,-i,-s,-a,-i,-s,a,-i,-s,a,-i,s,a,-i,s,a,-i,s,-a],l=[];for(let t=0;t<o.length/3;t++)l.push(r[0],r[1],r[2],r[3]);return{position:o,color:l}}static axis(t,e){return{position:[-1*t,0,0,t,0,0,0,-1*t,0,0,t,0,0,0,t,0,0,-1*t],color:[.45,.45,.45,1,.45,.45,.45,1,.45,.45,.45,1,.45,.45,.45,1,.45,.45,.45,1,.45,.45,.45,1]}}static cone(t,e,n,r){let i,s=0,a=n/2,o=[],l=[],c=[],h=[],u=[];for(o.push(0,-a,0),l.push(0,-1,0),c.push(r[0],r[1],r[2],r[3]),h.push(.5,.5),i=0;i<=t;i++){let n=2*Math.PI/t*i,d=Math.cos(n),p=Math.sin(n);o.push(d*e,-a,p*e,d*e,-a,p*e),l.push(0,-1,0,d,0,p),c.push(r[0],r[1],r[2],r[3],r[0],r[1],r[2],r[3]),h.push(.5*(d+1),1-.5*(p+1),.5*(d+1),1-.5*(p+1)),i!==t&&(u.push(0,s+1,s+3),u.push(s+4,s+2,2*t+3)),s+=2}return o.push(0,a,0),l.push(0,1,0),c.push(r[0],r[1],r[2],r[3]),h.push(.5,.5),{position:o,normal:l,color:c,texCoord:h,index:u}}static cylinder(t,e,n,r,i){let s,a=2,o=r/2,l=[],c=[],h=[],u=[],d=[];for(l.push(0,o,0,0,-o,0),c.push(0,1,0,0,-1,0),h.push(i[0],i[1],i[2],i[3],i[0],i[1],i[2],i[3]),u.push(.5,.5,.5,.5),s=0;s<=t;s++){let r=2*Math.PI/t*s,p=Math.cos(r),g=Math.sin(r);l.push(p*e,o,g*e,p*e,o,g*e,p*n,-o,g*n,p*n,-o,g*n),c.push(0,1,0,p,0,g,0,-1,0,p,0,g),h.push(i[0],i[1],i[2],i[3],i[0],i[1],i[2],i[3],i[0],i[1],i[2],i[3],i[0],i[1],i[2],i[3]),u.push(.5*(p+1),1-.5*(g+1),1-s/t,0,.5*(p+1),1-.5*(g+1),1-s/t,1),s!==t&&d.push(0,a+4,a,1,a+2,a+6,a+5,a+7,a+1,a+1,a+7,a+3),a+=4}return{position:l,normal:c,color:h,texCoord:u,index:d}}static sphere(t,e,n,r){let i,s,a=[],o=[],l=[],c=[],h=[];for(i=0;i<=t;i++){let h=Math.PI/t*i,u=Math.cos(h),d=Math.sin(h);for(s=0;s<=e;s++){let h=2*Math.PI/e*s,p=d*n*Math.cos(h),g=u*n,m=d*n*Math.sin(h),f=d*Math.cos(h),x=d*Math.sin(h);a.push(p,g,m),o.push(f,u,x),l.push(r[0],r[1],r[2],r[3]),c.push(1-1/e*s,1/t*i)}}for(i=0;i<t;i++)for(s=0;s<e;s++){let t=(e+1)*i+s;h.push(t,t+1,t+e+2),h.push(t,t+e+2,t+e+1)}return{position:a,normal:o,color:l,texCoord:c,index:h}}static torus(t,e,n,r,i){let s,a,o=[],l=[],c=[],h=[],u=[];for(s=0;s<=t;s++){let u=2*Math.PI/t*s,d=Math.cos(u),p=Math.sin(u);for(a=0;a<=e;a++){let u=2*Math.PI/e*a,g=(d*n+r)*Math.cos(u),m=p*n,f=(d*n+r)*Math.sin(u),x=d*Math.cos(u),_=d*Math.sin(u),v=1/e*a,b=1/t*s+.5;b>1&&(b-=1),b=1-b,o.push(g,m,f),l.push(x,p,_),c.push(i[0],i[1],i[2],i[3]),h.push(v,b)}}for(s=0;s<t;s++)for(a=0;a<e;a++){let t=(e+1)*s+a;u.push(t,t+e+1,t+1),u.push(t+e+1,t+e+2,t+1)}return{position:o,normal:l,color:c,texCoord:h,index:u}}static icosahedron(t,e){let n=[],r=[],i=[],s=[],a=[],o=(1+Math.sqrt(5))/2,l=o*t,c=Math.sqrt(1+o*o),h=[1/c,o/c];n=[-t,l,0,t,l,0,-t,-l,0,t,-l,0,0,-t,l,0,t,l,0,-t,-l,0,t,-l,l,0,-t,l,0,t,-l,0,-t,-l,0,t],r=[-h[0],h[1],0,h[0],h[1],0,-h[0],-h[1],0,h[0],-h[1],0,0,-h[0],h[1],0,h[0],h[1],0,-h[0],-h[1],0,h[0],-h[1],h[1],0,-h[0],h[1],0,h[0],-h[1],0,-h[0],-h[1],0,h[0]],i=[e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3]];for(let t=0,e=r.length;t<e;t+=3){let e=(Math.atan2(r[t+2],-r[t])+Math.PI)/(2*Math.PI),n=1-(r[t+1]+1)/2;s.push(e,n)}return a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],{position:n,normal:r,color:i,texCoord:s,index:a}}}var Q;!function(t){t[t.R=0]="R",t[t.G=1]="G",t[t.B=2]="B"}(Q||(Q={}));var tt=function(t,e){this.imageData=t,this.options=e||{strict:!1},this.colors=this.__calculateColorCount(this.imageData.data),this.buckets=[],this.__bucketsPerStep=[]},et={roundingBits:{configurable:!0},palette:{configurable:!0},bucketsPerStep:{configurable:!0}};tt.averageColor=function(t){for(var e=0,n=0,r=0,i=0,s=0,a=t.length;s<a;s=s+1|0){var o=t[s],l=o[0],c=o[1],h=o[2],u=o[3];n=l*u+n,r=c*u+r,i=h*u+i,e=e+u|0}return[Math.round(n/e),Math.round(r/e),Math.round(i/e)]},et.roundingBits.get=function(){return this.options.strict?255:248},et.palette.get=function(){for(var t=[],e=0,n=this.buckets.length;e<n;e=e+1|0)t[e]=tt.averageColor(this.buckets[e].colors);return t},et.bucketsPerStep.get=function(){return this.__bucketsPerStep},tt.prototype.reduce=function(t){if(this.colors.length<=t)return console.warn("It has already been reduced color."),this.imageData;this.buckets=this.__mediancut([this.__generateBucket(this.colors)],t);for(var e=new Map,n=0,r=this.buckets.length;n<r;n=n+1|0)for(var i=this.buckets[n],s=tt.averageColor(i.colors),a=0,o=i.colors.length;a<o;a=a+1|0){var l=i.colors[a],c=l[0],h=l[1],u=l[2],d=c&this.roundingBits|(h&this.roundingBits)<<8|(u&this.roundingBits)<<16;e.set(d,s)}for(var p=this.imageData.data,g=p.length,m=new Uint8ClampedArray(g),f=0;f<g;){var x=p[f]&this.roundingBits|(p[f+1]&this.roundingBits)<<8|(p[f+2]&this.roundingBits)<<16,_=e.get(x),v=_[0],b=_[1],E=_[2];m[f]=v,m[f+1]=b,m[f+2]=E,m[f+3]=p[f+3],f=f+4|0}return new ImageData(m,this.imageData.width,this.imageData.height)},tt.prototype.__calculateColorCount=function(t){for(var e=new Map,n=t.length,r=0;r<n;){var i=t[r]&this.roundingBits,s=t[r+1]&this.roundingBits,a=t[r+2]&this.roundingBits,o=i|s<<8|a<<16,l=e.get(o),c=l?l[3]+1:1;e.set(o,[i,s,a,c]),r=r+4|0}var h=[];return e.forEach((function(t){h[h.length]=t})),h},tt.prototype.__getTotalAnGreatestRangeChannel=function(t){for(var e=0,n=0,r=0,i=0,s=255,a=255,o=255,l=t.length,c=0;c<l;){var h=t[c],u=h[0],d=h[1],p=h[2],g=h[3];n=Math.max(u,n),r=Math.max(d,r),i=Math.max(p,i),s=Math.min(u,s),a=Math.min(d,a),o=Math.min(p,o),e+=g,c=c+1|0}var m=1.2*(n-s),f=1.2*(r-a),x=i-o,_=Math.max(m,f,x),v=Q.R;return m===_&&(v=Q.R),f===_&&(v=Q.G),x===_&&(v=Q.B),{total:e,channel:v,minR:s,minG:a,minB:o,maxR:n,maxG:r,maxB:i}},tt.prototype.__mediancut=function(t,e){this.__bucketsPerStep.push([].concat(t));var n=0,r=0;if(t.length+1>e)return t;for(var i=0,s=t.length;i<s;i=i+1|0)t[i].total>n&&1!==t[i].colors.length&&(r=i,n=t[i].total);var a=t[r];if(1===a.total||1===a.colors.length)return console.error("Cube could not be split."),t;var o=a.channel;a.colors.sort((function(t,e){return t[o]-e[o]}));var l=Math.floor((a.colors.length+1)/2),c=this.__generateBucket(a.colors.slice(0,l)),h=this.__generateBucket(a.colors.slice(l));return t.splice(r,1,c,h),this.__mediancut(t,e)},tt.prototype.__generateBucket=function(t){var e=this.__getTotalAnGreatestRangeChannel(t);return{colors:t,total:e.total,channel:e.channel,minR:e.minR,minG:e.minG,minB:e.minB,maxR:e.maxR,maxG:e.maxG,maxB:e.maxB}},Object.defineProperties(tt.prototype,et);const nt={bucketsCount:8};const rt=function(){const{subscribe:t,set:e,update:n}=V(nt);return{subscribe:t,reset:()=>e(nt),set:t=>e(t)}}();class it extends HTMLElement{constructor(t,e){super(),this.__dragging=!1,this.attachShadow({mode:"open"}),this.axes=t,this.shadowRoot.innerHTML=this.template(t,e),this.$pane=this.shadowRoot.querySelector("#pane"),this.$timeline=this.shadowRoot.querySelector("#timeline"),this.$current=this.shadowRoot.querySelector("#current"),this.$progress=this.shadowRoot.querySelector("#progress"),this.$labels=this.shadowRoot.querySelectorAll(".label"),this.$bars=this.shadowRoot.querySelectorAll(".bar"),this.$previous=this.shadowRoot.querySelector("#previous"),this.$playPause=this.shadowRoot.querySelector("#play-pause"),this.$next=this.shadowRoot.querySelector("#next"),this.playing=!0,this.previous=!1,this.next=!1,this.skip=-1,this.$previous.addEventListener("click",(t=>{this.previous=!0})),this.$playPause.addEventListener("click",(t=>{this.playing=!this.playing})),this.$next.addEventListener("click",(t=>{this.next=!0})),this.$bars.forEach((t=>{t.addEventListener("click",(t=>{const e=t.currentTarget,n=Number(e.getAttribute("idx"));this.skip=n}))})),this.$labels.forEach((t=>{t.addEventListener("click",(t=>{const e=t.currentTarget,n=Number(e.getAttribute("idx"));this.skip=n}))})),this.$current.addEventListener("input",(t=>{this.__dragging=!0;const e=Number(this.$current.value);this.__updateProgressPosition(e),this.__updateBar(e)})),this.$current.addEventListener("change",(t=>{this.__dragging=!1}))}attributeChangedCallback(){}connectedCallback(){}disconnectedCallback(){}get(t){const e=Date.now(),n=Number(this.$current.value);let r=e-t;if(this.playing||(t=e-n,r=n),this.__dragging&&(t=e-n,r=n),-1<this.skip){const n=this.axes[this.skip];t=e-n.beginAt,r=n.beginAt,this.skip=-1}return this.previous&&(this.previous=!1,t=e,r=0),this.next&&(this.next=!1,t=e-this.totalTime,r=this.totalTime),{beginAt:t,elapsedTime:r,dragging:this.__dragging}}update(t,e,n){this.axes=n,this.totalTime=e,this.$current.setAttribute("max",e),this.$current.value=t,this.__updateProgressPosition(t),this.__updateBar(t)}template(t,e){let n="",r="",i="";for(let e=0;e<t.length;e++){n+=`<div class="row" id="row-${e}"><div class="label" idx="${e}">${t[e].key}</div></div>`,r+=`<div class="row"><div class="bar" idx="${e}"></div></div>`}for(let t=0,n=Math.floor(e/1e3);t<n;t++)i+=`<div class="scale-label" style="--sec: ${t+1}">${t+1}s</div>`;return`\n      <style>\n        * {\n          box-sizing: border-box;\n        }\n        :host {\n          display: block;\n          height: 100%;\n        }\n        .container {\n          display: flex;\n          flex-direction: column;\n          height: 100%;\n          background-color: #313131;\n          color: #eeeeee;\n          position: relative;\n          --tools-height: 40px;\n          --controls-height: 40px;\n        }\n        .tools {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n          height: var(--tools-height);\n          border-bottom: 1px solid #202020;\n        }\n        .tools__item {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 20px;\n          margin: 0 8px;\n          color: #eeeeee;\n        }\n        .tools__item div {\n          width: 100%;\n          cursor: pointer;\n        }\n        .tools__item div:hover {\n          opacity: .6;\n        }\n        .tools__item svg {\n          fill: currentColor;\n        }\n        .controls {\n          display: flex;\n          flex-shrink: 0;\n          height: var(--controls-height);\n          border-bottom: 1px solid #202020;\n        }\n        .pane {\n          display: flex;\n          flex: 1;\n          overflow: scroll;\n          scroll-behavior: smooth;\n        }\n        .head {\n          flex-shrink: 0;\n          flex-basis: 20%;\n          max-width: 200px;\n          min-width: 0;\n        }\n        .body {\n          flex: 1;\n          position: relative;\n        }\n        .actions {\n          height: 100%;\n          border-right: 1px solid #222322;\n        }\n        .rows {\n          border-right: 1px solid #222322;\n        }\n        .row {\n          display: flex;\n          align-items: center;\n          height: 24px;\n          border-bottom: 1px solid #202020;\n        }\n        .label {\n          padding-left: 12px;\n          font-size: 12px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          cursor: pointer;\n        }\n        .bar {\n          width: 1px;\n          height: 100%;\n          background-color: #545454;\n          opacity: .5;\n          transform-origin: left;\n          cursor: pointer;\n        }\n        .bar.bar--active {\n          opacity: 1;\n        }\n        .progress {\n          position: absolute;\n          top: var(--tools-height);\n          bottom: 0;\n          left: 0;\n          width: 2px;\n          margin-left: min(20%, 200px);\n          background-color: #71A0EB;\n          opacity: 0.6;\n        }\n        .progress::before {\n          content: "";\n          display: block;\n          width: 20px;\n          height: 30px;\n          background-color: #53aeff;\n          margin-left: -9px;\n        }\n        .progress::after {\n          content: "";\n          display: block;\n          border-top: 10px solid #53aeff;\n          border-left: 10px solid transparent;\n          border-right: 10px solid transparent;\n          margin-left: -9px;\n        }\n        .current {\n          position: absolute;\n          top: var(--tools-height);\n          height: var(--controls-height);\n          left: -12px;\n          right: -12px;\n          margin-left: min(20%, 200px);\n        }\n        input[type="range"] {\n          -webkit-appearance: none;\n          appearance: none;\n          margin: 0;\n          cursor: pointer;\n          outline: none;\n          height: var(--controls-height);\n          width: 100%;\n          background: transparent;\n        }\n        input[type="range"]::-webkit-slider-thumb {\n          opacity: 0;\n        }\n        input[type="range"]::-moz-range-thumb {\n          opacity: 0;\n        }\n        /* Firefox„ÅßÁÇπÁ∑ö„ÅåÂë®„Çä„Å´Ë°®Á§∫„Åï„Çå„Å¶„Åó„Åæ„ÅÜÂïèÈ°å„ÅÆËß£Ê∂à */\n        input[type="range"]::-moz-focus-outer {\n          border: 0;\n        }\n        .scale {\n          position: relative;\n          height: 100%;\n        }\n        .scale-s,\n        .scale-100ms {\n          height: 50%;\n        }\n        .scale-s {\n          /*\n            total / 1s \n            e.g. 6000 / 1000\n            x / 1000 = 6\n            calc(100% / calc(var(--total) / 1000))\n           */\n          --x: calc(100% / calc(var(--total) / 1000));\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n          border-bottom: 1px solid #202020;\n        }\n        .scale-100ms {\n          --x: calc(100% / calc(var(--total) / 1000) / 10);\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n        }\n        .scale-label {\n          --x: calc(100% / calc(var(--total) / 1000));\n          position: absolute;\n          top: 0;\n          left: calc(var(--x) * var(--sec));\n          font-size: 10px;\n          font-style: italic;\n          transform: translateX(calc(-100% - 4px));\n        }\n      </style>\n      <div class="container">\n        <div class="tools">\n          <div class="tools__item">\n            <div id="previous">\n              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path d="M2.75 20C2.75 20.5523 3.19772 21 3.75 21C4.30228 21 4.75 20.5523 4.75 20L4.75 4C4.75 3.44772 4.30229 3 3.75 3C3.19772 3 2.75 3.44772 2.75 4V20Z"/>\n                <path d="M20.75 19.0526C20.75 20.4774 19.1383 21.305 17.9803 20.4748L7.51062 12.9682C6.50574 12.2477 6.54467 10.7407 7.5854 10.073L18.0551 3.35665C19.2198 2.60946 20.75 3.44583 20.75 4.82961L20.75 19.0526Z"/>\n              </svg>\n            </div>\n          </div>\n          <div class="tools__item">\n            <div id="play-pause">\n              <svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                \x3c!-- Generator: Sketch 59.1 (86144) - https://sketch.com --\x3e\n                <title>ic_fluent_video_play_pause_24_filled</title>\n                <desc>Created with Sketch.</desc>\n                <g id="üîç-Product-Icons" stroke="none" stroke-width="1" >\n                    <g id="ic_fluent_video_play_pause_24_filled" fill-rule="nonzero">\n                        <path d="M3.65140982,6.61646219 L11.1528787,11.3693959 C11.3672679,11.5052331 11.4827597,11.722675 11.4993749,11.9464385 L11.4984593,7.25 C11.4984593,6.83578644 11.8342458,6.5 12.2484593,6.5 L15.2484593,6.5 C15.6626729,6.5 15.9984593,6.83578644 15.9984593,7.25 L15.9984593,16.75 C15.9984593,17.1642136 15.6626729,17.5 15.2484593,17.5 L12.2484593,17.5 C11.8342458,17.5 11.4984593,17.1642136 11.4984593,16.75 L11.4993494,12.0597632 C11.4826318,12.2835468 11.3670166,12.5009613 11.1525249,12.6366956 L3.65105604,17.3837618 C3.15168144,17.6997752 2.5,17.3409648 2.5,16.75 L2.5,7.25 C2.5,6.65884683 3.15205264,6.30006928 3.65140982,6.61646219 Z M21.2477085,6.50037474 C21.661922,6.50037474 21.9977085,6.83616118 21.9977085,7.25037474 L21.9977085,16.7496253 C21.9977085,17.1638388 21.661922,17.4996253 21.2477085,17.4996253 L18.2477085,17.4996253 C17.8334949,17.4996253 17.4977085,17.1638388 17.4977085,16.7496253 L17.4977085,7.25037474 C17.4977085,6.83616118 17.8334949,6.50037474 18.2477085,6.50037474 L21.2477085,6.50037474 Z" id="üé®-Color"></path>\n                    </g>\n                </g>\n              </svg>\n            </div>\n          </div>\n          <div class="tools__item">\n            <div id="next">\n              <svg   viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path d="M21 4C21 3.44772 20.5523 3 20 3C19.4477 3 19 3.44772 19 4V20C19 20.5523 19.4477 21 20 21C20.5523 21 21 20.5523 21 20V4Z"/>\n                <path d="M3 4.94743C3 3.5226 4.61175 2.69498 5.7697 3.52521L16.2394 11.0318C17.2443 11.7523 17.2053 13.2593 16.1646 13.927L5.69492 20.6434C4.53019 21.3905 3 20.5542 3 19.1704V4.94743Z"/>\n              </svg>\n            </div>\n          </div>\n        </div>\n        <div class="controls">\n          <div class="head"><div class="actions"></div></div>\n          <div class="body">\n            <div class="scale" id="scale" style="--total: ${e}">\n              <div class="scale-s"></div>\n              <div class="scale-100ms"></div>\n              ${i}\n            </div>\n          </div>\n        </div>\n        <div id="pane" class="pane">\n          <div class="head">\n            <div class="rows">\n              ${n}\n            </div>\n          </div>\n          <div id="timeline" class="body">\n            <div class="rows">\n              ${r}\n            </div>\n          </div>\n        </div>\n        <div class="current">\n          <input id="current" type="range" min="0" max="0" step="any" value="0">\n        </div>\n        <div id="progress" class="progress"></div>\n      </div>\n    `}__updateProgressPosition(t){const e=this.$timeline.clientWidth,n=Math.min(t/this.totalTime,1)*e;this.$progress.style.transform=`translateX(${n}px)`}__updateBar(t){const e=this.$timeline.clientWidth/Math.max(...this.axes.map((t=>t.endAt)));for(let t=0;t<this.$bars.length;t++){const n=this.axes[t],r=n.beginAt*e,i=(n.endAt-n.beginAt)*e;this.$bars[t].style.transform=`translateX(${r}px) scaleX(${i})`,0<n.progress&&!n.pass?this.$bars[t].classList.add("bar--active"):this.$bars[t].classList.remove("bar--active")}}}window.customElements.define("taxis-timeline",it);const st={key:"",beginAt:0,endAt:0,progress:0,enter:!1,pass:!1,tick:0},at="enter",ot="leave",lt="pass";class ct{constructor(){this.__axes=[],this.__handlers={}}get totalTime(){return Math.max(...this.__axes.map((t=>t.endAt)))}get everyPassed(){return this.__axes.every((t=>t.pass))}restart(){this.__beginAt=Date.now()}getAxis({key:t}){return this.__axes.find((e=>e.key===t))}getAxes(){return this.__axes}entered(t){return!!this.__entered.find((e=>e.key===t))}left(t){return!!this.__left.find((e=>e.key===t))}insert(t,e,n=0){return this.__axes.push(Object.assign(Object.assign({},st),{key:t,beginAt:n,endAt:n+e})),this.__axes.sort(((t,e)=>t.beginAt-e.beginAt)),this}interval(t){const e=this.__axes[this.__axes.length-1].endAt;return this.__axes.push(Object.assign(Object.assign({},st),{key:null,beginAt:e,endAt:e+t})),this}append(t,e,n=0){const r=this.__axes[this.__axes.length-1].endAt+n;return this.__axes.push(Object.assign(Object.assign({},st),{key:t,beginAt:r,endAt:r+e})),this}parallel(){}begin(){this.__timeline=new it(this.__axes,this.totalTime);document.querySelector("#timeline").appendChild(this.__timeline),this.__beginAt=Date.now(),this.__tick()}on(t,e){this.__handlers[t]||(this.__handlers[t]=[]),this.__handlers[t].push(e)}reset(){cancelAnimationFrame(this.requestID)}ticker(t){this.__ticker=t}__tick(){const{beginAt:t,elapsedTime:e,dragging:n}=this.__timeline.get(this.__beginAt);this.__beginAt=t;const r=[],i=[],s=[];this.__entered=[],this.__left=[],this.__axes.forEach(((t,n)=>{const a=e-t.beginAt,o=t.endAt-t.beginAt,l=Math.max(0,Math.min(a/o,1)),c=t.beginAt<=e,h=t.endAt<e;h&&!t.pass&&s.push(t.key),c&&!t.enter&&(r.push(t.key),this.__entered.push(t)),0===l&&0<t.progress&&(i.push(t.key),this.__left.push(t)),t.progress=l,t.enter=c,t.pass=h,t.tick=a})),s.length&&(this.__handlers[lt]||[]).forEach((t=>{t({events:s})})),r.length&&(this.__handlers[at]||[]).forEach((t=>{t({events:r})})),i.length&&(this.__handlers[ot]||[]).forEach((t=>{t({events:i})})),n||this.__timeline.update(e,this.totalTime,this.__axes),this.__ticker&&this.__ticker(e,this.__axes),this.requestID=requestAnimationFrame(this.__tick.bind(this))}}const ht=128,ut=.5;let dt=[-1.5,0,0],pt=[1.5,0,0],gt=[0,0,0];const mt=t=>{const e=new G,n=new ct;n.insert("Sampling",3e3);for(let t=0;t<o(rt).bucketsCount;t++)0===t?n.append(`split#${t}`,500,500):n.append(`split#${t}`,500);for(let t=0;t<o(rt).bucketsCount;t++)n.append(`Average color#${t}`,500);let r;n.append("Mapping",3e3,500);let i=[],s=0,a=-1,l=!1;e.initialize(t);let c,h,u,d,p,g,m,f,x,_,v,b,E=null,T=null,A=[],y=[],w=[],M=[],R=[],P=[],k=[],C=[],L=[],I=[],B=[],U=[],$=[],S=[],D=null,F=null,N=null,O=null,X=null,V=null;const j={distance:7.5,min:1,max:20,move:2},Y=new H(t,j);function W(){e.width=window.innerWidth,e.height=window.innerHeight,window.innerWidth<window.innerHeight?(Y.distance=1e3/window.innerHeight*j.distance,dt=[0,1.5,0],pt=[0,-1.5,0],gt=[0,0,0]):(Y.distance=900/window.innerWidth*j.distance,dt=[-1.5,0,0],pt=[1.5,0,0],gt=[0,0,0])}function Z(t){const n=e.gl;let r=z.mat4.identity(z.mat4.create());r=z.mat4.translate(r,t);const i=z.mat4.multiply(V,r);n.uniformMatrix4fv(D.mvpMatrix,!1,i)}function J(t){const n=e.gl;let r=z.mat4.identity(z.mat4.create());r=z.mat4.translate(r,t),n.uniformMatrix4fv(F.mMatrix,!1,r);const i=z.mat4.multiply(V,r);n.uniformMatrix4fv(F.mvpMatrix,!1,i)}e.width=window.innerWidth,e.height=window.innerHeight,W(),window.addEventListener("resize",W),window.Promise.resolve().then((t=>{t=o(q).file;const n=document.createElement("canvas");n.width=ht,n.height=ht;const s=n.getContext("2d");s.drawImage(t,0,0,t.width,t.height,0,0,ht,ht),v=s.getImageData(0,0,n.width,n.height),r=new tt(v,{strict:!0}),b=r.reduce(o(rt).bucketsCount),i=r.bucketsPerStep,N=e.createTexture(t,e.gl.TEXTURE0),e.createTexture(b,e.gl.TEXTURE1)})).then((()=>window.Promise.all([G.loadFile("./shader/main.vert"),G.loadFile("./shader/main.frag"),G.loadFile("./shader/sub.vert"),G.loadFile("./shader/sub.frag")]))).then((t=>{const[r,j,q,G]=t,H=e.createShaderObject(r,e.gl.VERTEX_SHADER),W=e.createShaderObject(j,e.gl.FRAGMENT_SHADER);E=e.createProgramObject(H,W);const Q=e.createShaderObject(q,e.gl.VERTEX_SHADER),et=e.createShaderObject(G,e.gl.FRAGMENT_SHADER);T=e.createProgramObject(Q,et),e.program=E;const nt=e.gl;nt.enable(nt.DEPTH_TEST),nt.disable(nt.CULL_FACE),nt.enable(nt.BLEND),nt.blendFuncSeparate(nt.SRC_ALPHA,nt.ONE_MINUS_SRC_ALPHA,nt.ONE,nt.ONE),c=K.plane(1,1,0,[1,.1,0,1]),h=[e.createVBO(c.position),e.createVBO(c.color),e.createVBO(c.texCoord)],u=e.createIBO(c.index),d=K.plane(1,1,0,[1,.1,0,1]),e.createVBO(d.position),e.createVBO(d.color),e.createVBO(d.texCoord),e.createIBO(d.index),function(){const t=v.data.length/4;for(let e=0;e<t;e++){const t=v.data[4*e],n=v.data[4*e+1],r=v.data[4*e+2],i=v.data[4*e+3],s=e,a=s%v.width,o=Math.floor(s/v.width);k.push(a/ht-ut+dt[0],-1*(o/ht-ut)+dt[1],dt[2]),C.push(t/255-ut+gt[0],n/255-ut+gt[1],r/255-ut+gt[2]),L.push(t/255,n/255,r/255,i/255)}I=[e.createVBO(k),e.createVBO(C),e.createVBO(L)]}(),function(){const t=v.data.length/4;for(let e=0;e<t;e++){const t=v.data[4*e],n=v.data[4*e+1],r=v.data[4*e+2];v.data[4*e+3];const i=e,s=i%v.width,a=Math.floor(i/v.width);B.push(t/255-ut+gt[0],n/255-ut+gt[1],r/255-ut+gt[2]),U.push(s/ht-ut+pt[0],-1*(a/ht-ut)+pt[1],pt[2]);const o=b.data[4*e],l=b.data[4*e+1],c=b.data[4*e+2],h=b.data[4*e+3];$.push(o/255,l/255,c/255,h/255)}S=[e.createVBO(B),e.createVBO(U),e.createVBO($)]}(),i.forEach(((t,n)=>{A[n]=[],y[n]=[],w[n]=[],M[n]=[],R[n]=[],P[n]=[],t.forEach(((t,r)=>{const{total:s,colors:a,channel:o,minR:l,minG:c,minB:h,maxR:u,maxG:d,maxB:p}=i[n][r],g=(u-l)/255,m=(d-c)/255,f=(p-h)/255,x=tt.averageColor(a),_=K.box(g,m,f,[x[0]/255,x[1]/255,x[2]/255,.8]),v=K.boxLine(g,m,f,[.65,.65,.65,1]);R[n][r]=v,P[n][r]=[e.createVBO(v.position),e.createVBO(v.color)],A[n][r]=_,y[n][r]=[l/255-(1-g)/2,c/255-(1-m)/2,h/255-(1-f)/2],w[n][r]=[e.createVBO(_.position),e.createVBO(_.color)],M[n][r]=e.createIBO(_.index)}))})),p=K.axis(10,[.45,.45,.45,1]),g=[e.createVBO(p.position),e.createVBO(p.color)],function(){const t=e.gl;e.program=E,m=[t.getAttribLocation(e.program,"position"),t.getAttribLocation(e.program,"color"),t.getAttribLocation(e.program,"texCoord")],f=[3,4,2],D={mvpMatrix:t.getUniformLocation(e.program,"mvpMatrix"),textureUnit:t.getUniformLocation(e.program,"textureUnit"),isTexture:t.getUniformLocation(e.program,"isTexture")}}(),function(){const t=e.gl;e.program=T,x=[t.getAttribLocation(e.program,"fromPosition"),t.getAttribLocation(e.program,"toPosition"),t.getAttribLocation(e.program,"color")],_=[3,3,4],F={mMatrix:t.getUniformLocation(e.program,"mMatrix"),mvpMatrix:t.getUniformLocation(e.program,"mvpMatrix"),interporation:t.getUniformLocation(e.program,"interporation"),eyePosition:t.getUniformLocation(e.program,"eyePosition")}}(),n.begin(),function(){const t=e.gl;n.ticker(((r,i)=>{n.entered("split#0")&&(l=!0),n.left("split#0")&&(l=!1);for(let t=0;t<o(rt).bucketsCount;t++)n.entered(`split#${t}`)&&s<t&&(s=t),n.entered(`Average color#${t}`)&&a<t&&(a=t),n.left(`split#${t}`)&&t<=s&&(s=t-1),n.left(`Average color#${t}`)&&t<=a&&(a=t-1);!function(){const t=e.gl;t.viewport(0,0,e.width,e.height),t.clearColor(.1,.12,.14,1),t.clear(t.COLOR_BUFFER_BIT),O=Y.update();const n=45,r=e.width/e.height,i=.1,s=20;X=z.mat4.perspective(n,r,i,s),V=z.mat4.multiply(X,O)}(),e.program=T,t.uniformMatrix4fv(F.eyePosition,!1,Y.position),function(t){const r=e.gl,i=n.getAxis({key:"Sampling"});r.uniform1f(F.interporation,i.progress),e.enableAttribute(I,x,_),J(t),r.drawArrays(r.POINTS,0,C.length/3)}([0,0,0]),function(t){const r=e.gl,i=n.getAxis({key:"Mapping"});if(0===i.progress)return;r.uniform1f(F.interporation,i.progress),e.enableAttribute(S,x,_),J(t),r.drawArrays(r.POINTS,0,U.length/3)}([0,0,0]),e.program=E,function(){const t=e.gl;t.uniform1i(D.isTexture,0),t.disableVertexAttribArray(m[2]),e.enableAttribute(g,m,f),Z([0,0,0]),t.drawArrays(t.LINES,0,p.position.length/3)}(),function(t){const n=e.gl;e.enableAttribute(h,m,f),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,u),n.activeTexture(e.gl.TEXTURE0),n.bindTexture(e.gl.TEXTURE_2D,N),n.uniform1i(D.textureUnit,0),n.uniform1i(D.isTexture,1),n.enableVertexAttribArray(m[2]),Z(t),n.drawElements(n.TRIANGLES,c.index.length,n.UNSIGNED_SHORT,0)}(dt),l&&(function(t){const n=e.gl;n.disableVertexAttribArray(m[2]),n.uniform1i(D.isTexture,0);for(let r=0;r<A[s].length;r++){e.enableAttribute(P[s][r],m,f);Z([t[0]+y[s][r][0],t[1]+y[s][r][1],t[2]+y[s][r][2]]),n.drawArrays(n.LINES,0,R[s][r].position.length/3)}}(gt),-1<a&&function(t){const n=e.gl;n.disableVertexAttribArray(m[2]),n.uniform1i(D.isTexture,0);const r=A.length-1;for(let i=0;i<=a;i++){e.enableAttribute(w[r][i],m,f),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,M[r][i]);Z([t[0]+y[r][i][0],t[1]+y[r][i][1],t[2]+y[r][i][2]]),n.drawElements(n.TRIANGLES,A[r][i].index.length,n.UNSIGNED_SHORT,0)}}(gt))}))}()}))};function ft(e){let n;return{c(){n=p("canvas"),f(n,"class","w-full h-full")},m(t,r){u(t,n,r),e[1](n)},p:t,i:t,o:t,d(t){t&&d(n),e[1](null)}}}function xt(t,e,n){let r;return v((()=>{mt(r)})),[r,function(t){E[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class _t extends O{constructor(t){super(),N(this,t,xt,ft,s,{})}}function vt(e){let n,i,s,a,o,l,c,x,_,v,b,E,T,A,y,w,M,R,P,k,C,L,I,B,U,$,S,D,F,N,O,X,V,j,q,G,H;return{c(){n=p("div"),i=p("div"),i.innerHTML='<div class="w-full h-full"><div id="upload-area" class="h-full flex flex-col justify-center relative shadow-lg sm:overflow-hidden"><div class="absolute inset-0"><div class="h-full w-full bg-gray-100"></div></div> \n        <div class="relative px-4 py-16 sm:px-6 sm:py-24 lg:py-32 lg:px-8"><h1 class="text-center text-4xl font-extrabold tracking-tight sm:text-5xl lg:text-6xl"><span class="block text-gray-800">Visualize color reduction</span> \n            <span class="block text-gray-500">Any image you like.</span></h1> \n          <p class="mt-6 max-w-lg mx-auto text-center text-xl text-gray-500 sm:max-w-4xl">The logic of color reduction is difficult.\n            I hope that visualizing it will help you understand it.\n            Implemented with reference to Median cut.\n            It is implemented using webgl.<br/>\n            Sorry, maybe only chrome is supported.</p> \n\n          <div id="upload" class="px-4 py-8 sm:px-0"><form action=""><div class="sm:mt-0 sm:col-span-2"><div class="text-center"><svg class="mx-auto h-12 w-12 text-gray-500" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> \n                  <p class="mt-1 text-sm text-gray-500"><label id="original-image-label" for="original-image-file" class="cursor-pointer font-medium text-pink-600 hover:text-pink-500 focus:outline-none focus:underline transition duration-150 ease-in-out">Upload a file\n                      <input type="file" id="original-image-file" class="hidden"/></label>\n                    or drag and drop</p> \n                  <p class="mt-1 text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p></div></div></form></div></div></div></div>',s=g(),a=p("div"),o=p("div"),l=p("p"),l.textContent="Or try one of these:",c=g(),x=p("div"),_=p("div"),v=p("img"),E=g(),T=p("span"),T.innerHTML='Photo by <a href="https://unsplash.com/@vincentledvina?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Vincent Ledvina</a>\n            on\n            <a href="https://unsplash.com/s/visual/4050ed5c-59f1-4b72-965f-8d82efcfbc94?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>',A=g(),y=p("div"),w=p("img"),R=g(),P=p("span"),P.innerHTML='Photo by <a href="https://unsplash.com/@greysonjoralemon?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Greyson Joralemon</a>\n            on\n            <a href="https://unsplash.com/s/photos/colorful?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>',k=g(),C=p("div"),L=p("img"),B=g(),U=p("span"),U.innerHTML='Photo by <a href="https://unsplash.com/@jezael?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Jezael Melgoza</a>\n            on\n            <a href="https://unsplash.com/s/photos/japan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>',$=g(),S=p("div"),D=p("img"),N=g(),O=p("span"),O.innerHTML='Photo by <a href="https://unsplash.com/@jannerboy62?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Nick Fewings</a>\n            on\n            <a href="https://unsplash.com/s/photos/red?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>',X=g(),V=p("div"),j=p("img"),f(i,"class","relative flex-grow"),f(l,"class","text-center text-sm font-semibold uppercase text-gray-500 tracking-wide"),v.src!==(b="./assets/bison.jpg")&&f(v,"src","./assets/bison.jpg"),f(v,"alt",""),f(v,"class","cursor-pointer"),f(_,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),w.src!==(M="./assets/colorful.jpg")&&f(w,"src","./assets/colorful.jpg"),f(w,"alt",""),f(w,"class","cursor-pointer"),f(y,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),L.src!==(I="./assets/shibuya.jpg")&&f(L,"src","./assets/shibuya.jpg"),f(L,"alt",""),f(L,"class","cursor-pointer"),f(C,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),D.src!==(F="./assets/telephone_booth.jpg")&&f(D,"src","./assets/telephone_booth.jpg"),f(D,"alt",""),f(D,"class","cursor-pointer"),f(S,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),j.src!==(q="./assets/pineapple.jpg")&&f(j,"src","./assets/pineapple.jpg"),f(j,"alt",""),f(j,"class","cursor-pointer"),f(V,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),f(x,"class","mt-6 grid grid-cols-2 gap-8 md:grid-cols-6 lg:grid-cols-5"),f(o,"class","max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8"),f(a,"class","bg-gray-100"),f(n,"class","h-full flex flex-col")},m(t,r){u(t,n,r),h(n,i),h(n,s),h(n,a),h(a,o),h(o,l),h(o,c),h(o,x),h(x,_),h(_,v),h(_,E),h(_,T),h(x,A),h(x,y),h(y,w),h(y,R),h(y,P),h(x,k),h(x,C),h(C,L),h(C,B),h(C,U),h(x,$),h(x,S),h(S,D),h(S,N),h(S,O),h(x,X),h(x,V),h(V,j),G||(H=[m(v,"click",e[0]),m(w,"click",e[0]),m(L,"click",e[0]),m(D,"click",e[0]),m(j,"click",e[0])],G=!0)},p:t,i:t,o:t,d(t){t&&d(n),G=!1,r(H)}}}function bt(t,e,n){let r;l(t,q,(t=>n(1,r=t))),v((()=>{const t=document.getElementById("upload-area");t.addEventListener("change",(t=>{e({e:t,data:void 0,callback:t=>{c(q,r.file=t,r)}})})),t.addEventListener("drop",(t=>{t.preventDefault(),e({e:t,data:t.dataTransfer.files[0],callback:t=>{c(q,r.file=t,r)}})})),t.addEventListener("dragenter",(t=>{t.preventDefault()})),t.addEventListener("dragover",(t=>{t.preventDefault()})),t.addEventListener("dragleave",(t=>{t.preventDefault()}));const e=({e:t,data:e,callback:n})=>{let r=void 0===e?t.target.files[0]:e;if(!r.type.match(/^image\/(png|jpg|jpeg|gif)$/))return;if(10485760<=r.size)return;let i=new Image,s=new FileReader;s.onload=t=>{let e=t.target.result;i.onload=()=>{n(i)},i.src=e},s.readAsDataURL(r)}}));return[t=>{c(q,r.file=t.currentTarget,r)}]}class Et extends O{constructor(t){super(),N(this,t,bt,vt,s,{})}}function Tt(e){let n,r,i,s,a,o,l,c;return n=new _t({props:{class:"w-full h-full"}}),{c(){$(n.$$.fragment),r=g(),i=p("div"),i.innerHTML='<div id="timeline" class="h-full"></div>',s=g(),a=p("div"),a.innerHTML='<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-8 text-gray-800"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',f(i,"class","fixed left-0 right-0 bottom-0 h-1/5"),f(a,"class","fixed left-8 top-8 bg-gray-100 p-2 cursor-pointer rounded-full")},m(t,h){S(n,t,h),u(t,r,h),u(t,i,h),u(t,s,h),u(t,a,h),o=!0,l||(c=m(a,"click",e[1]),l=!0)},p:t,i(t){o||(B(n.$$.fragment,t),o=!0)},o(t){U(n.$$.fragment,t),o=!1},d(t){D(n,t),t&&d(r),t&&d(i),t&&d(s),t&&d(a),l=!1,c()}}}function At(e){let n,r;return n=new Et({}),{c(){$(n.$$.fragment)},m(t,e){S(n,t,e),r=!0},p:t,i(t){r||(B(n.$$.fragment,t),r=!0)},o(t){U(n.$$.fragment,t),r=!1},d(t){D(n,t)}}}function yt(t){let e,n,i,s;const a=[At,Tt],o=[];function l(t,e){return t[0].file?1:0}return n=l(t),i=o[n]=a[n](t),{c(){e=p("main"),i.c(),f(e,"class","w-full h-full")},m(t,r){u(t,e,r),o[n].m(e,null),s=!0},p(t,[s]){let c=n;n=l(t),n===c?o[n].p(t,s):(I={r:0,c:[],p:I},U(o[c],1,1,(()=>{o[c]=null})),I.r||r(I.c),I=I.p,i=o[n],i?i.p(t,s):(i=o[n]=a[n](t),i.c()),B(i,1),i.m(e,null))},i(t){s||(B(i),s=!0)},o(t){U(i),s=!1},d(t){t&&d(e),o[n].d()}}}function wt(t,e,n){let r;l(t,q,(t=>n(0,r=t)));return[r,()=>{c(q,r.file=null,r)}]}return new class extends O{constructor(t){super(),N(this,t,wt,yt,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
