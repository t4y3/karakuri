var app=function(){"use strict";function t(){}function e(t){return t()}function i(){return Object.create(null)}function n(t){t.forEach(e)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let r,a;function l(t,e){return r||(r=document.createElement("a")),r.href=e,t===r.href}function h(e,...i){if(null==e)return t;const n=e.subscribe(...i);return n.unsubscribe?()=>n.unsubscribe():n}function c(t){let e;return h(t,(t=>e=t))(),e}function u(t,e,i){t.$$.on_destroy.push(h(e,i))}function d(t,e,i){return t.set(i),e}function p(t,e){t.appendChild(e)}function g(t,e,i){t.insertBefore(e,i||null)}function m(t){t.parentNode.removeChild(t)}function f(t,e){for(let i=0;i<t.length;i+=1)t[i]&&t[i].d(e)}function b(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function x(){return v(" ")}function y(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function w(t,e,i){null==i?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function A(t,e,i){t.classList[i?"add":"remove"](e)}function E(t){a=t}function k(){if(!a)throw new Error("Function called outside component initialization");return a}function M(t){k().$$.on_mount.push(t)}const T=[],L=[],$=[],P=[],S=Promise.resolve();let C=!1;function B(t){$.push(t)}const R=new Set;let F=0;function I(){const t=a;do{for(;F<T.length;){const t=T[F];F++,E(t),D(t.$$)}for(E(null),T.length=0,F=0;L.length;)L.pop()();for(let t=0;t<$.length;t+=1){const e=$[t];R.has(e)||(R.add(e),e())}$.length=0}while(T.length);for(;P.length;)P.pop()();C=!1,R.clear(),E(t)}function D(t){if(null!==t.fragment){t.update(),n(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}const O=new Set;let N;function U(t,e){t&&t.i&&(O.delete(t),t.i(e))}function q(t,e,i,n){if(t&&t.o){if(O.has(t))return;O.add(t),N.c.push((()=>{O.delete(t),n&&(i&&t.d(1),n())})),t.o(e)}}function G(t){t&&t.c()}function j(t,i,o,r){const{fragment:a,on_mount:l,on_destroy:h,after_update:c}=t.$$;a&&a.m(i,o),r||B((()=>{const i=l.map(e).filter(s);h?h.push(...i):n(i),t.$$.on_mount=[]})),c.forEach(B)}function z(t,e){const i=t.$$;null!==i.fragment&&(n(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(T.push(t),C||(C=!0,S.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(e,s,o,r,l,h,c,u=[-1]){const d=a;E(e);const p=e.$$={fragment:null,ctx:null,props:h,update:t,not_equal:l,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(d?d.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:s.target||d.$$.root};c&&c(p.root);let g=!1;if(p.ctx=o?o(e,s.props||{},((t,i,...n)=>{const s=n.length?n[0]:i;return p.ctx&&l(p.ctx[t],p.ctx[t]=s)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](s),g&&V(e,t)),i})):[],p.update(),g=!0,n(p.before_update),p.fragment=!!r&&r(p.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);p.fragment&&p.fragment.l(t),t.forEach(m)}else p.fragment&&p.fragment.c();s.intro&&U(e.$$.fragment),j(e,s.target,s.anchor,s.customElement),I()}E(d)}class H{$destroy(){z(this,1),this.$destroy=t}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Y=[];function W(e,i=t){let n;const s=new Set;function r(t){if(o(e,t)&&(e=t,n)){const t=!Y.length;for(const t of s)t[1](),Y.push(t,e);if(t){for(let t=0;t<Y.length;t+=2)Y[t][0](Y[t+1]);Y.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(o,a=t){const l=[o,a];return s.add(l),1===s.size&&(n=i(r)||t),o(e),()=>{s.delete(l),0===s.size&&(n(),n=null)}}}}const Z={file:null};const J=function(){const{subscribe:t,set:e,update:i}=W(Z);return{subscribe:t,reset:()=>e(Z),set:t=>e(t)}}(),K={steps:[{title:"Sampling",list:["Sampling the original image for color statistics."]},{title:"Splitting",list:["Put all the pixels of the image (that is, their RGB values) in a bucket.","Find out which color channel (red, green, or blue) among the pixels in the bucket has the greatest range, then sort the pixels according to that channel's values.","After the bucket has been sorted, move the upper half of the pixels into a new bucket."]},{title:"Calculate the average color",list:["Average the pixels in each bucket and you have a palette of 16 colors."]},{title:"Mapping",list:["Mapping the colors to their representative in the color map."]}],current:0};const Q=function(){const{subscribe:t,set:e,update:i}=W(K);return{subscribe:t,reset:()=>e(K),update:t=>e(Object.assign(Object.assign({},K),{current:t})),set:t=>e(t)}}();function tt(t,e,i){const n=t.slice();return n[1]=e[i],n[3]=i,n}function et(t,e,i){const n=t.slice();return n[4]=e[i],n[6]=i,n}function it(t){let e;return{c(){e=b("div"),w(e,"class","-ml-px absolute mt-0.5 top-4 left-4 w-0.5 h-full bg-gray-600"),w(e,"aria-hidden","true")},m(t,i){g(t,e,i)},d(t){t&&m(e)}}}function nt(t){let e;return{c(){e=b("span"),e.innerHTML='<span class="relative z-10 w-8 h-8 flex items-center justify-center bg-gray-600 rounded-full group-hover:bg-gray-800"><svg class="w-5 h-5 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>',w(e,"class","h-9 flex items-center")},m(t,i){g(t,e,i)},d(t){t&&m(e)}}}function st(t){let e;return{c(){e=b("span"),e.innerHTML='<span class="relative z-10 w-8 h-8 flex items-center justify-center bg-white border-2 border-gray-600 rounded-full"><span class="h-2.5 w-2.5 bg-gray-600 rounded-full"></span></span>',w(e,"class","h-9 flex items-center"),w(e,"aria-hidden","true")},m(t,i){g(t,e,i)},d(t){t&&m(e)}}}function ot(t){let e;return{c(){e=b("span"),e.innerHTML='<span class="relative z-10 w-8 h-8 flex items-center justify-center bg-white border-2 border-gray-300 rounded-full group-hover:border-gray-400"><span class="h-2.5 w-2.5 bg-transparent rounded-full group-hover:bg-gray-300"></span></span>',w(e,"class","h-9 flex items-center"),w(e,"aria-hidden","true")},m(t,i){g(t,e,i)},d(t){t&&m(e)}}}function rt(t){let e,i,n=t[4]+"";return{c(){e=b("span"),i=v(n),w(e,"class","text-sm text-gray-500")},m(t,n){g(t,e,n),p(e,i)},p(t,e){1&e&&n!==(n=t[4]+"")&&_(i,n)},d(t){t&&m(e)}}}function at(t){let e,i,n,s,o,r,a,l,h,c,u,d=t[1].title+"",y=t[3]<t[0].steps.length-1&&it(),E=t[3]<t[0].current&&nt(),k=t[3]===t[0].current&&st(),M=t[0].current<t[3]&&ot(),T=t[1].list,L=[];for(let e=0;e<T.length;e+=1)L[e]=rt(et(t,T,e));return{c(){e=b("li"),y&&y.c(),i=x(),n=b("div"),E&&E.c(),s=x(),k&&k.c(),o=x(),M&&M.c(),r=x(),a=b("span"),l=b("span"),h=v(d),c=x();for(let t=0;t<L.length;t+=1)L[t].c();u=x(),w(l,"class","text-xs font-semibold uppercase tracking-wide text-gray-300"),w(a,"class","ml-4 min-w-0 flex flex-col space-y-1"),w(n,"class","relative flex items-start group"),w(e,"class","relative pb-10"),A(e,"pb-10",t[3]<t[0].steps.length-1)},m(t,d){g(t,e,d),y&&y.m(e,null),p(e,i),p(e,n),E&&E.m(n,null),p(n,s),k&&k.m(n,null),p(n,o),M&&M.m(n,null),p(n,r),p(n,a),p(a,l),p(l,h),p(a,c);for(let t=0;t<L.length;t+=1)L[t].m(a,null);p(e,u)},p(t,l){if(t[3]<t[0].steps.length-1?y||(y=it(),y.c(),y.m(e,i)):y&&(y.d(1),y=null),t[3]<t[0].current?E||(E=nt(),E.c(),E.m(n,s)):E&&(E.d(1),E=null),t[3]===t[0].current?k||(k=st(),k.c(),k.m(n,o)):k&&(k.d(1),k=null),t[0].current<t[3]?M||(M=ot(),M.c(),M.m(n,r)):M&&(M.d(1),M=null),1&l&&d!==(d=t[1].title+"")&&_(h,d),1&l){let e;for(T=t[1].list,e=0;e<T.length;e+=1){const i=et(t,T,e);L[e]?L[e].p(i,l):(L[e]=rt(i),L[e].c(),L[e].m(a,null))}for(;e<L.length;e+=1)L[e].d(1);L.length=T.length}1&l&&A(e,"pb-10",t[3]<t[0].steps.length-1)},d(t){t&&m(e),y&&y.d(),E&&E.d(),k&&k.d(),M&&M.d(),f(L,t)}}}function lt(e){let i,n,s=e[0].steps,o=[];for(let t=0;t<s.length;t+=1)o[t]=at(tt(e,s,t));return{c(){i=b("nav"),n=b("ol");for(let t=0;t<o.length;t+=1)o[t].c();w(n,"class","overflow-hidden"),w(i,"aria-label","Progress"),w(i,"class","max-w-sm")},m(t,e){g(t,i,e),p(i,n);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(1&e){let i;for(s=t[0].steps,i=0;i<s.length;i+=1){const r=tt(t,s,i);o[i]?o[i].p(r,e):(o[i]=at(r),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},i:t,o:t,d(t){t&&m(i),f(o,t)}}}function ht(t,e,i){let n;return u(t,Q,(t=>i(0,n=t))),[n]}class ct extends H{constructor(t){super(),X(this,t,ht,lt,o,{})}}var ut;!function(t){t[t.R=0]="R",t[t.G=1]="G",t[t.B=2]="B"}(ut||(ut={}));var dt=function(t,e){this.imageData=t,this.options=e||{strict:!1},this.colors=this.__calculateColorCount(this.imageData.data),this.buckets=[],this.__bucketsPerStep=[]},pt={roundingBits:{configurable:!0},palette:{configurable:!0},bucketsPerStep:{configurable:!0}};dt.averageColor=function(t){for(var e=0,i=0,n=0,s=0,o=0,r=t.length;o<r;o=o+1|0){var a=t[o],l=a[0],h=a[1],c=a[2],u=a[3];i=l*u+i,n=h*u+n,s=c*u+s,e=e+u|0}return[Math.round(i/e),Math.round(n/e),Math.round(s/e)]},pt.roundingBits.get=function(){return this.options.strict?255:248},pt.palette.get=function(){for(var t=[],e=0,i=this.buckets.length;e<i;e=e+1|0)t[e]=dt.averageColor(this.buckets[e].colors);return t},pt.bucketsPerStep.get=function(){return this.__bucketsPerStep},dt.prototype.reduce=function(t){if(this.colors.length<=t)return console.warn("It has already been reduced color."),this.imageData;this.buckets=this.__mediancut([this.__generateBucket(this.colors)],t);for(var e=new Map,i=0,n=this.buckets.length;i<n;i=i+1|0)for(var s=this.buckets[i],o=dt.averageColor(s.colors),r=0,a=s.colors.length;r<a;r=r+1|0){var l=s.colors[r],h=l[0],c=l[1],u=l[2],d=h&this.roundingBits|(c&this.roundingBits)<<8|(u&this.roundingBits)<<16;e.set(d,o)}for(var p=this.imageData.data,g=p.length,m=new Uint8ClampedArray(g),f=0;f<g;){var b=p[f]&this.roundingBits|(p[f+1]&this.roundingBits)<<8|(p[f+2]&this.roundingBits)<<16,v=e.get(b),x=v[0],y=v[1],w=v[2];m[f]=x,m[f+1]=y,m[f+2]=w,m[f+3]=p[f+3],f=f+4|0}return new ImageData(m,this.imageData.width,this.imageData.height)},dt.prototype.__calculateColorCount=function(t){for(var e=new Map,i=t.length,n=0;n<i;){var s=t[n]&this.roundingBits,o=t[n+1]&this.roundingBits,r=t[n+2]&this.roundingBits,a=s|o<<8|r<<16,l=e.get(a),h=l?l[3]+1:1;e.set(a,[s,o,r,h]),n=n+4|0}var c=[];return e.forEach((function(t){c[c.length]=t})),c},dt.prototype.__getTotalAnGreatestRangeChannel=function(t){for(var e=0,i=0,n=0,s=0,o=255,r=255,a=255,l=t.length,h=0;h<l;){var c=t[h],u=c[0],d=c[1],p=c[2],g=c[3];i=Math.max(u,i),n=Math.max(d,n),s=Math.max(p,s),o=Math.min(u,o),r=Math.min(d,r),a=Math.min(p,a),e+=g,h=h+1|0}var m=1.2*(i-o),f=1.2*(n-r),b=s-a,v=Math.max(m,f,b),x=ut.R;return m===v&&(x=ut.R),f===v&&(x=ut.G),b===v&&(x=ut.B),{total:e,channel:x,minR:o,minG:r,minB:a,maxR:i,maxG:n,maxB:s}},dt.prototype.__mediancut=function(t,e){this.__bucketsPerStep.push([].concat(t));var i=0,n=0;if(t.length+1>e)return t;for(var s=0,o=t.length;s<o;s=s+1|0)t[s].total>i&&1!==t[s].colors.length&&(n=s,i=t[s].total);var r=t[n];if(1===r.total||1===r.colors.length)return console.error("Cube could not be split."),t;var a=r.channel;r.colors.sort((function(t,e){return t[a]-e[a]}));var l=Math.floor((r.colors.length+1)/2),h=this.__generateBucket(r.colors.slice(0,l)),c=this.__generateBucket(r.colors.slice(l));return t.splice(n,1,h,c),this.__mediancut(t,e)},dt.prototype.__generateBucket=function(t){var e=this.__getTotalAnGreatestRangeChannel(t);return{colors:t,total:e.total,channel:e.channel,minR:e.minR,minG:e.minG,minB:e.minB,maxR:e.maxR,maxG:e.maxG,maxB:e.maxB}},Object.defineProperties(dt.prototype,pt);var gt=class extends HTMLElement{constructor(t,e,i=!0){super(),this.editing=!1,this.attachShadow({mode:"open"}),this.axes=t,this.totalTime=e,this.debug=i,this.shadowRoot.innerHTML=this.template(t,e),this.$pane=this.shadowRoot.querySelector("#pane"),this.$timeline=this.shadowRoot.querySelector("#timeline"),this.$current=this.shadowRoot.querySelector("#current"),this.$progress=this.shadowRoot.querySelector("#progress"),this.$labels=this.shadowRoot.querySelectorAll(".label"),this.$bars=this.shadowRoot.querySelectorAll(".bar"),this.$barsBegin=this.shadowRoot.querySelectorAll(".begin"),this.$barsEnd=this.shadowRoot.querySelectorAll(".end"),this.$previous=this.shadowRoot.querySelector("#previous"),this.$playPause=this.shadowRoot.querySelector("#play-pause"),this.$next=this.shadowRoot.querySelector("#next"),this.playing=!0,this.previous=!1,this.next=!1,this.skip=-1,this.$previous.addEventListener("click",(t=>{this.previous=!0})),this.$playPause.addEventListener("click",(t=>{this.playing=!this.playing})),this.$next.addEventListener("click",(t=>{this.next=!0}));for(let t=0,e=this.$bars.length;t<e;t++){if(this.$bars[t].addEventListener("click",(t=>{let e=t.currentTarget,i=Number(e.getAttribute("idx"));this.skip=i})),!this.debug)continue;let e=this.$barsBegin[t],i=this.$barsEnd[t];e.addEventListener("input",(i=>{let n=Number(e.value);if(Number(this.$barsEnd[t].value)<n)i.preventDefault();else if(Number.isFinite(this.axes[t].position))this.axes[t].position=n,this.axes[t].duration=this.axes[t].endAt-(this.axes[t].delay+this.axes[t].position);else{let e=this.axes.find((e=>e.key===this.axes[t].position));this.axes[t].delay=n-e.endAt,this.axes[t].duration=this.axes[t].endAt-(this.axes[t].delay+e.endAt)}})),i.addEventListener("input",(e=>{let n=Number(i.value);if(n<Number(this.$barsBegin[t].value))e.preventDefault();else if(Number.isFinite(this.axes[t].position))this.axes[t].duration=n-(this.axes[t].position+this.axes[t].delay);else{let e=this.axes.find((e=>e.key===this.axes[t].position));this.axes[t].duration=n-e.endAt-this.axes[t].delay}}))}this.$labels.forEach((t=>{t.addEventListener("click",(t=>{let e=t.currentTarget,i=Number(e.getAttribute("idx"));this.skip=i}))})),this.$current.addEventListener("input",(t=>{this.editing=!0;let e=Number(this.$current.value);this.__updateProgressPosition(e),this.__updateBar(this.totalTime)})),this.$current.addEventListener("change",(t=>{this.editing=!1}))}attributeChangedCallback(){}connectedCallback(){}disconnectedCallback(){}getAxes(){return this.axes}get(t){let e=Date.now(),i=Number(this.$current.value),n=e-t;if(this.playing||(t=e-i,n=i),this.editing&&(t=e-i,n=i),-1<this.skip){let i=this.axes[this.skip];t=e-i.beginAt,n=i.beginAt,this.skip=-1}return this.previous&&(this.previous=!1,t=e,n=0),this.next&&(this.next=!1,t=e-this.totalTime,n=this.totalTime),{beginAt:t,elapsedTime:n,editing:this.editing}}update(t,e,i){this.axes=i,this.totalTime=e,this.$current.setAttribute("max",e),this.$current.value=t,this.__updateProgressPosition(t),this.__updateBar(e),this.debug&&this.__updateBarRange(e),this.__updateScale(e)}template(t,e){let i="",n="",s="";for(let e=0;e<t.length;e++){let s=t[e];i+=`<div class="row" id="row-${e}"><div class="label" idx="${e}">${s.key}</div></div>`;let o="";this.debug&&(o=`\n          <input class="begin" type="range" min="0" max="0" step="10" value="${s.beginAt}">\n          <input class="end" type="range" min="0" max="0" step="10" value="${s.endAt}">\n        `),n+=`\n        <div class="row">\n          <div class="bar bar--${this.debug?"debug":"default"}" idx="${e}"></div>\n          ${o}\n        </div>`,this.debug}for(let t=0,i=Math.floor(e/1e3);t<i;t++)s+=`<div class="scale-label" style="--sec: ${t+1}">${t+1}s</div>`;return`\n      <style>\n        * {\n          box-sizing: border-box;\n        }\n        :host {\n          display: block;\n          height: 100%;\n        }\n        .container {\n          display: flex;\n          flex-direction: column;\n          height: 100%;\n          background-color: #313131;\n          color: #eeeeee;\n          position: relative;\n          --tools-height: 40px;\n          --controls-height: 40px;\n        }\n        .tools {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n          height: var(--tools-height);\n          border-bottom: 1px solid #202020;\n        }\n        .tools__item {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 20px;\n          margin: 0 8px;\n          color: #eeeeee;\n        }\n        .tools__item div {\n          width: 100%;\n          cursor: pointer;\n        }\n        .tools__item div:hover {\n          opacity: .6;\n        }\n        .tools__item svg {\n          fill: currentColor;\n        }\n        .controls {\n          display: flex;\n          flex-shrink: 0;\n          height: var(--controls-height);\n          border-bottom: 1px solid #202020;\n        }\n        .pane {\n          display: flex;\n          flex: 1;\n          overflow: scroll;\n          scroll-behavior: smooth;\n        }\n        .head {\n          flex-shrink: 0;\n          flex-basis: 20%;\n          max-width: 200px;\n          min-width: 0;\n        }\n        .body {\n          flex: 1;\n          position: relative;\n        }\n        .actions {\n          height: 100%;\n          border-right: 1px solid #222322;\n        }\n        .rows {\n          border-right: 1px solid #222322;\n        }\n        .row {\n          display: flex;\n          align-items: center;\n          height: 24px;\n          border-bottom: 1px solid #202020;\n          position: relative;\n        }\n        .row input[type="range"] {\n          position: absolute;\n          inset: 0;\n        }\n        .label {\n          padding-left: 12px;\n          font-size: 12px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          cursor: pointer;\n        }\n        .bar {\n          height: 100%;\n          background-color: #545454;\n          opacity: .5;\n          transform-origin: left;\n          cursor: pointer;\n          position: relative;\n        }\n        .bar.bar--debug::before {\n          content: "";\n          display: block;\n          width: 6px;\n          position: absolute;\n          left: 0;\n          top: 0;\n          bottom: 0;\n          margin: 4px;\n          border-radius: 2px;\n          background-color: darkgray;\n        }\n        .bar.bar--debug::after {\n          content: "";\n          display: block;\n          width: 6px;\n          position: absolute;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          margin: 4px;\n          border-radius: 2px;\n          background-color: darkgray;\n        }\n        .bar.bar--active {\n          opacity: 1;\n        }\n        .progress {\n          position: absolute;\n          top: var(--tools-height);\n          bottom: 0;\n          left: 0;\n          width: 2px;\n          margin-left: min(20%, 200px);\n          background-color: #71A0EB;\n          opacity: 0.6;\n        }\n        .progress::before {\n          content: "";\n          display: block;\n          width: 20px;\n          height: 30px;\n          background-color: #53aeff;\n          margin-left: -9px;\n        }\n        .progress::after {\n          content: "";\n          display: block;\n          border-top: 10px solid #53aeff;\n          border-left: 10px solid transparent;\n          border-right: 10px solid transparent;\n          margin-left: -9px;\n        }\n        .current {\n          position: absolute;\n          top: var(--tools-height);\n          height: var(--controls-height);\n          left: -12px;\n          right: -12px;\n          margin-left: min(20%, 200px);\n        }\n        input[type="range"] {\n          -webkit-appearance: none;\n          appearance: none;\n          margin: 0;\n          cursor: pointer;\n          outline: none;\n        }\n        input[type="range"]::-webkit-slider-thumb {\n          opacity: 0;\n        }\n        input[type="range"]::-moz-range-thumb {\n          opacity: 0;\n        }\n        /* Firefox„ÅßÁÇπÁ∑ö„ÅåÂë®„Çä„Å´Ë°®Á§∫„Åï„Çå„Å¶„Åó„Åæ„ÅÜÂïèÈ°å„ÅÆËß£Ê∂à */\n        input[type="range"]::-moz-focus-outer {\n          border: 0;\n        }\n        .current input[type="range"] {\n          height: var(--controls-height);\n          width: 100%;\n          background: transparent;\n        }\n        input.begin[type="range"],\n        input.end[type="range"] {\n          height: 100%;\n          width: calc(100% + 12px);\n          background: transparent;\n          pointer-events: none;\n          margin-left: -6px;\n        }\n        input.begin[type="range"]::-webkit-slider-thumb,\n        input.end[type="range"]::-webkit-slider-thumb {\n          -webkit-appearance: none;\n          appearance: none;\n          pointer-events: auto;\n          opacity: 0;   \n          width: 12px;\n          height: 100%;\n          cursor: ew-resize;\n        }\n        input.begin[type="range"]::-moz-range-thumb,\n        input.end[type="range"]::-moz-range-thumb {\n          -webkit-appearance: none;\n          appearance: none;\n          pointer-events: auto;\n          opacity: 0;   \n          width: 12px;\n          height: 100%;\n          cursor: ew-resize;\n        }\n        input.begin[type="range"]::-webkit-slider-thumb {\n          background: darkgreen;\n          transform: translateX(50%);\n        }\n        input.begin[type="range"]::-moz-range-thumb {\n          background: darkgreen;\n          transform: translateX(50%);\n        }\n        input.end[type="range"]::-webkit-slider-thumb {\n          background: indianred;\n          transform: translateX(-50%);\n        }\n        input.end[type="range"]::-moz-range-thumb {\n          background: indianred;\n          transform: translateX(-50%);\n        }\n        .scale {\n          position: relative;\n          height: 100%;\n        }\n        .scale-s,\n        .scale-100ms {\n          height: 50%;\n        }\n        .scale-s {\n          /*\n            total / 1s \n            e.g. 6000 / 1000\n            x / 1000 = 6\n            calc(100% / calc(var(--total) / 1000))\n           */\n          --x: calc(100% / calc(var(--total) / 1000));\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n          border-bottom: 1px solid #202020;\n        }\n        .scale-100ms {\n          --x: calc(100% / calc(var(--total) / 1000) / 10);\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n        }\n        .scale-label {\n          --x: calc(100% / calc(var(--total) / 1000));\n          position: absolute;\n          top: 0;\n          left: calc(var(--x) * var(--sec));\n          font-size: 10px;\n          font-style: italic;\n          transform: translateX(calc(-100% - 4px));\n        }\n      </style>\n      <div class="container">\n        <div class="tools">\n          <div class="tools__item">\n            <div id="previous">\n              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path d="M2.75 20C2.75 20.5523 3.19772 21 3.75 21C4.30228 21 4.75 20.5523 4.75 20L4.75 4C4.75 3.44772 4.30229 3 3.75 3C3.19772 3 2.75 3.44772 2.75 4V20Z"/>\n                <path d="M20.75 19.0526C20.75 20.4774 19.1383 21.305 17.9803 20.4748L7.51062 12.9682C6.50574 12.2477 6.54467 10.7407 7.5854 10.073L18.0551 3.35665C19.2198 2.60946 20.75 3.44583 20.75 4.82961L20.75 19.0526Z"/>\n              </svg>\n            </div>\n          </div>\n          <div class="tools__item">\n            <div id="play-pause">\n              <svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                \x3c!-- Generator: Sketch 59.1 (86144) - https://sketch.com --\x3e\n                <title>ic_fluent_video_play_pause_24_filled</title>\n                <desc>Created with Sketch.</desc>\n                <g id="üîç-Product-Icons" stroke="none" stroke-width="1" >\n                    <g id="ic_fluent_video_play_pause_24_filled" fill-rule="nonzero">\n                        <path d="M3.65140982,6.61646219 L11.1528787,11.3693959 C11.3672679,11.5052331 11.4827597,11.722675 11.4993749,11.9464385 L11.4984593,7.25 C11.4984593,6.83578644 11.8342458,6.5 12.2484593,6.5 L15.2484593,6.5 C15.6626729,6.5 15.9984593,6.83578644 15.9984593,7.25 L15.9984593,16.75 C15.9984593,17.1642136 15.6626729,17.5 15.2484593,17.5 L12.2484593,17.5 C11.8342458,17.5 11.4984593,17.1642136 11.4984593,16.75 L11.4993494,12.0597632 C11.4826318,12.2835468 11.3670166,12.5009613 11.1525249,12.6366956 L3.65105604,17.3837618 C3.15168144,17.6997752 2.5,17.3409648 2.5,16.75 L2.5,7.25 C2.5,6.65884683 3.15205264,6.30006928 3.65140982,6.61646219 Z M21.2477085,6.50037474 C21.661922,6.50037474 21.9977085,6.83616118 21.9977085,7.25037474 L21.9977085,16.7496253 C21.9977085,17.1638388 21.661922,17.4996253 21.2477085,17.4996253 L18.2477085,17.4996253 C17.8334949,17.4996253 17.4977085,17.1638388 17.4977085,16.7496253 L17.4977085,7.25037474 C17.4977085,6.83616118 17.8334949,6.50037474 18.2477085,6.50037474 L21.2477085,6.50037474 Z" id="üé®-Color"></path>\n                    </g>\n                </g>\n              </svg>\n            </div>\n          </div>\n          <div class="tools__item">\n            <div id="next">\n              <svg   viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path d="M21 4C21 3.44772 20.5523 3 20 3C19.4477 3 19 3.44772 19 4V20C19 20.5523 19.4477 21 20 21C20.5523 21 21 20.5523 21 20V4Z"/>\n                <path d="M3 4.94743C3 3.5226 4.61175 2.69498 5.7697 3.52521L16.2394 11.0318C17.2443 11.7523 17.2053 13.2593 16.1646 13.927L5.69492 20.6434C4.53019 21.3905 3 20.5542 3 19.1704V4.94743Z"/>\n              </svg>\n            </div>\n          </div>\n        </div>\n        <div class="controls">\n          <div class="head"><div class="actions"></div></div>\n          <div class="body">\n            <div class="scale" id="scale" style="--total: ${e}">\n              <div class="scale-s"></div>\n              <div class="scale-100ms"></div>\n              ${s}\n            </div>\n          </div>\n        </div>\n        <div id="pane" class="pane">\n          <div class="head">\n            <div class="rows">\n              ${i}\n            </div>\n          </div>\n          <div id="timeline" class="body">\n            <div class="rows">\n              ${n}\n            </div>\n          </div>\n        </div>\n        <div class="current">\n          <input id="current" type="range" min="0" max="0" step="any" value="0">\n        </div>\n        <div id="progress" class="progress"></div>\n      </div>\n    `}__updateScale(t){let e=this.shadowRoot.querySelector(".test");e&&e.remove(),this.shadowRoot.querySelectorAll(".scale-label").forEach((t=>{t.remove()})),this.shadowRoot.querySelector(".scale").style.setProperty("--total",t);let i="";for(let e=0,n=Math.floor(t/1e3);e<n;e++)i+=`<div class="scale-label" style="--sec: ${e+1}">${e+1}s</div>`;let n=document.createElement("div");n.className="test",n.innerHTML=i,this.shadowRoot.querySelector(".scale").appendChild(n)}__updateProgressPosition(t){let e=this.$timeline.clientWidth,i=Math.min(t/this.totalTime,1)*e;this.$progress.style.transform=`translateX(${i}px)`}__updateBarRange(t){for(let e=0;e<this.$bars.length;e++){let i=this.axes[e];this.$barsBegin[e].setAttribute("max",t),this.$barsBegin[e].value=i.beginAt,this.$barsEnd[e].setAttribute("max",t),this.$barsEnd[e].value=i.endAt}}__updateBar(t){let e=this.$timeline.clientWidth/t;for(let t=0;t<this.$bars.length;t++){let i=this.axes[t],n=i.beginAt*e,s=(i.endAt-i.beginAt)*e;this.$bars[t].style.transform=`translateX(${n}px)`,this.$bars[t].style.width=`${s}px`,0<i.progress&&!i.pass?this.$bars[t].classList.add("bar--active"):this.$bars[t].classList.remove("bar--active")}}};window.customElements.define("taxis-timeline",gt);var mt={key:"",beginAt:0,endAt:0,duration:0,delay:0,position:0,progress:0,enter:!1,pass:!1},ft="undefined"!=typeof Float32Array?Float32Array:Array;function bt(){var t=new ft(16);return ft!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function vt(t,e,i){var n=e[0],s=e[1],o=e[2],r=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8],d=e[9],p=e[10],g=e[11],m=e[12],f=e[13],b=e[14],v=e[15],x=i[0],y=i[1],w=i[2],_=i[3];return t[0]=x*n+y*a+w*u+_*m,t[1]=x*s+y*l+w*d+_*f,t[2]=x*o+y*h+w*p+_*b,t[3]=x*r+y*c+w*g+_*v,x=i[4],y=i[5],w=i[6],_=i[7],t[4]=x*n+y*a+w*u+_*m,t[5]=x*s+y*l+w*d+_*f,t[6]=x*o+y*h+w*p+_*b,t[7]=x*r+y*c+w*g+_*v,x=i[8],y=i[9],w=i[10],_=i[11],t[8]=x*n+y*a+w*u+_*m,t[9]=x*s+y*l+w*d+_*f,t[10]=x*o+y*h+w*p+_*b,t[11]=x*r+y*c+w*g+_*v,x=i[12],y=i[13],w=i[14],_=i[15],t[12]=x*n+y*a+w*u+_*m,t[13]=x*s+y*l+w*d+_*f,t[14]=x*o+y*h+w*p+_*b,t[15]=x*r+y*c+w*g+_*v,t}function xt(t,e,i){var n,s,o,r,a,l,h,c,u,d,p,g,m=i[0],f=i[1],b=i[2];return e===t?(t[12]=e[0]*m+e[4]*f+e[8]*b+e[12],t[13]=e[1]*m+e[5]*f+e[9]*b+e[13],t[14]=e[2]*m+e[6]*f+e[10]*b+e[14],t[15]=e[3]*m+e[7]*f+e[11]*b+e[15]):(n=e[0],s=e[1],o=e[2],r=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8],d=e[9],p=e[10],g=e[11],t[0]=n,t[1]=s,t[2]=o,t[3]=r,t[4]=a,t[5]=l,t[6]=h,t[7]=c,t[8]=u,t[9]=d,t[10]=p,t[11]=g,t[12]=n*m+a*f+u*b+e[12],t[13]=s*m+l*f+d*b+e[13],t[14]=o*m+h*f+p*b+e[14],t[15]=r*m+c*f+g*b+e[15]),t}function yt(){var t=new ft(3);return ft!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function wt(t,e,i){var n=new ft(3);return n[0]=t,n[1]=e,n[2]=i,n}function _t(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function At(t,e){var i=e[0],n=e[1],s=e[2],o=i*i+n*n+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Et(t,e,i){var n=i[0],s=i[1],o=i[2],r=i[3],a=e[0],l=e[1],h=e[2],c=s*h-o*l,u=o*a-n*h,d=n*l-s*a,p=s*d-o*u,g=o*c-n*d,m=n*u-s*c,f=2*r;return c*=f,u*=f,d*=f,p*=2,g*=2,m*=2,t[0]=a+c+p,t[1]=l+u+g,t[2]=h+d+m,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function kt(){var t=new ft(4);return ft!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Mt(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Tt(t,e,i){i*=.5;var n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t}yt(),function(){var t,e=(t=new ft(4),ft!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();var Lt;yt(),wt(1,0,0),wt(0,1,0),kt(),kt(),Lt=new ft(9),ft!=Float32Array&&(Lt[1]=0,Lt[2]=0,Lt[3]=0,Lt[5]=0,Lt[6]=0,Lt[7]=0),Lt[0]=1,Lt[4]=1,Lt[8]=1;const $t=(t,e,i)=>{const n=t.createShader(i);if(!n)throw new Error("Failed to create shader");if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(`Failed to compile: ${t.getShaderInfoLog(n)}`);return n},Pt=(t,e)=>{const i=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),i},St=(t,e)=>{const i=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Int16Array(e),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),i},Ct=(t,e,i,n)=>{e.forEach(((e,s)=>{t.bindBuffer(t.ARRAY_BUFFER,e),t.enableVertexAttribArray(i[s]),t.vertexAttribPointer(i[s],n[s],t.FLOAT,!1,0,0)}))},Bt=(t,e,i)=>{const n=t.createTexture();return t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_2D,null),n};class Rt{container;option;isMovable=!0;isScalable=!0;drag;__distance=10;scale=0;rotateX=0;rotateY=0;prevPosition;qt=kt();qtx=kt();qty=kt();center=[0,0,0];__position=[0,7,this.__distance];defaultPosition=[0,7,this.__distance];defaultUpDirection=[0,1,0];upDirection=[0,1,0];minDistance=1;maxDistance=20;get position(){return this.__position}get distance(){return this.__distance}set distance(t){this.__distance=t}constructor(t,e){if(this.container=t,this.option=e,this.handleMousedown=this.handleMousedown.bind(this),this.handleMousemove=this.handleMousemove.bind(this),this.handleMouseup=this.handleMouseup.bind(this),this.handleWheel=this.handleWheel.bind(this),this.option&&"isMovable"in this.option&&(this.isMovable=this.option.isMovable),this.option&&"isScalable"in this.option&&(this.isScalable=this.option.isScalable),this.option&&this.option.center&&(this.center=this.option.center),this.option&&this.option.minDistance&&(this.minDistance=this.option.minDistance),this.option&&this.option.maxDistance&&(this.maxDistance=this.option.maxDistance),this.option&&this.option.position){const t=yt(),e=yt();At(e,this.option.position.direction),_t(t,e,this.option.position.distance),this.__distance=this.option.position.distance,this.__position=[...t],this.defaultPosition=[...t]}this.addEvent()}addEvent(){this.isMovable&&(this.container.addEventListener("mousedown",this.handleMousedown,{passive:!0}),this.container.addEventListener("mousemove",this.handleMousemove,{passive:!0}),this.container.addEventListener("mouseup",this.handleMouseup,{passive:!0})),this.isScalable&&this.container.addEventListener("wheel",this.handleWheel,{passive:!0})}removeEvent(){this.isMovable&&(this.container.removeEventListener("mousedown",this.handleMousedown),this.container.removeEventListener("mousemove",this.handleMousemove),this.container.removeEventListener("mouseup",this.handleMouseup)),this.isScalable&&this.container.removeEventListener("wheel",this.handleWheel)}handleMousedown(t){this.drag=!0;const e=this.container.getBoundingClientRect();this.prevPosition=[t.clientX-e.left,t.clientY-e.top]}handleMousemove(t){if(!0!==this.drag)return;if(1!==t.buttons)return;const e=this.container.getBoundingClientRect(),i=e.width,n=e.height,s=1/Math.min(i,n),o=t.clientX,r=t.clientY;this.rotateX+=(this.prevPosition[0]-o)*s,this.rotateY+=(this.prevPosition[1]-r)*s,this.rotateX=this.rotateX%1,this.prevPosition=[o,r]}handleMouseup(){this.drag=!1}handleWheel(t){const e=t.wheelDelta;e>0?this.scale=-.5:e<0&&(this.scale=.5)}update(){const t=2*Math.PI,e=[1,0,0];Mt(this.qt),Mt(this.qtx),Mt(this.qty),Tt(this.qtx,[0,1,0],this.rotateX*t),Et(e,e,this.qtx),Tt(this.qty,e,this.rotateY*t),function(t,e,i){var n=e[0],s=e[1],o=e[2],r=e[3],a=i[0],l=i[1],h=i[2],c=i[3];t[0]=n*c+r*a+s*h-o*l,t[1]=s*c+r*l+o*a-n*h,t[2]=o*c+r*h+n*l-s*a,t[3]=r*c-n*a-s*l-o*h}(this.qt,this.qty,this.qtx),Et(this.__position,this.defaultPosition,this.qt),Et(this.upDirection,this.defaultUpDirection,this.qt),this.scale*=.7,this.__distance+=this.scale,this.__distance=Math.min(Math.max(this.__distance,this.minDistance),this.maxDistance);const i=yt();return At(i,this.__position),_t(this.__position,i,this.__distance),function(t,e,i,n){var s=e[0],o=e[1],r=e[2],a=n[0],l=n[1],h=n[2],c=s-i[0],u=o-i[1],d=r-i[2],p=c*c+u*u+d*d;p>0&&(c*=p=1/Math.sqrt(p),u*=p,d*=p);var g=l*d-h*u,m=h*c-a*d,f=a*u-l*c;return(p=g*g+m*m+f*f)>0&&(g*=p=1/Math.sqrt(p),m*=p,f*=p),t[0]=g,t[1]=m,t[2]=f,t[3]=0,t[4]=u*f-d*m,t[5]=d*g-c*f,t[6]=c*m-u*g,t[7]=0,t[8]=c,t[9]=u,t[10]=d,t[11]=0,t[12]=s,t[13]=o,t[14]=r,t[15]=1,t}(bt(),this.__position,this.center,this.upDirection)}}const Ft=(t,e,i)=>{const n=t/2,s=e/2;return{position:new Float32Array([-n,s,0,n,s,0,-n,-s,0,n,-s,0]),normal:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),color:new Float32Array([i[0],i[1],i[2],i[3],i[0],i[1],i[2],i[3],i[0],i[1],i[2],i[3],i[0],i[1],i[2],i[3]]),indices:[0,2,1,1,2,3],texCoord:[0,0,1,0,0,1,1,1]}},It=t=>"bool"===t?1:Number(t[t.length-1]),Dt=({vertex:t,fragment:e})=>{const i=[],n=[],s={},o=/attribute (?<type>.*) (?<variable>.*);/,r=/uniform (?<type>.*) (?<variable>.*);/;return t.split("\n").forEach((t=>{const e=t.match(o);if(e){const{variable:t,type:n}=e.groups;i.push({variable:t,type:n,attStride:It(n)})}const a=t.match(r);if(a){const{variable:t,type:e}=a.groups;n.push({variable:t,type:e}),s[t]=null}})),e.split("\n").forEach((t=>{const e=t.match(r);if(e){const{variable:t,type:i}=e.groups;n.push({variable:t,type:i}),s[t]=null}})),{attribute:i,uniform:n,uniLocation:s}};var Ot="precision mediump float;\n\nuniform sampler2D textureUnit;\nuniform bool isTexture;\n\nvarying vec4 vColor;\nvarying vec2 vTexCoord;\n\nvoid main(){\n    vec4 samplerColor = vec4(1.0);\n    if(isTexture == true){\n        samplerColor = texture2D(textureUnit, vTexCoord);\n        gl_FragColor = samplerColor;\n    } else {\n        gl_FragColor = vColor;\n    }\n}\n\n",Nt="attribute vec3 position;\nattribute vec4 color;\nattribute vec2 texCoord;\n\nuniform mat4 mvpMatrix;\n\nvarying vec4 vColor;\nvarying vec2 vTexCoord;\n\n\nvoid main(){\n    vColor = color;\n\n    vTexCoord = texCoord;\n\n    gl_Position = mvpMatrix * vec4(position, 1.0);\n}\n\n",Ut="precision mediump float;\nvarying vec4 vColor;\n\nvoid main(){\n    gl_FragColor = vColor;\n}\n\n",qt="attribute vec3 fromPosition;\nattribute vec3 toPosition;\nattribute vec4 color;\n\nuniform mat4 mMatrix;   // „É¢„Éá„É´Â∫ßÊ®ôÂ§âÊèõ\nuniform mat4 mvpMatrix;\nuniform float interporation;\nuniform vec3 eyePosition;   // „Ç´„É°„É©„ÅÆ‰ΩçÁΩÆ\n\nvarying vec4 vColor;\n\n\nvoid main(){\n\n\n    vec3 position = mix(fromPosition, toPosition, interporation);\n\n    vColor = color;\n\n    gl_Position = mvpMatrix * vec4(position, 1.0);\n\n//    // „ÉØ„Éº„É´„ÉâÁ©∫ÈñìÔºà„É¢„Éá„É´Â∫ßÊ®ôÂ§âÊèõÂæå„ÅÆÁ©∫ÈñìÔºâ‰∏ä„ÅÆÈ†ÇÁÇπ„ÅÆ‰ΩçÁΩÆ\n//    vec4 worldPosition = mMatrix * vec4(position, 1.0);\n//    // „Ç´„É°„É©„Åã„Çâ„ÅÆË∑ùÈõ¢\n//    float dist = length(worldPosition.xyz - eyePosition);\n\n    gl_PointSize = mix(1.0, 12.0 / gl_Position.w, interporation);\n}\n\n";const{attribute:Gt,uniform:jt,uniLocation:zt}=Dt({vertex:Nt,fragment:Ot}),{attribute:Vt,uniform:Xt,uniLocation:Ht}=Dt({vertex:qt,fragment:Ut}),Yt={bucketsCount:8};const Wt=function(){const{subscribe:t,set:e,update:i}=W(Yt);return{subscribe:t,reset:()=>e(Yt),set:t=>e(t)}}(),Zt=128,Jt=.5;let Kt,Qt,te,ee,ie=[-1.5,0,0],ne=[1.5,0,0],se=[0,0,0],oe=0,re=-1,ae=null;class le{constructor(){this.programMain=null,this.programSub=null,this.pMatrix=bt(),this.vMatrix=bt(),this.vpMatrix=bt(),this.attLocation=[],this.attStride=[],this.uniLocation=zt,this.attLocationSub=[],this.attStrideSub=[],this.uniLocationSub=Ht,this.beforeImage={geometry:null,VBO:[],IBO:[]},this.afterImage={geometry:null,VBO:[],IBO:[]},this.boxes=[],this.boxesPosition=[],this.boxesVBO=[],this.boxesIBO=[],this.boxesLine=[],this.boxesLineVBO=[],this.pointsFromPosition=[],this.pointsToPosition=[],this.pointsColor=[],this.pointsVBO=[],this.afterPointsFromPosition=[],this.afterPointsToPosition=[],this.afterPointsColor=[],this.afterPointsVBO=[]}init(t,e){this.taxis=new class{constructor(t={}){this.option=t,this.axes=[]}get totalTime(){return this.axes.length?Math.max(...this.axes.map((t=>t.endAt))):0}get totalTimeForTimeline(){return this.totalTime+500}get everyPassed(){return this.axes.every((t=>t.pass))}restart(){this.beginAt=Date.now()}getAxis({key:t}){return this.axes.find((e=>e.key===t))}getAxes(){return this.axes}add(t,e,i=0,n){let s=this.totalTime+i;if(void 0!==n)s=Number.isFinite(n)?n+i:this.getAxis({key:n}).endAt+i;else{let t=this.axes[this.axes.length-1];n=t?t.key:0}return this.axes.push({...mt,key:t,beginAt:s,endAt:s+e,duration:e,delay:i,position:n}),this.sort(),this}begin(){this.option.timeline&&(this.timeline=new gt(this.axes,this.totalTimeForTimeline,this.option.timeline.debug),this.option.timeline.container.appendChild(this.timeline)),this.beginAt=Date.now(),this.__tick()}reset(){cancelAnimationFrame(this.requestID)}ticker(t){this.tickerFn=t}__tick(){let t=this.beginAt,e=Date.now()-t,i=!1;if(this.option.timeline){this.axes=this.recalculation(this.timeline.getAxes());let{beginAt:n,elapsedTime:s,editing:o}=this.timeline.get(this.beginAt);t=n,e=s,i=o}this.beginAt=t,this.axes.forEach(((t,i)=>{let n=e-t.beginAt,s=Math.max(0,Math.min(n/t.duration,1)),o=t.beginAt<=e,r=t.endAt<e;t.progress=s,t.enter=o,t.pass=r})),this.option.timeline&&!i&&this.timeline.update(e,this.totalTimeForTimeline,this.axes),this.tickerFn&&this.tickerFn(e,this.toMap(this.axes)),this.requestID=requestAnimationFrame(this.__tick.bind(this))}calculation(){let t=[];for(let e=0;e<this.axes.length;e++){let i=this.axes[e],{key:n,duration:s,position:o,delay:r}=i,a=Math.max(...t.map((t=>t.endAt)))+r;void 0!==o?a=Number.isFinite(o)?o+r:this.getAxis({key:o}).endAt+r:o=a,t.push({...mt,key:n,beginAt:a,endAt:a+s,duration:s,delay:r,position:o})}}recalculation(t){let e=[];for(let i=0;i<t.length;i++){let n=t[i],{key:s,duration:o,position:r,delay:a}=n,l=Math.max(...e.map((t=>t.endAt)))+a;void 0!==r?l=Number.isFinite(r)?r+a:this.getAxis({key:r}).endAt+a:r=l,e.push({...mt,key:s,beginAt:l,endAt:l+o,duration:o,delay:a,position:r})}return e}sort(){this.axes.sort(((t,e)=>t.beginAt-e.beginAt))}toMap(t){let e=new Map;return t.forEach((t=>{e[t.key]=t,e.set(t.key,t)})),e}}({timeline:{container:e,debug:!1}}),this.taxis.add("Sampling",3e3);for(let t=0;t<c(Wt).bucketsCount;t++)0===t?this.taxis.add(`split#${t}`,500,500):this.taxis.add(`split#${t}`,500);for(let t=0;t<c(Wt).bucketsCount;t++)this.taxis.add(`Average color#${t}`,500);this.taxis.add("Mapping",3e3,500),this.canvas=t,this.gl=t.getContext("webgl"),this.camera=new Rt(t,{position:{direction:[0,0,1],distance:7.5}});{const t=c(J).file,e=document.createElement("canvas");e.width=Zt,e.height=Zt;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height,0,0,Zt,Zt),ae=i.getImageData(0,0,e.width,e.height),Kt=new dt(ae,{strict:!0}),Qt=Kt.reduce(c(Wt).bucketsCount),te=Kt.bucketsPerStep,ee=Bt(this.gl,t,this.gl.TEXTURE0),Bt(this.gl,Qt,this.gl.TEXTURE1)}this.addResizeEvent(),this.resizeCanvas(),this.programMain=this.setupProgram(Nt,Ot),this.programSub=this.setupProgram(qt,Ut),this.gl.useProgram(this.programMain),this.setupBeforeTexture(),this.setupAfterTexture(),this.setupPointGeometry(),this.setupAfterPointGeometry(),this.setupBoxesGeometry(),this.setupAxisGeometry(),this.setupLocation(),this.setupLocationSub(),this.render()}destroy(){this.taxis.reset()}setupProgram(t,e){const i=$t(this.gl,t,this.gl.VERTEX_SHADER),n=$t(this.gl,e,this.gl.FRAGMENT_SHADER);return((t,e,i)=>{const n=t.createProgram();if(!n)throw new Error("Failed to create program");if(t.attachShader(n,e),t.attachShader(n,i),t.linkProgram(n),t.deleteShader(e),t.deleteShader(i),!t.getProgramParameter(n,t.LINK_STATUS))throw new Error(`Failed to link: ${t.getProgramInfoLog(n)}`);return t.useProgram(n),n})(this.gl,i,n)}addResizeEvent(){this.resizeCanvas(),window.addEventListener("resize",this.resizeCanvas.bind(this),{passive:!0})}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,window.innerWidth<window.innerHeight?(this.camera.distance=1e3/window.innerHeight*7.5,ie=[0,1.5,0],ne=[0,-1.5,0],se=[0,0,0]):(this.camera.distance=900/window.innerWidth*7.5,ie=[-1.5,0,0],ne=[1.5,0,0],se=[0,0,0])}setupLocation(){Gt.forEach(((t,e)=>{this.attLocation[e]=this.gl.getAttribLocation(this.programMain,t.variable),this.attStride[e]=t.attStride})),Object.keys(this.uniLocation).forEach((t=>{this.uniLocation[t]=this.gl.getUniformLocation(this.programMain,t)}))}setupLocationSub(){Vt.forEach(((t,e)=>{this.attLocationSub[e]=this.gl.getAttribLocation(this.programSub,t.variable),this.attStrideSub[e]=t.attStride})),Object.keys(this.uniLocationSub).forEach((t=>{this.uniLocationSub[t]=this.gl.getUniformLocation(this.programSub,t)}))}setupRendering(){this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clearColor(.1,.12,.14,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.enable(this.gl.DEPTH_TEST),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE),function(t,e){var i=e[0],n=e[1],s=e[2],o=e[3],r=e[4],a=e[5],l=e[6],h=e[7],c=e[8],u=e[9],d=e[10],p=e[11],g=e[12],m=e[13],f=e[14],b=e[15],v=i*a-n*r,x=i*l-s*r,y=i*h-o*r,w=n*l-s*a,_=n*h-o*a,A=s*h-o*l,E=c*m-u*g,k=c*f-d*g,M=c*b-p*g,T=u*f-d*m,L=u*b-p*m,$=d*b-p*f,P=v*$-x*L+y*T+w*M-_*k+A*E;P&&(P=1/P,t[0]=(a*$-l*L+h*T)*P,t[1]=(s*L-n*$-o*T)*P,t[2]=(m*A-f*_+b*w)*P,t[3]=(d*_-u*A-p*w)*P,t[4]=(l*M-r*$-h*k)*P,t[5]=(i*$-s*M+o*k)*P,t[6]=(f*y-g*A-b*x)*P,t[7]=(c*A-d*y+p*x)*P,t[8]=(r*L-a*M+h*E)*P,t[9]=(n*M-i*L-o*E)*P,t[10]=(g*_-m*y+b*v)*P,t[11]=(u*y-c*_-p*v)*P,t[12]=(a*k-r*T-l*E)*P,t[13]=(i*T-n*k+s*E)*P,t[14]=(m*x-g*w-f*v)*P,t[15]=(c*w-u*x+d*v)*P)}(this.vMatrix,this.camera.update()),function(t,e,i,n,s){var o,r=1/Math.tan(e/2);t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=s&&s!==1/0?(o=1/(n-s),t[10]=(s+n)*o,t[14]=2*s*n*o):(t[10]=-1,t[14]=-2*n)}(this.pMatrix,45,this.canvas.width/this.canvas.height,.1,20),vt(this.vpMatrix,this.pMatrix,this.vMatrix)}setupBeforeTexture(){this.beforeImage.geometry=Ft(1,1,0),this.beforeImage.VBO=[Pt(this.gl,this.beforeImage.geometry.position),Pt(this.gl,this.beforeImage.geometry.color),Pt(this.gl,this.beforeImage.geometry.texCoord)],this.beforeImage.IBO=St(this.gl,this.beforeImage.geometry.indices)}setupAfterTexture(){this.afterImage.geometry=Ft(1,1,0),this.afterImage.VBO=[Pt(this.gl,this.afterImage.geometry.position),Pt(this.gl,this.afterImage.geometry.color),Pt(this.gl,this.afterImage.geometry.texCoord)],this.afterImage.IBO=St(this.gl,this.afterImage.geometry.indices)}setupPointGeometry(){const t=ae.data.length/4;for(let e=0;e<t;e++){const t=ae.data[4*e],i=ae.data[4*e+1],n=ae.data[4*e+2],s=ae.data[4*e+3],o=e,r=o%ae.width,a=Math.floor(o/ae.width);this.pointsFromPosition.push(r/Zt-Jt+ie[0],-1*(a/Zt-Jt)+ie[1],ie[2]),this.pointsToPosition.push(t/255-Jt+se[0],i/255-Jt+se[1],n/255-Jt+se[2]),this.pointsColor.push(t/255,i/255,n/255,s/255)}this.pointsVBO=[Pt(this.gl,this.pointsFromPosition),Pt(this.gl,this.pointsToPosition),Pt(this.gl,this.pointsColor)]}setupAfterPointGeometry(){const t=ae.data.length/4;for(let e=0;e<t;e++){const t=ae.data[4*e],i=ae.data[4*e+1],n=ae.data[4*e+2];ae.data[4*e+3];const s=e,o=s%ae.width,r=Math.floor(s/ae.width);this.afterPointsFromPosition.push(t/255-Jt+se[0],i/255-Jt+se[1],n/255-Jt+se[2]),this.afterPointsToPosition.push(o/Zt-Jt+ne[0],-1*(r/Zt-Jt)+ne[1],ne[2]);const a=Qt.data[4*e],l=Qt.data[4*e+1],h=Qt.data[4*e+2],c=Qt.data[4*e+3];this.afterPointsColor.push(a/255,l/255,h/255,c/255)}this.afterPointsVBO=[Pt(this.gl,this.afterPointsFromPosition),Pt(this.gl,this.afterPointsToPosition),Pt(this.gl,this.afterPointsColor)]}setupBoxesGeometry(){te.forEach(((t,e)=>{this.boxes[e]=[],this.boxesPosition[e]=[],this.boxesVBO[e]=[],this.boxesIBO[e]=[],this.boxesLine[e]=[],this.boxesLineVBO[e]=[],t.forEach(((t,i)=>{const{total:n,colors:s,channel:o,minR:r,minG:a,minB:l,maxR:h,maxG:c,maxB:u}=te[e][i],d=(h-r)/255,p=(c-a)/255,g=(u-l)/255,m=dt.averageColor(s),f=((t,e,i,n)=>{let s=.5*t,o=.5*e,r=.5*i;const a=new Float32Array([-s,-o,r,s,-o,r,s,o,r,-s,o,r,-s,-o,-r,-s,o,-r,s,o,-r,s,-o,-r,-s,o,-r,-s,o,r,s,o,r,s,o,-r,-s,-o,-r,s,-o,-r,s,-o,r,-s,-o,r,s,-o,-r,s,o,-r,s,o,r,s,-o,r,-s,-o,-r,-s,-o,r,-s,o,r,-s,o,-r]);let l=1/Math.sqrt(3);const h=new Float32Array([-l,-l,l,l,-l,l,l,l,l,-l,l,l,-l,-l,-l,-l,l,-l,l,l,-l,l,-l,-l,-l,l,-l,-l,l,l,l,l,l,l,l,-l,-l,-l,-l,l,-l,-l,l,-l,l,-l,-l,l,l,-l,-l,l,l,-l,l,l,l,l,-l,l,-l,-l,-l,-l,-l,l,-l,l,l,-l,l,-l]),c=[];for(let t=0;t<a.length/3;t++)c.push(n[0],n[1],n[2],n[3]);return{position:a,normal:h,color:new Float32Array(c),indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}})(d,p,g,[m[0]/255,m[1]/255,m[2]/255,.8]),b=((t,e,i,n)=>{let s=.5*t,o=.5*e,r=.5*i;const a=new Float32Array([-s,-o,r,s,-o,r,s,-o,r,s,o,r,s,o,r,-s,o,r,-s,o,r,-s,-o,r,-s,-o,-r,-s,o,-r,-s,o,-r,s,o,-r,s,o,-r,s,-o,-r,s,-o,-r,-s,-o,-r,-s,o,-r,-s,o,r,-s,o,r,s,o,r,s,o,r,s,o,-r,s,o,-r,-s,o,-r,-s,-o,-r,s,-o,-r,s,-o,-r,s,-o,r,s,-o,r,-s,-o,r,-s,-o,r,-s,-o,-r,s,-o,-r,s,o,-r,s,o,-r,s,o,r,s,o,r,s,-o,r,s,-o,r,s,-o,-r,-s,-o,-r,-s,-o,r,-s,-o,r,-s,o,r,-s,o,r,-s,o,-r]),l=[];for(let t=0;t<a.length/3;t++)l.push(n[0],n[1],n[2],n[3]);return{position:a,color:new Float32Array(l)}})(d,p,g,[.65,.65,.65,1]);this.boxesLine[e][i]=b,this.boxesLineVBO[e][i]=[Pt(this.gl,b.position),Pt(this.gl,b.color)],this.boxes[e][i]=f,this.boxesPosition[e][i]=[r/255-(1-d)/2,a/255-(1-p)/2,l/255-(1-g)/2],this.boxesVBO[e][i]=[Pt(this.gl,f.position),Pt(this.gl,f.color)],this.boxesIBO[e][i]=St(this.gl,f.indices)}))}))}setupAxisGeometry(){this.axis=((t,e)=>{const i=new Float32Array([-1*t,0,0,t,0,0,0,-1*t,0,0,t,0,0,0,t,0,0,-1*t]),n=e?[...e,...e,...e,...e,...e,...e]:[1,0,0,1,1,0,0,1,0,1,0,1,0,1,0,1,0,0,1,1,0,0,1,1];return{position:i,color:new Float32Array(n)}})(10,[.45,.45,.45,1]),this.axisVBO=[Pt(this.gl,this.axis.position),Pt(this.gl,this.axis.color)]}setupMvp(t){let e=bt();xt(e,e,t);const i=bt();vt(i,this.vpMatrix,e),this.gl.uniformMatrix4fv(this.uniLocation.mvpMatrix,!1,i)}setupMvpSub(t){let e=bt();xt(e,e,t),this.gl.uniformMatrix4fv(this.uniLocationSub.mMatrix,!1,e);const i=bt();vt(i,this.vpMatrix,e),this.gl.uniformMatrix4fv(this.uniLocationSub.mvpMatrix,!1,i)}renderBeforeTexture(t){Ct(this.gl,this.beforeImage.VBO,this.attLocation,this.attStride),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.beforeImage.IBO),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,ee),this.gl.uniform1i(this.uniLocation.textureUnit,0),this.gl.uniform1i(this.uniLocation.isTexture,1),this.gl.enableVertexAttribArray(this.attLocation[2]),this.setupMvp(t),this.gl.drawElements(this.gl.TRIANGLES,this.beforeImage.geometry.indices.length,this.gl.UNSIGNED_SHORT,0)}renderBoxes(t){this.gl.disableVertexAttribArray(this.attLocation[2]),this.gl.uniform1i(this.uniLocation.isTexture,0);const e=this.boxes.length-1;for(let i=0;i<=re;i++){Ct(this.gl,this.boxesVBO[e][i],this.attLocation,this.attStride),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.boxesIBO[e][i]);const n=[t[0]+this.boxesPosition[e][i][0],t[1]+this.boxesPosition[e][i][1],t[2]+this.boxesPosition[e][i][2]];this.setupMvp(n),this.gl.drawElements(this.gl.TRIANGLES,this.boxes[e][i].indices.length,this.gl.UNSIGNED_SHORT,0)}}renderBoxesLine(t){this.gl.disableVertexAttribArray(this.attLocation[2]),this.gl.uniform1i(this.uniLocation.isTexture,0);for(let e=0;e<this.boxes[oe].length;e++){Ct(this.gl,this.boxesLineVBO[oe][e],this.attLocation,this.attStride);const i=[t[0]+this.boxesPosition[oe][e][0],t[1]+this.boxesPosition[oe][e][1],t[2]+this.boxesPosition[oe][e][2]];this.setupMvp(i),this.gl.drawArrays(this.gl.LINES,0,this.boxesLine[oe][e].position.length/3)}}renderAxis(t){this.gl.uniform1i(this.uniLocation.isTexture,0),this.gl.disableVertexAttribArray(this.attLocation[2]),Ct(this.gl,this.axisVBO,this.attLocation,this.attStride),this.setupMvp(t),this.gl.drawArrays(this.gl.LINES,0,this.axis.position.length/3)}renderMovePoints(t){const e=this.taxis.getAxis({key:"Sampling"});this.gl.uniform1f(this.uniLocationSub.interporation,e.progress),Ct(this.gl,this.pointsVBO,this.attLocationSub,this.attStrideSub),this.setupMvpSub(t),this.gl.drawArrays(this.gl.POINTS,0,this.pointsToPosition.length/3)}renderMoveAfterPoints(t){const e=this.taxis.getAxis({key:"Mapping"});0!==e.progress&&(this.gl.uniform1f(this.uniLocationSub.interporation,e.progress),Ct(this.gl,this.afterPointsVBO,this.attLocationSub,this.attStrideSub),this.setupMvpSub(t),this.gl.drawArrays(this.gl.POINTS,0,this.afterPointsToPosition.length/3))}render(){this.taxis.begin(),this.taxis.ticker(((t,e)=>{let i=0;e.get("Sampling").pass&&(i=1),e.get("split#7").pass&&(i=2),e.get("Average color#7").pass&&(i=3);for(let t=0;t<c(Wt).bucketsCount;t++)e.get(`split#${t}`).enter&&oe<t&&(oe=t),e.get(`Average color#${t}`).enter&&re<t&&(re=t),e.get(`split#${t}`).progress<=0&&t<=oe&&(oe=t-1),e.get(`Average color#${t}`).progress<=0&&t<=re&&(re=t-1);Q.update(i),this.setupRendering(),this.gl.useProgram(this.programSub),this.gl.uniform3fv(this.uniLocationSub.eyePosition,this.camera.position),this.renderMovePoints([0,0,0]),this.renderMoveAfterPoints([0,0,0]),this.gl.useProgram(this.programMain),this.renderAxis([0,0,0]),this.renderBeforeTexture(ie),e.get("split#0").enter&&(this.renderBoxesLine(se),-1<re&&this.renderBoxes(se))}))}}function he(e){let i,n,s,o;return{c(){i=b("canvas"),n=x(),s=b("div"),o=b("div"),w(i,"class","w-full h-full"),w(o,"id","timeline"),w(o,"class","h-full"),w(s,"class","fixed left-0 right-0 bottom-0 h-1/5")},m(t,r){g(t,i,r),e[2](i),g(t,n,r),g(t,s,r),p(s,o),e[3](o)},p:t,i:t,o:t,d(t){t&&m(i),e[2](null),t&&m(n),t&&m(s),e[3](null)}}}function ce(t,e,i){let n,s;const o=new le;var r;return M((()=>{o.init(n,s)})),r=()=>{o.destroy()},k().$$.on_destroy.push(r),[n,s,function(t){L[t?"unshift":"push"]((()=>{n=t,i(0,n)}))},function(t){L[t?"unshift":"push"]((()=>{s=t,i(1,s)}))}]}class ue extends H{constructor(t){super(),X(this,t,ce,he,o,{})}}function de(e){let i,s,o,r,a,h,c,u,d,f,v,_,A,E,k,M,T,L,$,P,S,C,B,R,F,I,D,O,N,U,q,G,j,z,V,X,H;return{c(){i=b("div"),s=b("div"),s.innerHTML='<div class="w-full h-full"><div id="upload-area" class="h-full flex flex-col justify-center relative shadow-lg sm:overflow-hidden"><div class="absolute inset-0"><div class="h-full w-full bg-gray-100"></div></div> \n        <div class="relative px-4 py-16 sm:px-6 sm:py-24 lg:py-32 lg:px-8"><h1 class="text-center text-4xl font-extrabold tracking-tight sm:text-5xl lg:text-6xl"><span class="block text-gray-800">Visualize color reduction</span> \n            <span class="block text-gray-500">Any image you like.</span></h1> \n          <p class="mt-6 max-w-lg mx-auto text-center text-xl text-gray-500 sm:max-w-4xl">The logic of color reduction is difficult.\n            I hope that visualizing it will help you understand it.\n            Implemented with reference to Median cut.\n            It is implemented using webgl.<br/>\n            Sorry, maybe only chrome is supported.</p> \n\n          <div id="upload" class="px-4 py-8 sm:px-0"><form action=""><div class="sm:mt-0 sm:col-span-2"><div class="text-center"><svg class="mx-auto h-12 w-12 text-gray-500" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> \n                  <p class="mt-1 text-sm text-gray-500"><label id="original-image-label" for="original-image-file" class="cursor-pointer font-medium text-pink-600 hover:text-pink-500 focus:outline-none focus:underline transition duration-150 ease-in-out">Upload a file\n                      <input type="file" id="original-image-file" class="hidden"/></label>\n                    or drag and drop</p> \n                  <p class="mt-1 text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p></div></div></form></div></div></div></div>',o=x(),r=b("div"),a=b("div"),h=b("p"),h.textContent="Or try one of these:",c=x(),u=b("div"),d=b("div"),f=b("img"),_=x(),A=b("span"),A.innerHTML='Photo by <a href="https://unsplash.com/@vincentledvina?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Vincent Ledvina</a>\n            on\n            <a href="https://unsplash.com/s/visual/4050ed5c-59f1-4b72-965f-8d82efcfbc94?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>',E=x(),k=b("div"),M=b("img"),L=x(),$=b("span"),$.innerHTML='Photo by <a href="https://unsplash.com/@greysonjoralemon?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Greyson Joralemon</a>\n            on\n            <a href="https://unsplash.com/s/photos/colorful?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>',P=x(),S=b("div"),C=b("img"),R=x(),F=b("span"),F.innerHTML='Photo by <a href="https://unsplash.com/@jezael?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Jezael Melgoza</a>\n            on\n            <a href="https://unsplash.com/s/photos/japan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>',I=x(),D=b("div"),O=b("img"),U=x(),q=b("span"),q.innerHTML='Photo by <a href="https://unsplash.com/@jannerboy62?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Nick Fewings</a>\n            on\n            <a href="https://unsplash.com/s/photos/red?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>',G=x(),j=b("div"),z=b("img"),w(s,"class","relative flex-grow"),w(h,"class","text-center text-sm font-semibold uppercase text-gray-500 tracking-wide"),l(f.src,v="./assets/bison.jpg")||w(f,"src","./assets/bison.jpg"),w(f,"alt",""),w(f,"class","cursor-pointer"),w(d,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),l(M.src,T="./assets/colorful.jpg")||w(M,"src","./assets/colorful.jpg"),w(M,"alt",""),w(M,"class","cursor-pointer"),w(k,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),l(C.src,B="./assets/shibuya.jpg")||w(C,"src","./assets/shibuya.jpg"),w(C,"alt",""),w(C,"class","cursor-pointer"),w(S,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),l(O.src,N="./assets/telephone_booth.jpg")||w(O,"src","./assets/telephone_booth.jpg"),w(O,"alt",""),w(O,"class","cursor-pointer"),w(D,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),l(z.src,V="./assets/pineapple.jpg")||w(z,"src","./assets/pineapple.jpg"),w(z,"alt",""),w(z,"class","cursor-pointer"),w(j,"class","col-span-1 flex flex-col justify-start md:col-span-2 lg:col-span-1"),w(u,"class","mt-6 grid grid-cols-2 gap-8 md:grid-cols-6 lg:grid-cols-5"),w(a,"class","max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8"),w(r,"class","bg-gray-100"),w(i,"class","h-full flex flex-col")},m(t,n){g(t,i,n),p(i,s),p(i,o),p(i,r),p(r,a),p(a,h),p(a,c),p(a,u),p(u,d),p(d,f),p(d,_),p(d,A),p(u,E),p(u,k),p(k,M),p(k,L),p(k,$),p(u,P),p(u,S),p(S,C),p(S,R),p(S,F),p(u,I),p(u,D),p(D,O),p(D,U),p(D,q),p(u,G),p(u,j),p(j,z),X||(H=[y(f,"click",e[0]),y(M,"click",e[0]),y(C,"click",e[0]),y(O,"click",e[0]),y(z,"click",e[0])],X=!0)},p:t,i:t,o:t,d(t){t&&m(i),X=!1,n(H)}}}function pe(t,e,i){let n;u(t,J,(t=>i(1,n=t))),M((()=>{const t=document.getElementById("upload-area");t.addEventListener("change",(t=>{e({e:t,data:void 0,callback:t=>{d(J,n.file=t,n)}})})),t.addEventListener("drop",(t=>{t.preventDefault(),e({e:t,data:t.dataTransfer.files[0],callback:t=>{d(J,n.file=t,n)}})})),t.addEventListener("dragenter",(t=>{t.preventDefault()})),t.addEventListener("dragover",(t=>{t.preventDefault()})),t.addEventListener("dragleave",(t=>{t.preventDefault()}));const e=({e:t,data:e,callback:i})=>{let n=void 0===e?t.target.files[0]:e;if(!n.type.match(/^image\/(png|jpg|jpeg|gif)$/))return;if(10485760<=n.size)return;let s=new Image,o=new FileReader;o.onload=t=>{let e=t.target.result;s.onload=()=>{i(s)},s.src=e},o.readAsDataURL(n)}}));return[t=>{d(J,n.file=t.currentTarget,n)}]}class ge extends H{constructor(t){super(),X(this,t,pe,de,o,{})}}function me(e){let i,n,s,o,r,a,l,h,c;return i=new ue({props:{class:"w-full h-full"}}),o=new ct({}),{c(){G(i.$$.fragment),n=x(),s=b("div"),G(o.$$.fragment),r=x(),a=b("div"),a.innerHTML='<svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-8 text-gray-800"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',w(s,"class","fixed right-8 top-8 hidden md:block"),w(a,"class","fixed left-8 top-8 bg-gray-100 p-2 cursor-pointer rounded-full")},m(t,u){j(i,t,u),g(t,n,u),g(t,s,u),j(o,s,null),g(t,r,u),g(t,a,u),l=!0,h||(c=y(a,"click",e[1]),h=!0)},p:t,i(t){l||(U(i.$$.fragment,t),U(o.$$.fragment,t),l=!0)},o(t){q(i.$$.fragment,t),q(o.$$.fragment,t),l=!1},d(t){z(i,t),t&&m(n),t&&m(s),z(o),t&&m(r),t&&m(a),h=!1,c()}}}function fe(e){let i,n;return i=new ge({}),{c(){G(i.$$.fragment)},m(t,e){j(i,t,e),n=!0},p:t,i(t){n||(U(i.$$.fragment,t),n=!0)},o(t){q(i.$$.fragment,t),n=!1},d(t){z(i,t)}}}function be(t){let e,i,s,o;const r=[fe,me],a=[];function l(t,e){return t[0].file?1:0}return i=l(t),s=a[i]=r[i](t),{c(){e=b("main"),s.c(),w(e,"class","w-full h-full")},m(t,n){g(t,e,n),a[i].m(e,null),o=!0},p(t,[o]){let h=i;i=l(t),i===h?a[i].p(t,o):(N={r:0,c:[],p:N},q(a[h],1,1,(()=>{a[h]=null})),N.r||n(N.c),N=N.p,s=a[i],s?s.p(t,o):(s=a[i]=r[i](t),s.c()),U(s,1),s.m(e,null))},i(t){o||(U(s),o=!0)},o(t){q(s),o=!1},d(t){t&&m(e),a[i].d()}}}function ve(t,e,i){let n;u(t,J,(t=>i(0,n=t)));return[n,()=>{d(J,n.file=null,n)}]}return new class extends H{constructor(t){super(),X(this,t,ve,be,o,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
