{"version":3,"file":"bundle.js","sources":["../../../../node_modules/svelte/internal/index.mjs","../../../../node_modules/tweakpane/dist/tweakpane.js","../../../../node_modules/svelte/store/index.mjs","../../src/stores/settings.ts","../../src/components/Pane.svelte","../../src/components/Viewer/script/webgl.js","../../../../node_modules/taxis/lib/taxis.esm.js","../../../shared/lib/src/geometry.js","../../../shared/lib/src/utils.js","../../src/components/Viewer/script/setup.ts","../../src/components/Viewer/Viewer.svelte","../../src/App.svelte","../../src/main.ts"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element.sheet;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration();\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    if (value === null) {\n        node.style.removeProperty(key);\n    }\n    else {\n        node.style.setProperty(key, value, important ? 'important' : '');\n    }\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    select.selectedIndex = -1; // no option should be selected\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, bubbles = false) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor() {\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes) {\n        super();\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\nconst managed_styles = new Map();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_style_information(doc, node) {\n    const info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n    managed_styles.set(doc, info);\n    return info;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    const { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n    if (!rules[name]) {\n        rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        managed_styles.forEach(info => {\n            const { stylesheet } = info;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            info.rules = {};\n        });\n        managed_styles.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n    const saved_component = current_component;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (flushidx < dirty_components.length) {\n            const component = dirty_components[flushidx];\n            flushidx++;\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        flushidx = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    seen_callbacks.clear();\n    set_current_component(saved_component);\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, attrs_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (attrs_to_add) {\n        const classes_to_add = attrs_to_add.classes;\n        const styles_to_add = attrs_to_add.styles;\n        if (classes_to_add) {\n            if (attributes.class == null) {\n                attributes.class = classes_to_add;\n            }\n            else {\n                attributes.class += ' ' + classes_to_add;\n            }\n        }\n        if (styles_to_add) {\n            if (attributes.style == null) {\n                attributes.style = style_object_to_string(styles_to_add);\n            }\n            else {\n                attributes.style = style_object_to_string(merge_ssr_styles(attributes.style, styles_to_add));\n            }\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nfunction merge_ssr_styles(style_attribute, style_directive) {\n    const style_object = {};\n    for (const individual_style of style_attribute.split(';')) {\n        const colon_index = individual_style.indexOf(':');\n        const name = individual_style.slice(0, colon_index).trim();\n        const value = individual_style.slice(colon_index + 1).trim();\n        if (!name)\n            continue;\n        style_object[name] = value;\n    }\n    for (const name in style_directive) {\n        const value = style_directive[name];\n        if (value) {\n            style_object[name] = value;\n        }\n        else {\n            delete style_object[name];\n        }\n    }\n    return style_object;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction escape_attribute_value(value) {\n    return typeof value === 'string' ? escape(value) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true && boolean_attributes.has(name) ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\nfunction style_object_to_string(style_object) {\n    return Object.keys(style_object)\n        .filter(key => style_object[key])\n        .map(key => `${key}: ${style_object[key]};`)\n        .join(' ');\n}\nfunction add_styles(style_object) {\n    const styles = style_object_to_string(style_object);\n    return styles ? ` style=\"${styles}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.46.3' }, detail), true));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_styles, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, merge_ssr_styles, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","/*! Tweakpane 1.6.1 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Tweakpane = factory());\n}(this, (function () { 'use strict';\n\n    var extendStatics = function(d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    function __extends(d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    }\n    var __assign = function() {\n        __assign = Object.assign || function __assign(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    function __spreadArrays() {\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n                r[k] = a[j];\n        return r;\n    }\n\n    var Plugins = {\n        inputs: [],\n        monitors: [],\n    };\n    function getAllPlugins() {\n        return __spreadArrays(Plugins.inputs, Plugins.monitors);\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (var i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    var PREFIX = 'tp';\n    function ClassName(viewName) {\n        return function (opt_elementName, opt_modifier) {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? \"_\" + opt_elementName : '',\n                opt_modifier ? \"-\" + opt_modifier : '',\n            ].join('');\n        };\n    }\n\n    function getAllBladePositions() {\n        return ['first', 'last'];\n    }\n\n    var className = ClassName('');\n    function setUpBladeView(view, model) {\n        var elem = view.element;\n        model.emitter.on('change', function (ev) {\n            if (ev.propertyName === 'hidden') {\n                var hiddenClass = className(undefined, 'hidden');\n                if (model.hidden) {\n                    elem.classList.add(hiddenClass);\n                }\n                else {\n                    elem.classList.remove(hiddenClass);\n                }\n            }\n            else if (ev.propertyName === 'positions') {\n                getAllBladePositions().forEach(function (pos) {\n                    elem.classList.remove(className(undefined, pos));\n                });\n                model.positions.forEach(function (pos) {\n                    elem.classList.add(className(undefined, pos));\n                });\n            }\n        });\n        model.emitter.on('dispose', function () {\n            if (view.onDispose) {\n                view.onDispose();\n            }\n            disposeElement(elem);\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    var Emitter = /** @class */ (function () {\n        function Emitter() {\n            this.observers_ = {};\n        }\n        Emitter.prototype.on = function (eventName, handler) {\n            var observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        };\n        Emitter.prototype.off = function (eventName, handler) {\n            var observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter(function (observer) {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        };\n        Emitter.prototype.emit = function (eventName, event) {\n            var observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach(function (observer) {\n                observer.handler(event);\n            });\n        };\n        return Emitter;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Button = /** @class */ (function () {\n        function Button(title) {\n            this.emitter = new Emitter();\n            this.title = title;\n        }\n        Button.prototype.click = function () {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        };\n        return Button;\n    }());\n\n    var className$1 = ClassName('btn');\n    /**\n     * @hidden\n     */\n    var ButtonView = /** @class */ (function () {\n        function ButtonView(doc, config) {\n            this.button = config.button;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            var buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$1('b'));\n            buttonElem.textContent = this.button.title;\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n        }\n        return ButtonView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ButtonController = /** @class */ (function () {\n        function ButtonController(doc, config) {\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.button = new Button(config.title);\n            this.blade = config.blade;\n            this.view = new ButtonView(doc, {\n                button: this.button,\n            });\n            this.view.buttonElement.addEventListener('click', this.onButtonClick_);\n            setUpBladeView(this.view, this.blade);\n        }\n        ButtonController.prototype.onButtonClick_ = function () {\n            this.button.click();\n        };\n        return ButtonController;\n    }());\n\n    var className$2 = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        var frag = doc.createDocumentFragment();\n        var lineNodes = label.split('\\n').map(function (line) {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach(function (lineNode, index) {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    /**\n     * @hidden\n     */\n    var LabeledView = /** @class */ (function () {\n        function LabeledView(doc, config) {\n            this.label = config.label;\n            this.elem_ = doc.createElement('div');\n            this.elem_.classList.add(className$2());\n            var labelElem = doc.createElement('div');\n            labelElem.classList.add(className$2('l'));\n            labelElem.appendChild(createLabelNode(doc, this.label));\n            this.elem_.appendChild(labelElem);\n            var viewElem = doc.createElement('div');\n            viewElem.classList.add(className$2('v'));\n            viewElem.appendChild(config.view.element);\n            this.elem_.appendChild(viewElem);\n        }\n        Object.defineProperty(LabeledView.prototype, \"element\", {\n            get: function () {\n                return this.elem_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return LabeledView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var InputBindingController = /** @class */ (function () {\n        function InputBindingController(doc, config) {\n            this.binding = config.binding;\n            this.controller = config.controller;\n            this.view = new LabeledView(doc, {\n                label: config.label,\n                view: this.controller.view,\n            });\n            this.blade = config.blade;\n            setUpBladeView(this.view, this.blade);\n        }\n        return InputBindingController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var MonitorBindingController = /** @class */ (function () {\n        function MonitorBindingController(doc, config) {\n            var _this = this;\n            this.binding = config.binding;\n            this.controller = config.controller;\n            this.view = new LabeledView(doc, {\n                label: config.label,\n                view: this.controller.view,\n            });\n            this.blade = config.blade;\n            this.blade.emitter.on('dispose', function () {\n                _this.binding.dispose();\n            });\n            setUpBladeView(this.view, this.blade);\n        }\n        return MonitorBindingController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Disposable = /** @class */ (function () {\n        function Disposable() {\n            this.emitter = new Emitter();\n            this.disposed_ = false;\n        }\n        Object.defineProperty(Disposable.prototype, \"disposed\", {\n            get: function () {\n                return this.disposed_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Disposable.prototype.dispose = function () {\n            if (this.disposed_) {\n                return false;\n            }\n            this.disposed_ = true;\n            this.emitter.emit('dispose', {\n                sender: this,\n            });\n            return true;\n        };\n        return Disposable;\n    }());\n\n    var Blade = /** @class */ (function () {\n        function Blade() {\n            this.onDispose_ = this.onDispose_.bind(this);\n            this.emitter = new Emitter();\n            this.positions_ = [];\n            this.hidden_ = false;\n            this.disposable_ = new Disposable();\n            this.disposable_.emitter.on('dispose', this.onDispose_);\n        }\n        Object.defineProperty(Blade.prototype, \"hidden\", {\n            get: function () {\n                return this.hidden_;\n            },\n            set: function (hidden) {\n                if (this.hidden_ === hidden) {\n                    return;\n                }\n                this.hidden_ = hidden;\n                this.emitter.emit('change', {\n                    propertyName: 'hidden',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Blade.prototype, \"positions\", {\n            get: function () {\n                return this.positions_;\n            },\n            set: function (positions) {\n                if (deepEqualsArray(positions, this.positions_)) {\n                    return;\n                }\n                this.positions_ = positions;\n                this.emitter.emit('change', {\n                    propertyName: 'positions',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Blade.prototype, \"disposed\", {\n            get: function () {\n                return this.disposable_.disposed;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Blade.prototype.dispose = function () {\n            this.disposable_.dispose();\n        };\n        Blade.prototype.onDispose_ = function () {\n            this.emitter.emit('dispose', {\n                sender: this,\n            });\n        };\n        return Blade;\n    }());\n\n    var SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        var t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return new Function('return this')();\n    }\n    function getWindowDocument() {\n        var globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function isBrowser() {\n        return 'document' in getGlobalObject();\n    }\n    function getCanvasContext(canvasElement) {\n        // HTMLCanvasElement.prototype.getContext is not defined on testing environment\n        return isBrowser() ? canvasElement.getContext('2d') : null;\n    }\n    var ICON_ID_TO_INNER_HTML_MAP = {\n        p2dpad: '<path d=\"M8 2V14\" stroke=\"currentColor\" stroke-width=\"1.5\"/><path d=\"M2 8H14\" stroke=\"currentColor\" stroke-width=\"1.5\"/><circle cx=\"8\" cy=\"8\" r=\"2\" fill=\"currentColor\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        var elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        // Workaround for Firefox\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        // TODO: Workaround for Safari\n        // Safari doesn't set next target for some elements\n        // (e.g. button, input[type=checkbox], etc.)\n        return null;\n    }\n\n    function updateAllItemsPositions(bladeRack) {\n        var visibleItems = bladeRack.items.filter(function (bc) { return !bc.blade.hidden; });\n        var firstVisibleItem = visibleItems[0];\n        var lastVisibleItem = visibleItems[visibleItems.length - 1];\n        bladeRack.items.forEach(function (bc) {\n            var ps = [];\n            if (bc === firstVisibleItem) {\n                ps.push('first');\n            }\n            if (bc === lastVisibleItem) {\n                ps.push('last');\n            }\n            bc.blade.positions = ps;\n        });\n    }\n    /**\n     * @hidden\n     */\n    function computeExpandedFolderHeight(folder, containerElement) {\n        var height = 0;\n        disableTransitionTemporarily(containerElement, function () {\n            // Expand folder temporarily\n            folder.expandedHeight = null;\n            folder.temporaryExpanded = true;\n            forceReflow(containerElement);\n            // Compute height\n            height = containerElement.clientHeight;\n            // Restore expanded\n            folder.temporaryExpanded = null;\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n\n    /**\n     * @hidden\n     */\n    var List = /** @class */ (function () {\n        function List() {\n            this.emitter = new Emitter();\n            this.items_ = [];\n        }\n        Object.defineProperty(List.prototype, \"items\", {\n            get: function () {\n                return this.items_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        List.prototype.add = function (item, opt_index) {\n            var index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                sender: this,\n            });\n        };\n        List.prototype.remove = function (item) {\n            var index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.emitter.emit('remove', {\n                sender: this,\n            });\n        };\n        return List;\n    }());\n\n    /**\n     * @hidden\n     */\n    var BladeRack = /** @class */ (function () {\n        function BladeRack() {\n            this.onItemFolderFold_ = this.onItemFolderFold_.bind(this);\n            this.onListItemLayout_ = this.onListItemLayout_.bind(this);\n            this.onSubitemLayout_ = this.onSubitemLayout_.bind(this);\n            this.onSubitemFolderFold_ = this.onSubitemFolderFold_.bind(this);\n            this.onSubitemInputChange_ = this.onSubitemInputChange_.bind(this);\n            this.onSubitemMonitorUpdate_ = this.onSubitemMonitorUpdate_.bind(this);\n            this.onItemInputChange_ = this.onItemInputChange_.bind(this);\n            this.onListAdd_ = this.onListAdd_.bind(this);\n            this.onListItemDispose_ = this.onListItemDispose_.bind(this);\n            this.onListRemove_ = this.onListRemove_.bind(this);\n            this.onItemMonitorUpdate_ = this.onItemMonitorUpdate_.bind(this);\n            this.blades_ = new List();\n            this.emitter = new Emitter();\n            this.blades_.emitter.on('add', this.onListAdd_);\n            this.blades_.emitter.on('remove', this.onListRemove_);\n        }\n        Object.defineProperty(BladeRack.prototype, \"items\", {\n            get: function () {\n                return this.blades_.items;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        BladeRack.prototype.add = function (bc, opt_index) {\n            this.blades_.add(bc, opt_index);\n        };\n        BladeRack.prototype.find = function (controllerClass) {\n            return this.items.reduce(function (results, bc) {\n                if (bc instanceof FolderController) {\n                    results.push.apply(results, bc.bladeRack.find(controllerClass));\n                }\n                if (bc instanceof controllerClass) {\n                    results.push(bc);\n                }\n                return results;\n            }, []);\n        };\n        BladeRack.prototype.onListAdd_ = function (ev) {\n            var bc = ev.item;\n            this.emitter.emit('add', {\n                blade: bc,\n                index: ev.index,\n                sender: this,\n            });\n            bc.blade.emitter.on('dispose', this.onListItemDispose_);\n            bc.blade.emitter.on('change', this.onListItemLayout_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onItemInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onItemMonitorUpdate_);\n            }\n            else if (bc instanceof FolderController) {\n                bc.folder.emitter.on('change', this.onItemFolderFold_);\n                var emitter = bc.bladeRack.emitter;\n                emitter.on('itemfold', this.onSubitemFolderFold_);\n                emitter.on('itemlayout', this.onSubitemLayout_);\n                emitter.on('inputchange', this.onSubitemInputChange_);\n                emitter.on('monitorupdate', this.onSubitemMonitorUpdate_);\n            }\n        };\n        BladeRack.prototype.onListRemove_ = function (_) {\n            this.emitter.emit('remove', {\n                sender: this,\n            });\n        };\n        BladeRack.prototype.onListItemLayout_ = function (ev) {\n            if (ev.propertyName === 'hidden' || ev.propertyName === 'positions') {\n                this.emitter.emit('itemlayout', {\n                    sender: this,\n                });\n            }\n        };\n        BladeRack.prototype.onListItemDispose_ = function (_) {\n            var _this = this;\n            var disposedUcs = this.blades_.items.filter(function (bc) {\n                return bc.blade.disposed;\n            });\n            disposedUcs.forEach(function (bc) {\n                _this.blades_.remove(bc);\n            });\n        };\n        BladeRack.prototype.onItemInputChange_ = function (ev) {\n            this.emitter.emit('inputchange', {\n                inputBinding: ev.sender,\n                sender: this,\n                value: ev.rawValue,\n            });\n        };\n        BladeRack.prototype.onItemMonitorUpdate_ = function (ev) {\n            this.emitter.emit('monitorupdate', {\n                monitorBinding: ev.sender,\n                sender: this,\n                value: ev.rawValue,\n            });\n        };\n        BladeRack.prototype.onItemFolderFold_ = function (ev) {\n            if (ev.propertyName !== 'expanded') {\n                return;\n            }\n            this.emitter.emit('itemfold', {\n                expanded: ev.sender.expanded,\n                sender: this,\n            });\n        };\n        BladeRack.prototype.onSubitemLayout_ = function (_) {\n            this.emitter.emit('itemlayout', {\n                sender: this,\n            });\n        };\n        BladeRack.prototype.onSubitemInputChange_ = function (ev) {\n            this.emitter.emit('inputchange', {\n                inputBinding: ev.inputBinding,\n                sender: this,\n                value: ev.value,\n            });\n        };\n        BladeRack.prototype.onSubitemMonitorUpdate_ = function (ev) {\n            this.emitter.emit('monitorupdate', {\n                monitorBinding: ev.monitorBinding,\n                sender: this,\n                value: ev.value,\n            });\n        };\n        BladeRack.prototype.onSubitemFolderFold_ = function (ev) {\n            this.emitter.emit('itemfold', {\n                expanded: ev.expanded,\n                sender: this,\n            });\n        };\n        return BladeRack;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Folder = /** @class */ (function () {\n        function Folder(title, expanded) {\n            this.emitter = new Emitter();\n            this.expanded_ = expanded;\n            this.expandedHeight_ = null;\n            this.temporaryExpanded_ = null;\n            this.shouldFixHeight_ = false;\n            this.title = title;\n        }\n        Object.defineProperty(Folder.prototype, \"expanded\", {\n            get: function () {\n                return this.expanded_;\n            },\n            set: function (expanded) {\n                var changed = this.expanded_ !== expanded;\n                if (!changed) {\n                    return;\n                }\n                this.emitter.emit('beforechange', {\n                    propertyName: 'expanded',\n                    sender: this,\n                });\n                this.expanded_ = expanded;\n                this.emitter.emit('change', {\n                    propertyName: 'expanded',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Folder.prototype, \"temporaryExpanded\", {\n            get: function () {\n                return this.temporaryExpanded_;\n            },\n            set: function (expanded) {\n                var changed = this.temporaryExpanded_ !== expanded;\n                if (!changed) {\n                    return;\n                }\n                this.emitter.emit('beforechange', {\n                    propertyName: 'temporaryExpanded',\n                    sender: this,\n                });\n                this.temporaryExpanded_ = expanded;\n                this.emitter.emit('change', {\n                    propertyName: 'temporaryExpanded',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Folder.prototype, \"expandedHeight\", {\n            get: function () {\n                return this.expandedHeight_;\n            },\n            set: function (expandedHeight) {\n                var changed = this.expandedHeight_ !== expandedHeight;\n                if (!changed) {\n                    return;\n                }\n                this.emitter.emit('beforechange', {\n                    propertyName: 'expandedHeight',\n                    sender: this,\n                });\n                this.expandedHeight_ = expandedHeight;\n                this.emitter.emit('change', {\n                    propertyName: 'expandedHeight',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Folder.prototype, \"shouldFixHeight\", {\n            get: function () {\n                return this.shouldFixHeight_;\n            },\n            set: function (shouldFixHeight) {\n                var changed = this.shouldFixHeight_ !== shouldFixHeight;\n                if (!changed) {\n                    return;\n                }\n                this.emitter.emit('beforechange', {\n                    propertyName: 'shouldFixHeight',\n                    sender: this,\n                });\n                this.shouldFixHeight_ = shouldFixHeight;\n                this.emitter.emit('change', {\n                    propertyName: 'shouldFixHeight',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Folder.prototype, \"styleExpanded\", {\n            get: function () {\n                var _a;\n                return (_a = this.temporaryExpanded) !== null && _a !== void 0 ? _a : this.expanded;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Folder.prototype, \"styleHeight\", {\n            get: function () {\n                if (!this.styleExpanded) {\n                    return '0';\n                }\n                if (this.shouldFixHeight && !isEmpty(this.expandedHeight)) {\n                    return this.expandedHeight + \"px\";\n                }\n                return 'auto';\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return Folder;\n    }());\n\n    var className$3 = ClassName('fld');\n    /**\n     * @hidden\n     */\n    var FolderView = /** @class */ (function () {\n        function FolderView(doc, config) {\n            this.onFolderChange_ = this.onFolderChange_.bind(this);\n            this.folder_ = config.folder;\n            this.folder_.emitter.on('change', this.onFolderChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            var titleElem = doc.createElement('button');\n            titleElem.classList.add(className$3('t'));\n            titleElem.textContent = this.folder_.title;\n            this.element.appendChild(titleElem);\n            this.titleElement = titleElem;\n            var markElem = doc.createElement('div');\n            markElem.classList.add(className$3('m'));\n            this.titleElement.appendChild(markElem);\n            var containerElem = doc.createElement('div');\n            containerElem.classList.add(className$3('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n            this.applyModel_();\n        }\n        FolderView.prototype.applyModel_ = function () {\n            var expanded = this.folder_.styleExpanded;\n            var expandedClass = className$3(undefined, 'expanded');\n            if (expanded) {\n                this.element.classList.add(expandedClass);\n            }\n            else {\n                this.element.classList.remove(expandedClass);\n            }\n            this.containerElement.style.height = this.folder_.styleHeight;\n        };\n        FolderView.prototype.onFolderChange_ = function () {\n            this.applyModel_();\n        };\n        return FolderView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var FolderController = /** @class */ (function () {\n        function FolderController(doc, config) {\n            var _a;\n            this.onContainerTransitionEnd_ = this.onContainerTransitionEnd_.bind(this);\n            this.onFolderBeforeChange_ = this.onFolderBeforeChange_.bind(this);\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackItemLayout_ = this.onRackItemLayout_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.blade = config.blade;\n            this.folder = new Folder(config.title, (_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            this.folder.emitter.on('beforechange', this.onFolderBeforeChange_);\n            this.rack_ = new BladeRack();\n            this.rack_.emitter.on('add', this.onRackAdd_);\n            this.rack_.emitter.on('itemlayout', this.onRackItemLayout_);\n            this.rack_.emitter.on('remove', this.onRackRemove_);\n            this.doc_ = doc;\n            this.view = new FolderView(this.doc_, {\n                folder: this.folder,\n            });\n            this.view.titleElement.addEventListener('click', this.onTitleClick_);\n            this.view.containerElement.addEventListener('transitionend', this.onContainerTransitionEnd_);\n            setUpBladeView(this.view, this.blade);\n        }\n        Object.defineProperty(FolderController.prototype, \"document\", {\n            get: function () {\n                return this.doc_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(FolderController.prototype, \"bladeRack\", {\n            get: function () {\n                return this.rack_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        FolderController.prototype.onFolderBeforeChange_ = function (ev) {\n            if (ev.propertyName !== 'expanded') {\n                return;\n            }\n            if (isEmpty(this.folder.expandedHeight)) {\n                this.folder.expandedHeight = computeExpandedFolderHeight(this.folder, this.view.containerElement);\n            }\n            this.folder.shouldFixHeight = true;\n            forceReflow(this.view.containerElement);\n        };\n        FolderController.prototype.onTitleClick_ = function () {\n            this.folder.expanded = !this.folder.expanded;\n        };\n        FolderController.prototype.applyRackChange_ = function () {\n            updateAllItemsPositions(this.bladeRack);\n        };\n        FolderController.prototype.onRackAdd_ = function (ev) {\n            insertElementAt(this.view.containerElement, ev.blade.view.element, ev.index);\n            this.applyRackChange_();\n        };\n        FolderController.prototype.onRackRemove_ = function (_) {\n            this.applyRackChange_();\n        };\n        FolderController.prototype.onRackItemLayout_ = function (_) {\n            this.applyRackChange_();\n        };\n        FolderController.prototype.onContainerTransitionEnd_ = function (ev) {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            this.folder.shouldFixHeight = false;\n            this.folder.expandedHeight = null;\n        };\n        return FolderController;\n    }());\n\n    var className$4 = ClassName('spt');\n    /**\n     * @hidden\n     */\n    var SeparatorView = /** @class */ (function () {\n        function SeparatorView(doc) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            var hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$4('r'));\n            this.element.appendChild(hrElem);\n        }\n        return SeparatorView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var SeparatorController = /** @class */ (function () {\n        function SeparatorController(doc, config) {\n            this.blade = config.blade;\n            this.view = new SeparatorView(doc);\n            setUpBladeView(this.view, this.blade);\n        }\n        return SeparatorController;\n    }());\n\n    var ButtonApi = /** @class */ (function () {\n        /**\n         * @hidden\n         */\n        function ButtonApi(buttonController) {\n            this.controller = buttonController;\n        }\n        Object.defineProperty(ButtonApi.prototype, \"hidden\", {\n            get: function () {\n                return this.controller.blade.hidden;\n            },\n            set: function (hidden) {\n                this.controller.blade.hidden = hidden;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ButtonApi.prototype.dispose = function () {\n            this.controller.blade.dispose();\n        };\n        ButtonApi.prototype.on = function (eventName, handler) {\n            var emitter = this.controller.button.emitter;\n            // TODO: Type-safe\n            emitter.on(eventName, forceCast(handler.bind(this)));\n            return this;\n        };\n        return ButtonApi;\n    }());\n\n    /**\n     * @hidden\n     */\n    function handleInputBinding(_a) {\n        var binding = _a.binding, eventName = _a.eventName, handler = _a.handler;\n        if (eventName === 'change') {\n            var emitter = binding.emitter;\n            emitter.on('change', function (ev) {\n                handler(forceCast(ev.sender.target.read()));\n            });\n        }\n    }\n    /**\n     * @hidden\n     */\n    function handleMonitorBinding(_a) {\n        var binding = _a.binding, eventName = _a.eventName, handler = _a.handler;\n        if (eventName === 'update') {\n            var emitter = binding.emitter;\n            emitter.on('update', function (ev) {\n                handler(ev.sender.target.read());\n            });\n        }\n    }\n    /**\n     * @hidden\n     */\n    function handleFolder(_a) {\n        var bladeRack = _a.bladeRack, eventName = _a.eventName, folder = _a.folder, handler = _a.handler;\n        if (eventName === 'change') {\n            var emitter = bladeRack.emitter;\n            emitter.on('inputchange', function (ev) {\n                handler(ev.inputBinding.target.read());\n            });\n        }\n        if (eventName === 'update') {\n            var emitter = bladeRack.emitter;\n            emitter.on('monitorupdate', function (ev) {\n                handler(ev.monitorBinding.target.read());\n            });\n        }\n        if (eventName === 'fold') {\n            bladeRack.emitter.on('itemfold', function (ev) {\n                handler(ev.expanded);\n            });\n            folder === null || folder === void 0 ? void 0 : folder.emitter.on('change', function (ev) {\n                if (ev.propertyName !== 'expanded') {\n                    return;\n                }\n                handler(ev.sender.expanded);\n            });\n        }\n    }\n\n    /**\n     * The API for the input binding between the parameter and the pane.\n     * @param In The internal type.\n     * @param Ex The external type (= parameter object).\n     */\n    var InputBindingApi = /** @class */ (function () {\n        /**\n         * @hidden\n         */\n        function InputBindingApi(bindingController) {\n            this.controller = bindingController;\n        }\n        Object.defineProperty(InputBindingApi.prototype, \"hidden\", {\n            get: function () {\n                return this.controller.blade.hidden;\n            },\n            set: function (hidden) {\n                this.controller.blade.hidden = hidden;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        InputBindingApi.prototype.dispose = function () {\n            this.controller.blade.dispose();\n        };\n        InputBindingApi.prototype.on = function (eventName, handler) {\n            handleInputBinding({\n                binding: this.controller.binding,\n                eventName: eventName,\n                handler: handler.bind(this),\n            });\n            return this;\n        };\n        InputBindingApi.prototype.refresh = function () {\n            this.controller.binding.read();\n        };\n        return InputBindingApi;\n    }());\n\n    var CREATE_MESSAGE_MAP = {\n        alreadydisposed: function () { return 'View has been already disposed'; },\n        invalidparams: function (context) { return \"Invalid parameters for '\" + context.name + \"'\"; },\n        nomatchingcontroller: function (context) {\n            return \"No matching controller for '\" + context.key + \"'\";\n        },\n        notbindable: function () { return \"Value is not bindable\"; },\n        propertynotfound: function (context) { return \"Property '\" + context.name + \"' not found\"; },\n        shouldneverhappen: function () { return 'This error should never happen'; },\n    };\n    var TpError = /** @class */ (function () {\n        function TpError(config) {\n            var _a;\n            this.message = (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        TpError.alreadyDisposed = function () {\n            return new TpError({ context: {}, type: 'alreadydisposed' });\n        };\n        TpError.notBindable = function () {\n            return new TpError({\n                context: {},\n                type: 'notbindable',\n            });\n        };\n        TpError.propertyNotFound = function (name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        };\n        TpError.shouldNeverHappen = function () {\n            return new TpError({ context: {}, type: 'shouldneverhappen' });\n        };\n        return TpError;\n    }());\n    TpError.prototype = Object.create(Error.prototype);\n    TpError.prototype.constructor = TpError;\n\n    /**\n     * @hidden\n     */\n    var InputBinding = /** @class */ (function () {\n        function InputBinding(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        InputBinding.prototype.read = function () {\n            var targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        };\n        InputBinding.prototype.write_ = function (rawValue) {\n            this.writer(this.target, rawValue);\n        };\n        InputBinding.prototype.onValueChange_ = function (ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        };\n        return InputBinding;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Value = /** @class */ (function () {\n        function Value(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : (function (v1, v2) { return v1 === v2; });\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        Object.defineProperty(Value.prototype, \"constraint\", {\n            get: function () {\n                return this.constraint_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Value.prototype, \"rawValue\", {\n            get: function () {\n                return this.rawValue_;\n            },\n            set: function (rawValue) {\n                var constrainedValue = this.constraint_\n                    ? this.constraint_.constrain(rawValue)\n                    : rawValue;\n                var changed = !this.equals_(this.rawValue_, constrainedValue);\n                if (changed) {\n                    this.rawValue_ = constrainedValue;\n                    this.emitter.emit('change', {\n                        rawValue: constrainedValue,\n                        sender: this,\n                    });\n                }\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return Value;\n    }());\n\n    function createController(plugin, args) {\n        var initialValue = plugin.binding.accept(args.target.read(), args.params);\n        if (initialValue === null) {\n            return null;\n        }\n        var valueArgs = {\n            target: args.target,\n            initialValue: initialValue,\n            params: args.params,\n        };\n        var reader = plugin.binding.reader(valueArgs);\n        var constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        var value = new Value(reader(initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        var binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        var controller = plugin.controller({\n            binding: binding,\n            document: args.document,\n            initialValue: initialValue,\n            params: args.params,\n        });\n        return new InputBindingController(args.document, {\n            binding: binding,\n            controller: controller,\n            label: args.params.label || args.target.key,\n            blade: new Blade(),\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    function createInputBindingController(document, target, params) {\n        var initialValue = target.read();\n        if (isEmpty(initialValue)) {\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        var bc = Plugins.inputs.reduce(function (result, plugin) {\n            return result ||\n                createController(plugin, {\n                    document: document,\n                    target: target,\n                    params: params,\n                });\n        }, null);\n        if (bc) {\n            return bc;\n        }\n        throw new TpError({\n            context: {\n                key: target.key,\n            },\n            type: 'nomatchingcontroller',\n        });\n    }\n\n    /**\n     * The API for the monitor binding between the parameter and the pane.\n     */\n    var MonitorBindingApi = /** @class */ (function () {\n        /**\n         * @hidden\n         */\n        function MonitorBindingApi(bindingController) {\n            this.controller = bindingController;\n        }\n        Object.defineProperty(MonitorBindingApi.prototype, \"hidden\", {\n            get: function () {\n                return this.controller.blade.hidden;\n            },\n            set: function (hidden) {\n                this.controller.blade.hidden = hidden;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        MonitorBindingApi.prototype.dispose = function () {\n            this.controller.blade.dispose();\n        };\n        MonitorBindingApi.prototype.on = function (eventName, handler) {\n            handleMonitorBinding({\n                binding: this.controller.binding,\n                eventName: eventName,\n                // TODO: Type-safe\n                handler: forceCast(handler.bind(this)),\n            });\n            return this;\n        };\n        MonitorBindingApi.prototype.refresh = function () {\n            this.controller.binding.read();\n        };\n        return MonitorBindingApi;\n    }());\n\n    var Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    /**\n     * @hidden\n     */\n    function initializeBuffer(initialValue, bufferSize) {\n        var buffer = [initialValue];\n        fillBuffer(buffer, bufferSize);\n        return new Value(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        var index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    /**\n     * @hidden\n     */\n    function createPushedBuffer(buffer, newValue) {\n        var newBuffer = __spreadArrays(createTrimmedBuffer(buffer), [newValue]);\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    /**\n     * @hidden\n     */\n    var MonitorBinding = /** @class */ (function () {\n        function MonitorBinding(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        MonitorBinding.prototype.dispose = function () {\n            this.ticker.disposable.dispose();\n        };\n        MonitorBinding.prototype.read = function () {\n            var targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            var buffer = this.value.rawValue;\n            var newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        };\n        MonitorBinding.prototype.onTick_ = function (_) {\n            this.read();\n        };\n        return MonitorBinding;\n    }());\n\n    /**\n     * @hidden\n     */\n    var IntervalTicker = /** @class */ (function () {\n        function IntervalTicker(doc, interval) {\n            var _this = this;\n            this.id_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            // this.onWindowBlur_ = this.onWindowBlur_.bind(this);\n            // this.onWindowFocus_ = this.onWindowFocus_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            if (interval <= 0) {\n                this.id_ = null;\n            }\n            else {\n                var win = this.doc_.defaultView;\n                if (win) {\n                    this.id_ = win.setInterval(this.onTick_, interval);\n                }\n            }\n            // TODO: Stop on blur?\n            // const win = document.defaultView;\n            // if (win) {\n            //   win.addEventListener('blur', this.onWindowBlur_);\n            //   win.addEventListener('focus', this.onWindowFocus_);\n            // }\n            this.disposable = new Disposable();\n            this.disposable.emitter.on('dispose', function () {\n                if (_this.id_ !== null) {\n                    var win = _this.doc_.defaultView;\n                    if (win) {\n                        win.clearInterval(_this.id_);\n                    }\n                }\n                _this.id_ = null;\n            });\n        }\n        IntervalTicker.prototype.onTick_ = function () {\n            // if (!this.active_) {\n            // \treturn;\n            // }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        };\n        return IntervalTicker;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ManualTicker = /** @class */ (function () {\n        function ManualTicker() {\n            this.disposable = new Disposable();\n            this.emitter = new Emitter();\n        }\n        ManualTicker.prototype.tick = function () {\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        };\n        return ManualTicker;\n    }());\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createController$1(plugin, args) {\n        var _a, _b, _c;\n        var initialValue = plugin.binding.accept(args.target.read(), args.params);\n        if (initialValue === null) {\n            return null;\n        }\n        var valueArgs = {\n            target: args.target,\n            initialValue: initialValue,\n            params: args.params,\n        };\n        var reader = plugin.binding.reader(valueArgs);\n        var bufferSize = (_c = (_b = (_a = args.params.bufferSize) !== null && _a !== void 0 ? _a : args.params.count) !== null && _b !== void 0 ? _b : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(args.params))) !== null && _c !== void 0 ? _c : 1;\n        var binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, args.params.interval),\n            value: initializeBuffer(reader(initialValue), bufferSize),\n        });\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            controller: plugin.controller({\n                binding: binding,\n                document: args.document,\n                params: args.params,\n            }),\n            label: args.params.label || args.target.key,\n            blade: new Blade(),\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    function createMonitorBindingController(document, target, params) {\n        var bc = Plugins.monitors.reduce(function (result, plugin) {\n            return result ||\n                createController$1(plugin, {\n                    document: document,\n                    params: params,\n                    target: target,\n                });\n        }, null);\n        if (bc) {\n            return bc;\n        }\n        throw new TpError({\n            context: {\n                key: target.key,\n            },\n            type: 'nomatchingcontroller',\n        });\n    }\n\n    var SeparatorApi = /** @class */ (function () {\n        /**\n         * @hidden\n         */\n        function SeparatorApi(controller) {\n            this.controller = controller;\n        }\n        Object.defineProperty(SeparatorApi.prototype, \"hidden\", {\n            get: function () {\n                return this.controller.blade.hidden;\n            },\n            set: function (hidden) {\n                this.controller.blade.hidden = hidden;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        SeparatorApi.prototype.dispose = function () {\n            this.controller.blade.dispose();\n        };\n        return SeparatorApi;\n    }());\n\n    /**\n     * @hidden\n     */\n    var BindingTarget = /** @class */ (function () {\n        function BindingTarget(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        BindingTarget.isBindable = function (obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        };\n        Object.defineProperty(BindingTarget.prototype, \"key\", {\n            get: function () {\n                return this.key_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(BindingTarget.prototype, \"presetKey\", {\n            get: function () {\n                return this.presetKey_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        BindingTarget.prototype.read = function () {\n            return this.obj_[this.key_];\n        };\n        BindingTarget.prototype.write = function (value) {\n            this.obj_[this.key_] = value;\n        };\n        BindingTarget.prototype.writeProperty = function (name, value) {\n            var valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        };\n        return BindingTarget;\n    }());\n\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n\n    var FolderApi = /** @class */ (function () {\n        /**\n         * @hidden\n         */\n        function FolderApi(folderController) {\n            this.controller = folderController;\n        }\n        Object.defineProperty(FolderApi.prototype, \"expanded\", {\n            get: function () {\n                return this.controller.folder.expanded;\n            },\n            set: function (expanded) {\n                this.controller.folder.expanded = expanded;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(FolderApi.prototype, \"hidden\", {\n            get: function () {\n                return this.controller.blade.hidden;\n            },\n            set: function (hidden) {\n                this.controller.blade.hidden = hidden;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        FolderApi.prototype.dispose = function () {\n            this.controller.blade.dispose();\n        };\n        FolderApi.prototype.addInput = function (object, key, opt_params) {\n            var params = opt_params || {};\n            var bc = createInputBindingController(this.controller.document, createBindingTarget(object, key, params.presetKey), params);\n            this.controller.bladeRack.add(bc, params.index);\n            return new InputBindingApi(forceCast(bc));\n        };\n        FolderApi.prototype.addMonitor = function (object, key, opt_params) {\n            var params = opt_params || {};\n            var bc = createMonitorBindingController(this.controller.document, createBindingTarget(object, key), params);\n            this.controller.bladeRack.add(bc, params.index);\n            return new MonitorBindingApi(forceCast(bc));\n        };\n        FolderApi.prototype.addFolder = function (params) {\n            var bc = new FolderController(this.controller.document, __assign(__assign({}, params), { blade: new Blade() }));\n            this.controller.bladeRack.add(bc, params.index);\n            return new FolderApi(bc);\n        };\n        FolderApi.prototype.addButton = function (params) {\n            var bc = new ButtonController(this.controller.document, __assign(__assign({}, params), { blade: new Blade() }));\n            this.controller.bladeRack.add(bc, params.index);\n            return new ButtonApi(bc);\n        };\n        FolderApi.prototype.addSeparator = function (opt_params) {\n            var params = opt_params || {};\n            var bc = new SeparatorController(this.controller.document, {\n                blade: new Blade(),\n            });\n            this.controller.bladeRack.add(bc, params.index);\n            return new SeparatorApi(bc);\n        };\n        FolderApi.prototype.on = function (eventName, handler) {\n            handleFolder({\n                eventName: eventName,\n                folder: this.controller.folder,\n                // TODO: Type-safe\n                handler: forceCast(handler.bind(this)),\n                bladeRack: this.controller.bladeRack,\n            });\n            return this;\n        };\n        return FolderApi;\n    }());\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce(function (result, target) {\n            var _a;\n            return Object.assign(result, (_a = {},\n                _a[target.presetKey] = target.read(),\n                _a));\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(targets, preset) {\n        targets.forEach(function (target) {\n            var value = preset[target.presetKey];\n            if (value !== undefined) {\n                target.write(value);\n            }\n        });\n    }\n\n    /**\n     * The Tweakpane interface.\n     *\n     * ```\n     * new Tweakpane(options: TweakpaneConfig): RootApi\n     * ```\n     *\n     * See [[`TweakpaneConfig`]] interface for available options.\n     */\n    var RootApi = /** @class */ (function () {\n        /**\n         * @hidden\n         */\n        function RootApi(rootController) {\n            this.controller = rootController;\n        }\n        // TODO: Publish\n        /**\n         * @hidden\n         */\n        RootApi.registerPlugin = function (r) {\n            if (r.type === 'input') {\n                Plugins.inputs.unshift(r.plugin);\n            }\n            else if (r.type === 'monitor') {\n                Plugins.monitors.unshift(r.plugin);\n            }\n        };\n        Object.defineProperty(RootApi.prototype, \"element\", {\n            get: function () {\n                return this.controller.view.element;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(RootApi.prototype, \"expanded\", {\n            get: function () {\n                var folder = this.controller.folder;\n                return folder ? folder.expanded : true;\n            },\n            set: function (expanded) {\n                var folder = this.controller.folder;\n                if (folder) {\n                    folder.expanded = expanded;\n                }\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(RootApi.prototype, \"hidden\", {\n            get: function () {\n                return this.controller.blade.hidden;\n            },\n            set: function (hidden) {\n                this.controller.blade.hidden = hidden;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        RootApi.prototype.dispose = function () {\n            this.controller.blade.dispose();\n        };\n        RootApi.prototype.addInput = function (object, key, opt_params) {\n            var params = opt_params || {};\n            var bc = createInputBindingController(this.controller.document, createBindingTarget(object, key, params.presetKey), params);\n            this.controller.bladeRack.add(bc, params.index);\n            return new InputBindingApi(forceCast(bc));\n        };\n        RootApi.prototype.addMonitor = function (object, key, opt_params) {\n            var params = opt_params || {};\n            var bc = createMonitorBindingController(this.controller.document, createBindingTarget(object, key), params);\n            this.controller.bladeRack.add(bc, params.index);\n            return new MonitorBindingApi(forceCast(bc));\n        };\n        RootApi.prototype.addButton = function (params) {\n            var bc = new ButtonController(this.controller.document, __assign(__assign({}, params), { blade: new Blade() }));\n            this.controller.bladeRack.add(bc, params.index);\n            return new ButtonApi(bc);\n        };\n        RootApi.prototype.addFolder = function (params) {\n            var bc = new FolderController(this.controller.document, __assign(__assign({}, params), { blade: new Blade() }));\n            this.controller.bladeRack.add(bc, params.index);\n            return new FolderApi(bc);\n        };\n        RootApi.prototype.addSeparator = function (opt_params) {\n            var params = opt_params || {};\n            var bc = new SeparatorController(this.controller.document, {\n                blade: new Blade(),\n            });\n            this.controller.bladeRack.add(bc, params.index);\n            return new SeparatorApi(bc);\n        };\n        /**\n         * Import a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        RootApi.prototype.importPreset = function (preset) {\n            var targets = this.controller.bladeRack\n                .find(InputBindingController)\n                .map(function (ibc) {\n                return ibc.binding.target;\n            });\n            importPresetJson(targets, preset);\n            this.refresh();\n        };\n        /**\n         * Export a preset of all inputs.\n         * @return The exported preset object.\n         */\n        RootApi.prototype.exportPreset = function () {\n            var targets = this.controller.bladeRack\n                .find(InputBindingController)\n                .map(function (ibc) {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        };\n        /**\n         * Adds a global event listener. It handles all events of child inputs/monitors.\n         * @param eventName The event name to listen.\n         * @return The API object itself.\n         */\n        RootApi.prototype.on = function (eventName, handler) {\n            handleFolder({\n                eventName: eventName,\n                folder: this.controller.folder,\n                // TODO: Type-safe\n                handler: forceCast(handler.bind(this)),\n                bladeRack: this.controller.bladeRack,\n            });\n            return this;\n        };\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        RootApi.prototype.refresh = function () {\n            // Force-read all input bindings\n            this.controller.bladeRack.find(InputBindingController).forEach(function (ibc) {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller.bladeRack.find(MonitorBindingController).forEach(function (mbc) {\n                mbc.binding.read();\n            });\n        };\n        return RootApi;\n    }());\n\n    var className$5 = ClassName('rot');\n    /**\n     * @hidden\n     */\n    var RootView = /** @class */ (function () {\n        function RootView(doc, config) {\n            this.titleElem_ = null;\n            this.onFolderChange_ = this.onFolderChange_.bind(this);\n            this.folder_ = config.folder;\n            if (this.folder_) {\n                this.folder_.emitter.on('change', this.onFolderChange_);\n            }\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            var folder = this.folder_;\n            if (folder) {\n                var titleElem = doc.createElement('button');\n                titleElem.classList.add(className$5('t'));\n                titleElem.textContent = folder.title;\n                this.element.appendChild(titleElem);\n                var markElem = doc.createElement('div');\n                markElem.classList.add(className$5('m'));\n                titleElem.appendChild(markElem);\n                this.titleElem_ = titleElem;\n            }\n            var containerElem = doc.createElement('div');\n            containerElem.classList.add(className$5('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n            this.applyModel_();\n        }\n        Object.defineProperty(RootView.prototype, \"titleElement\", {\n            get: function () {\n                return this.titleElem_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        RootView.prototype.applyModel_ = function () {\n            var expanded = this.folder_ ? this.folder_.styleExpanded : true;\n            var expandedClass = className$5(undefined, 'expanded');\n            if (expanded) {\n                this.element.classList.add(expandedClass);\n            }\n            else {\n                this.element.classList.remove(expandedClass);\n            }\n            this.containerElement.style.height = this.folder_\n                ? this.folder_.styleHeight\n                : 'auto';\n        };\n        RootView.prototype.onFolderChange_ = function () {\n            this.applyModel_();\n        };\n        return RootView;\n    }());\n\n    function createFolder(config) {\n        var _a;\n        if (!config.title) {\n            return null;\n        }\n        return new Folder(config.title, (_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n    }\n    /**\n     * @hidden\n     */\n    var RootController = /** @class */ (function () {\n        function RootController(doc, config) {\n            this.onContainerTransitionEnd_ = this.onContainerTransitionEnd_.bind(this);\n            this.onFolderBeforeChange_ = this.onFolderBeforeChange_.bind(this);\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackItemLayout_ = this.onRackItemLayout_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.folder = createFolder(config);\n            if (this.folder) {\n                this.folder.emitter.on('beforechange', this.onFolderBeforeChange_);\n            }\n            this.bladeRack = new BladeRack();\n            this.bladeRack.emitter.on('add', this.onRackAdd_);\n            this.bladeRack.emitter.on('itemlayout', this.onRackItemLayout_);\n            this.bladeRack.emitter.on('remove', this.onRackRemove_);\n            this.doc_ = doc;\n            this.blade = config.blade;\n            this.view = new RootView(this.doc_, {\n                folder: this.folder,\n            });\n            if (this.view.titleElement) {\n                this.view.titleElement.addEventListener('click', this.onTitleClick_);\n            }\n            this.view.containerElement.addEventListener('transitionend', this.onContainerTransitionEnd_);\n            setUpBladeView(this.view, this.blade);\n        }\n        Object.defineProperty(RootController.prototype, \"document\", {\n            get: function () {\n                return this.doc_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        RootController.prototype.onFolderBeforeChange_ = function (ev) {\n            if (ev.propertyName !== 'expanded') {\n                return;\n            }\n            var folder = this.folder;\n            if (!folder) {\n                return;\n            }\n            if (isEmpty(folder.expandedHeight)) {\n                folder.expandedHeight = computeExpandedFolderHeight(folder, this.view.containerElement);\n            }\n            folder.shouldFixHeight = true;\n            forceReflow(this.view.containerElement);\n        };\n        RootController.prototype.applyRackChange_ = function () {\n            updateAllItemsPositions(this.bladeRack);\n        };\n        RootController.prototype.onRackAdd_ = function (ev) {\n            insertElementAt(this.view.containerElement, ev.blade.view.element, ev.index);\n            this.applyRackChange_();\n        };\n        RootController.prototype.onRackRemove_ = function (_) {\n            this.applyRackChange_();\n        };\n        RootController.prototype.onRackItemLayout_ = function (_) {\n            this.applyRackChange_();\n        };\n        RootController.prototype.onTitleClick_ = function () {\n            if (this.folder) {\n                this.folder.expanded = !this.folder.expanded;\n            }\n        };\n        RootController.prototype.onContainerTransitionEnd_ = function (ev) {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            if (this.folder) {\n                this.folder.shouldFixHeight = false;\n                this.folder.expandedHeight = null;\n            }\n        };\n        return RootController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var CompositeConstraint = /** @class */ (function () {\n        function CompositeConstraint(config) {\n            this.constraints_ = config.constraints;\n        }\n        Object.defineProperty(CompositeConstraint.prototype, \"constraints\", {\n            get: function () {\n                return this.constraints_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        CompositeConstraint.prototype.constrain = function (value) {\n            return this.constraints_.reduce(function (result, c) {\n                return c.constrain(result);\n            }, value);\n        };\n        return CompositeConstraint;\n    }());\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            var result = c.constraints.reduce(function (tmpResult, sc) {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * @hidden\n     */\n    var ListConstraint = /** @class */ (function () {\n        function ListConstraint(config) {\n            this.opts_ = config.options;\n        }\n        Object.defineProperty(ListConstraint.prototype, \"options\", {\n            get: function () {\n                return this.opts_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ListConstraint.prototype.constrain = function (value) {\n            var opts = this.opts_;\n            if (opts.length === 0) {\n                return value;\n            }\n            var matched = opts.filter(function (item) {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        };\n        return ListConstraint;\n    }());\n\n    /**\n     * @hidden\n     */\n    function boolToString(value) {\n        return String(value);\n    }\n    /**\n     * @hidden\n     */\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    /**\n     * @hidden\n     */\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    /**\n     * @hidden\n     */\n    var StepConstraint = /** @class */ (function () {\n        function StepConstraint(config) {\n            this.step = config.step;\n        }\n        StepConstraint.prototype.constrain = function (value) {\n            var r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        };\n        return StepConstraint;\n    }());\n\n    function mapRange(value, start1, end1, start2, end2) {\n        var p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        var text = String(value.toFixed(10));\n        var frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    /**\n     * @hidden\n     */\n    function normalizeInputParamsOptions(options, convert) {\n        if (Array.isArray(options)) {\n            return options.map(function (item) {\n                return {\n                    text: item.text,\n                    value: convert(item.value),\n                };\n            });\n        }\n        var textToValueMap = options;\n        var texts = Object.keys(textToValueMap);\n        return texts.reduce(function (result, text) {\n            return result.concat({\n                text: text,\n                value: convert(textToValueMap[text]),\n            });\n        }, []);\n    }\n    /**\n     * @hidden\n     */\n    function findListItems(constraint) {\n        var c = constraint\n            ? findConstraint(constraint, ListConstraint)\n            : null;\n        if (!c) {\n            return null;\n        }\n        return c.options;\n    }\n    function findStep(constraint) {\n        var c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    /**\n     * @hidden\n     */\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        var sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    /**\n     * @hidden\n     */\n    function getBaseStep(constraint) {\n        var step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n\n    var className$6 = ClassName('lst');\n    /**\n     * @hidden\n     */\n    var ListView = /** @class */ (function () {\n        function ListView(doc, config) {\n            var _this = this;\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            this.stringifyValue_ = config.stringifyValue;\n            var selectElem = doc.createElement('select');\n            selectElem.classList.add(className$6('s'));\n            config.options.forEach(function (item, index) {\n                var optionElem = doc.createElement('option');\n                optionElem.dataset.index = String(index);\n                optionElem.textContent = item.text;\n                optionElem.value = _this.stringifyValue_(item.value);\n                selectElem.appendChild(optionElem);\n            });\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            var markElem = doc.createElement('div');\n            markElem.classList.add(className$6('m'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        ListView.prototype.update = function () {\n            this.selectElement.value = this.stringifyValue_(this.value.rawValue);\n        };\n        ListView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return ListView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ListController = /** @class */ (function () {\n        function ListController(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.value = config.value;\n            this.listItems_ = config.listItems;\n            this.view = new ListView(doc, {\n                options: this.listItems_,\n                stringifyValue: config.stringifyValue,\n                value: this.value,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        ListController.prototype.onSelectChange_ = function (e) {\n            var selectElem = forceCast(e.currentTarget);\n            var optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            var itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.listItems_[itemIndex].value;\n            this.view.update();\n        };\n        return ListController;\n    }());\n\n    var className$7 = ClassName('ckb');\n    /**\n     * @hidden\n     */\n    var CheckboxView = /** @class */ (function () {\n        function CheckboxView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            var labelElem = doc.createElement('label');\n            labelElem.classList.add(className$7('l'));\n            this.element.appendChild(labelElem);\n            var inputElem = doc.createElement('input');\n            inputElem.classList.add(className$7('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            var markElem = doc.createElement('div');\n            markElem.classList.add(className$7('m'));\n            labelElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        CheckboxView.prototype.update = function () {\n            this.inputElement.checked = this.value.rawValue;\n        };\n        CheckboxView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return CheckboxView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var CheckboxController = /** @class */ (function () {\n        function CheckboxController(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        CheckboxController.prototype.onInputChange_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n            this.view.update();\n        };\n        return CheckboxController;\n    }());\n\n    function createConstraint(params) {\n        var constraints = [];\n        if ('options' in params && params.options !== undefined) {\n            constraints.push(new ListConstraint({\n                options: normalizeInputParamsOptions(params.options, boolFromUnknown),\n            }));\n        }\n        return new CompositeConstraint({\n            constraints: constraints,\n        });\n    }\n    function createController$2(doc, value) {\n        var _a;\n        var c = value.constraint;\n        if (c && findConstraint(c, ListConstraint)) {\n            return new ListController(doc, {\n                listItems: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                stringifyValue: boolToString,\n                value: value,\n            });\n        }\n        return new CheckboxController(doc, {\n            value: value,\n        });\n    }\n    /**\n     * @hidden\n     */\n    var BooleanInputPlugin = {\n        id: 'input-bool',\n        binding: {\n            accept: function (value) { return (typeof value === 'boolean' ? value : null); },\n            constraint: function (args) { return createConstraint(args.params); },\n            reader: function (_args) { return boolFromUnknown; },\n            writer: function (_args) { return writePrimitive; },\n        },\n        controller: function (args) {\n            return createController$2(args.document, args.binding.value);\n        },\n    };\n\n    var className$8 = ClassName('txt');\n    /**\n     * @hidden\n     */\n    var TextView = /** @class */ (function () {\n        function TextView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            var inputElem = doc.createElement('input');\n            inputElem.classList.add(className$8('i'));\n            inputElem.type = 'text';\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        TextView.prototype.update = function () {\n            this.inputElement.value = this.formatter_(this.value.rawValue);\n        };\n        TextView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return TextView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var TextController = /** @class */ (function () {\n        function TextController(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.view = new TextView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        TextController.prototype.onInputChange_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            var value = inputElem.value;\n            var parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.update();\n        };\n        return TextController;\n    }());\n\n    var className$9 = ClassName('cswtxt');\n    /**\n     * @hidden\n     */\n    var ColorSwatchTextView = /** @class */ (function () {\n        function ColorSwatchTextView(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            var swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$9('s'));\n            this.swatchView_ = config.swatchView;\n            swatchElem.appendChild(this.swatchView_.element);\n            this.element.appendChild(swatchElem);\n            var textElem = doc.createElement('div');\n            textElem.classList.add(className$9('t'));\n            this.textView = config.textView;\n            textElem.appendChild(this.textView.element);\n            this.element.appendChild(textElem);\n        }\n        Object.defineProperty(ColorSwatchTextView.prototype, \"value\", {\n            get: function () {\n                return this.textView.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ColorSwatchTextView.prototype.update = function () {\n            this.swatchView_.update();\n            this.textView.update();\n        };\n        return ColorSwatchTextView;\n    }());\n\n    var PickedColor = /** @class */ (function () {\n        function PickedColor(value) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.mode_ = value.rawValue.mode;\n            this.value = value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.emitter = new Emitter();\n        }\n        Object.defineProperty(PickedColor.prototype, \"mode\", {\n            get: function () {\n                return this.mode_;\n            },\n            set: function (mode) {\n                if (this.mode_ === mode) {\n                    return;\n                }\n                this.mode_ = mode;\n                this.emitter.emit('change', {\n                    propertyName: 'mode',\n                    sender: this,\n                });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        PickedColor.prototype.onValueChange_ = function () {\n            this.emitter.emit('change', {\n                propertyName: 'value',\n                sender: this,\n            });\n        };\n        return PickedColor;\n    }());\n\n    /**\n     * @hidden\n     */\n    function parseNumber(text) {\n        var num = parseFloat(text);\n        if (isNaN(num)) {\n            return null;\n        }\n        return num;\n    }\n    /**\n     * @hidden\n     */\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            var pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    /**\n     * @hidden\n     */\n    function numberToString(value) {\n        return String(value);\n    }\n    /**\n     * @hidden\n     */\n    function createNumberFormatter(digits) {\n        return function (value) {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    var innerFormatter = createNumberFormatter(0);\n    /**\n     * @hidden\n     */\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function rgbToHsl(r, g, b) {\n        var rp = constrainRange(r / 255, 0, 1);\n        var gp = constrainRange(g / 255, 0, 1);\n        var bp = constrainRange(b / 255, 0, 1);\n        var cmax = Math.max(rp, gp, bp);\n        var cmin = Math.min(rp, gp, bp);\n        var c = cmax - cmin;\n        var h = 0;\n        var s = 0;\n        var l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = l > 0.5 ? c / (2 - cmin - cmax) : c / (cmax + cmin);\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgb(h, s, l) {\n        var _a, _b, _c, _d, _e, _f;\n        var hp = ((h % 360) + 360) % 360;\n        var sp = constrainRange(s / 100, 0, 1);\n        var lp = constrainRange(l / 100, 0, 1);\n        var c = (1 - Math.abs(2 * lp - 1)) * sp;\n        var x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        var m = lp - c / 2;\n        var rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            _a = [c, x, 0], rp = _a[0], gp = _a[1], bp = _a[2];\n        }\n        else if (hp >= 60 && hp < 120) {\n            _b = [x, c, 0], rp = _b[0], gp = _b[1], bp = _b[2];\n        }\n        else if (hp >= 120 && hp < 180) {\n            _c = [0, c, x], rp = _c[0], gp = _c[1], bp = _c[2];\n        }\n        else if (hp >= 180 && hp < 240) {\n            _d = [0, x, c], rp = _d[0], gp = _d[1], bp = _d[2];\n        }\n        else if (hp >= 240 && hp < 300) {\n            _e = [x, 0, c], rp = _e[0], gp = _e[1], bp = _e[2];\n        }\n        else {\n            _f = [c, 0, x], rp = _f[0], gp = _f[1], bp = _f[2];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsv(r, g, b) {\n        var rp = constrainRange(r / 255, 0, 1);\n        var gp = constrainRange(g / 255, 0, 1);\n        var bp = constrainRange(b / 255, 0, 1);\n        var cmax = Math.max(rp, gp, bp);\n        var cmin = Math.min(rp, gp, bp);\n        var d = cmax - cmin;\n        var h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        var s = cmax === 0 ? 0 : d / cmax;\n        var v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    /**\n     * @hidden\n     */\n    function hsvToRgb(h, s, v) {\n        var _a, _b, _c, _d, _e, _f;\n        var hp = loopRange(h, 360);\n        var sp = constrainRange(s / 100, 0, 1);\n        var vp = constrainRange(v / 100, 0, 1);\n        var c = vp * sp;\n        var x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        var m = vp - c;\n        var rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            _a = [c, x, 0], rp = _a[0], gp = _a[1], bp = _a[2];\n        }\n        else if (hp >= 60 && hp < 120) {\n            _b = [x, c, 0], rp = _b[0], gp = _b[1], bp = _b[2];\n        }\n        else if (hp >= 120 && hp < 180) {\n            _c = [0, c, x], rp = _c[0], gp = _c[1], bp = _c[2];\n        }\n        else if (hp >= 180 && hp < 240) {\n            _d = [0, x, c], rp = _d[0], gp = _d[1], bp = _d[2];\n        }\n        else if (hp >= 240 && hp < 300) {\n            _e = [x, 0, c], rp = _e[0], gp = _e[1], bp = _e[2];\n        }\n        else {\n            _f = [c, 0, x], rp = _f[0], gp = _f[1], bp = _f[2];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    /**\n     * @hidden\n     */\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    /**\n     * @hidden\n     */\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    var MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: function (h, s, l) { return [h, s, l]; },\n            hsv: function (h, s, l) {\n                var _a = hslToRgb(h, s, l), r = _a[0], g = _a[1], b = _a[2];\n                return rgbToHsv(r, g, b);\n            },\n            rgb: hslToRgb,\n        },\n        hsv: {\n            hsl: function (h, s, v) {\n                var _a = hsvToRgb(h, s, v), r = _a[0], g = _a[1], b = _a[2];\n                return rgbToHsl(r, g, b);\n            },\n            hsv: function (h, s, v) { return [h, s, v]; },\n            rgb: hsvToRgb,\n        },\n        rgb: {\n            hsl: rgbToHsl,\n            hsv: rgbToHsv,\n            rgb: function (r, g, b) { return [r, g, b]; },\n        },\n    };\n    /**\n     * @hidden\n     */\n    function convertColorMode(components, fromMode, toMode) {\n        var _a;\n        return (_a = MODE_CONVERTER_MAP[fromMode])[toMode].apply(_a, components);\n    }\n\n    var CONSTRAINT_MAP = {\n        hsl: function (comps) {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        hsv: function (comps) {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        rgb: function (comps) {\n            var _a;\n            return [\n                constrainRange(comps[0], 0, 255),\n                constrainRange(comps[1], 0, 255),\n                constrainRange(comps[2], 0, 255),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n    };\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    /**\n     * @hidden\n     */\n    var Color = /** @class */ (function () {\n        function Color(comps, mode) {\n            this.mode_ = mode;\n            this.comps_ = CONSTRAINT_MAP[mode](comps);\n        }\n        Color.black = function () {\n            return new Color([0, 0, 0], 'rgb');\n        };\n        Color.fromObject = function (obj) {\n            var comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb');\n        };\n        Color.toRgbaObject = function (color) {\n            return color.toRgbaObject();\n        };\n        Color.isRgbColorObject = function (obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        };\n        Color.isRgbaColorObject = function (obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        };\n        Color.isColorObject = function (obj) {\n            return this.isRgbColorObject(obj);\n        };\n        Color.equals = function (v1, v2) {\n            if (v1.mode_ !== v2.mode_) {\n                return false;\n            }\n            var comps1 = v1.comps_;\n            var comps2 = v2.comps_;\n            for (var i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        Object.defineProperty(Color.prototype, \"mode\", {\n            get: function () {\n                return this.mode_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Color.prototype.getComponents = function (opt_mode) {\n            return appendAlphaComponent(convertColorMode(removeAlphaComponent(this.comps_), this.mode_, opt_mode || this.mode_), this.comps_[3]);\n        };\n        Color.prototype.toRgbaObject = function () {\n            var rgbComps = this.getComponents('rgb');\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        };\n        return Color;\n    }());\n\n    function parseCssNumberOrPercentage(text, maxValue) {\n        var m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    var ANGLE_TO_DEG_MAP = {\n        deg: function (angle) { return angle; },\n        grad: function (angle) { return (angle * 360) / 400; },\n        rad: function (angle) { return (angle * 360) / (2 * Math.PI); },\n        turn: function (angle) { return angle * 360; },\n    };\n    function parseCssNumberOrAngle(text) {\n        var m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        var angle = parseFloat(m[1]);\n        var unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    var NOTATION_TO_PARSER_MAP = {\n        'func.rgb': function (text) {\n            var m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            var comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.rgba': function (text) {\n            var m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            var comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.hsl': function (text) {\n            var m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            var comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'func.hsla': function (text) {\n            var m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            var comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'hex.rgb': function (text) {\n            var mRrggbb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1] + mRrggbb[1], 16),\n                    parseInt(mRrggbb[2] + mRrggbb[2], 16),\n                    parseInt(mRrggbb[3] + mRrggbb[3], 16),\n                ], 'rgb');\n            }\n            var mRgb = text.match(/^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRgb) {\n                return new Color([parseInt(mRgb[1], 16), parseInt(mRgb[2], 16), parseInt(mRgb[3], 16)], 'rgb');\n            }\n            return null;\n        },\n        'hex.rgba': function (text) {\n            var mRrggbb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1] + mRrggbb[1], 16),\n                    parseInt(mRrggbb[2] + mRrggbb[2], 16),\n                    parseInt(mRrggbb[3] + mRrggbb[3], 16),\n                    mapRange(parseInt(mRrggbb[4] + mRrggbb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            var mRgb = text.match(/^#?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1], 16),\n                    parseInt(mRgb[2], 16),\n                    parseInt(mRgb[3], 16),\n                    mapRange(parseInt(mRgb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            return null;\n        },\n    };\n    /**\n     * @hidden\n     */\n    function getColorNotation(text) {\n        var notations = Object.keys(NOTATION_TO_PARSER_MAP);\n        return notations.reduce(function (result, notation) {\n            if (result) {\n                return result;\n            }\n            var subparser = NOTATION_TO_PARSER_MAP[notation];\n            return subparser(text) ? notation : null;\n        }, null);\n    }\n    /**\n     * @hidden\n     */\n    var CompositeColorParser = function (text) {\n        var notation = getColorNotation(text);\n        return notation ? NOTATION_TO_PARSER_MAP[notation](text) : null;\n    };\n    function hasAlphaComponent(notation) {\n        return (notation === 'func.hsla' ||\n            notation === 'func.rgba' ||\n            notation === 'hex.rgba');\n    }\n    /**\n     * @hidden\n     */\n    function colorFromString(value) {\n        if (typeof value === 'string') {\n            var cv = CompositeColorParser(value);\n            if (cv) {\n                return cv;\n            }\n        }\n        return Color.black();\n    }\n    function zerofill(comp) {\n        var hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? \"0\" + hex : hex;\n    }\n    /**\n     * @hidden\n     */\n    function colorToHexRgbString(value) {\n        var hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return \"#\" + hexes;\n    }\n    /**\n     * @hidden\n     */\n    function colorToHexRgbaString(value) {\n        var rgbaComps = value.getComponents('rgb');\n        var hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return \"#\" + hexes;\n    }\n    /**\n     * @hidden\n     */\n    function colorToFunctionalRgbString(value) {\n        var formatter = createNumberFormatter(0);\n        var comps = removeAlphaComponent(value.getComponents('rgb')).map(function (comp) {\n            return formatter(comp);\n        });\n        return \"rgb(\" + comps.join(', ') + \")\";\n    }\n    /**\n     * @hidden\n     */\n    function colorToFunctionalRgbaString(value) {\n        var aFormatter = createNumberFormatter(2);\n        var rgbFormatter = createNumberFormatter(0);\n        var comps = value.getComponents('rgb').map(function (comp, index) {\n            var formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return \"rgba(\" + comps.join(', ') + \")\";\n    }\n    /**\n     * @hidden\n     */\n    function colorToFunctionalHslString(value) {\n        var formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        var comps = removeAlphaComponent(value.getComponents('hsl')).map(function (comp, index) { return formatters[index](comp); });\n        return \"hsl(\" + comps.join(', ') + \")\";\n    }\n    /**\n     * @hidden\n     */\n    function colorToFunctionalHslaString(value) {\n        var formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        var comps = value\n            .getComponents('hsl')\n            .map(function (comp, index) { return formatters[index](comp); });\n        return \"hsla(\" + comps.join(', ') + \")\";\n    }\n    var NOTATION_TO_STRINGIFIER_MAP = {\n        'func.hsl': colorToFunctionalHslString,\n        'func.hsla': colorToFunctionalHslaString,\n        'func.rgb': colorToFunctionalRgbString,\n        'func.rgba': colorToFunctionalRgbaString,\n        'hex.rgb': colorToHexRgbString,\n        'hex.rgba': colorToHexRgbaString,\n    };\n    function getColorStringifier(notation) {\n        return NOTATION_TO_STRINGIFIER_MAP[notation];\n    }\n\n    var className$a = ClassName('csw');\n    /**\n     * @hidden\n     */\n    var ColorSwatchView = /** @class */ (function () {\n        function ColorSwatchView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            var swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$a('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            var buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$a('b'));\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            var pickerElem = doc.createElement('div');\n            pickerElem.classList.add(className$a('p'));\n            this.pickerView_ = config.pickerView;\n            pickerElem.appendChild(this.pickerView_.element);\n            this.element.appendChild(pickerElem);\n            this.update();\n        }\n        ColorSwatchView.prototype.update = function () {\n            var value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        };\n        ColorSwatchView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return ColorSwatchView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Foldable = /** @class */ (function () {\n        function Foldable() {\n            this.emitter = new Emitter();\n            this.expanded_ = false;\n        }\n        Object.defineProperty(Foldable.prototype, \"expanded\", {\n            get: function () {\n                return this.expanded_;\n            },\n            set: function (expanded) {\n                var changed = this.expanded_ !== expanded;\n                if (changed) {\n                    this.expanded_ = expanded;\n                    this.emitter.emit('change', {\n                        sender: this,\n                    });\n                }\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return Foldable;\n    }());\n\n    /**\n     * @hidden\n     */\n    function connect(_a) {\n        var primary = _a.primary, secondary = _a.secondary, forward = _a.forward, backward = _a.backward;\n        primary.emitter.on('change', function () {\n            secondary.rawValue = forward(primary, secondary);\n        });\n        secondary.emitter.on('change', function () {\n            primary.rawValue = backward(primary, secondary);\n        });\n        secondary.rawValue = forward(primary, secondary);\n    }\n\n    /**\n     * @hidden\n     */\n    function getStepForKey(baseStep, keys) {\n        var step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    /**\n     * @hidden\n     */\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.keyCode === 40,\n            shiftKey: ev.shiftKey,\n            upKey: ev.keyCode === 38,\n        };\n    }\n    /**\n     * @hidden\n     */\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.keyCode === 37,\n            shiftKey: ev.shiftKey,\n            upKey: ev.keyCode === 39,\n        };\n    }\n    /**\n     * @hidden\n     */\n    function isVerticalArrowKey(keyCode) {\n        return keyCode === 38 || keyCode === 40;\n    }\n    /**\n     * @hidden\n     */\n    function isArrowKey(keyCode) {\n        return isVerticalArrowKey(keyCode) || keyCode === 37 || keyCode === 39;\n    }\n\n    /**\n     * @hidden\n     */\n    var NumberTextController = /** @class */ (function (_super) {\n        __extends(NumberTextController, _super);\n        function NumberTextController(doc, config) {\n            var _this = _super.call(this, doc, config) || this;\n            _this.onInputKeyDown_ = _this.onInputKeyDown_.bind(_this);\n            _this.baseStep_ = config.baseStep;\n            _this.view.inputElement.addEventListener('keydown', _this.onInputKeyDown_);\n            return _this;\n        }\n        NumberTextController.prototype.onInputKeyDown_ = function (e) {\n            var step = getStepForKey(this.baseStep_, getVerticalStepKeys(e));\n            if (step !== 0) {\n                this.value.rawValue += step;\n                this.view.update();\n            }\n        };\n        return NumberTextController;\n    }(TextController));\n\n    var className$b = ClassName('clp');\n    /**\n     * @hidden\n     */\n    var ColorPickerView = /** @class */ (function () {\n        function ColorPickerView(doc, config) {\n            this.alphaViews_ = null;\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.pickedColor = config.pickedColor;\n            this.pickedColor.value.emitter.on('change', this.onValueChange_);\n            this.foldable = config.foldable;\n            this.foldable.emitter.on('change', this.onFoldableChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            var hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            var svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            var hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            var rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.compTextsView_ = config.componentTextsView;\n            rgbElem.appendChild(this.compTextsView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                var aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                var apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                var atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n            this.update();\n        }\n        Object.defineProperty(ColorPickerView.prototype, \"allFocusableElements\", {\n            get: function () {\n                var elems = __spreadArrays([\n                    this.svPaletteView_.element,\n                    this.hPaletteView_.element\n                ], this.compTextsView_.inputElements);\n                if (this.alphaViews_) {\n                    elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n                }\n                return forceCast(elems);\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(ColorPickerView.prototype, \"value\", {\n            get: function () {\n                return this.pickedColor.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ColorPickerView.prototype.update = function () {\n            if (this.foldable.expanded) {\n                this.element.classList.add(className$b(undefined, 'expanded'));\n            }\n            else {\n                this.element.classList.remove(className$b(undefined, 'expanded'));\n            }\n        };\n        ColorPickerView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        ColorPickerView.prototype.onFoldableChange_ = function () {\n            this.update();\n        };\n        return ColorPickerView;\n    }());\n\n    function computeOffset(ev, elem) {\n        // NOTE: OffsetX/Y should be computed from page and window properties to capture mouse events\n        var win = elem.ownerDocument.defaultView;\n        var rect = elem.getBoundingClientRect();\n        return [\n            ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        ];\n    }\n    /**\n     * A utility class to handle both mouse and touch events.\n     * @hidden\n     */\n    var PointerHandler = /** @class */ (function () {\n        function PointerHandler(doc, element) {\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.document = doc;\n            this.element = element;\n            this.emitter = new Emitter();\n            this.pressed_ = false;\n            if (supportsTouch(this.document)) {\n                element.addEventListener('touchstart', this.onTouchStart_);\n                element.addEventListener('touchmove', this.onTouchMove_);\n            }\n            else {\n                element.addEventListener('mousedown', this.onMouseDown_);\n                this.document.addEventListener('mousemove', this.onDocumentMouseMove_);\n                this.document.addEventListener('mouseup', this.onDocumentMouseUp_);\n            }\n        }\n        PointerHandler.prototype.computePosition_ = function (offsetX, offsetY) {\n            var rect = this.element.getBoundingClientRect();\n            return {\n                px: offsetX / rect.width,\n                py: offsetY / rect.height,\n            };\n        };\n        PointerHandler.prototype.onMouseDown_ = function (e) {\n            var _a;\n            // Prevent native text selection\n            e.preventDefault();\n            (_a = e.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            this.pressed_ = true;\n            this.emitter.emit('down', {\n                data: this.computePosition_.apply(this, computeOffset(e, this.element)),\n                sender: this,\n            });\n        };\n        PointerHandler.prototype.onDocumentMouseMove_ = function (e) {\n            if (!this.pressed_) {\n                return;\n            }\n            this.emitter.emit('move', {\n                data: this.computePosition_.apply(this, computeOffset(e, this.element)),\n                sender: this,\n            });\n        };\n        PointerHandler.prototype.onDocumentMouseUp_ = function (e) {\n            if (!this.pressed_) {\n                return;\n            }\n            this.pressed_ = false;\n            this.emitter.emit('up', {\n                data: this.computePosition_.apply(this, computeOffset(e, this.element)),\n                sender: this,\n            });\n        };\n        PointerHandler.prototype.onTouchStart_ = function (e) {\n            // Prevent native page scroll\n            e.preventDefault();\n            var touch = e.targetTouches[0];\n            var rect = this.element.getBoundingClientRect();\n            this.emitter.emit('down', {\n                data: this.computePosition_(touch.clientX - rect.left, touch.clientY - rect.top),\n                sender: this,\n            });\n        };\n        PointerHandler.prototype.onTouchMove_ = function (e) {\n            var touch = e.targetTouches[0];\n            var rect = this.element.getBoundingClientRect();\n            this.emitter.emit('move', {\n                data: this.computePosition_(touch.clientX - rect.left, touch.clientY - rect.top),\n                sender: this,\n            });\n        };\n        return PointerHandler;\n    }());\n\n    /**\n     * @hidden\n     */\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n\n    var className$c = ClassName('apl');\n    /**\n     * @hidden\n     */\n    var APaletteView = /** @class */ (function () {\n        function APaletteView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            this.element.tabIndex = 0;\n            var barElem = doc.createElement('div');\n            barElem.classList.add(className$c('b'));\n            this.element.appendChild(barElem);\n            var colorElem = doc.createElement('div');\n            colorElem.classList.add(className$c('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            var markerElem = doc.createElement('div');\n            markerElem.classList.add(className$c('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            var previewElem = doc.createElement('div');\n            previewElem.classList.add(className$c('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update();\n        }\n        APaletteView.prototype.update = function () {\n            var c = this.value.rawValue;\n            var rgbaComps = c.getComponents('rgb');\n            var leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            var rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            var gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = \"linear-gradient(\" + gradientComps.join(',') + \")\";\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            var left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = left + \"%\";\n        };\n        APaletteView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return APaletteView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var APaletteController = /** @class */ (function () {\n        function APaletteController(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n            });\n            this.ptHandler_ = new PointerHandler(doc, this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n        }\n        APaletteController.prototype.handlePointerEvent_ = function (d) {\n            var alpha = d.px;\n            var c = this.value.rawValue;\n            var _a = c.getComponents('hsv'), h = _a[0], s = _a[1], v = _a[2];\n            this.value.rawValue = new Color([h, s, v, alpha], 'hsv');\n            this.view.update();\n        };\n        APaletteController.prototype.onPointerDown_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        APaletteController.prototype.onPointerMove_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        APaletteController.prototype.onPointerUp_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        APaletteController.prototype.onKeyDown_ = function (ev) {\n            var step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            var c = this.value.rawValue;\n            var _a = c.getComponents('hsv'), h = _a[0], s = _a[1], v = _a[2], a = _a[3];\n            this.value.rawValue = new Color([h, s, v, a + step], 'hsv');\n        };\n        return APaletteController;\n    }());\n\n    var className$d = ClassName('cctxts');\n    var FORMATTER = createNumberFormatter(0);\n    function createModeSelectElement(doc) {\n        var selectElem = doc.createElement('select');\n        var items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce(function (frag, item) {\n            var optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    /**\n     * @hidden\n     */\n    var ColorComponentTextsView = /** @class */ (function () {\n        function ColorComponentTextsView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            var modeElem = doc.createElement('div');\n            modeElem.classList.add(className$d('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$d('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            var modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$d('mm'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            var wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            this.element.appendChild(wrapperElem);\n            var inputElems = [0, 1, 2].map(function () {\n                var inputElem = doc.createElement('input');\n                inputElem.classList.add(className$d('i'));\n                inputElem.type = 'text';\n                return inputElem;\n            });\n            inputElems.forEach(function (elem) {\n                wrapperElem.appendChild(elem);\n            });\n            this.inputElems_ = [inputElems[0], inputElems[1], inputElems[2]];\n            this.pickedColor = config.pickedColor;\n            this.pickedColor.emitter.on('change', this.onValueChange_);\n            this.update();\n        }\n        Object.defineProperty(ColorComponentTextsView.prototype, \"modeSelectElement\", {\n            get: function () {\n                return this.modeElem_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(ColorComponentTextsView.prototype, \"inputElements\", {\n            get: function () {\n                return this.inputElems_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(ColorComponentTextsView.prototype, \"value\", {\n            get: function () {\n                return this.pickedColor.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ColorComponentTextsView.prototype.update = function () {\n            var _this = this;\n            this.modeElem_.value = this.pickedColor.mode;\n            var comps = this.pickedColor.value.rawValue.getComponents(this.pickedColor.mode);\n            comps.forEach(function (comp, index) {\n                var inputElem = _this.inputElems_[index];\n                if (!inputElem) {\n                    return;\n                }\n                inputElem.value = FORMATTER(comp);\n            });\n        };\n        ColorComponentTextsView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return ColorComponentTextsView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ColorComponentTextsController = /** @class */ (function () {\n        function ColorComponentTextsController(doc, config) {\n            var _this = this;\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.parser_ = config.parser;\n            this.pickedColor = config.pickedColor;\n            this.view = new ColorComponentTextsView(doc, {\n                pickedColor: this.pickedColor,\n            });\n            this.view.inputElements.forEach(function (inputElem) {\n                inputElem.addEventListener('change', _this.onInputChange_);\n                inputElem.addEventListener('keydown', _this.onInputKeyDown_);\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        Object.defineProperty(ColorComponentTextsController.prototype, \"value\", {\n            get: function () {\n                return this.pickedColor.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ColorComponentTextsController.prototype.findIndexOfInputElem_ = function (inputElem) {\n            var inputElems = this.view.inputElements;\n            for (var i = 0; i < inputElems.length; i++) {\n                if (inputElems[i] === inputElem) {\n                    return i;\n                }\n            }\n            return null;\n        };\n        ColorComponentTextsController.prototype.updateComponent_ = function (index, newValue) {\n            var mode = this.pickedColor.mode;\n            var comps = this.value.rawValue.getComponents(mode);\n            var newComps = comps.map(function (comp, i) {\n                return i === index ? newValue : comp;\n            });\n            this.value.rawValue = new Color(newComps, mode);\n            this.view.update();\n        };\n        ColorComponentTextsController.prototype.onInputChange_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            var parsedValue = this.parser_(inputElem.value);\n            if (isEmpty(parsedValue)) {\n                return;\n            }\n            var compIndex = this.findIndexOfInputElem_(inputElem);\n            if (isEmpty(compIndex)) {\n                return;\n            }\n            this.updateComponent_(compIndex, parsedValue);\n        };\n        ColorComponentTextsController.prototype.onInputKeyDown_ = function (e) {\n            var compIndex = this.findIndexOfInputElem_(e.currentTarget);\n            var step = getStepForKey(getBaseStepForColor(compIndex === 3), getVerticalStepKeys(e));\n            if (step === 0) {\n                return;\n            }\n            var inputElem = forceCast(e.currentTarget);\n            var parsedValue = this.parser_(inputElem.value);\n            if (isEmpty(parsedValue)) {\n                return;\n            }\n            if (isEmpty(compIndex)) {\n                return;\n            }\n            this.updateComponent_(compIndex, parsedValue + step);\n        };\n        ColorComponentTextsController.prototype.onModeSelectChange_ = function (ev) {\n            var selectElem = ev.currentTarget;\n            this.pickedColor.mode = selectElem.value;\n        };\n        return ColorComponentTextsController;\n    }());\n\n    var className$e = ClassName('hpl');\n    /**\n     * @hidden\n     */\n    var HPaletteView = /** @class */ (function () {\n        function HPaletteView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            this.element.tabIndex = 0;\n            var colorElem = doc.createElement('div');\n            colorElem.classList.add(className$e('c'));\n            this.element.appendChild(colorElem);\n            var markerElem = doc.createElement('div');\n            markerElem.classList.add(className$e('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update();\n        }\n        HPaletteView.prototype.update = function () {\n            var c = this.value.rawValue;\n            var h = c.getComponents('hsv')[0];\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            var left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = left + \"%\";\n        };\n        HPaletteView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return HPaletteView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var HPaletteController = /** @class */ (function () {\n        function HPaletteController(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n            });\n            this.ptHandler_ = new PointerHandler(doc, this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n        }\n        HPaletteController.prototype.handlePointerEvent_ = function (d) {\n            var hue = mapRange(d.px, 0, 1, 0, 360);\n            var c = this.value.rawValue;\n            var _a = c.getComponents('hsv'), s = _a[1], v = _a[2], a = _a[3];\n            this.value.rawValue = new Color([hue, s, v, a], 'hsv');\n            this.view.update();\n        };\n        HPaletteController.prototype.onPointerDown_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        HPaletteController.prototype.onPointerMove_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        HPaletteController.prototype.onPointerUp_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        HPaletteController.prototype.onKeyDown_ = function (ev) {\n            var step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            var c = this.value.rawValue;\n            var _a = c.getComponents('hsv'), h = _a[0], s = _a[1], v = _a[2], a = _a[3];\n            this.value.rawValue = new Color([h + step, s, v, a], 'hsv');\n        };\n        return HPaletteController;\n    }());\n\n    var className$f = ClassName('svp');\n    var CANVAS_RESOL = 64;\n    /**\n     * @hidden\n     */\n    var SvPaletteView = /** @class */ (function () {\n        function SvPaletteView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            this.element.tabIndex = 0;\n            var canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$f('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            var markerElem = doc.createElement('div');\n            markerElem.classList.add(className$f('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update();\n        }\n        SvPaletteView.prototype.update = function () {\n            var ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            var c = this.value.rawValue;\n            var hsvComps = c.getComponents('hsv');\n            var width = this.canvasElement.width;\n            var height = this.canvasElement.height;\n            var imgData = ctx.getImageData(0, 0, width, height);\n            var data = imgData.data;\n            for (var iy = 0; iy < height; iy++) {\n                for (var ix = 0; ix < width; ix++) {\n                    var s = mapRange(ix, 0, width, 0, 100);\n                    var v = mapRange(iy, 0, height, 100, 0);\n                    var rgbComps = hsvToRgb(hsvComps[0], s, v);\n                    var i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            var left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = left + \"%\";\n            var top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = top + \"%\";\n        };\n        SvPaletteView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return SvPaletteView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var SvPaletteController = /** @class */ (function () {\n        function SvPaletteController(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n            });\n            this.ptHandler_ = new PointerHandler(doc, this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n        }\n        SvPaletteController.prototype.handlePointerEvent_ = function (d) {\n            var saturation = mapRange(d.px, 0, 1, 0, 100);\n            var value = mapRange(d.py, 0, 1, 100, 0);\n            var _a = this.value.rawValue.getComponents('hsv'), h = _a[0], a = _a[3];\n            this.value.rawValue = new Color([h, saturation, value, a], 'hsv');\n            this.view.update();\n        };\n        SvPaletteController.prototype.onPointerDown_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        SvPaletteController.prototype.onPointerMove_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        SvPaletteController.prototype.onPointerUp_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        SvPaletteController.prototype.onKeyDown_ = function (ev) {\n            if (isArrowKey(ev.keyCode)) {\n                ev.preventDefault();\n            }\n            var _a = this.value.rawValue.getComponents('hsv'), h = _a[0], s = _a[1], v = _a[2], a = _a[3];\n            var baseStep = getBaseStepForColor(false);\n            this.value.rawValue = new Color([\n                h,\n                s + getStepForKey(baseStep, getHorizontalStepKeys(ev)),\n                v + getStepForKey(baseStep, getVerticalStepKeys(ev)),\n                a,\n            ], 'hsv');\n        };\n        return SvPaletteController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ColorPickerController = /** @class */ (function () {\n        function ColorPickerController(doc, config) {\n            var _this = this;\n            this.triggerElement = null;\n            this.onFocusableElementBlur_ = this.onFocusableElementBlur_.bind(this);\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.pickedColor = config.pickedColor;\n            this.foldable = new Foldable();\n            this.hPaletteIc_ = new HPaletteController(doc, {\n                value: this.pickedColor.value,\n            });\n            this.svPaletteIc_ = new SvPaletteController(doc, {\n                value: this.pickedColor.value,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.pickedColor.value,\n                    }),\n                    text: new NumberTextController(doc, {\n                        formatter: createNumberFormatter(2),\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        value: new Value(0),\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connect({\n                    primary: this.pickedColor.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: function (p) {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: function (p, s) {\n                        var comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.compTextsIc_ = new ColorComponentTextsController(doc, {\n                parser: parseNumber,\n                pickedColor: this.pickedColor,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                componentTextsView: this.compTextsIc_.view,\n                foldable: this.foldable,\n                hPaletteView: this.hPaletteIc_.view,\n                pickedColor: this.pickedColor,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteIc_.view,\n            });\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.allFocusableElements.forEach(function (elem) {\n                elem.addEventListener('blur', _this.onFocusableElementBlur_);\n            });\n        }\n        Object.defineProperty(ColorPickerController.prototype, \"value\", {\n            get: function () {\n                return this.pickedColor.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ColorPickerController.prototype.onFocusableElementBlur_ = function (ev) {\n            var elem = this.view.element;\n            var nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                // Next target is in the picker\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.triggerElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                // Next target is the trigger button\n                return;\n            }\n            this.foldable.expanded = false;\n        };\n        ColorPickerController.prototype.onKeyDown_ = function (ev) {\n            if (ev.keyCode === 27) {\n                this.foldable.expanded = false;\n            }\n        };\n        return ColorPickerController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ColorSwatchController = /** @class */ (function () {\n        function ColorSwatchController(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.value = config.value;\n            this.pickerIc_ = new ColorPickerController(doc, {\n                pickedColor: new PickedColor(this.value),\n                supportsAlpha: config.supportsAlpha,\n            });\n            this.view = new ColorSwatchView(doc, {\n                pickerView: this.pickerIc_.view,\n                value: this.value,\n            });\n            this.view.buttonElement.addEventListener('blur', this.onButtonBlur_);\n            this.view.buttonElement.addEventListener('click', this.onButtonClick_);\n            this.pickerIc_.triggerElement = this.view.buttonElement;\n        }\n        ColorSwatchController.prototype.onButtonBlur_ = function (e) {\n            var elem = this.view.element;\n            var nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.pickerIc_.foldable.expanded = false;\n            }\n        };\n        ColorSwatchController.prototype.onButtonClick_ = function () {\n            this.pickerIc_.foldable.expanded = !this.pickerIc_.foldable.expanded;\n            if (this.pickerIc_.foldable.expanded) {\n                this.pickerIc_.view.allFocusableElements[0].focus();\n            }\n        };\n        return ColorSwatchController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var ColorSwatchTextController = /** @class */ (function () {\n        function ColorSwatchTextController(doc, config) {\n            this.value = config.value;\n            this.swatchIc_ = new ColorSwatchController(doc, {\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n            });\n            this.textIc_ = new TextController(doc, {\n                formatter: config.formatter,\n                parser: config.parser,\n                value: this.value,\n            });\n            this.view = new ColorSwatchTextView(doc, {\n                swatchView: this.swatchIc_.view,\n                textView: this.textIc_.view,\n            });\n        }\n        return ColorSwatchTextController;\n    }());\n\n    /**\n     * @hidden\n     */\n    function colorFromObject(value) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value);\n        }\n        return Color.black();\n    }\n    /**\n     * @hidden\n     */\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce(function (result, comp) {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    /**\n     * @hidden\n     */\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce(function (result, comp, index) {\n            var hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    /**\n     * @hidden\n     */\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    /**\n     * @hidden\n     */\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    /**\n     * @hidden\n     */\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    /**\n     * @hidden\n     */\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(notation) {\n        var stringify = getColorStringifier(notation);\n        return function (target, value) {\n            writePrimitive(target, stringify(value));\n        };\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        var colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return function (target, value) {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value) {\n        var obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value) {\n        var obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha) {\n        return supportsAlpha ? writeRgbaColorObject : writeRgbColorObject;\n    }\n\n    function shouldSupportAlpha(inputParams) {\n        return 'input' in inputParams && inputParams.input === 'color.rgba';\n    }\n    /**\n     * @hidden\n     */\n    var NumberColorInputPlugin = {\n        id: 'input-color-number',\n        binding: {\n            accept: function (value, params) {\n                if (typeof value !== 'number') {\n                    return null;\n                }\n                if (!('input' in params)) {\n                    return null;\n                }\n                if (params.input !== 'color' &&\n                    params.input !== 'color.rgb' &&\n                    params.input !== 'color.rgba') {\n                    return null;\n                }\n                return value;\n            },\n            reader: function (args) {\n                return shouldSupportAlpha(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            writer: function (args) {\n                return createColorNumberWriter(shouldSupportAlpha(args.params));\n            },\n            equals: Color.equals,\n        },\n        controller: function (args) {\n            var supportsAlpha = shouldSupportAlpha(args.params);\n            var formatter = supportsAlpha\n                ? colorToHexRgbaString\n                : colorToHexRgbString;\n            return new ColorSwatchTextController(args.document, {\n                formatter: formatter,\n                parser: CompositeColorParser,\n                supportsAlpha: supportsAlpha,\n                value: args.binding.value,\n            });\n        },\n    };\n\n    function shouldSupportAlpha$1(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    /**\n     * @hidden\n     */\n    var ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        binding: {\n            accept: function (value, _params) { return (Color.isColorObject(value) ? value : null); },\n            reader: function (_args) { return colorFromObject; },\n            writer: function (args) {\n                return createColorObjectWriter(shouldSupportAlpha$1(args.initialValue));\n            },\n            equals: Color.equals,\n        },\n        controller: function (args) {\n            var supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            var formatter = supportsAlpha\n                ? colorToHexRgbaString\n                : colorToHexRgbString;\n            return new ColorSwatchTextController(args.document, {\n                formatter: formatter,\n                parser: CompositeColorParser,\n                supportsAlpha: supportsAlpha,\n                value: args.binding.value,\n            });\n        },\n    };\n\n    /**\n     * @hidden\n     */\n    var StringColorInputPlugin = {\n        id: 'input-color-string',\n        binding: {\n            accept: function (value, params) {\n                if (typeof value !== 'string') {\n                    return null;\n                }\n                if ('input' in params && params.input === 'string') {\n                    return null;\n                }\n                var notation = getColorNotation(value);\n                if (!notation) {\n                    return null;\n                }\n                return value;\n            },\n            reader: function (_args) { return colorFromString; },\n            writer: function (args) {\n                var notation = getColorNotation(args.initialValue);\n                if (!notation) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return createColorStringWriter(notation);\n            },\n            equals: Color.equals,\n        },\n        controller: function (args) {\n            var notation = getColorNotation(args.initialValue);\n            if (!notation) {\n                throw TpError.shouldNeverHappen();\n            }\n            var stringifier = getColorStringifier(notation);\n            return new ColorSwatchTextController(args.document, {\n                formatter: stringifier,\n                parser: CompositeColorParser,\n                supportsAlpha: hasAlphaComponent(notation),\n                value: args.binding.value,\n            });\n        },\n    };\n\n    /**\n     * @hidden\n     */\n    var RangeConstraint = /** @class */ (function () {\n        function RangeConstraint(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        RangeConstraint.prototype.constrain = function (value) {\n            var result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        };\n        return RangeConstraint;\n    }());\n\n    var className$g = ClassName('sldtxt');\n    /**\n     * @hidden\n     */\n    var SliderTextView = /** @class */ (function () {\n        function SliderTextView(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g());\n            var sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$g('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            var textElem = doc.createElement('div');\n            textElem.classList.add(className$g('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n        Object.defineProperty(SliderTextView.prototype, \"value\", {\n            get: function () {\n                return this.sliderView_.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        SliderTextView.prototype.update = function () {\n            this.sliderView_.update();\n            this.textView_.update();\n        };\n        return SliderTextView;\n    }());\n\n    var className$h = ClassName('sld');\n    /**\n     * @hidden\n     */\n    var SliderView = /** @class */ (function () {\n        function SliderView(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            var outerElem = doc.createElement('div');\n            outerElem.classList.add(className$h('o'));\n            outerElem.tabIndex = 0;\n            this.element.appendChild(outerElem);\n            this.outerElement = outerElem;\n            var innerElem = doc.createElement('div');\n            innerElem.classList.add(className$h('i'));\n            this.outerElement.appendChild(innerElem);\n            this.innerElement = innerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        SliderView.prototype.update = function () {\n            var p = constrainRange(mapRange(this.value.rawValue, this.minValue_, this.maxValue_, 0, 100), 0, 100);\n            this.innerElement.style.width = p + \"%\";\n        };\n        SliderView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return SliderView;\n    }());\n\n    function findRange(value) {\n        var c = value.constraint\n            ? findConstraint(value.constraint, RangeConstraint)\n            : null;\n        if (!c) {\n            return [undefined, undefined];\n        }\n        return [c.minValue, c.maxValue];\n    }\n    function estimateSuitableRange(value) {\n        var _a = findRange(value), min = _a[0], max = _a[1];\n        return [min !== null && min !== void 0 ? min : 0, max !== null && max !== void 0 ? max : 100];\n    }\n    /**\n     * @hidden\n     */\n    var SliderController = /** @class */ (function () {\n        function SliderController(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.baseStep_ = config.baseStep;\n            var _a = estimateSuitableRange(this.value), min = _a[0], max = _a[1];\n            this.minValue_ = min;\n            this.maxValue_ = max;\n            this.view = new SliderView(doc, {\n                maxValue: this.maxValue_,\n                minValue: this.minValue_,\n                value: this.value,\n            });\n            this.ptHandler_ = new PointerHandler(doc, this.view.outerElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.outerElement.addEventListener('keydown', this.onKeyDown_);\n        }\n        SliderController.prototype.handlePointerEvent_ = function (d) {\n            this.value.rawValue = mapRange(d.px, 0, 1, this.minValue_, this.maxValue_);\n        };\n        SliderController.prototype.onPointerDown_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        SliderController.prototype.onPointerMove_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        SliderController.prototype.onPointerUp_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        SliderController.prototype.onKeyDown_ = function (ev) {\n            this.value.rawValue += getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n        };\n        return SliderController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var SliderTextController = /** @class */ (function () {\n        function SliderTextController(doc, config) {\n            this.value = config.value;\n            this.sliderIc_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                value: config.value,\n            });\n            this.textIc_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                formatter: config.formatter,\n                parser: config.parser,\n                value: config.value,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderIc_.view,\n                textView: this.textIc_.view,\n            });\n        }\n        return SliderTextController;\n    }());\n\n    function createConstraint$1(params) {\n        var constraints = [];\n        if ('step' in params && !isEmpty(params.step)) {\n            constraints.push(new StepConstraint({\n                step: params.step,\n            }));\n        }\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        if ('options' in params && params.options !== undefined) {\n            constraints.push(new ListConstraint({\n                options: normalizeInputParamsOptions(params.options, numberFromUnknown),\n            }));\n        }\n        return new CompositeConstraint({\n            constraints: constraints,\n        });\n    }\n    function createController$3(doc, value) {\n        var _a;\n        var c = value.constraint;\n        if (c && findConstraint(c, ListConstraint)) {\n            return new ListController(doc, {\n                listItems: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                stringifyValue: numberToString,\n                value: value,\n            });\n        }\n        if (c && findConstraint(c, RangeConstraint)) {\n            return new SliderTextController(doc, {\n                baseStep: getBaseStep(c),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(value.constraint, value.rawValue)),\n                parser: parseNumber,\n                value: value,\n            });\n        }\n        return new NumberTextController(doc, {\n            baseStep: getBaseStep(c),\n            formatter: createNumberFormatter(getSuitableDecimalDigits(value.constraint, value.rawValue)),\n            parser: parseNumber,\n            value: value,\n        });\n    }\n    /**\n     * @hidden\n     */\n    var NumberInputPlugin = {\n        id: 'input-number',\n        binding: {\n            accept: function (value) { return (typeof value === 'number' ? value : null); },\n            constraint: function (args) { return createConstraint$1(args.params); },\n            reader: function (_args) { return numberFromUnknown; },\n            writer: function (_args) { return writePrimitive; },\n        },\n        controller: function (args) {\n            return createController$3(args.document, args.binding.value);\n        },\n    };\n\n    var Point2d = /** @class */ (function () {\n        function Point2d(x, y) {\n            if (x === void 0) { x = 0; }\n            if (y === void 0) { y = 0; }\n            this.x = x;\n            this.y = y;\n        }\n        Point2d.prototype.getComponents = function () {\n            return [this.x, this.y];\n        };\n        Point2d.isObject = function (obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            var x = obj.x;\n            var y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        };\n        Point2d.equals = function (v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        };\n        Point2d.prototype.toObject = function () {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        };\n        return Point2d;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Point2dConstraint = /** @class */ (function () {\n        function Point2dConstraint(config) {\n            this.x = config.x;\n            this.y = config.y;\n        }\n        Point2dConstraint.prototype.constrain = function (value) {\n            return new Point2d(this.x ? this.x.constrain(value.x) : value.x, this.y ? this.y.constrain(value.y) : value.y);\n        };\n        return Point2dConstraint;\n    }());\n\n    var className$i = ClassName('p2dpadtxt');\n    /**\n     * @hidden\n     */\n    var Point2dPadTextView = /** @class */ (function () {\n        function Point2dPadTextView(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            var padWrapperElem = doc.createElement('div');\n            padWrapperElem.classList.add(className$i('w'));\n            this.element.appendChild(padWrapperElem);\n            var buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$i('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            padWrapperElem.appendChild(buttonElem);\n            this.padButtonElem_ = buttonElem;\n            var padElem = doc.createElement('div');\n            padElem.classList.add(className$i('p'));\n            padWrapperElem.appendChild(padElem);\n            this.padView_ = config.padView;\n            padElem.appendChild(this.padView_.element);\n            var textElem = doc.createElement('div');\n            textElem.classList.add(className$i('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n        Object.defineProperty(Point2dPadTextView.prototype, \"value\", {\n            get: function () {\n                return this.textView_.value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(Point2dPadTextView.prototype, \"padButtonElement\", {\n            get: function () {\n                return this.padButtonElem_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Point2dPadTextView.prototype.update = function () {\n            this.padView_.update();\n            this.textView_.update();\n        };\n        return Point2dPadTextView;\n    }());\n\n    var className$j = ClassName('p2dpad');\n    /**\n     * @hidden\n     */\n    var Point2dPadView = /** @class */ (function () {\n        function Point2dPadView(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.foldable = config.foldable;\n            this.foldable.emitter.on('change', this.onFoldableChange_);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            var padElem = doc.createElement('div');\n            padElem.tabIndex = 0;\n            padElem.classList.add(className$j('p'));\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            var svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$j('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            var xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$j('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            var yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$j('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            var lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$j('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            var markerElem = doc.createElementNS(SVG_NS, 'circle');\n            markerElem.classList.add(className$j('m'));\n            markerElem.setAttributeNS(null, 'r', '2px');\n            this.svgElem_.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        Object.defineProperty(Point2dPadView.prototype, \"allFocusableElements\", {\n            get: function () {\n                return [this.padElement];\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Point2dPadView.prototype.update = function () {\n            if (this.foldable.expanded) {\n                this.element.classList.add(className$j(undefined, 'expanded'));\n            }\n            else {\n                this.element.classList.remove(className$j(undefined, 'expanded'));\n            }\n            var _a = this.value.rawValue.getComponents(), x = _a[0], y = _a[1];\n            var max = this.maxValue_;\n            var px = mapRange(x, -max, +max, 0, 100);\n            var py = mapRange(y, -max, +max, 0, 100);\n            var ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', px + \"%\");\n            this.lineElem_.setAttributeNS(null, 'y2', ipy + \"%\");\n            this.markerElem_.setAttributeNS(null, 'cx', px + \"%\");\n            this.markerElem_.setAttributeNS(null, 'cy', ipy + \"%\");\n        };\n        Point2dPadView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        Point2dPadView.prototype.onFoldableChange_ = function () {\n            this.update();\n        };\n        return Point2dPadView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Point2dPadController = /** @class */ (function () {\n        function Point2dPadController(doc, config) {\n            var _this = this;\n            this.triggerElement = null;\n            this.onFocusableElementBlur_ = this.onFocusableElementBlur_.bind(this);\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.foldable = new Foldable();\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPadView(doc, {\n                foldable: this.foldable,\n                invertsY: this.invertsY_,\n                maxValue: this.maxValue_,\n                value: this.value,\n            });\n            this.ptHandler_ = new PointerHandler(doc, this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.allFocusableElements.forEach(function (elem) {\n                elem.addEventListener('blur', _this.onFocusableElementBlur_);\n            });\n        }\n        Point2dPadController.prototype.handlePointerEvent_ = function (d) {\n            var max = this.maxValue_;\n            var px = mapRange(d.px, 0, 1, -max, +max);\n            var py = mapRange(this.invertsY_ ? 1 - d.py : d.py, 0, 1, -max, +max);\n            this.value.rawValue = new Point2d(px, py);\n            this.view.update();\n        };\n        Point2dPadController.prototype.onPointerDown_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        Point2dPadController.prototype.onPointerMove_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        Point2dPadController.prototype.onPointerUp_ = function (ev) {\n            this.handlePointerEvent_(ev.data);\n        };\n        Point2dPadController.prototype.onPadKeyDown_ = function (ev) {\n            if (isArrowKey(ev.keyCode)) {\n                ev.preventDefault();\n            }\n            this.value.rawValue = new Point2d(this.value.rawValue.x +\n                getStepForKey(this.baseSteps_[0], getHorizontalStepKeys(ev)), this.value.rawValue.y +\n                getStepForKey(this.baseSteps_[1], getVerticalStepKeys(ev)) *\n                    (this.invertsY_ ? 1 : -1));\n        };\n        Point2dPadController.prototype.onFocusableElementBlur_ = function (ev) {\n            var elem = this.view.element;\n            var nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                // Next target is in the picker\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.triggerElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                // Next target is the trigger button\n                return;\n            }\n            this.foldable.expanded = false;\n        };\n        Point2dPadController.prototype.onKeyDown_ = function (ev) {\n            if (ev.keyCode === 27) {\n                this.foldable.expanded = false;\n            }\n        };\n        return Point2dPadController;\n    }());\n\n    var className$k = ClassName('p2dtxt');\n    /**\n     * @hidden\n     */\n    var Point2dTextView = /** @class */ (function () {\n        function Point2dTextView(doc, config) {\n            var _this = this;\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.formatters_ = config.formatters;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k());\n            var inputElems = [0, 1].map(function () {\n                var inputElem = doc.createElement('input');\n                inputElem.classList.add(className$k('i'));\n                inputElem.type = 'text';\n                return inputElem;\n            });\n            [0, 1].forEach(function (_, index) {\n                var elem = doc.createElement('div');\n                elem.classList.add(className$k('w'));\n                elem.appendChild(inputElems[index]);\n                _this.element.appendChild(elem);\n            });\n            this.inputElems_ = [inputElems[0], inputElems[1]];\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        Object.defineProperty(Point2dTextView.prototype, \"inputElements\", {\n            get: function () {\n                return this.inputElems_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Point2dTextView.prototype.update = function () {\n            var _this = this;\n            var xyComps = this.value.rawValue.getComponents();\n            xyComps.forEach(function (comp, index) {\n                var inputElem = _this.inputElems_[index];\n                inputElem.value = _this.formatters_[index](comp);\n            });\n        };\n        Point2dTextView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return Point2dTextView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Point2dTextController = /** @class */ (function () {\n        function Point2dTextController(doc, config) {\n            var _this = this;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.baseSteps_ = [config.axes[0].baseStep, config.axes[1].baseStep];\n            this.view = new Point2dTextView(doc, {\n                formatters: [config.axes[0].formatter, config.axes[1].formatter],\n                value: this.value,\n            });\n            this.view.inputElements.forEach(function (inputElem) {\n                inputElem.addEventListener('change', _this.onInputChange_);\n                inputElem.addEventListener('keydown', _this.onInputKeyDown_);\n            });\n        }\n        Point2dTextController.prototype.findIndexOfInputElem_ = function (inputElem) {\n            var inputElems = this.view.inputElements;\n            for (var i = 0; i < inputElems.length; i++) {\n                if (inputElems[i] === inputElem) {\n                    return i;\n                }\n            }\n            return null;\n        };\n        Point2dTextController.prototype.updateComponent_ = function (index, newValue) {\n            var comps = this.value.rawValue.getComponents();\n            var newComps = comps.map(function (comp, i) {\n                return i === index ? newValue : comp;\n            });\n            this.value.rawValue = new Point2d(newComps[0], newComps[1]);\n            this.view.update();\n        };\n        Point2dTextController.prototype.onInputChange_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            var parsedValue = this.parser_(inputElem.value);\n            if (isEmpty(parsedValue)) {\n                return;\n            }\n            var compIndex = this.findIndexOfInputElem_(inputElem);\n            if (isEmpty(compIndex)) {\n                return;\n            }\n            this.updateComponent_(compIndex, parsedValue);\n        };\n        Point2dTextController.prototype.onInputKeyDown_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            var parsedValue = this.parser_(inputElem.value);\n            if (isEmpty(parsedValue)) {\n                return;\n            }\n            var compIndex = this.findIndexOfInputElem_(inputElem);\n            if (isEmpty(compIndex)) {\n                return;\n            }\n            var step = getStepForKey(this.baseSteps_[compIndex], getVerticalStepKeys(e));\n            if (step === 0) {\n                return;\n            }\n            this.updateComponent_(compIndex, parsedValue + step);\n        };\n        return Point2dTextController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Point2dPadTextController = /** @class */ (function () {\n        function Point2dPadTextController(doc, config) {\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.padIc_ = new Point2dPadController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                maxValue: config.maxValue,\n                value: this.value,\n            });\n            this.textIc_ = new Point2dTextController(doc, {\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n            });\n            this.view = new Point2dPadTextView(doc, {\n                padView: this.padIc_.view,\n                textView: this.textIc_.view,\n            });\n            this.view.padButtonElement.addEventListener('blur', this.onPadButtonBlur_);\n            this.view.padButtonElement.addEventListener('click', this.onPadButtonClick_);\n            this.padIc_.triggerElement = this.view.padButtonElement;\n        }\n        Point2dPadTextController.prototype.onPadButtonBlur_ = function (e) {\n            var elem = this.view.element;\n            var nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.padIc_.foldable.expanded = false;\n            }\n        };\n        Point2dPadTextController.prototype.onPadButtonClick_ = function () {\n            this.padIc_.foldable.expanded = !this.padIc_.foldable.expanded;\n            if (this.padIc_.foldable.expanded) {\n                this.padIc_.view.allFocusableElements[0].focus();\n            }\n        };\n        return Point2dPadTextController;\n    }());\n\n    /**\n     * @hidden\n     */\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint(params) {\n        if (!params) {\n            return undefined;\n        }\n        var constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint({\n                step: params.step,\n            }));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint({\n            constraints: constraints,\n        });\n    }\n    function createConstraint$2(params) {\n        return new Point2dConstraint({\n            x: createDimensionConstraint('x' in params ? params.x : undefined),\n            y: createDimensionConstraint('y' in params ? params.y : undefined),\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        var rc = constraint && findConstraint(constraint, RangeConstraint);\n        if (rc) {\n            return Math.max(Math.abs(rc.minValue || 0), Math.abs(rc.maxValue || 0));\n        }\n        var step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    /**\n     * @hidden\n     */\n    function getSuitableMaxValue(initialValue, constraint) {\n        var xc = constraint instanceof Point2dConstraint ? constraint.x : undefined;\n        var yc = constraint instanceof Point2dConstraint ? constraint.y : undefined;\n        var xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        var yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createController$4(document, value, invertsY) {\n        var c = value.constraint;\n        if (!(c instanceof Point2dConstraint)) {\n            throw TpError.shouldNeverHappen();\n        }\n        return new Point2dPadTextController(document, {\n            axes: [\n                {\n                    baseStep: getBaseStep(c.x),\n                    formatter: createNumberFormatter(getSuitableDecimalDigits(c.x, value.rawValue.x)),\n                },\n                {\n                    baseStep: getBaseStep(c.y),\n                    formatter: createNumberFormatter(getSuitableDecimalDigits(c.y, value.rawValue.y)),\n                },\n            ],\n            invertsY: invertsY,\n            maxValue: getSuitableMaxValue(value.rawValue, value.constraint),\n            parser: parseNumber,\n            value: value,\n        });\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        var yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    /**\n     * @hidden\n     */\n    var Point2dInputPlugin = {\n        id: 'input-point2d',\n        binding: {\n            accept: function (value, _params) { return (Point2d.isObject(value) ? value : null); },\n            reader: function (_args) { return point2dFromUnknown; },\n            writer: function (_args) { return writePoint2d; },\n            constraint: function (args) { return createConstraint$2(args.params); },\n            equals: Point2d.equals,\n        },\n        controller: function (args) {\n            return createController$4(args.document, args.binding.value, shouldInvertY(args.params));\n        },\n    };\n\n    var Point3d = /** @class */ (function () {\n        function Point3d(x, y, z) {\n            if (x === void 0) { x = 0; }\n            if (y === void 0) { y = 0; }\n            if (z === void 0) { z = 0; }\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        Point3d.prototype.getComponents = function () {\n            return [this.x, this.y, this.z];\n        };\n        Point3d.isObject = function (obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            var x = obj.x;\n            var y = obj.y;\n            var z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        };\n        Point3d.equals = function (v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        };\n        Point3d.prototype.toObject = function () {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        };\n        return Point3d;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Point3dConstraint = /** @class */ (function () {\n        function Point3dConstraint(config) {\n            this.x = config.x;\n            this.y = config.y;\n            this.z = config.z;\n        }\n        Point3dConstraint.prototype.constrain = function (value) {\n            return new Point3d(this.x ? this.x.constrain(value.x) : value.x, this.y ? this.y.constrain(value.y) : value.y, this.z ? this.z.constrain(value.z) : value.z);\n        };\n        return Point3dConstraint;\n    }());\n\n    var className$l = ClassName('p3dtxt');\n    /**\n     * @hidden\n     */\n    var Point3dTextView = /** @class */ (function () {\n        function Point3dTextView(doc, config) {\n            var _this = this;\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.formatters_ = config.formatters;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            var inputElems = [0, 1, 2].map(function () {\n                var inputElem = doc.createElement('input');\n                inputElem.classList.add(className$l('i'));\n                inputElem.type = 'text';\n                return inputElem;\n            });\n            [0, 1, 2].forEach(function (_, index) {\n                var elem = doc.createElement('div');\n                elem.classList.add(className$l('w'));\n                elem.appendChild(inputElems[index]);\n                _this.element.appendChild(elem);\n            });\n            this.inputElems_ = [inputElems[0], inputElems[1], inputElems[2]];\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update();\n        }\n        Object.defineProperty(Point3dTextView.prototype, \"inputElements\", {\n            get: function () {\n                return this.inputElems_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Point3dTextView.prototype.update = function () {\n            var _this = this;\n            var comps = this.value.rawValue.getComponents();\n            comps.forEach(function (comp, index) {\n                var inputElem = _this.inputElems_[index];\n                inputElem.value = _this.formatters_[index](comp);\n            });\n        };\n        Point3dTextView.prototype.onValueChange_ = function () {\n            this.update();\n        };\n        return Point3dTextView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var Point3dTextController = /** @class */ (function () {\n        function Point3dTextController(doc, config) {\n            var _this = this;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            var axes = config.axes;\n            this.baseSteps_ = [axes[0].baseStep, axes[1].baseStep, axes[2].baseStep];\n            this.view = new Point3dTextView(doc, {\n                formatters: [axes[0].formatter, axes[1].formatter, axes[2].formatter],\n                value: this.value,\n            });\n            this.view.inputElements.forEach(function (inputElem) {\n                inputElem.addEventListener('change', _this.onInputChange_);\n                inputElem.addEventListener('keydown', _this.onInputKeyDown_);\n            });\n        }\n        Point3dTextController.prototype.findIndexOfInputElem_ = function (inputElem) {\n            var inputElems = this.view.inputElements;\n            for (var i = 0; i < inputElems.length; i++) {\n                if (inputElems[i] === inputElem) {\n                    return i;\n                }\n            }\n            return null;\n        };\n        Point3dTextController.prototype.updateComponent_ = function (index, newValue) {\n            var comps = this.value.rawValue.getComponents();\n            var newComps = comps.map(function (comp, i) {\n                return i === index ? newValue : comp;\n            });\n            this.value.rawValue = new Point3d(newComps[0], newComps[1], newComps[2]);\n            this.view.update();\n        };\n        Point3dTextController.prototype.onInputChange_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            var parsedValue = this.parser_(inputElem.value);\n            if (isEmpty(parsedValue)) {\n                return;\n            }\n            var compIndex = this.findIndexOfInputElem_(inputElem);\n            if (isEmpty(compIndex)) {\n                return;\n            }\n            this.updateComponent_(compIndex, parsedValue);\n        };\n        Point3dTextController.prototype.onInputKeyDown_ = function (e) {\n            var inputElem = forceCast(e.currentTarget);\n            var parsedValue = this.parser_(inputElem.value);\n            if (isEmpty(parsedValue)) {\n                return;\n            }\n            var compIndex = this.findIndexOfInputElem_(inputElem);\n            if (isEmpty(compIndex)) {\n                return;\n            }\n            var step = getStepForKey(this.baseSteps_[compIndex], getVerticalStepKeys(e));\n            if (step === 0) {\n                return;\n            }\n            this.updateComponent_(compIndex, parsedValue + step);\n        };\n        return Point3dTextController;\n    }());\n\n    /**\n     * @hidden\n     */\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createDimensionConstraint$1(params) {\n        if (!params) {\n            return undefined;\n        }\n        var constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint({\n                step: params.step,\n            }));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint({\n            constraints: constraints,\n        });\n    }\n    function createConstraint$3(params) {\n        return new Point3dConstraint({\n            x: createDimensionConstraint$1('x' in params ? params.x : undefined),\n            y: createDimensionConstraint$1('y' in params ? params.y : undefined),\n            z: createDimensionConstraint$1('z' in params ? params.z : undefined),\n        });\n    }\n    /**\n     * @hidden\n     */\n    function getAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n        };\n    }\n    function createController$5(document, value) {\n        var c = value.constraint;\n        if (!(c instanceof Point3dConstraint)) {\n            throw TpError.shouldNeverHappen();\n        }\n        return new Point3dTextController(document, {\n            axes: [\n                getAxis(value.rawValue.x, c.x),\n                getAxis(value.rawValue.y, c.y),\n                getAxis(value.rawValue.z, c.z),\n            ],\n            parser: parseNumber,\n            value: value,\n        });\n    }\n    /**\n     * @hidden\n     */\n    var Point3dInputPlugin = {\n        id: 'input-point3d',\n        binding: {\n            accept: function (value, _params) { return (Point3d.isObject(value) ? value : null); },\n            reader: function (_args) { return point3dFromUnknown; },\n            writer: function (_args) { return writePoint3d; },\n            constraint: function (args) { return createConstraint$3(args.params); },\n            equals: Point3d.equals,\n        },\n        controller: function (args) {\n            return createController$5(args.document, args.binding.value);\n        },\n    };\n\n    /**\n     * @hidden\n     */\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    /**\n     * @hidden\n     */\n    function formatString(value) {\n        return value;\n    }\n\n    function createConstraint$4(params) {\n        var constraints = [];\n        if ('options' in params && params.options !== undefined) {\n            constraints.push(new ListConstraint({\n                options: normalizeInputParamsOptions(params.options, stringFromUnknown),\n            }));\n        }\n        return new CompositeConstraint({\n            constraints: constraints,\n        });\n    }\n    function createController$6(doc, value) {\n        var _a;\n        var c = value.constraint;\n        if (c && findConstraint(c, ListConstraint)) {\n            return new ListController(doc, {\n                listItems: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                stringifyValue: function (v) { return v; },\n                value: value,\n            });\n        }\n        return new TextController(doc, {\n            formatter: formatString,\n            parser: function (v) { return v; },\n            value: value,\n        });\n    }\n    /**\n     * @hidden\n     */\n    var StringInputPlugin = {\n        id: 'input-string',\n        binding: {\n            accept: function (value, _params) { return (typeof value === 'string' ? value : null); },\n            constraint: function (args) { return createConstraint$4(args.params); },\n            reader: function (_args) { return stringFromUnknown; },\n            writer: function (_args) { return writePrimitive; },\n        },\n        controller: function (params) {\n            return createController$6(params.document, params.binding.value);\n        },\n    };\n\n    var className$m = ClassName('mll');\n    /**\n     * @hidden\n     */\n    var MultiLogView = /** @class */ (function () {\n        function MultiLogView(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$m());\n            var textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$m('i'));\n            textareaElem.style.height = \"calc(var(--unit-size) * \" + config.lineCount + \")\";\n            textareaElem.readOnly = true;\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update();\n        }\n        MultiLogView.prototype.update = function () {\n            var _this = this;\n            var elem = this.textareaElem_;\n            var shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            elem.textContent = this.value.rawValue\n                .map(function (value) {\n                return value !== undefined ? _this.formatter_(value) : '';\n            })\n                .join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        };\n        MultiLogView.prototype.onValueUpdate_ = function () {\n            this.update();\n        };\n        return MultiLogView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var MultiLogController = /** @class */ (function () {\n        function MultiLogController(doc, config) {\n            this.value = config.value;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n            });\n        }\n        return MultiLogController;\n    }());\n\n    var className$n = ClassName('sgl');\n    /**\n     * @hidden\n     */\n    var SingleLogView = /** @class */ (function () {\n        function SingleLogView(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            var inputElem = doc.createElement('input');\n            inputElem.classList.add(className$n('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            this.element.appendChild(inputElem);\n            this.inputElem_ = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update();\n        }\n        SingleLogView.prototype.update = function () {\n            var values = this.value.rawValue;\n            var lastValue = values[values.length - 1];\n            this.inputElem_.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        };\n        SingleLogView.prototype.onValueUpdate_ = function () {\n            this.update();\n        };\n        return SingleLogView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var SingleLogMonitorController = /** @class */ (function () {\n        function SingleLogMonitorController(doc, config) {\n            this.value = config.value;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n            });\n        }\n        return SingleLogMonitorController;\n    }());\n\n    /**\n     * @hidden\n     */\n    var BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        binding: {\n            accept: function (value, _params) { return (typeof value === 'boolean' ? value : null); },\n            reader: function (_args) { return boolFromUnknown; },\n        },\n        controller: function (args) {\n            var _a;\n            if (args.binding.value.rawValue.length === 1) {\n                return new SingleLogMonitorController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.binding.value,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.binding.value,\n            });\n        },\n    };\n\n    /**\n     * @hidden\n     */\n    var GraphCursor = /** @class */ (function () {\n        function GraphCursor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        Object.defineProperty(GraphCursor.prototype, \"index\", {\n            get: function () {\n                return this.index_;\n            },\n            set: function (index) {\n                var changed = this.index_ !== index;\n                if (changed) {\n                    this.index_ = index;\n                    this.emitter.emit('change', {\n                        index: index,\n                        sender: this,\n                    });\n                }\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return GraphCursor;\n    }());\n\n    var className$o = ClassName('grl');\n    /**\n     * @hidden\n     */\n    var GraphLogView = /** @class */ (function () {\n        function GraphLogView(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$o());\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            var svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$o('g'));\n            svgElem.style.height = \"calc(var(--unit-size) * \" + config.lineCount + \")\";\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            var lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            var tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className$o('t'));\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update();\n        }\n        Object.defineProperty(GraphLogView.prototype, \"graphElement\", {\n            get: function () {\n                return this.svgElem_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        GraphLogView.prototype.update = function () {\n            var bounds = this.svgElem_.getBoundingClientRect();\n            // Graph\n            var maxIndex = this.value.rawValue.length - 1;\n            var min = this.minValue_;\n            var max = this.maxValue_;\n            var points = [];\n            this.value.rawValue.forEach(function (v, index) {\n                if (v === undefined) {\n                    return;\n                }\n                var x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                var y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            // Cursor\n            var tooltipElem = this.tooltipElem_;\n            var value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className$o('t', 'valid'));\n                return;\n            }\n            tooltipElem.classList.add(className$o('t', 'valid'));\n            var tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            var ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = tx + \"px\";\n            tooltipElem.style.top = ty + \"px\";\n            tooltipElem.textContent = \"\" + this.formatter_(value);\n        };\n        GraphLogView.prototype.onValueUpdate_ = function () {\n            this.update();\n        };\n        GraphLogView.prototype.onCursorChange_ = function () {\n            this.update();\n        };\n        return GraphLogView;\n    }());\n\n    /**\n     * @hidden\n     */\n    var GraphLogController = /** @class */ (function () {\n        function GraphLogController(doc, config) {\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.value = config.value;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n            });\n            this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n        }\n        GraphLogController.prototype.onGraphMouseLeave_ = function () {\n            this.cursor_.index = -1;\n        };\n        GraphLogController.prototype.onGraphMouseMove_ = function (e) {\n            var bounds = this.view.graphElement.getBoundingClientRect();\n            var x = e.offsetX;\n            this.cursor_.index = Math.floor(mapRange(x, 0, bounds.width, 0, this.value.rawValue.length));\n        };\n        return GraphLogController;\n    }());\n\n    function createFormatter() {\n        // TODO: formatter precision\n        return createNumberFormatter(2);\n    }\n    function createTextMonitor(document, binding, params) {\n        var _a;\n        if (binding.value.rawValue.length === 1) {\n            return new SingleLogMonitorController(document, {\n                formatter: createFormatter(),\n                value: binding.value,\n            });\n        }\n        return new MultiLogController(document, {\n            formatter: createFormatter(),\n            lineCount: (_a = params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: binding.value,\n        });\n    }\n    function createGraphMonitor(_a) {\n        var _b, _c, _d;\n        var document = _a.document, binding = _a.binding, params = _a.params;\n        return new GraphLogController(document, {\n            formatter: createFormatter(),\n            lineCount: (_b = params.lineCount) !== null && _b !== void 0 ? _b : Constants.monitor.defaultLineCount,\n            maxValue: (_c = ('max' in params ? params.max : null)) !== null && _c !== void 0 ? _c : 100,\n            minValue: (_d = ('min' in params ? params.min : null)) !== null && _d !== void 0 ? _d : 0,\n            value: binding.value,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    /**\n     * @hidden\n     */\n    var NumberMonitorPlugin = {\n        id: 'monitor-number',\n        binding: {\n            accept: function (value, _params) { return (typeof value === 'number' ? value : null); },\n            defaultBufferSize: function (params) { return (shouldShowGraph(params) ? 64 : 1); },\n            reader: function (_args) { return numberFromUnknown; },\n        },\n        controller: function (args) {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor({\n                    document: args.document,\n                    binding: args.binding,\n                    params: args.params,\n                });\n            }\n            return createTextMonitor(args.document, args.binding, args.params);\n        },\n    };\n\n    /**\n     * @hidden\n     */\n    var StringMonitorPlugin = {\n        id: 'monitor-string',\n        binding: {\n            accept: function (value, _params) { return (typeof value === 'string' ? value : null); },\n            reader: function (_args) { return stringFromUnknown; },\n        },\n        controller: function (args) {\n            var _a;\n            var value = args.binding.value;\n            var multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                });\n            }\n            return new SingleLogMonitorController(args.document, {\n                formatter: formatString,\n                value: value,\n            });\n        },\n    };\n\n    function createDefaultWrapperElement(doc) {\n        var elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(\"style[data-tp-style=\" + id + \"]\")) {\n            return;\n        }\n        var styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    function embedDefaultStyleIfNeeded(doc) {\n        embedStyle(doc, 'default', '.tp-btnv_b,.tp-lstv_s,.tp-p2dpadtxtv_b,.tp-fldv_t,.tp-rotv_t,.tp-cctxtsv_i,.tp-cswv_sw,.tp-p2dpadv_p,.tp-p2dtxtv_i,.tp-p3dtxtv_i,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-ckbv_i,.tp-cctxtsv_ms{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-btnv_b,.tp-lstv_s,.tp-p2dpadtxtv_b{background-color:var(--button-background-color);border-radius:2px;color:var(--button-foreground-color);cursor:pointer;display:block;font-weight:bold;height:var(--unit-size);line-height:var(--unit-size);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-btnv_b:hover,.tp-lstv_s:hover,.tp-p2dpadtxtv_b:hover{background-color:var(--button-background-color-hover)}.tp-btnv_b:focus,.tp-lstv_s:focus,.tp-p2dpadtxtv_b:focus{background-color:var(--button-background-color-focus)}.tp-btnv_b:active,.tp-lstv_s:active,.tp-p2dpadtxtv_b:active{background-color:var(--button-background-color-active)}.tp-fldv_t,.tp-rotv_t{background-color:var(--folder-background-color);color:var(--folder-foreground-color);cursor:pointer;display:block;height:calc(var(--unit-size) + 4px);line-height:calc(var(--unit-size) + 4px);overflow:hidden;padding-left:28px;position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_t:hover,.tp-rotv_t:hover{background-color:var(--folder-background-color-hover)}.tp-fldv_t:focus,.tp-rotv_t:focus{background-color:var(--folder-background-color-focus)}.tp-fldv_t:active,.tp-rotv_t:active{background-color:var(--folder-background-color-active)}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--folder-foreground-color), var(--folder-foreground-color) 2px, transparent 2px, transparent 4px, var(--folder-foreground-color) 4px);border-radius:2px;bottom:0;content:\\'\\';display:block;height:6px;left:13px;margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_t>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv_c>.tp-fldv.tp-v-first,.tp-rotv_c>.tp-fldv.tp-v-first{margin-top:-4px}.tp-fldv_c>.tp-fldv.tp-v-last,.tp-rotv_c>.tp-fldv.tp-v-last{margin-bottom:-4px}.tp-fldv_c>*:not(.tp-v-first),.tp-rotv_c>*:not(.tp-v-first){margin-top:4px}.tp-fldv_c>.tp-fldv:not(.tp-v-hidden)+.tp-fldv,.tp-rotv_c>.tp-fldv:not(.tp-v-hidden)+.tp-fldv{margin-top:0}.tp-fldv_c>.tp-sptv:not(.tp-v-hidden)+.tp-sptv,.tp-rotv_c>.tp-sptv:not(.tp-v-hidden)+.tp-sptv{margin-top:0}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:4px;padding-top:4px;transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-cctxtsv_i,.tp-cswv_sw,.tp-p2dpadv_p,.tp-p2dtxtv_i,.tp-p3dtxtv_i,.tp-txtv_i{background-color:var(--input-background-color);border-radius:2px;box-sizing:border-box;color:var(--input-foreground-color);font-family:inherit;height:var(--unit-size);line-height:var(--unit-size);min-width:0;width:100%}.tp-cctxtsv_i:hover,.tp-cswv_sw:hover,.tp-p2dpadv_p:hover,.tp-p2dtxtv_i:hover,.tp-p3dtxtv_i:hover,.tp-txtv_i:hover{background-color:var(--input-background-color-hover)}.tp-cctxtsv_i:focus,.tp-cswv_sw:focus,.tp-p2dpadv_p:focus,.tp-p2dtxtv_i:focus,.tp-p3dtxtv_i:focus,.tp-txtv_i:focus{background-color:var(--input-background-color-focus)}.tp-cctxtsv_i:active,.tp-cswv_sw:active,.tp-p2dpadv_p:active,.tp-p2dtxtv_i:active,.tp-p3dtxtv_i:active,.tp-txtv_i:active{background-color:var(--input-background-color-active)}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--monitor-background-color);border-radius:2px;box-sizing:border-box;color:var(--monitor-foreground-color);height:var(--unit-size);width:100%}.tp-btnv{padding:0 4px}.tp-btnv_b{width:100%}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_m{background-color:var(--input-background-color);border-radius:2px;cursor:pointer;display:block;height:var(--unit-size);position:relative;width:var(--unit-size)}.tp-ckbv_m::before{background-color:var(--input-foreground-color);border-radius:2px;bottom:4px;content:\\'\\';display:block;left:4px;opacity:0;position:absolute;right:4px;top:4px}.tp-ckbv_i:hover+.tp-ckbv_m{background-color:var(--input-background-color-hover)}.tp-ckbv_i:focus+.tp-ckbv_m{background-color:var(--input-background-color-focus)}.tp-ckbv_i:active+.tp-ckbv_m{background-color:var(--input-background-color-active)}.tp-ckbv_i:checked+.tp-ckbv_m::before{opacity:1}.tp-cctxtsv{display:flex;width:100%}.tp-cctxtsv_m{margin-right:4px;position:relative}.tp-cctxtsv_ms{border-radius:2px;color:var(--label-foreground-color);cursor:pointer;height:var(--unit-size);line-height:var(--unit-size);padding:0 18px 0 4px}.tp-cctxtsv_ms:hover{background-color:var(--input-background-color-hover)}.tp-cctxtsv_ms:focus{background-color:var(--input-background-color-focus)}.tp-cctxtsv_ms:active{background-color:var(--input-background-color-active)}.tp-cctxtsv_mm{border-color:var(--label-foreground-color) transparent transparent;border-style:solid;border-width:3px;box-sizing:border-box;height:6px;pointer-events:none;width:6px;bottom:0;margin:auto;position:absolute;right:6px;top:3px}.tp-cctxtsv_w{display:flex;flex:1}.tp-cctxtsv_i{border-radius:0;flex:1;padding:0 4px}.tp-cctxtsv_i:first-child{border-bottom-left-radius:2px;border-top-left-radius:2px}.tp-cctxtsv_i:last-child{border-bottom-right-radius:2px;border-top-right-radius:2px}.tp-cctxtsv_i+.tp-cctxtsv_i{margin-left:2px}.tp-clpv{background-color:var(--base-background-color);border-radius:6px;box-shadow:0 2px 4px var(--base-shadow-color);display:none;padding:4px;position:relative;visibility:hidden;z-index:1000}.tp-clpv.tp-clpv-expanded{display:block;visibility:visible}.tp-clpv_h,.tp-clpv_ap{margin-left:6px;margin-right:6px}.tp-clpv_h{margin-top:4px}.tp-clpv_rgb{display:flex;margin-top:4px;width:100%}.tp-clpv_a{display:flex;margin-top:4px;padding-top:8px;position:relative}.tp-clpv_a:before{background-color:var(--separator-color);content:\\'\\';height:4px;left:-4px;position:absolute;right:-4px;top:0}.tp-clpv_ap{align-items:center;display:flex;flex:3}.tp-clpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:2px;outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:80px;width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--unit-size);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:2px;border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--unit-size);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:2px;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-cswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:2px}.tp-cswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--unit-size);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--unit-size)}.tp-cswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:2px;bottom:0;content:\\'\\';display:block;left:0;position:absolute;right:0;top:0}.tp-cswv_p{left:-4px;position:absolute;right:-4px;top:var(--unit-size)}.tp-cswtxtv{display:flex;position:relative}.tp-cswtxtv_s{flex-grow:0;flex-shrink:0;width:var(--unit-size)}.tp-cswtxtv_t{flex:1;margin-left:4px}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-expanded .tp-fldv_t{transition:border-radius 0s}.tp-fldv_c{border-left:var(--folder-background-color) solid 4px}.tp-fldv_t:hover+.tp-fldv_c{border-left-color:var(--folder-background-color-hover)}.tp-fldv_t:focus+.tp-fldv_c{border-left-color:var(--folder-background-color-focus)}.tp-fldv_t:active+.tp-fldv_c{border-left-color:var(--folder-background-color-active)}.tp-fldv_c>.tp-fldv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_t{border-top-left-radius:2px;border-bottom-left-radius:2px}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_t{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:2px}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--unit-size) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--monitor-foreground-color);stroke-linejoin:round}.tp-grlv_t{color:var(--monitor-foreground-color);font-size:0.9em;left:0;pointer-events:none;position:absolute;text-indent:4px;top:0;visibility:hidden}.tp-grlv_t.tp-grlv_t-valid{visibility:visible}.tp-grlv_t::before{background-color:var(--monitor-foreground-color);border-radius:100%;content:\\'\\';display:block;height:4px;left:-2px;position:absolute;top:-2px;width:4px}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:4px;padding-right:4px}.tp-lblv_l{color:var(--label-foreground-color);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lstv{position:relative}.tp-lstv_s{padding:0 18px 0 4px;width:100%}.tp-lstv_m{border-color:var(--button-foreground-color) transparent transparent;border-style:solid;border-width:3px;box-sizing:border-box;height:6px;pointer-events:none;width:6px;bottom:0;margin:auto;position:absolute;right:6px;top:3px}.tp-sglv_i{padding:0 4px}.tp-mllv_i{display:block;height:calc(var(--unit-size) * 3);line-height:var(--unit-size);padding:0 4px;resize:none;white-space:pre}.tp-p2dpadv{background-color:var(--base-background-color);border-radius:6px;box-shadow:0 2px 4px var(--base-shadow-color);display:none;padding:4px 4px 4px calc(4px * 2 + var(--unit-size));position:relative;visibility:hidden;z-index:1000}.tp-p2dpadv.tp-p2dpadv-expanded{display:block;visibility:visible}.tp-p2dpadv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpadv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpadv_ax{stroke:var(--input-guide-color)}.tp-p2dpadv_l{stroke:var(--input-foreground-color);stroke-linecap:round;stroke-dasharray:1px 3px}.tp-p2dpadv_m{fill:var(--input-foreground-color)}.tp-p2dpadtxtv{display:flex;position:relative}.tp-p2dpadtxtv_b{height:var(--unit-size);position:relative;width:var(--unit-size)}.tp-p2dpadtxtv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dpadtxtv_p{left:-4px;position:absolute;right:-4px;top:var(--unit-size)}.tp-p2dpadtxtv_t{margin-left:4px}.tp-p2dtxtv{display:flex}.tp-p2dtxtv_w{align-items:center;display:flex}.tp-p2dtxtv_w+.tp-p2dtxtv_w{margin-left:2px}.tp-p2dtxtv_i{padding:0 4px;width:100%}.tp-p2dtxtv_w:nth-child(1) .tp-p2dtxtv_i{border-top-right-radius:0;border-bottom-right-radius:0}.tp-p2dtxtv_w:nth-child(2) .tp-p2dtxtv_i{border-top-left-radius:0;border-bottom-left-radius:0}.tp-p3dtxtv{display:flex}.tp-p3dtxtv_w{align-items:center;display:flex}.tp-p3dtxtv_w+.tp-p3dtxtv_w{margin-left:2px}.tp-p3dtxtv_i{padding:0 4px;width:100%}.tp-p3dtxtv_w:first-child .tp-p3dtxtv_i{border-top-right-radius:0;border-bottom-right-radius:0}.tp-p3dtxtv_w:not(:first-child):not(:last-child) .tp-p3dtxtv_i{border-radius:0}.tp-p3dtxtv_w:last-child .tp-p3dtxtv_i{border-top-left-radius:0;border-bottom-left-radius:0}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--unit-size: var(--tp-unit-size, 20px);--base-background-color: var(--tp-base-background-color, #2f3137);--base-shadow-color: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--button-background-color: var(--tp-button-background-color, #adafb8);--button-background-color-active: var(--tp-button-background-color-active, #d6d7db);--button-background-color-focus: var(--tp-button-background-color-focus, #c8cad0);--button-background-color-hover: var(--tp-button-background-color-hover, #bbbcc4);--button-foreground-color: var(--tp-button-foreground-color, #2f3137);--folder-background-color: var(--tp-folder-background-color, rgba(200,202,208,0.1));--folder-background-color-active: var(--tp-folder-background-color-active, rgba(200,202,208,0.25));--folder-background-color-focus: var(--tp-folder-background-color-focus, rgba(200,202,208,0.2));--folder-background-color-hover: var(--tp-folder-background-color-hover, rgba(200,202,208,0.15));--folder-foreground-color: var(--tp-folder-foreground-color, #c8cad0);--input-background-color: var(--tp-input-background-color, rgba(200,202,208,0.1));--input-background-color-active: var(--tp-input-background-color-active, rgba(200,202,208,0.25));--input-background-color-focus: var(--tp-input-background-color-focus, rgba(200,202,208,0.2));--input-background-color-hover: var(--tp-input-background-color-hover, rgba(200,202,208,0.15));--input-foreground-color: var(--tp-input-foreground-color, #c8cad0);--input-guide-color: var(--tp-input-guide-color, rgba(47,49,55,0.5));--label-foreground-color: var(--tp-label-foreground-color, rgba(200,202,208,0.7));--monitor-background-color: var(--tp-monitor-background-color, #26272c);--monitor-foreground-color: var(--tp-monitor-foreground-color, rgba(200,202,208,0.7));--separator-color: var(--tp-separator-color, #26272c)}.tp-rotv{background-color:var(--base-background-color);border-radius:6px;box-shadow:0 2px 4px var(--base-shadow-color);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_t{border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:6px;border-top-right-radius:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_t{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv_m{transition:none}.tp-rotv_c>.tp-fldv:last-child>.tp-fldv_c{border-bottom-left-radius:6px;border-bottom-right-radius:6px}.tp-rotv_c>.tp-fldv:last-child:not(.tp-fldv-expanded)>.tp-fldv_t{border-bottom-left-radius:6px;border-bottom-right-radius:6px}.tp-rotv_c>.tp-fldv:first-child>.tp-fldv_t{border-top-left-radius:6px;border-top-right-radius:6px}.tp-sptv_r{background-color:var(--separator-color);border-width:0;display:block;height:4px;margin:0;width:100%}.tp-sldv_o{box-sizing:border-box;cursor:pointer;height:var(--unit-size);margin:0 6px;outline:none;position:relative}.tp-sldv_o::before{background-color:var(--input-background-color);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_i{height:100%;left:0;position:absolute;top:0}.tp-sldv_i::before{background-color:var(--button-background-color);border-radius:2px;bottom:0;content:\\'\\';display:block;height:12px;margin:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_o:hover .tp-sldv_i::before{background-color:var(--button-background-color-hover)}.tp-sldv_o:focus .tp-sldv_i::before{background-color:var(--button-background-color-focus)}.tp-sldv_o:active .tp-sldv_i::before{background-color:var(--button-background-color-active)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-txtv_i{padding:0 4px}.tp-v-hidden{display:none}');\n        getAllPlugins().forEach(function (plugin) {\n            if (plugin.css) {\n                embedStyle(doc, \"plugin-\" + plugin.id, plugin.css);\n            }\n        });\n    }\n    var Tweakpane = /** @class */ (function (_super) {\n        __extends(Tweakpane, _super);\n        function Tweakpane(opt_config) {\n            var _a;\n            var _this = this;\n            var config = opt_config || {};\n            var doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            var rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: new Blade(),\n                title: config.title,\n            });\n            _this = _super.call(this, rootController) || this;\n            _this.containerElem_ = config.container || createDefaultWrapperElement(doc);\n            _this.containerElem_.appendChild(_this.element);\n            _this.doc_ = doc;\n            _this.usesDefaultWrapper_ = !config.container;\n            embedDefaultStyleIfNeeded(_this.document);\n            return _this;\n        }\n        Object.defineProperty(Tweakpane.prototype, \"document\", {\n            get: function () {\n                if (!this.doc_) {\n                    throw TpError.alreadyDisposed();\n                }\n                return this.doc_;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Tweakpane.prototype.dispose = function () {\n            var containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                var parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            _super.prototype.dispose.call(this);\n        };\n        return Tweakpane;\n    }(RootApi));\n    function registerDefaultPlugins() {\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n        ].forEach(function (p) {\n            RootApi.registerPlugin({\n                type: 'input',\n                plugin: p,\n            });\n        });\n        [BooleanMonitorPlugin, StringMonitorPlugin, NumberMonitorPlugin].forEach(function (p) {\n            RootApi.registerPlugin({\n                type: 'monitor',\n                plugin: p,\n            });\n        });\n    }\n    registerDefaultPlugins();\n\n    return Tweakpane;\n\n})));\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { derived, writable } from 'svelte/store';\nconst initialState = {\n    fanCount: 4,\n};\nfunction createSettings() {\n    const { subscribe, set, update } = writable(initialState);\n    return {\n        subscribe,\n        reset: () => set(initialState),\n        set: (val) => set(val),\n    };\n}\nexport const settings = createSettings();\n","<script lang=\"ts\">\nimport { onMount } from 'svelte';\nimport Tweakpane from 'tweakpane';\nimport { settings } from '../stores/settings';\n\nlet element;\n\nonMount(() => {\n  const Pane = new Tweakpane({ container: element });\n\n  Pane.addInput({ fanCount: $settings.fanCount }, 'fanCount', {\n    min: 4,\n    max: 360,\n    step: 1,\n  }).on('change', (v) => {\n    $settings.fanCount = v;\n  });\n});\n</script>\n\n<div bind:this=\"{element}\"></div>\n","\n/**\n * WebGL の API を目的別にまとめたユーティリティクラス\n * @class\n */\nexport class WebGLUtility {\n    /**\n     * ファイルをテキストとして開く\n     * @static\n     * @param {string} path - 読み込むファイルのパス\n     * @return {Promise}\n     */\n    static loadFile(path){\n        return new Promise((resolve, reject) => {\n            // fetch を使ってファイルにアクセスする\n            fetch(path)\n              .then((res) => {\n                  // テキストとして処理する\n                  return res.text();\n              })\n              .then((text) => {\n                  // テキストを引数に Promise を解決する\n                  resolve(text);\n              })\n              .catch((err) => {\n                  // なんらかのエラー\n                  reject(err);\n              });\n        });\n    }\n\n    /**\n     * プロパティとして保持する canvas の幅\n     * @type {number} w - canvas に設定する横幅\n     */\n    set width(w){\n        this.canvas.width = w;\n    }\n    get width(){\n        return this.canvas.width;\n    }\n    /**\n     * プロパティとして保持する canvas の高さ\n     * @type {number} h - canvas に設定する縦方向の高さ\n     */\n    set height(h){\n        this.canvas.height = h;\n    }\n    get height(){\n        return this.canvas.height;\n    }\n    /**\n     * プロパティとして保持する WebGL コンテキストにプログラムオブジェクトを設定する\n     * @type {WebGLProgram} prg - 設定するプログラムオブジェクト\n     */\n    set program(prg){\n        // gl.useProgram で利用するプログラムオブジェクトを設定できる\n        this.gl.useProgram(prg);\n        // あとで取り出すこともできるようプロパティに保持しておく\n        this.currentProgram = prg;\n    }\n    get program(){\n        return this.currentProgram;\n    }\n\n    /**\n     * @constructor\n     */\n    constructor(){\n        this.canvas = null;\n        this.gl = null;\n        this.currentProgram = null;\n    }\n    /**\n     * canvas を受け取り WebGL コンテキストを初期化する\n     * @param {HTMLCanvasElement} canvas - WebGL コンテキストを取得する canvas 要素\n     * @param {boolean} isWebGL2 - WebGL2 コンテキストを利用するかどうかの真偽値\n     */\n    initialize(canvas, isWebGL2){\n        // プロパティに保持しておく\n        this.canvas = canvas;\n        // canvas から WebGL コンテキスト取得を試みる\n        this.gl = this.canvas.getContext(`webgl${isWebGL2 === true ? '2' : ''}`);\n        if(this.gl == null){\n            // WebGL コンテキストが取得できない場合はエラー\n            throw new Error('webgl not supported');\n        }\n    }\n    /**\n     * ソースコードからシェーダオブジェクトを生成する\n     * @param {string} source - シェーダのソースコード\n     * @param {number} type - gl.VERTEX_SHADER or gl.FRAGMENT_SHADER\n     * @return {WebGLShader}\n     */\n    createShaderObject(source, type){\n        const gl = this.gl;\n        // 空のシェーダオブジェクトを生成する\n        const shader = gl.createShader(type);\n        // シェーダオブジェクトにソースコードを割り当てる\n        gl.shaderSource(shader, source);\n        // シェーダをコンパイルする\n        gl.compileShader(shader);\n        // コンパイル後のステータスを確認し問題なければシェーダオブジェクトを返す\n        if(gl.getShaderParameter(shader, gl.COMPILE_STATUS)){\n            return shader;\n        }else{\n            throw new Error(gl.getShaderInfoLog(shader));\n            return null;\n        }\n    }\n    /**\n     * シェーダオブジェクトからプログラムオブジェクトを生成する\n     * @param {WebGLShader} vs - 頂点シェーダのシェーダオブジェクト\n     * @param {WebGLShader} fs - フラグメントシェーダのシェーダオブジェクト\n     * @return {WebGLProgram}\n     */\n    createProgramObject(vs, fs){\n        const gl = this.gl;\n        // 空のプログラムオブジェクトを生成する\n        const program = gl.createProgram();\n        // ２つのシェーダをアタッチ（関連付け）する\n        gl.attachShader(program, vs);\n        gl.attachShader(program, fs);\n        // シェーダオブジェクトをリンクする\n        gl.linkProgram(program);\n        // リンクが完了するとシェーダオブジェクトは不要になるので削除する\n        gl.deleteShader(vs);\n        gl.deleteShader(fs);\n        // リンク後のステータスを確認し問題なければプログラムオブジェクトを返す\n        if(gl.getProgramParameter(program, gl.LINK_STATUS)){\n            gl.useProgram(program);\n            return program;\n        }else{\n            throw new Error(gl.getProgramInfoLog(program));\n            return null;\n        }\n    }\n    /**\n     * シェーダオブジェクトからプログラムオブジェクトを生成する（transform feedback 対応版）\n     * @param {WebGLShader} vs - 頂点シェーダのシェーダオブジェクト\n     * @param {WebGLShader} fs - フラグメントシェーダのシェーダオブジェクト\n     * @param {Array.<string>} varyings - 対象の varying 変数名の配列\n     * @return {WebGLProgram}\n     */\n    createProgramObjectTF(vs, fs, varyings){\n        const gl = this.gl;\n        // 空のプログラムオブジェクトを生成する\n        const program = gl.createProgram();\n        // ２つのシェーダをアタッチ（関連付け）する\n        gl.attachShader(program, vs);\n        gl.attachShader(program, fs);\n        // プログラムオブジェクトに対して varying 変数を設定する\n        gl.transformFeedbackVaryings(program, varyings, gl.SEPARATE_ATTRIBS);\n        // シェーダオブジェクトをリンクする\n        gl.linkProgram(program);\n        // リンクが完了するとシェーダオブジェクトは不要になるので削除する\n        gl.deleteShader(vs);\n        gl.deleteShader(fs);\n        // リンク後のステータスを確認し問題なければプログラムオブジェクトを返す\n        if(gl.getProgramParameter(program, gl.LINK_STATUS)){\n            gl.useProgram(program);\n            return program;\n        }else{\n            throw new Error(gl.getProgramInfoLog(program));\n            return null;\n        }\n    }\n    /**\n     * JavaScript の配列から VBO（Vertex Buffer Object）を生成する\n     * @param {Array.<number>} vertexArray - 頂点属性情報の配列\n     * @return {WebGLBuffer}\n     */\n    createVBO(vertexArray){\n        const gl = this.gl;\n        // 空のバッファオブジェクトを生成する\n        const vbo = gl.createBuffer();\n        // バッファを gl.ARRAY_BUFFER としてバインドする\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n        // バインドしたバッファに Float32Array オブジェクトに変換した配列を設定する\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertexArray), gl.STATIC_DRAW);\n        // 安全のために最後にバインドを解除してからバッファオブジェクトを返す\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        return vbo;\n    }\n    /**\n     * JavaScript の配列から IBO（Index Buffer Object）を生成する\n     * @param {Array.<number>} indexArray - 頂点属性情報の配列\n     * @return {WebGLBuffer}\n     */\n    createIBO(indexArray){\n        const gl = this.gl;\n        // 空のバッファオブジェクトを生成する\n        const ibo = gl.createBuffer();\n        // バッファを gl.ELEMENT_ARRAY_BUFFER としてバインドする\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n        // バインドしたバッファに Float32Array オブジェクトに変換した配列を設定する\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Int16Array(indexArray), gl.STATIC_DRAW);\n        // 安全のために最後にバインドを解除してからバッファオブジェクトを返す\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n        return ibo;\n    }\n    /**\n     * 頂点属性情報を有効化しロケーションと紐付ける\n     * @param {Array.<WebGLBuffer>} vbo - 頂点属性を格納した VBO の配列\n     * @param {Array.<number>} attLocation - 頂点属性ロケーションの配列\n     * @param {Array.<number>} attStride - 頂点属性のストライドの配列\n     */\n    enableAttribute(vbo, attLocation, attStride){\n        const gl = this.gl;\n        vbo.forEach((buffer, index) => {\n            // 有効化したいバッファをまずバインドする\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            // 頂点属性ロケーションの有効化を行う\n            gl.enableVertexAttribArray(attLocation[index]);\n            // 対象のロケーションのストライドやデータ型を設定する\n            gl.vertexAttribPointer(attLocation[index], attStride[index], gl.FLOAT, false, 0, 0);\n        });\n    }\n    /**\n     * テクスチャ用のリソースからテクスチャを生成する\n     * @param {string} resource - Image や Canvas などのテクスチャ用リソース\n     * @return {WebGLTexture}\n     */\n    createTexture(resource, unit){\n        const gl = this.gl;\n        // テクスチャオブジェクトを生成\n        const texture = gl.createTexture();\n        // アクティブなテクスチャユニット番号を指定する\n        gl.activeTexture(unit);\n        // テクスチャをアクティブなユニットにバインドする\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        // バインドしたテクスチャにデータを割り当て（ここで画像のロードが完了している必要がある）\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, resource);\n        // ミップマップを自動生成する\n        gl.generateMipmap(gl.TEXTURE_2D);\n        // テクスチャパラメータを設定する\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        // 安全の為にテクスチャのバインドを解除してから返す\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        return texture;\n    }\n    /**\n     * キューブマップテクスチャを非同期に生成する Promise を返す\n     * @param {Array.<string>} source - 読み込む画像のパスの配列\n     * @param {Array.<number>} target - 画像にそれぞれ対応させるターゲット定数の配列\n     * @return {Promise} テクスチャを引数に渡して解決する Promise\n     */\n    createCubeTextureFromFile(source, target){\n        return new Promise((resolve) => {\n            const gl = this.gl;\n            // テクスチャオブジェクトを生成\n            const texture = gl.createTexture();\n            // アクティブなテクスチャユニット番号を指定する\n            gl.activeTexture(gl.TEXTURE0);\n            // テクスチャをアクティブなユニットにキューブテクスチャとしてバインドする\n            gl.bindTexture(gl.TEXTURE_CUBE_MAP, texture);\n\n            // 画像を個々に読み込む Promise を生成し配列に入れておく\n            const promises = source.map((src, index) => {\n                // 画像の読み込みが完了し、テクスチャに画像を割り当てたら解決する Promise\n                return new Promise((loadedResolve) => {\n                    // 空の画像オブジェクト\n                    const img = new Image();\n                    // ロード完了時の処理を先に登録\n                    img.addEventListener('load', () => {\n                        // 読み込んだ画像をテクスチャに割り当てる\n                        gl.texImage2D(target[index], 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n                        // Promise を解決する\n                        loadedResolve();\n                    }, false);\n                    // 画像のソースを設定\n                    img.src = src;\n                });\n            });\n\n            // すべての Promise を一気に実行する\n            Promise.all(promises)\n              .then(() => {\n                  // ミップマップを自動生成する\n                  gl.generateMipmap(gl.TEXTURE_CUBE_MAP);\n                  // テクスチャパラメータを設定する\n                  gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n                  gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n                  gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                  gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                  // 安全の為にテクスチャのバインドを解除してから Promise を解決する\n                  gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);\n                  // Promise を解決する際、生成したテクスチャを引数から返す\n                  resolve(texture);\n              });\n        });\n    }\n    /**\n     * フレームバッファを生成する\n     * @param {number} width - フレームバッファの幅\n     * @param {number} height - フレームバッファの高さ\n     * @return {object}\n     * @property {WebGLFramebuffer} framebuffer - フレームバッファオブジェクト\n     * @property {WebGLRenderbuffer} depthRenderBuffer - 深度バッファ用のレンダーバッファ\n     * @property {WebGLTexture} texture - カラーバッファ用のテクスチャオブジェクト\n     */\n    createFramebuffer(width, height){\n        const gl = this.gl;\n\n        const framebuffer       = gl.createFramebuffer();  // フレームバッファ\n        const depthRenderBuffer = gl.createRenderbuffer(); // レンダーバッファ\n        const texture           = gl.createTexture();      // テクスチャ\n        // フレームバッファをバインド\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n        // レンダーバッファをバインド\n        gl.bindRenderbuffer(gl.RENDERBUFFER, depthRenderBuffer);\n        // レンダーバッファを深度バッファとして設定する\n        gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, width, height);\n        // フレームバッファにレンダーバッファを関連付けする\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, depthRenderBuffer);\n        // テクスチャをユニット０にバインド\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        // テクスチャにサイズなどを設定する（ただし中身は null）\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        // テクスチャパラメータを設定\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        // フレームバッファにテクスチャを関連付けする\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n        // すべてのオブジェクトは念の為バインドを解除しておく\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        // 各オブジェクトを、JavaScript のオブジェクトに格納して返す\n        return {\n            framebuffer: framebuffer,\n            depthRenderbuffer: depthRenderBuffer,\n            texture: texture\n        };\n    }\n}\n\n/**\n * three.js の OrbitControls に似た挙動のカメラ操作用ユーティリティクラス\n * @class\n */\nexport class WebGLOrbitCamera {\n    /** @type {number} */\n    static get DEFAULT_DISTANCE(){return 5.0;};\n    /** @type {number} */\n    static get DEFAULT_MIN_DISTANCE(){return 1.0;};\n    /** @type {number} */\n    static get DEFAULT_MAX_DISTANCE(){return 10.0;};\n    /** @type {number} */\n    static get DEFAULT_MOVE_SCALE(){return 2.0;};\n\n    /**\n     * @constructor\n     * @param {HTMLElement} target - イベントを設定するターゲットエレメント\n     * @param {object} [option={}]\n     * @property {number} option.distance - カメラの原点からの距離\n     * @property {number} option.min - カメラが原点に寄れる最小距離\n     * @property {number} option.max - カメラが原点から離れられる最大距離\n     * @property {number} option.move - カメラが平行移動する際のスケール\n     */\n    constructor(target, option = {}){\n        this.target             = target;\n        this.distance           = option.distance || WebGLOrbitCamera.DEFAULT_DISTANCE;\n        this.minDistance        = option.min || WebGLOrbitCamera.DEFAULT_MIN_DISTANCE;\n        this.maxDistance        = option.max || WebGLOrbitCamera.DEFAULT_MAX_DISTANCE;\n        this.moveScale          = option.move || WebGLOrbitCamera.DEFAULT_MOVE_SCALE;\n        this.position           = [0.0, 0.0, this.distance];\n        this.center             = [0.0, 0.0, 0.0];\n        this.upDirection        = [0.0, 1.0, 0.0];\n        this.moveX              = [1.0, 0.0, 0.0];\n        this.moveZ              = [0.0, 0.0, 1.0];\n        this.defaultPosition    = [0.0, 0.0, this.distance];\n        this.defaultCenter      = [0.0, 0.0, 0.0];\n        this.defaultUpDirection = [0.0, 1.0, 0.0];\n        this.defaultMoveX       = [1.0, 0.0, 0.0];\n        this.defaultMoveZ       = [0.0, 0.0, 1.0];\n        this.movePosition       = [0.0, 0.0, 0.0];\n        this.rotateX            = 0.0;\n        this.rotateY            = 0.0;\n        this.scale              = 0.0;\n        this.isDown             = false;\n        this.prevPosition       = [0, 0];\n        this.offsetPosition     = [0, 0];\n        this.qt                 = Qtn.create();\n        this.qtx                = Qtn.create();\n        this.qty                = Qtn.create();\n\n        // self binding\n        this.mouseInteractionStart = this.mouseInteractionStart.bind(this);\n        this.mouseInteractionMove  = this.mouseInteractionMove.bind(this);\n        this.mouseInteractionEnd   = this.mouseInteractionEnd.bind(this);\n        this.wheelScroll           = this.wheelScroll.bind(this);\n\n        // event\n        this.target.addEventListener('mousedown', this.mouseInteractionStart, false);\n        this.target.addEventListener('mousemove', this.mouseInteractionMove,  false);\n        this.target.addEventListener('mouseup',   this.mouseInteractionEnd,   false);\n        this.target.addEventListener('wheel',     this.wheelScroll,           false);\n        this.target.addEventListener('contextmenu', (event) => {\n            event.preventDefault();\n        }, false);\n    }\n    /**\n     * マウスボタンが押された際のイベント\n     */\n    mouseInteractionStart(event){\n        this.isDown = true;\n        const bound = this.target.getBoundingClientRect();\n        this.prevPosition = [\n            event.clientX - bound.left,\n            event.clientY - bound.top,\n        ];\n    }\n    /**\n     * マウスが移動した際のイベント\n     */\n    mouseInteractionMove(event){\n        if(this.isDown !== true){return;}\n        const bound = this.target.getBoundingClientRect();\n        const w = bound.width;\n        const h = bound.height;\n        const x = event.clientX - bound.left;\n        const y = event.clientY - bound.top;\n        const s = 1.0 / Math.min(w, h);\n        this.offsetPosition = [\n            x - this.prevPosition[0],\n            y - this.prevPosition[1],\n        ];\n        this.prevPosition = [x, y];\n        switch(event.buttons){\n            case 1: // 左ボタン\n                this.rotateX += this.offsetPosition[0] * s;\n                this.rotateY += this.offsetPosition[1] * s;\n                this.rotateX = this.rotateX % 1.0;\n                this.rotateY = Math.min(Math.max(this.rotateY % 1.0, -0.25), 0.25);\n                break;\n            case 2: // 右ボタン\n                const PI2 = Math.PI * 2.0;\n                const scaleX = this.offsetPosition[0] * s * this.moveScale;\n                const scaleZ = this.offsetPosition[1] * s * this.moveScale;\n                const xDirection = this.defaultMoveX.slice()\n                const zDirection = this.defaultMoveZ.slice();\n                const q = Qtn.identity(Qtn.create());\n                Qtn.rotate(this.rotateX * PI2, [0.0, 1.0, 0.0], q);\n                Qtn.toVecIII(xDirection, q, this.moveX);\n                Qtn.toVecIII(zDirection, q, this.moveZ);\n                this.movePosition[0] -= this.moveX[0] * scaleX + this.moveZ[0] * scaleZ;\n                this.movePosition[2] -= this.moveX[2] * scaleX + this.moveZ[2] * scaleZ;\n                break;\n        }\n    }\n    /**\n     * マウスボタンが離された際のイベント\n     */\n    mouseInteractionEnd(event){\n        this.isDown = false;\n    }\n    /**\n     * スクロール操作に対するイベント\n     */\n    wheelScroll(event){\n        const w = event.wheelDelta;\n        if(w > 0){\n            this.scale = -0.5;\n        }else if(w < 0){\n            this.scale = 0.5;\n        }\n    }\n    /**\n     * 現在のパラメータからビュー行列を生成して返す\n     * @return {Mat4}\n     */\n    update(){\n        const PI2 = Math.PI * 2.0;\n        const v = [1.0, 0.0, 0.0];\n        // scale\n        this.scale *= 0.7;\n        this.distance += this.scale;\n        this.distance = Math.min(Math.max(this.distance, this.minDistance), this.maxDistance);\n        this.defaultPosition[2] = this.distance;\n        // rotate\n        Qtn.identity(this.qt);\n        Qtn.identity(this.qtx);\n        Qtn.identity(this.qty);\n        Qtn.rotate(this.rotateX * PI2, [0.0, 1.0, 0.0], this.qtx);\n        Qtn.toVecIII(v, this.qtx, v);\n        Qtn.rotate(this.rotateY * PI2, v, this.qty);\n        Qtn.multiply(this.qtx, this.qty, this.qt)\n        Qtn.toVecIII(this.defaultPosition, this.qt, this.position);\n        Qtn.toVecIII(this.defaultUpDirection, this.qt, this.upDirection);\n        // translate\n        this.position[0] += this.movePosition[0];\n        this.position[1] += this.movePosition[1];\n        this.position[2] += this.movePosition[2];\n        this.center[0] = this.defaultCenter[0] + this.movePosition[0];\n        this.center[1] = this.defaultCenter[1] + this.movePosition[1];\n        this.center[2] = this.defaultCenter[2] + this.movePosition[2];\n\n        return Mat4.lookAt(this.position, this.center, this.upDirection);\n    }\n}\n\n/**\n * ベクトルや行列演算の機能を提供する\n * @class\n */\nexport class WebGLMath {\n    /**\n     * @static\n     * @type {Mat4}\n     */\n    static get mat4(){return Mat4;}\n    /**\n     * @static\n     * @type {Vec3}\n     */\n    static get vec3(){return Vec3;}\n    /**\n     * @static\n     * @type {Vec2}\n     */\n    static get vec2(){return Vec2;}\n    /**\n     * @static\n     * @type {Qtn}\n     */\n    static get qtn(){return Qtn;}\n}\n\n/**\n * Mat4\n * @class Mat4\n */\nexport class Mat4 {\n    /**\n     * 4x4 の正方行列を生成する\n     * @return {Float32Array} 行列格納用の配列\n     */\n    static create(){\n        return new Float32Array(16);\n    }\n    /**\n     * 行列を単位化する（参照に注意）\n     * @param {Mat4} dest - 単位化する行列\n     * @return {Mat4} 単位化した行列\n     */\n    static identity(dest){\n        dest[0]  = 1; dest[1]  = 0; dest[2]  = 0; dest[3]  = 0;\n        dest[4]  = 0; dest[5]  = 1; dest[6]  = 0; dest[7]  = 0;\n        dest[8]  = 0; dest[9]  = 0; dest[10] = 1; dest[11] = 0;\n        dest[12] = 0; dest[13] = 0; dest[14] = 0; dest[15] = 1;\n        return dest;\n    }\n    /**\n     * 行列を乗算する（参照に注意・戻り値としても結果を返す）\n     * @param {Mat4} mat0 - 乗算される行列\n     * @param {Mat4} mat1 - 乗算する行列\n     * @param {Mat4} [dest] - 乗算結果を格納する行列\n     * @return {Mat4} 乗算結果の行列\n     */\n    static multiply(mat0, mat1, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        let a = mat0[0],  b = mat0[1],  c = mat0[2],  d = mat0[3],\n          e = mat0[4],  f = mat0[5],  g = mat0[6],  h = mat0[7],\n          i = mat0[8],  j = mat0[9],  k = mat0[10], l = mat0[11],\n          m = mat0[12], n = mat0[13], o = mat0[14], p = mat0[15],\n          A = mat1[0],  B = mat1[1],  C = mat1[2],  D = mat1[3],\n          E = mat1[4],  F = mat1[5],  G = mat1[6],  H = mat1[7],\n          I = mat1[8],  J = mat1[9],  K = mat1[10], L = mat1[11],\n          M = mat1[12], N = mat1[13], O = mat1[14], P = mat1[15];\n        out[0]  = A * a + B * e + C * i + D * m;\n        out[1]  = A * b + B * f + C * j + D * n;\n        out[2]  = A * c + B * g + C * k + D * o;\n        out[3]  = A * d + B * h + C * l + D * p;\n        out[4]  = E * a + F * e + G * i + H * m;\n        out[5]  = E * b + F * f + G * j + H * n;\n        out[6]  = E * c + F * g + G * k + H * o;\n        out[7]  = E * d + F * h + G * l + H * p;\n        out[8]  = I * a + J * e + K * i + L * m;\n        out[9]  = I * b + J * f + K * j + L * n;\n        out[10] = I * c + J * g + K * k + L * o;\n        out[11] = I * d + J * h + K * l + L * p;\n        out[12] = M * a + N * e + O * i + P * m;\n        out[13] = M * b + N * f + O * j + P * n;\n        out[14] = M * c + N * g + O * k + P * o;\n        out[15] = M * d + N * h + O * l + P * p;\n        return out;\n    }\n    /**\n     * 行列に拡大縮小を適用する（参照に注意・戻り値としても結果を返す）\n     * @param {Mat4} mat - 適用を受ける行列\n     * @param {Vec3} vec - XYZ の各軸に対して拡縮を適用する値の行列\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static scale(mat, vec, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        out[0]  = mat[0]  * vec[0];\n        out[1]  = mat[1]  * vec[0];\n        out[2]  = mat[2]  * vec[0];\n        out[3]  = mat[3]  * vec[0];\n        out[4]  = mat[4]  * vec[1];\n        out[5]  = mat[5]  * vec[1];\n        out[6]  = mat[6]  * vec[1];\n        out[7]  = mat[7]  * vec[1];\n        out[8]  = mat[8]  * vec[2];\n        out[9]  = mat[9]  * vec[2];\n        out[10] = mat[10] * vec[2];\n        out[11] = mat[11] * vec[2];\n        out[12] = mat[12];\n        out[13] = mat[13];\n        out[14] = mat[14];\n        out[15] = mat[15];\n        return out;\n    }\n    /**\n     * 行列に平行移動を適用する（参照に注意・戻り値としても結果を返す）\n     * @param {Mat4} mat - 適用を受ける行列\n     * @param {Vec3} vec - XYZ の各軸に対して平行移動を適用する値の行列\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static translate(mat, vec, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        out[0] = mat[0]; out[1] = mat[1]; out[2]  = mat[2];  out[3]  = mat[3];\n        out[4] = mat[4]; out[5] = mat[5]; out[6]  = mat[6];  out[7]  = mat[7];\n        out[8] = mat[8]; out[9] = mat[9]; out[10] = mat[10]; out[11] = mat[11];\n        out[12] = mat[0] * vec[0] + mat[4] * vec[1] + mat[8]  * vec[2] + mat[12];\n        out[13] = mat[1] * vec[0] + mat[5] * vec[1] + mat[9]  * vec[2] + mat[13];\n        out[14] = mat[2] * vec[0] + mat[6] * vec[1] + mat[10] * vec[2] + mat[14];\n        out[15] = mat[3] * vec[0] + mat[7] * vec[1] + mat[11] * vec[2] + mat[15];\n        return out;\n    }\n    /**\n     * 行列に回転を適用する（参照に注意・戻り値としても結果を返す）\n     * @param {Mat4} mat - 適用を受ける行列\n     * @param {number} angle - 回転量を表す値（ラジアン）\n     * @param {Vec3} axis - 回転の軸\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static rotate(mat, angle, axis, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        let sq = Math.sqrt(axis[0] * axis[0] + axis[1] * axis[1] + axis[2] * axis[2]);\n        if(!sq){return null;}\n        let a = axis[0], b = axis[1], c = axis[2];\n        if(sq != 1){sq = 1 / sq; a *= sq; b *= sq; c *= sq;}\n        let d = Math.sin(angle), e = Math.cos(angle), f = 1 - e,\n          g = mat[0],  h = mat[1], i = mat[2],  j = mat[3],\n          k = mat[4],  l = mat[5], m = mat[6],  n = mat[7],\n          o = mat[8],  p = mat[9], q = mat[10], r = mat[11],\n          s = a * a * f + e,\n          t = b * a * f + c * d,\n          u = c * a * f - b * d,\n          v = a * b * f - c * d,\n          w = b * b * f + e,\n          x = c * b * f + a * d,\n          y = a * c * f + b * d,\n          z = b * c * f - a * d,\n          A = c * c * f + e;\n        if(angle){\n            if(mat != out){\n                out[12] = mat[12]; out[13] = mat[13];\n                out[14] = mat[14]; out[15] = mat[15];\n            }\n        } else {\n            out = mat;\n        }\n        out[0]  = g * s + k * t + o * u;\n        out[1]  = h * s + l * t + p * u;\n        out[2]  = i * s + m * t + q * u;\n        out[3]  = j * s + n * t + r * u;\n        out[4]  = g * v + k * w + o * x;\n        out[5]  = h * v + l * w + p * x;\n        out[6]  = i * v + m * w + q * x;\n        out[7]  = j * v + n * w + r * x;\n        out[8]  = g * y + k * z + o * A;\n        out[9]  = h * y + l * z + p * A;\n        out[10] = i * y + m * z + q * A;\n        out[11] = j * y + n * z + r * A;\n        return out;\n    }\n    /**\n     * ビュー座標変換行列を生成する（参照に注意・戻り値としても結果を返す）\n     * @param {Vec3} eye - 視点位置\n     * @param {Vec3} center - 注視点\n     * @param {Vec3} up - 上方向を示すベクトル\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static lookAt(eye, center, up, dest){\n        let eyeX    = eye[0],    eyeY    = eye[1],    eyeZ    = eye[2],\n          centerX = center[0], centerY = center[1], centerZ = center[2],\n          upX     = up[0],     upY     = up[1],     upZ     = up[2];\n        if(eyeX == centerX && eyeY == centerY && eyeZ == centerZ){return Mat4.identity(dest);}\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        let x0, x1, x2, y0, y1, y2, z0, z1, z2, l;\n        z0 = eyeX - center[0]; z1 = eyeY - center[1]; z2 = eyeZ - center[2];\n        l = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n        z0 *= l; z1 *= l; z2 *= l;\n        x0 = upY * z2 - upZ * z1;\n        x1 = upZ * z0 - upX * z2;\n        x2 = upX * z1 - upY * z0;\n        l = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n        if(!l){\n            x0 = 0; x1 = 0; x2 = 0;\n        } else {\n            l = 1 / l;\n            x0 *= l; x1 *= l; x2 *= l;\n        }\n        y0 = z1 * x2 - z2 * x1; y1 = z2 * x0 - z0 * x2; y2 = z0 * x1 - z1 * x0;\n        l = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n        if(!l){\n            y0 = 0; y1 = 0; y2 = 0;\n        } else {\n            l = 1 / l;\n            y0 *= l; y1 *= l; y2 *= l;\n        }\n        out[0] = x0; out[1] = y0; out[2]  = z0; out[3]  = 0;\n        out[4] = x1; out[5] = y1; out[6]  = z1; out[7]  = 0;\n        out[8] = x2; out[9] = y2; out[10] = z2; out[11] = 0;\n        out[12] = -(x0 * eyeX + x1 * eyeY + x2 * eyeZ);\n        out[13] = -(y0 * eyeX + y1 * eyeY + y2 * eyeZ);\n        out[14] = -(z0 * eyeX + z1 * eyeY + z2 * eyeZ);\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * 透視投影変換行列を生成する（参照に注意・戻り値としても結果を返す）\n     * @param {number} fovy - 視野角（度数法）\n     * @param {number} aspect - アスペクト比（幅 / 高さ）\n     * @param {number} near - ニアクリップ面までの距離\n     * @param {number} far - ファークリップ面までの距離\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static perspective(fovy, aspect, near, far, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        let t = near * Math.tan(fovy * Math.PI / 360);\n        let r = t * aspect;\n        let a = r * 2, b = t * 2, c = far - near;\n        out[0]  = near * 2 / a;\n        out[1]  = 0;\n        out[2]  = 0;\n        out[3]  = 0;\n        out[4]  = 0;\n        out[5]  = near * 2 / b;\n        out[6]  = 0;\n        out[7]  = 0;\n        out[8]  = 0;\n        out[9]  = 0;\n        out[10] = -(far + near) / c;\n        out[11] = -1;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = -(far * near * 2) / c;\n        out[15] = 0;\n        return out;\n    }\n    /**\n     * 正射影投影変換行列を生成する（参照に注意・戻り値としても結果を返す）\n     * @param {number} left - 左端\n     * @param {number} right - 右端\n     * @param {number} top - 上端\n     * @param {number} bottom - 下端\n     * @param {number} near - ニアクリップ面までの距離\n     * @param {number} far - ファークリップ面までの距離\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static ortho(left, right, top, bottom, near, far, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        let h = (right - left);\n        let v = (top - bottom);\n        let d = (far - near);\n        out[0]  = 2 / h;\n        out[1]  = 0;\n        out[2]  = 0;\n        out[3]  = 0;\n        out[4]  = 0;\n        out[5]  = 2 / v;\n        out[6]  = 0;\n        out[7]  = 0;\n        out[8]  = 0;\n        out[9]  = 0;\n        out[10] = -2 / d;\n        out[11] = 0;\n        out[12] = -(left + right) / h;\n        out[13] = -(top + bottom) / v;\n        out[14] = -(far + near) / d;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * 転置行列を生成する（参照に注意・戻り値としても結果を返す）\n     * @param {Mat4} mat - 適用する行列\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static transpose(mat, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        out[0]  = mat[0];  out[1]  = mat[4];\n        out[2]  = mat[8];  out[3]  = mat[12];\n        out[4]  = mat[1];  out[5]  = mat[5];\n        out[6]  = mat[9];  out[7]  = mat[13];\n        out[8]  = mat[2];  out[9]  = mat[6];\n        out[10] = mat[10]; out[11] = mat[14];\n        out[12] = mat[3];  out[13] = mat[7];\n        out[14] = mat[11]; out[15] = mat[15];\n        return out;\n    }\n    /**\n     * 逆行列を生成する（参照に注意・戻り値としても結果を返す）\n     * @param {Mat4} mat - 適用する行列\n     * @param {Mat4} [dest] - 結果を格納する行列\n     * @return {Mat4} 結果の行列\n     */\n    static inverse(mat, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create()}\n        let a = mat[0],  b = mat[1],  c = mat[2],  d = mat[3],\n          e = mat[4],  f = mat[5],  g = mat[6],  h = mat[7],\n          i = mat[8],  j = mat[9],  k = mat[10], l = mat[11],\n          m = mat[12], n = mat[13], o = mat[14], p = mat[15],\n          q = a * f - b * e, r = a * g - c * e,\n          s = a * h - d * e, t = b * g - c * f,\n          u = b * h - d * f, v = c * h - d * g,\n          w = i * n - j * m, x = i * o - k * m,\n          y = i * p - l * m, z = j * o - k * n,\n          A = j * p - l * n, B = k * p - l * o,\n          ivd = 1 / (q * B - r * A + s * z + t * y - u * x + v * w);\n        out[0]  = ( f * B - g * A + h * z) * ivd;\n        out[1]  = (-b * B + c * A - d * z) * ivd;\n        out[2]  = ( n * v - o * u + p * t) * ivd;\n        out[3]  = (-j * v + k * u - l * t) * ivd;\n        out[4]  = (-e * B + g * y - h * x) * ivd;\n        out[5]  = ( a * B - c * y + d * x) * ivd;\n        out[6]  = (-m * v + o * s - p * r) * ivd;\n        out[7]  = ( i * v - k * s + l * r) * ivd;\n        out[8]  = ( e * A - f * y + h * w) * ivd;\n        out[9]  = (-a * A + b * y - d * w) * ivd;\n        out[10] = ( m * u - n * s + p * q) * ivd;\n        out[11] = (-i * u + j * s - l * q) * ivd;\n        out[12] = (-e * z + f * x - g * w) * ivd;\n        out[13] = ( a * z - b * x + c * w) * ivd;\n        out[14] = (-m * t + n * r - o * q) * ivd;\n        out[15] = ( i * t - j * r + k * q) * ivd;\n        return out;\n    }\n    /**\n     * 行列にベクトルを乗算する（ベクトルに行列を適用する）\n     * @param {Mat4} mat - 適用する行列\n     * @param {Array.<number>} vec - 乗算するベクトル（4 つの要素を持つ配列）\n     * @return {Float32Array} 結果のベクトル\n     */\n    static toVecIV(mat, vec){\n        let a = mat[0],  b = mat[1],  c = mat[2],  d = mat[3],\n          e = mat[4],  f = mat[5],  g = mat[6],  h = mat[7],\n          i = mat[8],  j = mat[9],  k = mat[10], l = mat[11],\n          m = mat[12], n = mat[13], o = mat[14], p = mat[15];\n        let x = vec[0], y = vec[1], z = vec[2], w = vec[3];\n        let out = [];\n        out[0] = x * a + y * e + z * i + w * m;\n        out[1] = x * b + y * f + z * j + w * n;\n        out[2] = x * c + y * g + z * k + w * o;\n        out[3] = x * d + y * h + z * l + w * p;\n        vec = out;\n        return out;\n    }\n    /**\n     * カメラのプロパティに相当する情報を受け取り行列を生成する\n     * @param {Vec3} position - カメラの座標\n     * @param {Vec3} centerPoint - カメラの注視点\n     * @param {Vec3} upDirection - カメラの上方向\n     * @param {number} fovy - 視野角\n     * @param {number} aspect - アスペクト比\n     * @param {number} near - ニアクリップ面\n     * @param {number} far - ファークリップ面\n     * @param {Mat4} vmat - ビュー座標変換行列の結果を格納する行列\n     * @param {Mat4} pmat - 透視投影座標変換行列の結果を格納する行列\n     * @param {Mat4} dest - ビュー x 透視投影変換行列の結果を格納する行列\n     */\n    static vpFromCameraProperty(position, centerPoint, upDirection, fovy, aspect, near, far, vmat, pmat, dest){\n        Mat4.lookAt(position, centerPoint, upDirection, vmat);\n        Mat4.perspective(fovy, aspect, near, far, pmat);\n        Mat4.multiply(pmat, vmat, dest);\n    }\n    /**\n     * MVP 行列に相当する行列を受け取りベクトルを変換して返す\n     * @param {Mat4} mat - MVP 行列\n     * @param {Array.<number>} vec - MVP 行列と乗算するベクトル\n     * @param {number} width - ビューポートの幅\n     * @param {number} height - ビューポートの高さ\n     * @return {Array.<number>} 結果のベクトル（2 つの要素を持つベクトル）\n     */\n    static screenPositionFromMvp(mat, vec, width, height){\n        let halfWidth = width * 0.5;\n        let halfHeight = height * 0.5;\n        let v = Mat4.toVecIV(mat, [vec[0], vec[1], vec[2], 1.0]);\n        if(v[3] <= 0.0){return [NaN, NaN];}\n        v[0] /= v[3]; v[1] /= v[3]; v[2] /= v[3];\n        return [\n            halfWidth + v[0] * halfWidth,\n            halfHeight - v[1] * halfHeight\n        ];\n    }\n}\n\n/**\n * Vec3\n * @class Vec3\n */\nexport class Vec3 {\n    /**\n     * 3 つの要素を持つベクトルを生成する\n     * @return {Float32Array} ベクトル格納用の配列\n     */\n    static create(){\n        return new Float32Array(3);\n    }\n    /**\n     * ベクトルの長さ（大きさ）を返す\n     * @param {Vec3} v - 3 つの要素を持つベクトル\n     * @return {number} ベクトルの長さ（大きさ）\n     */\n    static len(v){\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\n    }\n    /**\n     * 2 つの座標（始点・終点）を結ぶベクトルを返す\n     * @param {Vec3} v0 - 3 つの要素を持つ始点座標\n     * @param {Vec3} v1 - 3 つの要素を持つ終点座標\n     * @return {Vec3} 視点と終点を結ぶベクトル\n     */\n    static distance(v0, v1){\n        let n = Vec3.create();\n        n[0] = v1[0] - v0[0];\n        n[1] = v1[1] - v0[1];\n        n[2] = v1[2] - v0[2];\n        return n;\n    }\n    /**\n     * ベクトルを正規化した結果を返す\n     * @param {Vec3} v - 3 つの要素を持つベクトル\n     * @return {Vec3} 正規化したベクトル\n     */\n    static normalize(v){\n        let n = Vec3.create();\n        let l = Vec3.len(v);\n        if(l > 0){\n            let e = 1.0 / l;\n            n[0] = v[0] * e;\n            n[1] = v[1] * e;\n            n[2] = v[2] * e;\n        }else{\n            n[0] = 0.0;\n            n[1] = 0.0;\n            n[2] = 0.0;\n        }\n        return n;\n    }\n    /**\n     * 2 つのベクトルの内積の結果を返す\n     * @param {Vec3} v0 - 3 つの要素を持つベクトル\n     * @param {Vec3} v1 - 3 つの要素を持つベクトル\n     * @return {number} 内積の結果\n     */\n    static dot(v0, v1){\n        return v0[0] * v1[0] + v0[1] * v1[1] + v0[2] * v1[2];\n    }\n    /**\n     * 2 つのベクトルの外積の結果を返す\n     * @param {Vec3} v0 - 3 つの要素を持つベクトル\n     * @param {Vec3} v1 - 3 つの要素を持つベクトル\n     * @return {Vec3} 外積の結果\n     */\n    static cross(v0, v1){\n        let n = Vec3.create();\n        n[0] = v0[1] * v1[2] - v0[2] * v1[1];\n        n[1] = v0[2] * v1[0] - v0[0] * v1[2];\n        n[2] = v0[0] * v1[1] - v0[1] * v1[0];\n        return n;\n    }\n    /**\n     * 3 つのベクトルから面法線を求めて返す\n     * @param {Vec3} v0 - 3 つの要素を持つベクトル\n     * @param {Vec3} v1 - 3 つの要素を持つベクトル\n     * @param {Vec3} v2 - 3 つの要素を持つベクトル\n     * @return {Vec3} 面法線ベクトル\n     */\n    static faceNormal(v0, v1, v2){\n        let n = Vec3.create();\n        let vec1 = [v1[0] - v0[0], v1[1] - v0[1], v1[2] - v0[2]];\n        let vec2 = [v2[0] - v0[0], v2[1] - v0[1], v2[2] - v0[2]];\n        n[0] = vec1[1] * vec2[2] - vec1[2] * vec2[1];\n        n[1] = vec1[2] * vec2[0] - vec1[0] * vec2[2];\n        n[2] = vec1[0] * vec2[1] - vec1[1] * vec2[0];\n        return Vec3.normalize(n);\n    }\n}\n\n/**\n * Vec2\n * @class Vec2\n */\nexport class Vec2 {\n    /**\n     * 2 つの要素を持つベクトルを生成する\n     * @return {Float32Array} ベクトル格納用の配列\n     */\n    static create(){\n        return new Float32Array(2);\n    }\n    /**\n     * ベクトルの長さ（大きさ）を返す\n     * @param {Vec2} v - 2 つの要素を持つベクトル\n     * @return {number} ベクトルの長さ（大きさ）\n     */\n    static len(v){\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n    }\n    /**\n     * 2 つの座標（始点・終点）を結ぶベクトルを返す\n     * @param {Vec2} v0 - 2 つの要素を持つ始点座標\n     * @param {Vec2} v1 - 2 つの要素を持つ終点座標\n     * @return {Vec2} 視点と終点を結ぶベクトル\n     */\n    static distance(v0, v1){\n        let n = Vec2.create();\n        n[0] = v1[0] - v0[0];\n        n[1] = v1[1] - v0[1];\n        return n;\n    }\n    /**\n     * ベクトルを正規化した結果を返す\n     * @param {Vec2} v - 2 つの要素を持つベクトル\n     * @return {Vec2} 正規化したベクトル\n     */\n    static normalize(v){\n        let n = Vec2.create();\n        let l = Vec2.len(v);\n        if(l > 0){\n            let e = 1.0 / l;\n            n[0] = v[0] * e;\n            n[1] = v[1] * e;\n        }\n        return n;\n    }\n    /**\n     * 2 つのベクトルの内積の結果を返す\n     * @param {Vec2} v0 - 2 つの要素を持つベクトル\n     * @param {Vec2} v1 - 2 つの要素を持つベクトル\n     * @return {number} 内積の結果\n     */\n    static dot(v0, v1){\n        return v0[0] * v1[0] + v0[1] * v1[1];\n    }\n    /**\n     * 2 つのベクトルの外積の結果を返す\n     * @param {Vec2} v0 - 2 つの要素を持つベクトル\n     * @param {Vec2} v1 - 2 つの要素を持つベクトル\n     * @return {Vec2} 外積の結果\n     */\n    static cross(v0, v1){\n        let n = Vec2.create();\n        return v0[0] * v1[1] - v0[1] * v1[0];\n    }\n}\n\n/**\n * Qtn\n * @class Qtn\n */\nexport class Qtn {\n    /**\n     * 4 つの要素からなるクォータニオンのデータ構造を生成する（虚部 x, y, z, 実部 w の順序で定義）\n     * @return {Float32Array} クォータニオンデータ格納用の配列\n     */\n    static create(){\n        return new Float32Array(4);\n    }\n    /**\n     * クォータニオンを初期化する（参照に注意）\n     * @param {Qtn} dest - 初期化するクォータニオン\n     * @return {Qtn} 結果のクォータニオン\n     */\n    static identity(dest){\n        dest[0] = 0; dest[1] = 0; dest[2] = 0; dest[3] = 1;\n        return dest;\n    }\n    /**\n     * 共役四元数を生成して返す（参照に注意・戻り値としても結果を返す）\n     * @param {Qtn} qtn - 元となるクォータニオン\n     * @param {Qtn} [dest] - 結果を格納するクォータニオン\n     * @return {Qtn} 結果のクォータニオン\n     */\n    static inverse(qtn, dest){\n        let out = dest;\n        if(dest == null){out = Qtn.create();}\n        out[0] = -qtn[0];\n        out[1] = -qtn[1];\n        out[2] = -qtn[2];\n        out[3] =  qtn[3];\n        return out;\n    }\n    /**\n     * 虚部を正規化して返す（参照に注意）\n     * @param {Qtn} qtn - 元となるクォータニオン\n     * @return {Qtn} 結果のクォータニオン\n     */\n    static normalize(dest){\n        let x = dest[0], y = dest[1], z = dest[2];\n        let l = Math.sqrt(x * x + y * y + z * z);\n        if(l === 0){\n            dest[0] = 0;\n            dest[1] = 0;\n            dest[2] = 0;\n        }else{\n            l = 1 / l;\n            dest[0] = x * l;\n            dest[1] = y * l;\n            dest[2] = z * l;\n        }\n        return dest;\n    }\n    /**\n     * クォータニオンを乗算した結果を返す（参照に注意・戻り値としても結果を返す）\n     * @param {Qtn} qtn0 - 乗算されるクォータニオン\n     * @param {Qtn} qtn1 - 乗算するクォータニオン\n     * @param {Qtn} [dest] - 結果を格納するクォータニオン\n     * @return {Qtn} 結果のクォータニオン\n     */\n    static multiply(qtn0, qtn1, dest){\n        let out = dest;\n        if(dest == null){out = Qtn.create();}\n        let ax = qtn0[0], ay = qtn0[1], az = qtn0[2], aw = qtn0[3];\n        let bx = qtn1[0], by = qtn1[1], bz = qtn1[2], bw = qtn1[3];\n        out[0] = ax * bw + aw * bx + ay * bz - az * by;\n        out[1] = ay * bw + aw * by + az * bx - ax * bz;\n        out[2] = az * bw + aw * bz + ax * by - ay * bx;\n        out[3] = aw * bw - ax * bx - ay * by - az * bz;\n        return out;\n    }\n    /**\n     * クォータニオンに回転を適用し返す（参照に注意・戻り値としても結果を返す）\n     * @param {number} angle - 回転する量（ラジアン）\n     * @param {Array.<number>} axis - 3 つの要素を持つ軸ベクトル\n     * @param {Qtn} [dest] - 結果を格納するクォータニオン\n     * @return {Qtn} 結果のクォータニオン\n     */\n    static rotate(angle, axis, dest){\n        let out = dest;\n        if(dest == null){out = Qtn.create();}\n        let a = axis[0], b = axis[1], c = axis[2];\n        let sq = Math.sqrt(axis[0] * axis[0] + axis[1] * axis[1] + axis[2] * axis[2]);\n        if(sq !== 0){\n            let l = 1 / sq;\n            a *= l;\n            b *= l;\n            c *= l;\n        }\n        let s = Math.sin(angle * 0.5);\n        out[0] = a * s;\n        out[1] = b * s;\n        out[2] = c * s;\n        out[3] = Math.cos(angle * 0.5);\n        return out;\n    }\n    /**\n     * ベクトルにクォータニオンを適用し返す（参照に注意・戻り値としても結果を返す）\n     * @param {Array.<number>} vec - 3 つの要素を持つベクトル\n     * @param {Qtn} qtn - クォータニオン\n     * @param {Array.<number>} [dest] - 3 つの要素を持つベクトル\n     * @return {Array.<number>} 結果のベクトル\n     */\n    static toVecIII(vec, qtn, dest){\n        let out = dest;\n        if(dest == null){out = [0.0, 0.0, 0.0];}\n        let qp = Qtn.create();\n        let qq = Qtn.create();\n        let qr = Qtn.create();\n        Qtn.inverse(qtn, qr);\n        qp[0] = vec[0];\n        qp[1] = vec[1];\n        qp[2] = vec[2];\n        Qtn.multiply(qr, qp, qq);\n        Qtn.multiply(qq, qtn, qr);\n        out[0] = qr[0];\n        out[1] = qr[1];\n        out[2] = qr[2];\n        return out;\n    }\n    /**\n     * 4x4 行列にクォータニオンを適用し返す（参照に注意・戻り値としても結果を返す）\n     * @param {Qtn} qtn - クォータニオン\n     * @param {Mat4} [dest] - 4x4 行列\n     * @return {Mat4} 結果の行列\n     */\n    static toMatIV(qtn, dest){\n        let out = dest;\n        if(dest == null){out = Mat4.create();}\n        let x = qtn[0], y = qtn[1], z = qtn[2], w = qtn[3];\n        let x2 = x + x, y2 = y + y, z2 = z + z;\n        let xx = x * x2, xy = x * y2, xz = x * z2;\n        let yy = y * y2, yz = y * z2, zz = z * z2;\n        let wx = w * x2, wy = w * y2, wz = w * z2;\n        out[0]  = 1 - (yy + zz);\n        out[1]  = xy - wz;\n        out[2]  = xz + wy;\n        out[3]  = 0;\n        out[4]  = xy + wz;\n        out[5]  = 1 - (xx + zz);\n        out[6]  = yz - wx;\n        out[7]  = 0;\n        out[8]  = xz - wy;\n        out[9]  = yz + wx;\n        out[10] = 1 - (xx + yy);\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * 2 つのクォータニオンの球面線形補間を行った結果を返す（参照に注意・戻り値としても結果を返す）\n     * @param {Qtn} qtn0 - クォータニオン\n     * @param {Qtn} qtn1 - クォータニオン\n     * @param {number} time - 補間係数（0.0 から 1.0 で指定）\n     * @param {Qtn} [dest] - 結果を格納するクォータニオン\n     * @return {Qtn} 結果のクォータニオン\n     */\n    static slerp(qtn0, qtn1, time, dest){\n        let out = dest;\n        if(dest == null){out = Qtn.create();}\n        let ht = qtn0[0] * qtn1[0] + qtn0[1] * qtn1[1] + qtn0[2] * qtn1[2] + qtn0[3] * qtn1[3];\n        let hs = 1.0 - ht * ht;\n        if(hs <= 0.0){\n            out[0] = qtn0[0];\n            out[1] = qtn0[1];\n            out[2] = qtn0[2];\n            out[3] = qtn0[3];\n        }else{\n            hs = Math.sqrt(hs);\n            if(Math.abs(hs) < 0.0001){\n                out[0] = (qtn0[0] * 0.5 + qtn1[0] * 0.5);\n                out[1] = (qtn0[1] * 0.5 + qtn1[1] * 0.5);\n                out[2] = (qtn0[2] * 0.5 + qtn1[2] * 0.5);\n                out[3] = (qtn0[3] * 0.5 + qtn1[3] * 0.5);\n            }else{\n                let ph = Math.acos(ht);\n                let pt = ph * time;\n                let t0 = Math.sin(ph - pt) / hs;\n                let t1 = Math.sin(pt) / hs;\n                out[0] = qtn0[0] * t0 + qtn1[0] * t1;\n                out[1] = qtn0[1] * t0 + qtn1[1] * t1;\n                out[2] = qtn0[2] * t0 + qtn1[2] * t1;\n                out[3] = qtn0[3] * t0 + qtn1[3] * t1;\n            }\n        }\n        return out;\n    }\n}\n\n/**\n * ジオメトリ情報を生成する\n * @class\n */\nexport class WebGLGeometry {\n    /**\n     * 板ポリゴンの頂点情報を生成する\n     * @param {number} width - 板ポリゴンの一辺の幅\n     * @param {number} height - 板ポリゴンの一辺の高さ\n     * @param {Array.<number>} color - RGBA を 0.0 から 1.0 の範囲で指定した配列\n     * @return {object}\n     * @property {Array.<number>} position - 頂点座標\n     * @property {Array.<number>} normal - 頂点法線\n     * @property {Array.<number>} color - 頂点カラー\n     * @property {Array.<number>} texCoord - テクスチャ座標\n     * @property {Array.<number>} index - 頂点インデックス（gl.TRIANGLES）\n     * @example\n     * let planeData = WebGLGeometry.plane(2.0, 2.0, [1.0, 1.0, 1.0, 1.0]);\n     */\n    static plane(width, height, color){\n        let w, h;\n        w = width / 2;\n        h = height / 2;\n        let pos = [\n            -w,  h,  0.0,\n            w,  h,  0.0,\n            -w, -h,  0.0,\n            w, -h,  0.0\n        ];\n        let nor = [\n            0.0, 0.0, 1.0,\n            0.0, 0.0, 1.0,\n            0.0, 0.0, 1.0,\n            0.0, 0.0, 1.0\n        ];\n        let col = [\n            color[0], color[1], color[2], color[3],\n            color[0], color[1], color[2], color[3],\n            color[0], color[1], color[2], color[3],\n            color[0], color[1], color[2], color[3]\n        ];\n        let st  = [\n            0.0, 0.0,\n            1.0, 0.0,\n            0.0, 1.0,\n            1.0, 1.0\n        ];\n        let idx = [\n            0, 2, 1,\n            1, 2, 3\n        ];\n        return {position: pos, normal: nor, color: col, texCoord: st, index: idx}\n    }\n\n    /**\n     * 円（XY 平面展開）の頂点情報を生成する\n     * @param {number} split - 円の円周の分割数\n     * @param {number} rad - 円の半径\n     * @param {Array.<number>} color - RGBA を 0.0 から 1.0 の範囲で指定した配列\n     * @return {object}\n     * @property {Array.<number>} position - 頂点座標\n     * @property {Array.<number>} normal - 頂点法線\n     * @property {Array.<number>} color - 頂点カラー\n     * @property {Array.<number>} texCoord - テクスチャ座標\n     * @property {Array.<number>} index - 頂点インデックス（gl.TRIANGLES）\n     * @example\n     * let circleData = WebGLGeometry.circle(64, 1.0, [1.0, 1.0, 1.0, 1.0]);\n     */\n    static circle(split, rad, color){\n        let i, j = 0;\n        let pos = [], nor = [],\n          col = [], st  = [], idx = [];\n        pos.push(0.0, 0.0, 0.0);\n        nor.push(0.0, 0.0, 1.0);\n        col.push(color[0], color[1], color[2], color[3]);\n        st.push(0.5, 0.5);\n        for(i = 0; i < split; i++){\n            let r = Math.PI * 2.0 / split * i;\n            let rx = Math.cos(r);\n            let ry = Math.sin(r);\n            pos.push(rx * rad, ry * rad, 0.0);\n            nor.push(0.0, 0.0, 1.0);\n            col.push(color[0], color[1], color[2], color[3]);\n            st.push((rx + 1.0) * 0.5, 1.0 - (ry + 1.0) * 0.5);\n            if(i === split - 1){\n                idx.push(0, j + 1, 1);\n            }else{\n                idx.push(0, j + 1, j + 2);\n            }\n            ++j;\n        }\n        return {position: pos, normal: nor, color: col, texCoord: st, index: idx}\n    }\n\n    /**\n     * キューブの頂点情報を生成する\n     * @param {number} side - 正立方体の一辺の長さ\n     * @param {Array.<number>} color - RGBA を 0.0 から 1.0 の範囲で指定した配列\n     * @return {object}\n     * @property {Array.<number>} position - 頂点座標\n     * @property {Array.<number>} normal - 頂点法線 ※キューブの中心から各頂点に向かって伸びるベクトルなので注意\n     * @property {Array.<number>} color - 頂点カラー\n     * @property {Array.<number>} texCoord - テクスチャ座標\n     * @property {Array.<number>} index - 頂点インデックス（gl.TRIANGLES）\n     * @example\n     * let cubeData = WebGLGeometry.cube(2.0, [1.0, 1.0, 1.0, 1.0]);\n     */\n    static cube(side, color){\n        let hs = side * 0.5;\n        let pos = [\n            -hs, -hs,  hs,  hs, -hs,  hs,  hs,  hs,  hs, -hs,  hs,  hs,\n            -hs, -hs, -hs, -hs,  hs, -hs,  hs,  hs, -hs,  hs, -hs, -hs,\n            -hs,  hs, -hs, -hs,  hs,  hs,  hs,  hs,  hs,  hs,  hs, -hs,\n            -hs, -hs, -hs,  hs, -hs, -hs,  hs, -hs,  hs, -hs, -hs,  hs,\n            hs, -hs, -hs,  hs,  hs, -hs,  hs,  hs,  hs,  hs, -hs,  hs,\n            -hs, -hs, -hs, -hs, -hs,  hs, -hs,  hs,  hs, -hs,  hs, -hs\n        ];\n        let v = 1.0 / Math.sqrt(3.0);\n        let nor = [\n            -v, -v,  v,  v, -v,  v,  v,  v,  v, -v,  v,  v,\n            -v, -v, -v, -v,  v, -v,  v,  v, -v,  v, -v, -v,\n            -v,  v, -v, -v,  v,  v,  v,  v,  v,  v,  v, -v,\n            -v, -v, -v,  v, -v, -v,  v, -v,  v, -v, -v,  v,\n            v, -v, -v,  v,  v, -v,  v,  v,  v,  v, -v,  v,\n            -v, -v, -v, -v, -v,  v, -v,  v,  v, -v,  v, -v\n        ];\n        let col = [];\n        for(let i = 0; i < pos.length / 3; i++){\n            col.push(color[0], color[1], color[2], color[3]);\n        }\n        let st = [\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0\n        ];\n        let idx = [\n            0,  1,  2,  0,  2,  3,\n            4,  5,  6,  4,  6,  7,\n            8,  9, 10,  8, 10, 11,\n            12, 13, 14, 12, 14, 15,\n            16, 17, 18, 16, 18, 19,\n            20, 21, 22, 20, 22, 23\n        ];\n        return {position: pos, normal: nor, color: col, texCoord: st, index: idx}\n    }\n\n    static box(width, height, depth, color){\n        let hw = width * 0.5;\n        let hh = height * 0.5;\n        let hd = depth * 0.5;\n        let pos = [\n            -hw, -hh,  hd, // 左下前\n            hw, -hh,  hd, // 右下前\n            hw,  hh,  hd, // 右上前\n            -hw,  hh,  hd, // 左上前\n            -hw, -hh, -hd, // 左下奥\n            -hw,  hh, -hd, // 左上奥\n            hw,  hh, -hd, // 右上奥\n            hw, -hh, -hd, // 右下奥\n            -hw,  hh, -hd, // 左上奥\n            -hw,  hh,  hd, // 左上前\n            hw,  hh,  hd, // 右上前\n            hw,  hh, -hd, // 右上奥\n            -hw, -hh, -hd, // 左下奥\n            hw, -hh, -hd, // 右下奥\n            hw, -hh,  hd, // 右下前\n            -hw, -hh,  hd, // 左下前\n            hw, -hh, -hd, // 右下奥\n            hw,  hh, -hd, // 右上奥\n            hw,  hh,  hd, // 右上前\n            hw, -hh,  hd, // 右下前\n            -hw, -hh, -hd, // 左下奥\n            -hw, -hh,  hd, // 左下前\n            -hw,  hh,  hd, // 左上前\n            -hw,  hh, -hd // 左上奥\n        ];\n        let v = 1.0 / Math.sqrt(3.0);\n        let nor = [\n            -v, -v,  v,  v, -v,  v,  v,  v,  v, -v,  v,  v,\n            -v, -v, -v, -v,  v, -v,  v,  v, -v,  v, -v, -v,\n            -v,  v, -v, -v,  v,  v,  v,  v,  v,  v,  v, -v,\n            -v, -v, -v,  v, -v, -v,  v, -v,  v, -v, -v,  v,\n            v, -v, -v,  v,  v, -v,  v,  v,  v,  v, -v,  v,\n            -v, -v, -v, -v, -v,  v, -v,  v,  v, -v,  v, -v\n        ];\n        let col = [];\n        for(let i = 0; i < pos.length / 3; i++){\n            col.push(color[0], color[1], color[2], color[3]);\n        }\n        let st = [\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0\n        ];\n        let idx = [\n            0,  1,  2,  0,  2,  3,\n            4,  5,  6,  4,  6,  7,\n            8,  9, 10,  8, 10, 11,\n            12, 13, 14, 12, 14, 15,\n            16, 17, 18, 16, 18, 19,\n            20, 21, 22, 20, 22, 23\n        ];\n        return {position: pos, normal: nor, color: col, texCoord: st, index: idx}\n    }\n\n    // TODO: 命名変更\n    static boxLine(width, height, depth, color){\n        let hw = width * 0.5;\n        let hh = height * 0.5;\n        let hd = depth * 0.5;\n        let pos = [\n            // 前面\n            -hw, -hh,  hd, // 左下前\n            hw, -hh,  hd, // 右下前\n            hw, -hh,  hd, // 右下前\n            hw,  hh,  hd, // 右上前\n            hw,  hh,  hd, // 右上前\n            -hw,  hh,  hd, // 左上前\n            -hw,  hh,  hd, // 左上前\n            -hw, -hh,  hd, // 左下前\n            // 奥面\n            -hw, -hh, -hd, // 左下奥\n            -hw,  hh, -hd, // 左上奥\n            -hw,  hh, -hd, // 左上奥\n            hw,  hh, -hd, // 右上奥\n            hw,  hh, -hd, // 右上奥\n            hw, -hh, -hd, // 右下奥\n            hw, -hh, -hd, // 右下奥\n            -hw, -hh, -hd, // 左下奥\n            // 天井\n            -hw,  hh, -hd, // 左上奥\n            -hw,  hh,  hd, // 左上前\n            -hw,  hh,  hd, // 左上前\n            hw,  hh,  hd, // 右上前\n            hw,  hh,  hd, // 右上前\n            hw,  hh, -hd, // 右上奥\n            hw,  hh, -hd, // 右上奥\n            -hw,  hh, -hd, // 左上奥\n            // 下面\n            -hw, -hh, -hd, // 左下奥\n            hw, -hh, -hd, // 右下奥\n            hw, -hh, -hd, // 右下奥\n            hw, -hh,  hd, // 右下前\n            hw, -hh,  hd, // 右下前\n            -hw, -hh,  hd, // 左下前\n            -hw, -hh,  hd, // 左下前\n            -hw, -hh, -hd, // 左下奥\n            // 右面\n            hw, -hh, -hd, // 右下奥\n            hw,  hh, -hd, // 右上奥\n            hw,  hh, -hd, // 右上奥\n            hw,  hh,  hd, // 右上前\n            hw,  hh,  hd, // 右上前\n            hw, -hh,  hd, // 右下前\n            hw, -hh,  hd, // 右下前\n            hw, -hh, -hd, // 右下奥\n            // 左面\n            -hw, -hh, -hd, // 左下奥\n            -hw, -hh,  hd, // 左下前\n            -hw, -hh,  hd, // 左下前\n            -hw,  hh,  hd, // 左上前\n            -hw,  hh,  hd, // 左上前\n            -hw,  hh, -hd // 左上奥\n            // -hw,  hh, -hd // 左上奥\n            // -hw, -hh, -hd, // 左下奥\n        ];\n        let v = 1.0 / Math.sqrt(3.0);\n\n        let col = [];\n        for(let i = 0; i < pos.length / 3; i++){\n            col.push(color[0], color[1], color[2], color[3]);\n        }\n        return {position: pos, color: col}\n    }\n\n    static axis(size, color){\n        let pos = [size * -1, 0.0, 0.0, size, 0.0, 0.0, 0.0, size * -1, 0.0, 0.0, size, 0.0, 0.0, 0.0, size, 0.0, 0.0, size * -1];\n        let col = [\n            0.45,\n            0.45,\n            0.45,\n            1.0,\n            0.45,\n            0.45,\n            0.45,\n            1.0,\n            0.45,\n            0.45,\n            0.45,\n            1.0,\n            0.45,\n            0.45,\n            0.45,\n            1.0,\n            0.45,\n            0.45,\n            0.45,\n            1.0,\n            0.45,\n            0.45,\n            0.45,\n            1.0,\n        ];\n        return {position: pos, color: col}\n    }\n}\n\n","var p=class extends HTMLElement{constructor(i,t,a=!0){super();this.editing=!1;this.attachShadow({mode:\"open\"}),this.axes=i,this.totalTime=t,this.debug=a,this.shadowRoot.innerHTML=this.template(i,t),this.$pane=this.shadowRoot.querySelector(\"#pane\"),this.$timeline=this.shadowRoot.querySelector(\"#timeline\"),this.$current=this.shadowRoot.querySelector(\"#current\"),this.$progress=this.shadowRoot.querySelector(\"#progress\"),this.$labels=this.shadowRoot.querySelectorAll(\".label\"),this.$bars=this.shadowRoot.querySelectorAll(\".bar\"),this.$barsBegin=this.shadowRoot.querySelectorAll(\".begin\"),this.$barsEnd=this.shadowRoot.querySelectorAll(\".end\"),this.$previous=this.shadowRoot.querySelector(\"#previous\"),this.$playPause=this.shadowRoot.querySelector(\"#play-pause\"),this.$next=this.shadowRoot.querySelector(\"#next\"),this.playing=!0,this.previous=!1,this.next=!1,this.skip=-1,this.$previous.addEventListener(\"click\",e=>{this.previous=!0}),this.$playPause.addEventListener(\"click\",e=>{this.playing=!this.playing}),this.$next.addEventListener(\"click\",e=>{this.next=!0});for(let e=0,n=this.$bars.length;e<n;e++){if(this.$bars[e].addEventListener(\"click\",l=>{let o=l.currentTarget,h=Number(o.getAttribute(\"idx\"));this.skip=h}),!this.debug)continue;let r=this.$barsBegin[e],d=this.$barsEnd[e];r.addEventListener(\"input\",l=>{let o=Number(r.value);if(Number(this.$barsEnd[e].value)<o){l.preventDefault();return}if(Number.isFinite(this.axes[e].position))this.axes[e].position=o,this.axes[e].duration=this.axes[e].endAt-(this.axes[e].delay+this.axes[e].position);else{let h=this.axes.find(c=>c.key===this.axes[e].position);this.axes[e].delay=o-h.endAt,this.axes[e].duration=this.axes[e].endAt-(this.axes[e].delay+h.endAt)}}),d.addEventListener(\"input\",l=>{let o=Number(d.value);if(o<Number(this.$barsBegin[e].value)){l.preventDefault();return}if(Number.isFinite(this.axes[e].position))this.axes[e].duration=o-(this.axes[e].position+this.axes[e].delay);else{let h=this.axes.find(c=>c.key===this.axes[e].position);this.axes[e].duration=o-h.endAt-this.axes[e].delay}})}this.$labels.forEach(e=>{e.addEventListener(\"click\",n=>{let s=n.currentTarget,r=Number(s.getAttribute(\"idx\"));this.skip=r})}),this.$current.addEventListener(\"input\",e=>{this.editing=!0;let n=Number(this.$current.value);this.__updateProgressPosition(n),this.__updateBar(this.totalTime)}),this.$current.addEventListener(\"change\",e=>{this.editing=!1})}attributeChangedCallback(){}connectedCallback(){}disconnectedCallback(){}getAxes(){return this.axes}get(i){let t=Date.now(),a=Number(this.$current.value),e=t-i;if(this.playing||(i=t-a,e=a),this.editing&&(i=t-a,e=a),-1<this.skip){let n=this.axes[this.skip];i=t-n.beginAt,e=n.beginAt,this.skip=-1}return this.previous&&(this.previous=!1,i=t,e=0),this.next&&(this.next=!1,i=t-this.totalTime,e=this.totalTime),{beginAt:i,elapsedTime:e,editing:this.editing}}update(i,t,a){this.axes=a,this.totalTime=t,this.$current.setAttribute(\"max\",t),this.$current.value=i,this.__updateProgressPosition(i),this.__updateBar(t),this.debug&&this.__updateBarRange(t),this.__updateScale(t)}template(i,t){let a=\"\",e=\"\",n=\"\";for(let s=0;s<i.length;s++){let r=i[s];a+=`<div class=\"row\" id=\"row-${s}\"><div class=\"label\" idx=\"${s}\">${r.key}</div></div>`;let d=\"\";this.debug&&(d=`\n          <input class=\"begin\" type=\"range\" min=\"0\" max=\"0\" step=\"10\" value=\"${r.beginAt}\">\n          <input class=\"end\" type=\"range\" min=\"0\" max=\"0\" step=\"10\" value=\"${r.endAt}\">\n        `),e+=`\n        <div class=\"row\">\n          <div class=\"bar bar--${this.debug?\"debug\":\"default\"}\" idx=\"${s}\"></div>\n          ${d}\n        </div>`,this.debug}for(let s=0,r=Math.floor(t/1e3);s<r;s++)n+=`<div class=\"scale-label\" style=\"--sec: ${s+1}\">${s+1}s</div>`;return`\n      <style>\n        * {\n          box-sizing: border-box;\n        }\n        :host {\n          display: block;\n          height: 100%;\n        }\n        .container {\n          display: flex;\n          flex-direction: column;\n          height: 100%;\n          background-color: #313131;\n          color: #eeeeee;\n          position: relative;\n          --tools-height: 40px;\n          --controls-height: 40px;\n        }\n        .tools {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n          height: var(--tools-height);\n          border-bottom: 1px solid #202020;\n        }\n        .tools__item {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 20px;\n          margin: 0 8px;\n          color: #eeeeee;\n        }\n        .tools__item div {\n          width: 100%;\n          cursor: pointer;\n        }\n        .tools__item div:hover {\n          opacity: .6;\n        }\n        .tools__item svg {\n          fill: currentColor;\n        }\n        .controls {\n          display: flex;\n          flex-shrink: 0;\n          height: var(--controls-height);\n          border-bottom: 1px solid #202020;\n        }\n        .pane {\n          display: flex;\n          flex: 1;\n          overflow: scroll;\n          scroll-behavior: smooth;\n        }\n        .head {\n          flex-shrink: 0;\n          flex-basis: 20%;\n          max-width: 200px;\n          min-width: 0;\n        }\n        .body {\n          flex: 1;\n          position: relative;\n        }\n        .actions {\n          height: 100%;\n          border-right: 1px solid #222322;\n        }\n        .rows {\n          border-right: 1px solid #222322;\n        }\n        .row {\n          display: flex;\n          align-items: center;\n          height: 24px;\n          border-bottom: 1px solid #202020;\n          position: relative;\n        }\n        .row input[type=\"range\"] {\n          position: absolute;\n          inset: 0;\n        }\n        .label {\n          padding-left: 12px;\n          font-size: 12px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          cursor: pointer;\n        }\n        .bar {\n          height: 100%;\n          background-color: #545454;\n          opacity: .5;\n          transform-origin: left;\n          cursor: pointer;\n          position: relative;\n        }\n        .bar.bar--debug::before {\n          content: \"\";\n          display: block;\n          width: 6px;\n          position: absolute;\n          left: 0;\n          top: 0;\n          bottom: 0;\n          margin: 4px;\n          border-radius: 2px;\n          background-color: darkgray;\n        }\n        .bar.bar--debug::after {\n          content: \"\";\n          display: block;\n          width: 6px;\n          position: absolute;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          margin: 4px;\n          border-radius: 2px;\n          background-color: darkgray;\n        }\n        .bar.bar--active {\n          opacity: 1;\n        }\n        .progress {\n          position: absolute;\n          top: var(--tools-height);\n          bottom: 0;\n          left: 0;\n          width: 2px;\n          margin-left: min(20%, 200px);\n          background-color: #71A0EB;\n          opacity: 0.6;\n        }\n        .progress::before {\n          content: \"\";\n          display: block;\n          width: 20px;\n          height: 30px;\n          background-color: #53aeff;\n          margin-left: -9px;\n        }\n        .progress::after {\n          content: \"\";\n          display: block;\n          border-top: 10px solid #53aeff;\n          border-left: 10px solid transparent;\n          border-right: 10px solid transparent;\n          margin-left: -9px;\n        }\n        .current {\n          position: absolute;\n          top: var(--tools-height);\n          height: var(--controls-height);\n          left: -12px;\n          right: -12px;\n          margin-left: min(20%, 200px);\n        }\n        input[type=\"range\"] {\n          -webkit-appearance: none;\n          appearance: none;\n          margin: 0;\n          cursor: pointer;\n          outline: none;\n        }\n        input[type=\"range\"]::-webkit-slider-thumb {\n          opacity: 0;\n        }\n        input[type=\"range\"]::-moz-range-thumb {\n          opacity: 0;\n        }\n        /* Firefox\\u3067\\u70B9\\u7DDA\\u304C\\u5468\\u308A\\u306B\\u8868\\u793A\\u3055\\u308C\\u3066\\u3057\\u307E\\u3046\\u554F\\u984C\\u306E\\u89E3\\u6D88 */\n        input[type=\"range\"]::-moz-focus-outer {\n          border: 0;\n        }\n        .current input[type=\"range\"] {\n          height: var(--controls-height);\n          width: 100%;\n          background: transparent;\n        }\n        input.begin[type=\"range\"],\n        input.end[type=\"range\"] {\n          height: 100%;\n          width: calc(100% + 12px);\n          background: transparent;\n          pointer-events: none;\n          margin-left: -6px;\n        }\n        input.begin[type=\"range\"]::-webkit-slider-thumb,\n        input.end[type=\"range\"]::-webkit-slider-thumb {\n          -webkit-appearance: none;\n          appearance: none;\n          pointer-events: auto;\n          opacity: 0;   \n          width: 12px;\n          height: 100%;\n          cursor: ew-resize;\n        }\n        input.begin[type=\"range\"]::-moz-range-thumb,\n        input.end[type=\"range\"]::-moz-range-thumb {\n          -webkit-appearance: none;\n          appearance: none;\n          pointer-events: auto;\n          opacity: 0;   \n          width: 12px;\n          height: 100%;\n          cursor: ew-resize;\n        }\n        input.begin[type=\"range\"]::-webkit-slider-thumb {\n          background: darkgreen;\n          transform: translateX(50%);\n        }\n        input.begin[type=\"range\"]::-moz-range-thumb {\n          background: darkgreen;\n          transform: translateX(50%);\n        }\n        input.end[type=\"range\"]::-webkit-slider-thumb {\n          background: indianred;\n          transform: translateX(-50%);\n        }\n        input.end[type=\"range\"]::-moz-range-thumb {\n          background: indianred;\n          transform: translateX(-50%);\n        }\n        .scale {\n          position: relative;\n          height: 100%;\n        }\n        .scale-s,\n        .scale-100ms {\n          height: 50%;\n        }\n        .scale-s {\n          /*\n            total / 1s \n            e.g. 6000 / 1000\n            x / 1000 = 6\n            calc(100% / calc(var(--total) / 1000))\n           */\n          --x: calc(100% / calc(var(--total) / 1000));\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n          border-bottom: 1px solid #202020;\n        }\n        .scale-100ms {\n          --x: calc(100% / calc(var(--total) / 1000) / 10);\n          background: repeating-linear-gradient(90deg, transparent 0, transparent calc(var(--x) - 1px), #202020 calc(var(--x) - 1px), #202020 var(--x));\n        }\n        .scale-label {\n          --x: calc(100% / calc(var(--total) / 1000));\n          position: absolute;\n          top: 0;\n          left: calc(var(--x) * var(--sec));\n          font-size: 10px;\n          font-style: italic;\n          transform: translateX(calc(-100% - 4px));\n        }\n      </style>\n      <div class=\"container\">\n        <div class=\"tools\">\n          <div class=\"tools__item\">\n            <div id=\"previous\">\n              <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M2.75 20C2.75 20.5523 3.19772 21 3.75 21C4.30228 21 4.75 20.5523 4.75 20L4.75 4C4.75 3.44772 4.30229 3 3.75 3C3.19772 3 2.75 3.44772 2.75 4V20Z\"/>\n                <path d=\"M20.75 19.0526C20.75 20.4774 19.1383 21.305 17.9803 20.4748L7.51062 12.9682C6.50574 12.2477 6.54467 10.7407 7.5854 10.073L18.0551 3.35665C19.2198 2.60946 20.75 3.44583 20.75 4.82961L20.75 19.0526Z\"/>\n              </svg>\n            </div>\n          </div>\n          <div class=\"tools__item\">\n            <div id=\"play-pause\">\n              <svg viewBox=\"0 0 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n                <!-- Generator: Sketch 59.1 (86144) - https://sketch.com -->\n                <title>ic_fluent_video_play_pause_24_filled</title>\n                <desc>Created with Sketch.</desc>\n                <g id=\"\\u{1F50D}-Product-Icons\" stroke=\"none\" stroke-width=\"1\" >\n                    <g id=\"ic_fluent_video_play_pause_24_filled\" fill-rule=\"nonzero\">\n                        <path d=\"M3.65140982,6.61646219 L11.1528787,11.3693959 C11.3672679,11.5052331 11.4827597,11.722675 11.4993749,11.9464385 L11.4984593,7.25 C11.4984593,6.83578644 11.8342458,6.5 12.2484593,6.5 L15.2484593,6.5 C15.6626729,6.5 15.9984593,6.83578644 15.9984593,7.25 L15.9984593,16.75 C15.9984593,17.1642136 15.6626729,17.5 15.2484593,17.5 L12.2484593,17.5 C11.8342458,17.5 11.4984593,17.1642136 11.4984593,16.75 L11.4993494,12.0597632 C11.4826318,12.2835468 11.3670166,12.5009613 11.1525249,12.6366956 L3.65105604,17.3837618 C3.15168144,17.6997752 2.5,17.3409648 2.5,16.75 L2.5,7.25 C2.5,6.65884683 3.15205264,6.30006928 3.65140982,6.61646219 Z M21.2477085,6.50037474 C21.661922,6.50037474 21.9977085,6.83616118 21.9977085,7.25037474 L21.9977085,16.7496253 C21.9977085,17.1638388 21.661922,17.4996253 21.2477085,17.4996253 L18.2477085,17.4996253 C17.8334949,17.4996253 17.4977085,17.1638388 17.4977085,16.7496253 L17.4977085,7.25037474 C17.4977085,6.83616118 17.8334949,6.50037474 18.2477085,6.50037474 L21.2477085,6.50037474 Z\" id=\"\\u{1F3A8}-Color\"></path>\n                    </g>\n                </g>\n              </svg>\n            </div>\n          </div>\n          <div class=\"tools__item\">\n            <div id=\"next\">\n              <svg   viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M21 4C21 3.44772 20.5523 3 20 3C19.4477 3 19 3.44772 19 4V20C19 20.5523 19.4477 21 20 21C20.5523 21 21 20.5523 21 20V4Z\"/>\n                <path d=\"M3 4.94743C3 3.5226 4.61175 2.69498 5.7697 3.52521L16.2394 11.0318C17.2443 11.7523 17.2053 13.2593 16.1646 13.927L5.69492 20.6434C4.53019 21.3905 3 20.5542 3 19.1704V4.94743Z\"/>\n              </svg>\n            </div>\n          </div>\n        </div>\n        <div class=\"controls\">\n          <div class=\"head\"><div class=\"actions\"></div></div>\n          <div class=\"body\">\n            <div class=\"scale\" id=\"scale\" style=\"--total: ${t}\">\n              <div class=\"scale-s\"></div>\n              <div class=\"scale-100ms\"></div>\n              ${n}\n            </div>\n          </div>\n        </div>\n        <div id=\"pane\" class=\"pane\">\n          <div class=\"head\">\n            <div class=\"rows\">\n              ${a}\n            </div>\n          </div>\n          <div id=\"timeline\" class=\"body\">\n            <div class=\"rows\">\n              ${e}\n            </div>\n          </div>\n        </div>\n        <div class=\"current\">\n          <input id=\"current\" type=\"range\" min=\"0\" max=\"0\" step=\"any\" value=\"0\">\n        </div>\n        <div id=\"progress\" class=\"progress\"></div>\n      </div>\n    `}__updateScale(i){let t=this.shadowRoot.querySelector(\".test\");t&&t.remove(),this.shadowRoot.querySelectorAll(\".scale-label\").forEach(s=>{s.remove()}),this.shadowRoot.querySelector(\".scale\").style.setProperty(\"--total\",i);let e=\"\";for(let s=0,r=Math.floor(i/1e3);s<r;s++)e+=`<div class=\"scale-label\" style=\"--sec: ${s+1}\">${s+1}s</div>`;let n=document.createElement(\"div\");n.className=\"test\",n.innerHTML=e,this.shadowRoot.querySelector(\".scale\").appendChild(n)}__updateProgressPosition(i){let t=this.$timeline.clientWidth,a=Math.min(i/this.totalTime,1)*t;this.$progress.style.transform=`translateX(${a}px)`}__updateBarRange(i){for(let t=0;t<this.$bars.length;t++){let a=this.axes[t];this.$barsBegin[t].setAttribute(\"max\",i),this.$barsBegin[t].value=a.beginAt,this.$barsEnd[t].setAttribute(\"max\",i),this.$barsEnd[t].value=a.endAt}}__updateBar(i){let a=this.$timeline.clientWidth/i;for(let e=0;e<this.$bars.length;e++){let n=this.axes[e],s=n.beginAt*a,r=(n.endAt-n.beginAt)*a;this.$bars[e].style.transform=`translateX(${s}px)`,this.$bars[e].style.width=`${r}px`,0<n.progress&&!n.pass?this.$bars[e].classList.add(\"bar--active\"):this.$bars[e].classList.remove(\"bar--active\")}}};window.customElements.define(\"taxis-timeline\",p);var u={key:\"\",beginAt:0,endAt:0,duration:0,delay:0,position:0,progress:0,enter:!1,pass:!1};var g=class{constructor(i={}){this.option=i;this.axes=[]}get totalTime(){return this.axes.length?Math.max(...this.axes.map(i=>i.endAt)):0}get totalTimeForTimeline(){return this.totalTime+500}get everyPassed(){return this.axes.every(i=>i.pass)}restart(){this.beginAt=Date.now()}getAxis({key:i}){return this.axes.find(t=>t.key===i)}getAxes(){return this.axes}add(i,t,a=0,e){let n=this.totalTime+a;if(e!==void 0)Number.isFinite(e)?n=e+a:n=this.getAxis({key:e}).endAt+a;else{let s=this.axes[this.axes.length-1];e=s?s.key:0}return this.axes.push({...u,key:i,beginAt:n,endAt:n+t,duration:t,delay:a,position:e}),this.sort(),this}begin(){this.option.timeline&&(this.timeline=new p(this.axes,this.totalTimeForTimeline,this.option.timeline.debug),this.option.timeline.container.appendChild(this.timeline)),this.beginAt=Date.now(),this.__tick()}reset(){cancelAnimationFrame(this.requestID)}ticker(i){this.tickerFn=i}__tick(){let i=this.beginAt,t=Date.now()-i,a=!1;if(this.option.timeline){this.axes=this.recalculation(this.timeline.getAxes());let{beginAt:e,elapsedTime:n,editing:s}=this.timeline.get(this.beginAt);i=e,t=n,a=s}this.beginAt=i,this.axes.forEach((e,n)=>{let s=t-e.beginAt,r=Math.max(0,Math.min(s/e.duration,1)),d=e.beginAt<=t,l=e.endAt<t;e.progress=r,e.enter=d,e.pass=l}),this.option.timeline&&!a&&this.timeline.update(t,this.totalTimeForTimeline,this.axes),this.tickerFn&&this.tickerFn(t,this.toMap(this.axes)),this.requestID=requestAnimationFrame(this.__tick.bind(this))}calculation(){let i=[];for(let t=0;t<this.axes.length;t++){let a=this.axes[t],{key:e,duration:n,position:s,delay:r}=a,l=Math.max(...i.map(o=>o.endAt))+r;s!==void 0?Number.isFinite(s)?l=s+r:l=this.getAxis({key:s}).endAt+r:s=l,i.push({...u,key:e,beginAt:l,endAt:l+n,duration:n,delay:r,position:s})}}recalculation(i){let t=[];for(let a=0;a<i.length;a++){let e=i[a],{key:n,duration:s,position:r,delay:d}=e,o=Math.max(...t.map(h=>h.endAt))+d;r!==void 0?Number.isFinite(r)?o=r+d:o=this.getAxis({key:r}).endAt+d:r=o,t.push({...u,key:n,beginAt:o,endAt:o+s,duration:s,delay:d,position:r})}return t}sort(){this.axes.sort((i,t)=>i.beginAt-t.beginAt)}toMap(i){let t=new Map;return i.forEach(a=>{t[a.key]=a,t.set(a.key,a)}),t}};export{g as Taxis};\n//# sourceMappingURL=taxis.esm.js.map\n","/**\n * @example\n * // Render using drawArrays with mode gl.LINES.\n * this.gl.drawArrays(this.gl.LINES, 0, this.axis.position.length / 3);\n */\nexport const axis = (size, color) => {\n    // prettier-ignore\n    const position = new Float32Array([\n        // X\n        size * -1, 0.0, 0.0,\n        size, 0.0, 0.0,\n        // Y\n        0.0, size * -1, 0.0,\n        0.0, size, 0.0,\n        // Z\n        0.0, 0.0, size,\n        0.0, 0.0, size * -1,\n    ]);\n    // prettier-ignore\n    const defaultColor = [\n        // x: red\n        1.0, 0.0, 0.0, 1.0,\n        1.0, 0.0, 0.0, 1.0,\n        // y: green\n        0.0, 1.0, 0.0, 1.0,\n        0.0, 1.0, 0.0, 1.0,\n        // z: blue\n        0.0, 0.0, 1.0, 1.0,\n        0.0, 0.0, 1.0, 1.0,\n    ];\n    // prettier-ignore\n    const col = color ? [\n        ...color,\n        ...color,\n        ...color,\n        ...color,\n        ...color,\n        ...color,\n    ] : defaultColor;\n    return { position, color: new Float32Array(col) };\n};\nexport const plane = (width, height, color) => {\n    const w = width / 2;\n    const h = height / 2;\n    // prettier-ignore\n    const position = new Float32Array([\n        -w, h, 0.0,\n        w, h, 0.0,\n        -w, -h, 0.0,\n        w, -h, 0.0\n    ]);\n    // prettier-ignore\n    const nor = new Float32Array([\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0\n    ]);\n    // prettier-ignore\n    const col = new Float32Array([\n        color[0], color[1], color[2], color[3],\n        color[0], color[1], color[2], color[3],\n        color[0], color[1], color[2], color[3],\n        color[0], color[1], color[2], color[3]\n    ]);\n    // prettier-ignore\n    let st = [\n        0.0, 0.0,\n        1.0, 0.0,\n        0.0, 1.0,\n        1.0, 1.0\n    ];\n    // prettier-ignore\n    const idx = [\n        0, 2, 1,\n        1, 2, 3\n    ];\n    return { position, normal: nor, color: col, indices: idx, texCoord: st };\n};\n/**\n * @example\n * // Render using drawElements with mode gl.TRIANGLES.\n * this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.floor.IBO);\n * this.gl.drawElements(this.gl.TRIANGLES, this.floor.geometry.indices.length, this.gl.UNSIGNED_SHORT, 0);\n */\nexport const floor = (width, depth, color) => {\n    const w = width / 2;\n    const d = depth / 2;\n    // prettier-ignore\n    const position = new Float32Array([\n        -w, 0.0, d,\n        w, 0.0, d,\n        -w, 0.0, -d,\n        w, 0.0, -d\n    ]);\n    // prettier-ignore\n    const normal = new Float32Array([\n        0.0, 1.0, 0.0,\n        0.0, 1.0, 0.0,\n        0.0, 1.0, 0.0,\n        0.0, 1.0, 0.0\n    ]);\n    // prettier-ignore\n    let col = new Float32Array([\n        color[0], color[1], color[2], color[3],\n        color[0], color[1], color[2], color[3],\n        color[0], color[1], color[2], color[3],\n        color[0], color[1], color[2], color[3]\n    ]);\n    // prettier-ignore\n    // let st  = [\n    //   0.0, 0.0,\n    //   1.0, 0.0,\n    //   0.0, 1.0,\n    //   1.0, 1.0\n    // ];\n    // prettier-ignore\n    let idx = [\n        0, 1, 2,\n        2, 1, 3\n    ];\n    return { position, normal, color: col, indices: idx };\n};\n// TODO: 変更\nexport const cube = (side, color) => {\n    const hs = side * 0.5;\n    // prettier-ignore\n    const position = new Float32Array([\n        -hs, -hs, hs,\n        hs, -hs, hs,\n        hs, hs, hs,\n        -hs, hs, hs,\n        -hs, -hs, -hs,\n        -hs, hs, -hs,\n        hs, hs, -hs,\n        hs, -hs, -hs,\n        -hs, hs, -hs,\n        -hs, hs, hs,\n        hs, hs, hs,\n        hs, hs, -hs,\n        -hs, -hs, -hs,\n        hs, -hs, -hs,\n        hs, -hs, hs,\n        -hs, -hs, hs,\n        hs, -hs, -hs,\n        hs, hs, -hs,\n        hs, hs, hs,\n        hs, -hs, hs,\n        -hs, -hs, -hs,\n        -hs, -hs, hs,\n        -hs, hs, hs,\n        -hs, hs, -hs // 左上奥\n    ]);\n    let v = 1.0 / Math.sqrt(3.0);\n    // prettier-ignore\n    const normal = new Float32Array([\n        -v, -v, v, v, -v, v, v, v, v, -v, v, v,\n        -v, -v, -v, -v, v, -v, v, v, -v, v, -v, -v,\n        -v, v, -v, -v, v, v, v, v, v, v, v, -v,\n        -v, -v, -v, v, -v, -v, v, -v, v, -v, -v, v,\n        v, -v, -v, v, v, -v, v, v, v, v, -v, v,\n        -v, -v, -v, -v, -v, v, -v, v, v, -v, v, -v\n    ]);\n    const col = [];\n    for (let i = 0; i < position.length / 3; i++) {\n        col.push(color[0], color[1], color[2], color[3]);\n    }\n    // prettier-ignore\n    // let st = [\n    //   0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n    //   0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n    //   0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n    //   0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n    //   0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n    //   0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0\n    // ];\n    // prettier-ignore\n    let indices = [\n        0, 1, 2, 0, 2, 3,\n        4, 5, 6, 4, 6, 7,\n        8, 9, 10, 8, 10, 11,\n        12, 13, 14, 12, 14, 15,\n        16, 17, 18, 16, 18, 19,\n        20, 21, 22, 20, 22, 23\n    ];\n    return { position, normal, color: new Float32Array(col), indices };\n};\nexport const cubeWireframe = (width, height, depth, color) => {\n    let hw = width * 0.5;\n    let hh = height * 0.5;\n    let hd = depth * 0.5;\n    // prettier-ignore\n    let position = new Float32Array([\n        // 前面\n        -hw, -hh, hd,\n        hw, -hh, hd,\n        hw, -hh, hd,\n        hw, hh, hd,\n        hw, hh, hd,\n        -hw, hh, hd,\n        -hw, hh, hd,\n        -hw, -hh, hd,\n        // 奥面\n        -hw, -hh, -hd,\n        -hw, hh, -hd,\n        -hw, hh, -hd,\n        hw, hh, -hd,\n        hw, hh, -hd,\n        hw, -hh, -hd,\n        hw, -hh, -hd,\n        -hw, -hh, -hd,\n        // 天井\n        -hw, hh, -hd,\n        -hw, hh, hd,\n        -hw, hh, hd,\n        hw, hh, hd,\n        hw, hh, hd,\n        hw, hh, -hd,\n        hw, hh, -hd,\n        -hw, hh, -hd,\n        // 下面\n        -hw, -hh, -hd,\n        hw, -hh, -hd,\n        hw, -hh, -hd,\n        hw, -hh, hd,\n        hw, -hh, hd,\n        -hw, -hh, hd,\n        -hw, -hh, hd,\n        -hw, -hh, -hd,\n        // 右面\n        hw, -hh, -hd,\n        hw, hh, -hd,\n        hw, hh, -hd,\n        hw, hh, hd,\n        hw, hh, hd,\n        hw, -hh, hd,\n        hw, -hh, hd,\n        hw, -hh, -hd,\n        // 左面\n        -hw, -hh, -hd,\n        -hw, -hh, hd,\n        -hw, -hh, hd,\n        -hw, hh, hd,\n        -hw, hh, hd,\n        -hw, hh, -hd // 左上奥\n        // -hw,  hh, -hd // 左上奥\n        // -hw, -hh, -hd, // 左下奥\n    ]);\n    const col = [];\n    for (let i = 0; i < position.length / 3; i++) {\n        col.push(color[0], color[1], color[2], color[3]);\n    }\n    return { position, color: new Float32Array(col) };\n};\nexport const box = (width, height, depth, color) => {\n    let hw = width * 0.5;\n    let hh = height * 0.5;\n    let hd = depth * 0.5;\n    // prettier-ignore\n    const position = new Float32Array([\n        -hw, -hh, hd,\n        hw, -hh, hd,\n        hw, hh, hd,\n        -hw, hh, hd,\n        -hw, -hh, -hd,\n        -hw, hh, -hd,\n        hw, hh, -hd,\n        hw, -hh, -hd,\n        -hw, hh, -hd,\n        -hw, hh, hd,\n        hw, hh, hd,\n        hw, hh, -hd,\n        -hw, -hh, -hd,\n        hw, -hh, -hd,\n        hw, -hh, hd,\n        -hw, -hh, hd,\n        hw, -hh, -hd,\n        hw, hh, -hd,\n        hw, hh, hd,\n        hw, -hh, hd,\n        -hw, -hh, -hd,\n        -hw, -hh, hd,\n        -hw, hh, hd,\n        -hw, hh, -hd // 左上奥\n    ]);\n    let v = 1.0 / Math.sqrt(3.0);\n    // prettier-ignore\n    const normal = new Float32Array([\n        -v, -v, v, v, -v, v, v, v, v, -v, v, v,\n        -v, -v, -v, -v, v, -v, v, v, -v, v, -v, -v,\n        -v, v, -v, -v, v, v, v, v, v, v, v, -v,\n        -v, -v, -v, v, -v, -v, v, -v, v, -v, -v, v,\n        v, -v, -v, v, v, -v, v, v, v, v, -v, v,\n        -v, -v, -v, -v, -v, v, -v, v, v, -v, v, -v\n    ]);\n    const col = [];\n    for (let i = 0; i < position.length / 3; i++) {\n        col.push(color[0], color[1], color[2], color[3]);\n    }\n    // prettier-ignore\n    // let st = [\n    //   0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n    //   0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n    //   0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n    //   0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n    //   0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\n    //   0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0\n    // ];\n    // prettier-ignore\n    const indices = [\n        0, 1, 2, 0, 2, 3,\n        4, 5, 6, 4, 6, 7,\n        8, 9, 10, 8, 10, 11,\n        12, 13, 14, 12, 14, 15,\n        16, 17, 18, 16, 18, 19,\n        20, 21, 22, 20, 22, 23\n    ];\n    return { position, normal, color: new Float32Array(col), indices };\n};\n// TODO: 命名変更\nexport const boxLine = (width, height, depth, color) => {\n    let hw = width * 0.5;\n    let hh = height * 0.5;\n    let hd = depth * 0.5;\n    // prettier-ignore\n    const position = new Float32Array([\n        // 前面\n        -hw, -hh, hd,\n        hw, -hh, hd,\n        hw, -hh, hd,\n        hw, hh, hd,\n        hw, hh, hd,\n        -hw, hh, hd,\n        -hw, hh, hd,\n        -hw, -hh, hd,\n        // 奥面\n        -hw, -hh, -hd,\n        -hw, hh, -hd,\n        -hw, hh, -hd,\n        hw, hh, -hd,\n        hw, hh, -hd,\n        hw, -hh, -hd,\n        hw, -hh, -hd,\n        -hw, -hh, -hd,\n        // 天井\n        -hw, hh, -hd,\n        -hw, hh, hd,\n        -hw, hh, hd,\n        hw, hh, hd,\n        hw, hh, hd,\n        hw, hh, -hd,\n        hw, hh, -hd,\n        -hw, hh, -hd,\n        // 下面\n        -hw, -hh, -hd,\n        hw, -hh, -hd,\n        hw, -hh, -hd,\n        hw, -hh, hd,\n        hw, -hh, hd,\n        -hw, -hh, hd,\n        -hw, -hh, hd,\n        -hw, -hh, -hd,\n        // 右面\n        hw, -hh, -hd,\n        hw, hh, -hd,\n        hw, hh, -hd,\n        hw, hh, hd,\n        hw, hh, hd,\n        hw, -hh, hd,\n        hw, -hh, hd,\n        hw, -hh, -hd,\n        // 左面\n        -hw, -hh, -hd,\n        -hw, -hh, hd,\n        -hw, -hh, hd,\n        -hw, hh, hd,\n        -hw, hh, hd,\n        -hw, hh, -hd // 左上奥\n        // -hw,  hh, -hd // 左上奥\n        // -hw, -hh, -hd, // 左下奥\n    ]);\n    const col = [];\n    for (let i = 0; i < position.length / 3; i++) {\n        col.push(color[0], color[1], color[2], color[3]);\n    }\n    return { position, color: new Float32Array(col) };\n};\n","export const createProgram = (gl, vertexShader, fragmentShader) => {\n    const program = gl.createProgram();\n    if (!program) {\n        throw new Error(`Failed to create program`);\n    }\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    gl.deleteShader(vertexShader);\n    gl.deleteShader(fragmentShader);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        throw new Error(`Failed to link: ${gl.getProgramInfoLog(program)}`);\n    }\n    gl.useProgram(program);\n    return program;\n};\nexport const createShaderObject = (gl, source, type) => {\n    const shader = gl.createShader(type);\n    if (!shader) {\n        throw new Error(`Failed to create shader`);\n    }\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        throw new Error(`Failed to compile: ${gl.getShaderInfoLog(shader)}`);\n    }\n    return shader;\n};\nexport const createVBO = (gl, vertexArray) => {\n    const vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertexArray), gl.STATIC_DRAW);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    return vbo;\n};\nexport const createIBO = (gl, index) => {\n    const ibo = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Int16Array(index), gl.STATIC_DRAW);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    return ibo;\n};\nexport const enableAttribute = (gl, vbo, attribLocation, attribStride) => {\n    vbo.forEach((buffer, i) => {\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.enableVertexAttribArray(attribLocation[i]);\n        gl.vertexAttribPointer(attribLocation[i], attribStride[i], gl.FLOAT, false, 0, 0);\n    });\n};\nexport const createTexture = (gl, source, unit) => {\n    const texture = gl.createTexture();\n    gl.activeTexture(unit);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    // WARNING: Image loading must be complete.\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\n    gl.generateMipmap(gl.TEXTURE_2D);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    return texture;\n};\n","import { WebGLUtility, WebGLMath, WebGLGeometry, WebGLOrbitCamera } from './webgl';\nimport { Taxis } from 'taxis';\nimport { get } from 'svelte/store';\nimport { settings } from '../../../stores/settings';\n// import { createProgram, createShaderObject, enableAttribute } from '../../../utils';\nimport * as geometry from 'shared/lib/src/geometry';\nimport { createProgram, createShaderObject, enableAttribute } from 'shared/lib/src/utils';\nexport const setup = (canvas) => {\n    const webgl = new WebGLUtility(); // WebGL API をまとめたユーティリティ\n    const taxis = new Taxis();\n    // キャンバスのセットアップ\n    webgl.initialize(canvas);\n    // プログラムオブジェクト\n    let programMain = null;\n    // axis\n    let axis;\n    let axisVBO;\n    let circle = {};\n    let circleVBO;\n    let rectangle = {};\n    let rectangleVBO;\n    let attLocation;\n    let attStride;\n    const uniLocation = {\n        mvpMatrix: WebGLUniformLocation\n    };\n    let vMatrix = null; // ビュー行列\n    let pMatrix = null; // プロジェクション行列\n    let vpMatrix = null; // ビュー x プロジェクション行列\n    // カメラのセットアップ\n    const cameraOption = {\n        distance: 10.0,\n        min: 1.0,\n        max: 20.0,\n        move: 2.0,\n    };\n    const camera = new WebGLOrbitCamera(canvas, cameraOption);\n    webgl.width = window.innerWidth;\n    webgl.height = window.innerHeight;\n    updateSize();\n    window.addEventListener('resize', updateSize);\n    window.Promise.resolve()\n        .then(() => window.Promise.all([WebGLUtility.loadFile('./shader/main.vert'), WebGLUtility.loadFile('./shader/main.frag')]))\n        .then((ress) => {\n        // shaderをprogram紐付ける\n        const [mainVert, mainFrag] = ress;\n        const mainVs = createShaderObject(webgl.gl, mainVert, webgl.gl.VERTEX_SHADER);\n        const mainFs = createShaderObject(webgl.gl, mainFrag, webgl.gl.FRAGMENT_SHADER);\n        programMain = createProgram(webgl.gl, mainVs, mainFs);\n        webgl.program = programMain;\n        setupCircleGeometry();\n        setupAxisGeometry();\n        setupLocation();\n        render();\n    });\n    function updateSize() {\n        webgl.width = window.innerWidth;\n        webgl.height = window.innerHeight;\n    }\n    function setupCircleGeometry() {\n        const position = [];\n        const rectanglePosition = [];\n        const color = [];\n        const vertexCount = 360 / get(settings).fanCount;\n        const fanWidth = Math.cos((90 - vertexCount / 2) * (Math.PI / 180));\n        const fanStartY = Math.sin((90 - vertexCount / 2) * (Math.PI / 180));\n        for (let i = 0; i < get(settings).fanCount; i++) {\n            // 一つの扇型の頂点の数\n            const vertexCount = 360 / get(settings).fanCount;\n            const fanStartDeg = i * vertexCount;\n            const fanEndDeg = (i + 1) * vertexCount;\n            const fanStartX = Math.cos(fanStartDeg * (Math.PI / 180));\n            const fanEndX = Math.cos(fanEndDeg * (Math.PI / 180));\n            for (let j = 0; j < vertexCount; j++) {\n                const deg1 = fanStartDeg + j;\n                const deg2 = fanStartDeg + j + 1;\n                const rad1 = deg1 * (Math.PI / 180);\n                const rad2 = deg2 * (Math.PI / 180);\n                const x = Math.cos(rad1);\n                const y = Math.sin(rad1);\n                const x2 = Math.cos(rad2);\n                const y2 = Math.sin(rad2);\n                // 矩形用の計算\n                // 90度の±で計算\n                {\n                    const isTop = i % 2 === 0;\n                    const base = isTop ? 90 : 270;\n                    const deg1 = base - (fanEndDeg - fanStartDeg) / 2 + j;\n                    const deg2 = base - (fanEndDeg - fanStartDeg) / 2 + j + 1;\n                    const rad1 = deg1 * (Math.PI / 180);\n                    const rad2 = deg2 * (Math.PI / 180);\n                    const x = Math.cos(rad1);\n                    const y = Math.sin(rad1);\n                    const x2 = Math.cos(rad2);\n                    const y2 = Math.sin(rad2);\n                    const interpolatedY = isTop ? -0.5 + (1 - fanStartY) : 0.5;\n                    // prettier-ignore\n                    rectanglePosition.push(x + (i * fanWidth), y + interpolatedY, 0, x2 + (i * fanWidth), y2 + interpolatedY, 0, 0 + (i * fanWidth), interpolatedY, 0);\n                }\n                let fanColor = i % 2 ? [0.6, 0.87, 1.0, 1.0] : [1.0, 0.87, 0.93, 1.0];\n                // prettier-ignore\n                color.push(...fanColor, ...fanColor, ...fanColor);\n                // prettier-ignore\n                position.push(x, y, 0, x2, y2, 0, 0, 0, 0);\n            }\n        }\n        circle.position = position;\n        circle.color = color;\n        rectangle.position = rectanglePosition;\n        rectangle.color = color;\n        circleVBO = [webgl.createVBO(position), webgl.createVBO(color)];\n        rectangleVBO = [webgl.createVBO(rectanglePosition), webgl.createVBO(color)];\n    }\n    function setupAxisGeometry() {\n        axis = geometry.axis(10, [0.45, 0.45, 0.45, 1.0]);\n        axisVBO = [webgl.createVBO(axis.position), webgl.createVBO(axis.color)];\n    }\n    function setupLocation() {\n        const gl = webgl.gl;\n        webgl.program = programMain;\n        // attribute location の取得と有効化\n        attLocation = [gl.getAttribLocation(webgl.program, 'position'), gl.getAttribLocation(webgl.program, 'color')];\n        attStride = [3, 4];\n        uniLocation.mvpMatrix = gl.getUniformLocation(webgl.program, 'mvpMatrix');\n    }\n    function setupRendering() {\n        const gl = webgl.gl;\n        // clear処理\n        gl.viewport(0, 0, webgl.width, webgl.height);\n        gl.clearColor(0.1, 0.12, 0.14, 1.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        // カメラの状態に応じたビュー行列を生成 @@@\n        vMatrix = camera.update();\n        // プロジェクション行列を生成\n        const fovy = 45;\n        const aspect = webgl.width / webgl.height;\n        const near = 0.1;\n        const far = 20.0;\n        pMatrix = WebGLMath.mat4.perspective(fovy, aspect, near, far);\n        vpMatrix = WebGLMath.mat4.multiply(pMatrix, vMatrix);\n    }\n    function setupMvp(position) {\n        const gl = webgl.gl;\n        // モデル行列を生成する\n        let mMatrix = WebGLMath.mat4.identity(WebGLMath.mat4.create());\n        mMatrix = WebGLMath.mat4.translate(mMatrix, position);\n        // mvp 行列を生成してシェーダに送る\n        const mvpMatrix = WebGLMath.mat4.multiply(vpMatrix, mMatrix);\n        gl.uniformMatrix4fv(uniLocation.mvpMatrix, false, mvpMatrix);\n    }\n    function renderAxis(position) {\n        const gl = webgl.gl;\n        enableAttribute(gl, axisVBO, attLocation, attStride);\n        setupMvp(position);\n        gl.drawArrays(gl.LINES, 0, axis.position.length / 3);\n    }\n    function renderCircle(position) {\n        const gl = webgl.gl;\n        enableAttribute(gl, circleVBO, attLocation, attStride);\n        setupMvp(position);\n        gl.drawArrays(gl.TRIANGLES, 0, circle.position.length / 3);\n    }\n    function renderRectangle(position) {\n        const gl = webgl.gl;\n        enableAttribute(gl, rectangleVBO, attLocation, attStride);\n        setupMvp(position);\n        gl.drawArrays(gl.TRIANGLES, 0, rectangle.position.length / 3);\n    }\n    function render() {\n        taxis.begin();\n        // TODO: 何度もticketAddされちゃうのを修正\n        taxis.ticker((delta, axes) => {\n            setupCircleGeometry();\n            // レンダリング時のクリア処理など\n            setupRendering();\n            renderAxis([0.0, 0.0, 0.0]);\n            renderCircle([-1.5, 0.0, 0.0]);\n            renderRectangle([1.5, 0.0, 0.0]);\n        });\n    }\n};\n","<script lang=\"ts\">\nimport { onMount } from 'svelte';\nimport { setup } from './script/setup';\nlet canvasElement;\n\nonMount(() => {\n  setup(canvasElement);\n});\n</script>\n\n<canvas class=\"w-full h-full\" bind:this=\"{canvasElement}\"></canvas>\n","<script lang=\"ts\">\nimport Pane from './components/Pane.svelte';\nimport Viewer from './components/Viewer/Viewer.svelte';\n</script>\n\n<main class=\"w-full h-full\">\n  <Viewer class=\"w-full h-full\" />\n  \t\t<div class=\"fixed right-8 top-8\">\n  \t\t\t<Pane></Pane>\n  \t\t</div>\n</main>\n","import App from './App.svelte';\nconst app = new App({\n    target: document.body,\n});\nexport default app;\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","get_store_value","value","_","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","space","data","createTextNode","attr","attribute","removeAttribute","getAttribute","setAttribute","current_component","set_current_component","component","onMount","Error","get_current_component","$$","on_mount","push","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","seen_callbacks","Set","flushidx","flush","saved_component","length","update","pop","i","callback","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","transition_in","block","local","delete","transition_out","o","outros","c","d","create_component","mount_component","customElement","on_destroy","m","new_on_destroy","map","filter","destroy_component","detaching","make_dirty","then","fill","init","options","instance","create_fragment","not_equal","props","append_styles","parent_component","bound","on_disconnect","context","Map","skip_bound","root","ready","ret","rest","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","$destroy","this","$on","type","index","indexOf","splice","$set","$$props","obj","$$set","keys","extendStatics","setPrototypeOf","__proto__","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","__assign","assign","t","s","n","arguments","apply","__spreadArrays","il","r","k","j","jl","Plugins","inputs","monitors","getAllPlugins","forceCast","v","isEmpty","deepEqualsArray","a1","a2","disposeElement","elem","parentElement","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","join","getAllBladePositions","className","setUpBladeView","view","model","emitter","on","ev","propertyName","hiddenClass","undefined","hidden","classList","remove","pos","positions","onDispose","Emitter","observers_","eventName","handler","observers","off","observer","emit","event","Button","title","click","sender","className$1","ButtonView","doc","config","button","buttonElem","textContent","buttonElement","ButtonController","onButtonClick_","bind","blade","addEventListener","className$2","createLabelNode","label","frag","createDocumentFragment","split","line","lineNode","LabeledView","elem_","labelElem","viewElem","defineProperty","get","enumerable","configurable","InputBindingController","binding","controller","MonitorBindingController","_this","dispose","Disposable","disposed_","Blade","onDispose_","positions_","hidden_","disposable_","set","disposed","SVG_NS","forceReflow","offsetHeight","disableTransitionTemporarily","style","transition","supportsTouch","ontouchstart","getGlobalObject","Function","getWindowDocument","isBrowser","getCanvasContext","canvasElement","getContext","ICON_ID_TO_INNER_HTML_MAP","p2dpad","createSvgIconElement","iconId","createElementNS","innerHTML","insertElementAt","findNextTarget","relatedTarget","explicitOriginalTarget","updateAllItemsPositions","bladeRack","visibleItems","items","bc","firstVisibleItem","lastVisibleItem","ps","computeExpandedFolderHeight","folder","containerElement","height","expandedHeight","temporaryExpanded","clientHeight","List","items_","item","opt_index","BladeRack","onItemFolderFold_","onListItemLayout_","onSubitemLayout_","onSubitemFolderFold_","onSubitemInputChange_","onSubitemMonitorUpdate_","onItemInputChange_","onListAdd_","onListItemDispose_","onListRemove_","onItemMonitorUpdate_","blades_","find","controllerClass","reduce","results","FolderController","inputBinding","rawValue","monitorBinding","expanded","Folder","expanded_","expandedHeight_","temporaryExpanded_","shouldFixHeight_","shouldFixHeight","_a","styleExpanded","className$3","FolderView","onFolderChange_","folder_","titleElem","titleElement","markElem","containerElem","applyModel_","expandedClass","styleHeight","onContainerTransitionEnd_","onFolderBeforeChange_","onTitleClick_","onRackAdd_","onRackItemLayout_","onRackRemove_","rack_","doc_","applyRackChange_","className$4","SeparatorView","hrElem","SeparatorController","ButtonApi","buttonController","handleInputBinding","read","handleMonitorBinding","handleFolder","InputBindingApi","bindingController","refresh","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","nomatchingcontroller","key","notbindable","propertynotfound","shouldneverhappen","TpError","message","stack","alreadyDisposed","notBindable","propertyNotFound","shouldNeverHappen","InputBinding","onValueChange_","reader","writer","targetValue","write_","Value","initialValue","constraint_","constraint","equals_","equals","v1","v2","rawValue_","constrainedValue","constrain","createController","plugin","args","accept","params","valueArgs","createInputBindingController","result","MonitorBindingApi","Constants","monitor","defaultInterval","defaultLineCount","fillBuffer","buffer","bufferSize","initializeBuffer","createTrimmedBuffer","slice","createPushedBuffer","newValue","newBuffer","MonitorBinding","onTick_","reader_","ticker","disposable","IntervalTicker","interval","id_","win","defaultView","setInterval","clearInterval","ManualTicker","tick","createTicker","createController$1","_b","_c","count","defaultBufferSize","createMonitorBindingController","SeparatorApi","BindingTarget","opt_id","obj_","key_","presetKey_","isBindable","write","writeProperty","valueObj","createBindingTarget","FolderApi","folderController","addInput","object","opt_params","presetKey","addMonitor","addFolder","addButton","addSeparator","exportPresetJson","targets","importPresetJson","preset","RootApi","rootController","registerPlugin","unshift","importPreset","ibc","exportPreset","mbc","className$5","RootView","titleElem_","createFolder","RootController","CompositeConstraint","constraints_","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","opts_","opts","boolToString","boolFromUnknown","BooleanFormatter","writePrimitive","StepConstraint","step","Math","round","mapRange","start1","end1","start2","end2","getDecimalDigits","toFixed","replace","constrainRange","min","max","loopRange","normalizeInputParamsOptions","convert","isArray","text","textToValueMap","concat","findListItems","findStep","getSuitableDecimalDigits","getBaseStep","className$6","ListView","stringifyValue_","stringifyValue","selectElem","optionElem","dataset","selectElement","ListController","onSelectChange_","listItems_","listItems","e","optElem","currentTarget","selectedOptions","itemIndex","Number","className$7","CheckboxView","inputElem","inputElement","checked","CheckboxController","onInputChange_","createConstraint","createController$2","BooleanInputPlugin","id","_args","className$8","TextView","formatter_","formatter","TextController","parser_","parser","parsedValue","className$9","ColorSwatchTextView","swatchElem","swatchView_","swatchView","textElem","textView","PickedColor","mode_","mode","parseNumber","num","parseFloat","isNaN","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","innerFormatter","formatPercentage","rgbToHsl","g","rp","gp","bp","cmax","cmin","h","hslToRgb","_d","_e","_f","hp","sp","lp","abs","x","rgbToHsv","hsvToRgb","vp","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","hsv","rgb","convertColorMode","components","fromMode","toMode","CONSTRAINT_MAP","isRgbColorComponent","Color","comps_","black","fromObject","toRgbaObject","color","isRgbColorObject","isRgbaColorObject","isColorObject","comps1","comps2","getComponents","opt_mode","rgbComps","parseCssNumberOrPercentage","maxValue","match","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","NOTATION_TO_PARSER_MAP","mRrggbb","parseInt","mRgb","getColorNotation","notation","subparser","CompositeColorParser","hasAlphaComponent","colorFromString","cv","zerofill","comp","hex","floor","toString","colorToHexRgbString","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","colorToFunctionalHslString","formatters","colorToFunctionalHslaString","NOTATION_TO_STRINGIFIER_MAP","getColorStringifier","className$a","ColorSwatchView","swatchElem_","pickerElem","pickerView_","pickerView","backgroundColor","Foldable","connect","primary","secondary","forward","backward","getStepForKey","baseStep","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","keyCode","getHorizontalStepKeys","isVerticalArrowKey","isArrowKey","NumberTextController","_super","onInputKeyDown_","baseStep_","className$b","ColorPickerView","alphaViews_","onFoldableChange_","pickedColor","foldable","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","compTextsView_","componentTextsView","alphaViews","palette","aElem","apElem","atElem","elems","inputElements","computeOffset","ownerDocument","rect","getBoundingClientRect","pageX","scrollX","left","pageY","scrollY","top","PointerHandler","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchMove_","onTouchStart_","pressed_","computePosition_","offsetX","offsetY","px","width","py","preventDefault","focus","touch","targetTouches","clientX","clientY","getBaseStepForColor","forAlpha","className$c","APaletteView","tabIndex","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","background","APaletteController","onKeyDown_","onPointerDown_","onPointerMove_","onPointerUp_","ptHandler_","handlePointerEvent_","className$d","FORMATTER","createModeSelectElement","ColorComponentTextsView","modeElem","modeElem_","modeSelectElement","modeMarkerElem","wrapperElem","inputElems","inputElems_","ColorComponentTextsController","onModeSelectChange_","findIndexOfInputElem_","updateComponent_","newComps","compIndex","className$e","HPaletteView","HPaletteController","hue","className$f","CANVAS_RESOL","SvPaletteView","canvasElem","hsvComps","imgData","getImageData","iy","ix","putImageData","SvPaletteController","saturation","ColorPickerController","triggerElement","onFocusableElementBlur_","hPaletteIc_","svPaletteIc_","alphaIcs_","supportsAlpha","compTextsIc_","allFocusableElements","nextTarget","contains","ColorSwatchController","onButtonBlur_","pickerIc_","ColorSwatchTextController","swatchIc_","textIc_","colorFromObject","colorToRgbNumber","colorToRgbaNumber","numberToRgbColor","numberToRgbaColor","colorFromRgbNumber","colorFromRgbaNumber","createColorStringWriter","stringify","createColorNumberWriter","colorToNumber","writeRgbaColorObject","writeRgbColorObject","createColorObjectWriter","shouldSupportAlpha","inputParams","input","NumberColorInputPlugin","shouldSupportAlpha$1","ObjectColorInputPlugin","_params","StringColorInputPlugin","stringifier","RangeConstraint","minValue","className$g","SliderTextView","sliderElem","sliderView_","sliderView","textView_","className$h","SliderView","minValue_","maxValue_","outerElem","outerElement","innerElem","innerElement","findRange","estimateSuitableRange","SliderController","SliderTextController","sliderIc_","createConstraint$1","createController$3","NumberInputPlugin","Point2d","y","isObject","toObject","Point2dConstraint","className$i","Point2dPadTextView","padWrapperElem","padButtonElem_","padElem","padView_","padView","className$j","Point2dPadView","invertsY_","invertsY","padElement","svgElem","svgElem_","xAxisElem","setAttributeNS","yAxisElem","lineElem","lineElem_","ipy","Point2dPadController","onPadKeyDown_","baseSteps_","baseSteps","className$k","Point2dTextView","formatters_","Point2dTextController","axes","Point2dPadTextController","onPadButtonBlur_","onPadButtonClick_","padIc_","padButtonElement","point2dFromUnknown","writePoint2d","createDimensionConstraint","createConstraint$2","getSuitableMaxDimensionValue","rc","getSuitableMaxValue","xc","yc","xr","yr","createController$4","shouldInvertY","yParams","inverted","Point2dInputPlugin","Point3d","z","Point3dConstraint","className$l","Point3dTextView","Point3dTextController","point3dFromUnknown","writePoint3d","createDimensionConstraint$1","createConstraint$3","getAxis","createController$5","Point3dInputPlugin","stringFromUnknown","formatString","createConstraint$4","createController$6","StringInputPlugin","className$m","MultiLogView","onValueUpdate_","textareaElem","lineCount","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","MultiLogController","className$n","SingleLogView","inputElem_","values","lastValue","SingleLogMonitorController","BooleanMonitorPlugin","GraphCursor","index_","className$o","GraphLogView","onCursorChange_","cursor_","cursor","tooltipElem","tooltipElem_","bounds","maxIndex","points","tx","ty","GraphLogController","onGraphMouseLeave_","onGraphMouseMove_","graphElement","createFormatter","createTextMonitor","createGraphMonitor","shouldShowGraph","NumberMonitorPlugin","StringMonitorPlugin","multiline","createDefaultWrapperElement","body","embedStyle","css","querySelector","styleElem","tpStyle","head","embedDefaultStyleIfNeeded","Tweakpane","opt_config","containerElem_","container","usesDefaultWrapper_","parentElem","registerDefaultPlugins","factory","subscriber_queue","initialState","fanCount","settings","start","stop","subscribers","new_value","run_queue","subscriber","invalidate","size","writable","reset","val","createSettings","$settings","WebGLUtility","loadFile","path","reject","fetch","res","catch","err","w","canvas","program","prg","gl","useProgram","currentProgram","initialize","isWebGL2","createShaderObject","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","createProgramObject","vs","fs","createProgram","attachShader","linkProgram","deleteShader","getProgramParameter","LINK_STATUS","getProgramInfoLog","createProgramObjectTF","varyings","transformFeedbackVaryings","SEPARATE_ATTRIBS","createVBO","vertexArray","vbo","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","createIBO","indexArray","ibo","ELEMENT_ARRAY_BUFFER","Int16Array","enableAttribute","attLocation","attStride","enableVertexAttribArray","vertexAttribPointer","FLOAT","createTexture","resource","texture","activeTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","generateMipmap","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","createCubeTextureFromFile","TEXTURE0","TEXTURE_CUBE_MAP","promises","src","loadedResolve","img","Image","all","LINEAR","createFramebuffer","framebuffer","depthRenderBuffer","createRenderbuffer","bindFramebuffer","FRAMEBUFFER","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","framebufferTexture2D","COLOR_ATTACHMENT0","depthRenderbuffer","WebGLOrbitCamera","DEFAULT_DISTANCE","DEFAULT_MIN_DISTANCE","DEFAULT_MAX_DISTANCE","DEFAULT_MOVE_SCALE","option","distance","minDistance","maxDistance","moveScale","move","position","center","upDirection","moveX","moveZ","defaultPosition","defaultCenter","defaultUpDirection","defaultMoveX","defaultMoveZ","movePosition","rotateX","rotateY","scale","isDown","prevPosition","offsetPosition","qt","Qtn","qtx","qty","mouseInteractionStart","mouseInteractionMove","mouseInteractionEnd","wheelScroll","buttons","PI2","scaleX","scaleZ","xDirection","zDirection","q","identity","rotate","toVecIII","wheelDelta","multiply","Mat4","lookAt","WebGLMath","mat4","vec3","Vec3","vec2","Vec2","qtn","dest","mat0","mat1","out","f","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","mat","vec","translate","axis","sq","sqrt","sin","cos","u","eye","up","eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","x0","x1","x2","y0","y1","y2","z0","z1","z2","perspective","fovy","aspect","near","far","tan","ortho","right","bottom","transpose","inverse","ivd","toVecIV","vpFromCameraProperty","centerPoint","vmat","pmat","screenPositionFromMvp","halfWidth","halfHeight","NaN","len","v0","normalize","dot","cross","faceNormal","vec1","qtn0","qtn1","ax","ay","az","aw","bx","by","bz","bw","qp","qq","qr","toMatIV","xx","xy","xz","yy","yz","zz","wx","wy","wz","slerp","time","ht","hs","ph","acos","pt","t0","t1","HTMLElement","super","editing","attachShadow","totalTime","debug","shadowRoot","template","$pane","$timeline","$current","$progress","$labels","querySelectorAll","$bars","$barsBegin","$barsEnd","$previous","$playPause","$next","playing","previous","next","skip","isFinite","duration","endAt","delay","__updateProgressPosition","__updateBar","attributeChangedCallback","connectedCallback","disconnectedCallback","getAxes","Date","now","beginAt","elapsedTime","__updateBarRange","__updateScale","setProperty","clientWidth","transform","progress","pass","window","customElements","define","enter","attribLocation","attribStride","setup","webgl","taxis","totalTimeForTimeline","everyPassed","every","restart","sort","begin","timeline","__tick","cancelAnimationFrame","requestID","tickerFn","recalculation","toMap","requestAnimationFrame","calculation","axisVBO","circleVBO","rectangleVBO","programMain","circle","rectangle","uniLocation","mvpMatrix","WebGLUniformLocation","vMatrix","pMatrix","vpMatrix","camera","updateSize","innerWidth","innerHeight","setupCircleGeometry","rectanglePosition","vertexCount","fanWidth","fanStartY","fanStartDeg","fanEndDeg","deg2","rad1","rad2","isTop","base","interpolatedY","fanColor","setupMvp","mMatrix","uniformMatrix4fv","ress","mainVert","mainFrag","mainVs","VERTEX_SHADER","mainFs","FRAGMENT_SHADER","vertexShader","fragmentShader","col","geometry.axis","getAttribLocation","getUniformLocation","setupLocation","delta","viewport","clearColor","COLOR_BUFFER_BIT","setupRendering","drawArrays","LINES","renderAxis","TRIANGLES","renderCircle","renderRectangle"],"mappings":"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"}